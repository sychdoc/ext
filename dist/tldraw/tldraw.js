var bZ0=Object.create;var{defineProperty:ZE,getPrototypeOf:xZ0,getOwnPropertyNames:yZ0}=Object;var vZ0=Object.prototype.hasOwnProperty;var v=(J,Q,Z)=>{Z=J!=null?bZ0(xZ0(J)):{};const q=Q||!J||!J.__esModule?ZE(Z,"default",{value:J,enumerable:!0}):Z;for(let Y of yZ0(J))if(!vZ0.call(q,Y))ZE(q,Y,{get:()=>J[Y],enumerable:!0});return q};var F0=(J,Q)=>()=>(Q||J((Q={exports:{}}).exports,Q),Q.exports);var SZ0=(J,Q)=>{for(var Z in Q)ZE(J,Z,{get:Q[Z],enumerable:!0,configurable:!0,set:(q)=>Q[Z]=()=>q})};var o=F0((fZ0,XB)=>{(function(){if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!=="undefined"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart==="function")__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var J="18.3.1",Q=Symbol.for("react.element"),Z=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),Y=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),W=Symbol.for("react.provider"),G=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),O=Symbol.for("react.offscreen"),R=Symbol.iterator,V="@@iterator";function E(x){if(x===null||typeof x!=="object")return null;var d=R&&x[R]||x[V];if(typeof d==="function")return d;return null}var _={current:null},A={transition:null},w={current:null,isBatchingLegacy:!1,didScheduleLegacyUpdate:!1},T={current:null},k={},P=null;function y(x){P=x}k.setExtraStackFrame=function(x){P=x},k.getCurrentStack=null,k.getStackAddendum=function(){var x="";if(P)x+=P;var d=k.getCurrentStack;if(d)x+=d()||"";return x};var p=!1,s=!1,c=!1,t=!1,X0=!1,J0={ReactCurrentDispatcher:_,ReactCurrentBatchConfig:A,ReactCurrentOwner:T};J0.ReactDebugCurrentFrame=k,J0.ReactCurrentActQueue=w;function Q0(x){{for(var d=arguments.length,Y0=new Array(d>1?d-1:0),U0=1;U0<d;U0++)Y0[U0-1]=arguments[U0];_0("warn",x,Y0)}}function a(x){{for(var d=arguments.length,Y0=new Array(d>1?d-1:0),U0=1;U0<d;U0++)Y0[U0-1]=arguments[U0];_0("error",x,Y0)}}function _0(x,d,Y0){{var U0=J0.ReactDebugCurrentFrame,I0=U0.getStackAddendum();if(I0!=="")d+="%s",Y0=Y0.concat([I0]);var U6=Y0.map(function(o0){return String(o0)});U6.unshift("Warning: "+d),Function.prototype.apply.call(console[x],console,U6)}}var T0={};function r0(x,d){{var Y0=x.constructor,U0=Y0&&(Y0.displayName||Y0.name)||"ReactClass",I0=U0+"."+d;if(T0[I0])return;a("Can't call %s on a component that is not yet mounted. This is a no-op, but it might indicate a bug in your application. Instead, assign to `this.state` directly or define a `state = {};` class property with the desired state in the %s component.",d,U0),T0[I0]=!0}}var C0={isMounted:function(x){return!1},enqueueForceUpdate:function(x,d,Y0){r0(x,"forceUpdate")},enqueueReplaceState:function(x,d,Y0,U0){r0(x,"replaceState")},enqueueSetState:function(x,d,Y0,U0){r0(x,"setState")}},k0=Object.assign,b0={};Object.freeze(b0);function K6(x,d,Y0){this.props=x,this.context=d,this.refs=b0,this.updater=Y0||C0}K6.prototype.isReactComponent={},K6.prototype.setState=function(x,d){if(typeof x!=="object"&&typeof x!=="function"&&x!=null)throw new Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,x,d,"setState")},K6.prototype.forceUpdate=function(x){this.updater.enqueueForceUpdate(this,x,"forceUpdate")};{var b6={isMounted:["isMounted","Instead, make sure to clean up subscriptions and pending requests in componentWillUnmount to prevent memory leaks."],replaceState:["replaceState","Refactor your code to use setState instead (see https://github.com/facebook/react/issues/3236)."]},I8=function(x,d){Object.defineProperty(K6.prototype,x,{get:function(){Q0("%s(...) is deprecated in plain JavaScript React classes. %s",d[0],d[1]);return}})};for(var _6 in b6)if(b6.hasOwnProperty(_6))I8(_6,b6[_6])}function x6(){}x6.prototype=K6.prototype;function c6(x,d,Y0){this.props=x,this.context=d,this.refs=b0,this.updater=Y0||C0}var $8=c6.prototype=new x6;$8.constructor=c6,k0($8,K6.prototype),$8.isPureReactComponent=!0;function G6(){var x={current:null};return Object.seal(x),x}var i6=Array.isArray;function I6(x){return i6(x)}function J9(x){{var d=typeof Symbol==="function"&&Symbol.toStringTag,Y0=d&&x[Symbol.toStringTag]||x.constructor.name||"Object";return Y0}}function R8(x){try{return j8(x),!1}catch(d){return!0}}function j8(x){return""+x}function W6(x){if(R8(x))return a("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",J9(x)),j8(x)}function S6(x,d,Y0){var U0=x.displayName;if(U0)return U0;var I0=d.displayName||d.name||"";return I0!==""?Y0+"("+I0+")":Y0}function f8(x){return x.displayName||"Context"}function u8(x){if(x==null)return null;if(typeof x.tag==="number")a("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue.");if(typeof x==="function")return x.displayName||x.name||null;if(typeof x==="string")return x;switch(x){case q:return"Fragment";case Z:return"Portal";case $:return"Profiler";case Y:return"StrictMode";case U:return"Suspense";case F:return"SuspenseList"}if(typeof x==="object")switch(x.$$typeof){case G:var d=x;return f8(d)+".Consumer";case W:var Y0=x;return f8(Y0._context)+".Provider";case z:return S6(x,x.render,"ForwardRef");case B:var U0=x.displayName||null;if(U0!==null)return U0;return u8(x.type)||"Memo";case M:{var I0=x,U6=I0._payload,o0=I0._init;try{return u8(o0(U6))}catch(k6){return null}}}return null}var W9=Object.prototype.hasOwnProperty,j7={key:!0,ref:!0,__self:!0,__source:!0},Y5,kJ,m5;m5={};function _7(x){if(W9.call(x,"ref")){var d=Object.getOwnPropertyDescriptor(x,"ref").get;if(d&&d.isReactWarning)return!1}return x.ref!==void 0}function h5(x){if(W9.call(x,"key")){var d=Object.getOwnPropertyDescriptor(x,"key").get;if(d&&d.isReactWarning)return!1}return x.key!==void 0}function J7(x,d){var Y0=function(){if(!Y5)Y5=!0,a("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",d)};Y0.isReactWarning=!0,Object.defineProperty(x,"key",{get:Y0,configurable:!0})}function G9(x,d){var Y0=function(){if(!kJ)kJ=!0,a("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",d)};Y0.isReactWarning=!0,Object.defineProperty(x,"ref",{get:Y0,configurable:!0})}function E7(x){if(typeof x.ref==="string"&&T.current&&x.__self&&T.current.stateNode!==x.__self){var d=u8(T.current.type);if(!m5[d])a('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',d,x.ref),m5[d]=!0}}var C7=function(x,d,Y0,U0,I0,U6,o0){var k6={$$typeof:Q,type:x,key:d,ref:Y0,props:o0,_owner:U6};if(k6._store={},Object.defineProperty(k6._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(k6,"_self",{configurable:!1,enumerable:!1,writable:!1,value:U0}),Object.defineProperty(k6,"_source",{configurable:!1,enumerable:!1,writable:!1,value:I0}),Object.freeze)Object.freeze(k6.props),Object.freeze(k6);return k6};function f4(x,d,Y0){var U0,I0={},U6=null,o0=null,k6=null,q8=null;if(d!=null){if(_7(d))o0=d.ref,E7(d);if(h5(d))W6(d.key),U6=""+d.key;k6=d.__self===void 0?null:d.__self,q8=d.__source===void 0?null:d.__source;for(U0 in d)if(W9.call(d,U0)&&!j7.hasOwnProperty(U0))I0[U0]=d[U0]}var x8=arguments.length-2;if(x8===1)I0.children=Y0;else if(x8>1){var Q9=Array(x8);for(var Z9=0;Z9<x8;Z9++)Q9[Z9]=arguments[Z9+2];if(Object.freeze)Object.freeze(Q9);I0.children=Q9}if(x&&x.defaultProps){var H9=x.defaultProps;for(U0 in H9)if(I0[U0]===void 0)I0[U0]=H9[U0]}if(U6||o0){var S9=typeof x==="function"?x.displayName||x.name||"Unknown":x;if(U6)J7(I0,S9);if(o0)G9(I0,S9)}return C7(x,U6,o0,k6,q8,T.current,I0)}function x0(x,d){var Y0=C7(x.type,d,x.ref,x._self,x._source,x._owner,x.props);return Y0}function X6(x,d,Y0){if(x===null||x===void 0)throw new Error("React.cloneElement(...): The argument must be a React element, but you passed "+x+".");var U0,I0=k0({},x.props),U6=x.key,o0=x.ref,k6=x._self,q8=x._source,x8=x._owner;if(d!=null){if(_7(d))o0=d.ref,x8=T.current;if(h5(d))W6(d.key),U6=""+d.key;var Q9;if(x.type&&x.type.defaultProps)Q9=x.type.defaultProps;for(U0 in d)if(W9.call(d,U0)&&!j7.hasOwnProperty(U0))if(d[U0]===void 0&&Q9!==void 0)I0[U0]=Q9[U0];else I0[U0]=d[U0]}var Z9=arguments.length-2;if(Z9===1)I0.children=Y0;else if(Z9>1){var H9=Array(Z9);for(var S9=0;S9<Z9;S9++)H9[S9]=arguments[S9+2];I0.children=H9}return C7(x.type,U6,o0,k6,q8,x8,I0)}function E6(x){return typeof x==="object"&&x!==null&&x.$$typeof===Q}var W8=".",c8=":";function K5(x){var d=/[=:]/g,Y0={"=":"=0",":":"=2"},U0=x.replace(d,function(I0){return Y0[I0]});return"$"+U0}var w9=!1,wJ=/\/+/g;function P8(x){return x.replace(wJ,"$&/")}function u5(x,d){if(typeof x==="object"&&x!==null&&x.key!=null)return W6(x.key),K5(""+x.key);return d.toString(36)}function G8(x,d,Y0,U0,I0){var U6=typeof x;if(U6==="undefined"||U6==="boolean")x=null;var o0=!1;if(x===null)o0=!0;else switch(U6){case"string":case"number":o0=!0;break;case"object":switch(x.$$typeof){case Q:case Z:o0=!0}}if(o0){var k6=x,q8=I0(k6),x8=U0===""?W8+u5(k6,0):U0;if(I6(q8)){var Q9="";if(x8!=null)Q9=P8(x8)+"/";G8(q8,d,Q9,"",function(zG){return zG})}else if(q8!=null){if(E6(q8)){if(q8.key&&(!k6||k6.key!==q8.key))W6(q8.key);q8=x0(q8,Y0+(q8.key&&(!k6||k6.key!==q8.key)?P8(""+q8.key)+"/":"")+x8)}d.push(q8)}return 1}var Z9,H9,S9=0,V5=U0===""?W8:U0+c8;if(I6(x))for(var tK=0;tK<x.length;tK++)Z9=x[tK],H9=V5+u5(Z9,tK),S9+=G8(Z9,d,Y0,H9,I0);else{var D5=E(x);if(typeof D5==="function"){var GG=x;if(D5===GG.entries){if(!w9)Q0("Using Maps as children is not supported. Use an array of keyed ReactElements instead.");w9=!0}var QL=D5.call(GG),HG,eV=0;while(!(HG=QL.next()).done)Z9=HG.value,H9=V5+u5(Z9,eV++),S9+=G8(Z9,d,Y0,H9,I0)}else if(U6==="object"){var eQ=String(x);throw new Error("Objects are not valid as a React child (found: "+(eQ==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":eQ)+"). If you meant to render a collection of children, use an array instead.")}}return S9}function s8(x,d,Y0){if(x==null)return x;var U0=[],I0=0;return G8(x,U0,"","",function(U6){return d.call(Y0,U6,I0++)}),U0}function U1(x){var d=0;return s8(x,function(){d++}),d}function L1(x,d,Y0){s8(x,function(){d.apply(this,arguments)},Y0)}function aQ(x){return s8(x,function(d){return d})||[]}function oQ(x){if(!E6(x))throw new Error("React.Children.only expected to receive a single React element child.");return x}function cX(x){var d={$$typeof:G,_currentValue:x,_currentValue2:x,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null};d.Provider={$$typeof:W,_context:d};var Y0=!1,U0=!1,I0=!1;{var U6={$$typeof:G,_context:d};Object.defineProperties(U6,{Provider:{get:function(){if(!U0)U0=!0,a("Rendering <Context.Consumer.Provider> is not supported and will be removed in a future major release. Did you mean to render <Context.Provider> instead?");return d.Provider},set:function(o0){d.Provider=o0}},_currentValue:{get:function(){return d._currentValue},set:function(o0){d._currentValue=o0}},_currentValue2:{get:function(){return d._currentValue2},set:function(o0){d._currentValue2=o0}},_threadCount:{get:function(){return d._threadCount},set:function(o0){d._threadCount=o0}},Consumer:{get:function(){if(!Y0)Y0=!0,a("Rendering <Context.Consumer.Consumer> is not supported and will be removed in a future major release. Did you mean to render <Context.Consumer> instead?");return d.Consumer}},displayName:{get:function(){return d.displayName},set:function(o0){if(!I0)Q0("Setting `displayName` on Context.Consumer has no effect. You should set it directly on the context with Context.displayName = '%s'.",o0),I0=!0}}}),d.Consumer=U6}return d._currentRenderer=null,d._currentRenderer2=null,d}var A7=-1,g4=0,Gq=1,Hq=2;function F1(x){if(x._status===A7){var d=x._result,Y0=d();if(Y0.then(function(U6){if(x._status===g4||x._status===A7){var o0=x;o0._status=Gq,o0._result=U6}},function(U6){if(x._status===g4||x._status===A7){var o0=x;o0._status=Hq,o0._result=U6}}),x._status===A7){var U0=x;U0._status=g4,U0._result=Y0}}if(x._status===Gq){var I0=x._result;if(I0===void 0)a("lazy: Expected the result of a dynamic import() call. Instead received: %s\n\nYour code should look like: \n  const MyComponent = lazy(() => import('./MyComponent'))\n\nDid you accidentally put curly braces around the import?",I0);if(!("default"in I0))a("lazy: Expected the result of a dynamic import() call. Instead received: %s\n\nYour code should look like: \n  const MyComponent = lazy(() => import('./MyComponent'))",I0);return I0.default}else throw x._result}function K4(x){var d={_status:A7,_result:x},Y0={$$typeof:M,_payload:d,_init:F1};{var U0,I0;Object.defineProperties(Y0,{defaultProps:{configurable:!0,get:function(){return U0},set:function(U6){a("React.lazy(...): It is not supported to assign `defaultProps` to a lazy component import. Either specify them where the component is defined, or create a wrapping component around it."),U0=U6,Object.defineProperty(Y0,"defaultProps",{enumerable:!0})}},propTypes:{configurable:!0,get:function(){return I0},set:function(U6){a("React.lazy(...): It is not supported to assign `propTypes` to a lazy component import. Either specify them where the component is defined, or create a wrapping component around it."),I0=U6,Object.defineProperty(Y0,"propTypes",{enumerable:!0})}}})}return Y0}function $4(x){{if(x!=null&&x.$$typeof===B)a("forwardRef requires a render function but received a `memo` component. Instead of forwardRef(memo(...)), use memo(forwardRef(...)).");else if(typeof x!=="function")a("forwardRef requires a render function but was given %s.",x===null?"null":typeof x);else if(x.length!==0&&x.length!==2)a("forwardRef render functions accept exactly two parameters: props and ref. %s",x.length===1?"Did you forget to use the ref parameter?":"Any additional parameter will be undefined.");if(x!=null){if(x.defaultProps!=null||x.propTypes!=null)a("forwardRef render functions do not support propTypes or defaultProps. Did you accidentally pass a React component?")}}var d={$$typeof:z,render:x};{var Y0;Object.defineProperty(d,"displayName",{enumerable:!1,configurable:!0,get:function(){return Y0},set:function(U0){if(Y0=U0,!x.name&&!x.displayName)x.displayName=U0}})}return d}var l=Symbol.for("react.module.reference");function R0(x){if(typeof x==="string"||typeof x==="function")return!0;if(x===q||x===$||X0||x===Y||x===U||x===F||t||x===O||p||s||c)return!0;if(typeof x==="object"&&x!==null){if(x.$$typeof===M||x.$$typeof===B||x.$$typeof===W||x.$$typeof===G||x.$$typeof===z||x.$$typeof===l||x.getModuleId!==void 0)return!0}return!1}function f0(x,d){if(!R0(x))a("memo: The first argument must be a component. Instead received: %s",x===null?"null":typeof x);var Y0={$$typeof:B,type:x,compare:d===void 0?null:d};{var U0;Object.defineProperty(Y0,"displayName",{enumerable:!1,configurable:!0,get:function(){return U0},set:function(I0){if(U0=I0,!x.name&&!x.displayName)x.displayName=I0}})}return Y0}function m(){var x=_.current;if(x===null)a("Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:\n1. You might have mismatching versions of React and the renderer (such as React DOM)\n2. You might be breaking the Rules of Hooks\n3. You might have more than one copy of React in the same app\nSee https://reactjs.org/link/invalid-hook-call for tips about how to debug and fix this problem.");return x}function G0(x){var d=m();if(x._context!==void 0){var Y0=x._context;if(Y0.Consumer===x)a("Calling useContext(Context.Consumer) is not supported, may cause bugs, and will be removed in a future major release. Did you mean to call useContext(Context) instead?");else if(Y0.Provider===x)a("Calling useContext(Context.Provider) is not supported. Did you mean to call useContext(Context) instead?")}return d.useContext(x)}function M0(x){var d=m();return d.useState(x)}function w0(x,d,Y0){var U0=m();return U0.useReducer(x,d,Y0)}function g0(x){var d=m();return d.useRef(x)}function N6(x,d){var Y0=m();return Y0.useEffect(x,d)}function h0(x,d){var Y0=m();return Y0.useInsertionEffect(x,d)}function Z6(x,d){var Y0=m();return Y0.useLayoutEffect(x,d)}function _8(x,d){var Y0=m();return Y0.useCallback(x,d)}function N8(x,d){var Y0=m();return Y0.useMemo(x,d)}function E8(x,d,Y0){var U0=m();return U0.useImperativeHandle(x,d,Y0)}function T8(x,d){{var Y0=m();return Y0.useDebugValue(x,d)}}function k7(){var x=m();return x.useTransition()}function w7(x){var d=m();return d.useDeferredValue(x)}function $5(){var x=m();return x.useId()}function W4(x,d,Y0){var U0=m();return U0.useSyncExternalStore(x,d,Y0)}var y6=0,QQ,a2,o2,t2,e2,JG,QG;function ZG(){}ZG.__reactDisabledLog=!0;function lU(){{if(y6===0){QQ=console.log,a2=console.info,o2=console.warn,t2=console.error,e2=console.group,JG=console.groupCollapsed,QG=console.groupEnd;var x={configurable:!0,enumerable:!0,value:ZG,writable:!0};Object.defineProperties(console,{info:x,log:x,warn:x,error:x,group:x,groupCollapsed:x,groupEnd:x})}y6++}}function sV(){{if(y6--,y6===0){var x={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:k0({},x,{value:QQ}),info:k0({},x,{value:a2}),warn:k0({},x,{value:o2}),error:k0({},x,{value:t2}),group:k0({},x,{value:e2}),groupCollapsed:k0({},x,{value:JG}),groupEnd:k0({},x,{value:QG})})}if(y6<0)a("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var qG=J0.ReactCurrentDispatcher,pX;function zq(x,d,Y0){{if(pX===void 0)try{throw Error()}catch(I0){var U0=I0.stack.trim().match(/\n( *(at )?)/);pX=U0&&U0[1]||""}return"\n"+pX+x}}var m4=!1,Uq;{var lK=typeof WeakMap==="function"?WeakMap:Map;Uq=new lK}function iU(x,d){if(!x||m4)return"";{var Y0=Uq.get(x);if(Y0!==void 0)return Y0}var U0;m4=!0;var I0=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var U6;U6=qG.current,qG.current=null,lU();try{if(d){var o0=function(){throw Error()};if(Object.defineProperty(o0.prototype,"props",{set:function(){throw Error()}}),typeof Reflect==="object"&&Reflect.construct){try{Reflect.construct(o0,[])}catch(V5){U0=V5}Reflect.construct(x,[],o0)}else{try{o0.call()}catch(V5){U0=V5}x.call(o0.prototype)}}else{try{throw Error()}catch(V5){U0=V5}x()}}catch(V5){if(V5&&U0&&typeof V5.stack==="string"){var k6=V5.stack.split("\n"),q8=U0.stack.split("\n"),x8=k6.length-1,Q9=q8.length-1;while(x8>=1&&Q9>=0&&k6[x8]!==q8[Q9])Q9--;for(;x8>=1&&Q9>=0;x8--,Q9--)if(k6[x8]!==q8[Q9]){if(x8!==1||Q9!==1)do if(x8--,Q9--,Q9<0||k6[x8]!==q8[Q9]){var Z9="\n"+k6[x8].replace(" at new "," at ");if(x.displayName&&Z9.includes("<anonymous>"))Z9=Z9.replace("<anonymous>",x.displayName);if(typeof x==="function")Uq.set(x,Z9);return Z9}while(x8>=1&&Q9>=0);break}}}finally{m4=!1,qG.current=U6,sV(),Error.prepareStackTrace=I0}var H9=x?x.displayName||x.name:"",S9=H9?zq(H9):"";if(typeof x==="function")Uq.set(x,S9);return S9}function XG(x,d,Y0){return iU(x,!1)}function rV(x){var d=x.prototype;return!!(d&&d.isReactComponent)}function Lq(x,d,Y0){if(x==null)return"";if(typeof x==="function")return iU(x,rV(x));if(typeof x==="string")return zq(x);switch(x){case U:return zq("Suspense");case F:return zq("SuspenseList")}if(typeof x==="object")switch(x.$$typeof){case z:return XG(x.render);case B:return Lq(x.type,d,Y0);case M:{var U0=x,I0=U0._payload,U6=U0._init;try{return Lq(U6(I0),d,Y0)}catch(o0){}}}return""}var nU={},iK=J0.ReactDebugCurrentFrame;function nK(x){if(x){var d=x._owner,Y0=Lq(x.type,x._source,d?d.type:null);iK.setExtraStackFrame(Y0)}else iK.setExtraStackFrame(null)}function sU(x,d,Y0,U0,I0){{var U6=Function.call.bind(W9);for(var o0 in x)if(U6(x,o0)){var k6=void 0;try{if(typeof x[o0]!=="function"){var q8=Error((U0||"React class")+": "+Y0+" type `"+o0+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof x[o0]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw q8.name="Invariant Violation",q8}k6=x[o0](d,o0,U0,Y0,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(x8){k6=x8}if(k6&&!(k6 instanceof Error))nK(I0),a("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",U0||"React class",Y0,o0,typeof k6),nK(null);if(k6 instanceof Error&&!(k6.message in nU))nU[k6.message]=!0,nK(I0),a("Failed %s type: %s",Y0,k6.message),nK(null)}}}function Fq(x){if(x){var d=x._owner,Y0=Lq(x.type,x._source,d?d.type:null);y(Y0)}else y(null)}var YG=!1;function b8(){if(T.current){var x=u8(T.current.type);if(x)return"\n\nCheck the render method of `"+x+"`."}return""}function aV(x){if(x!==void 0){var d=x.fileName.replace(/^.*[\\\/]/,""),Y0=x.lineNumber;return"\n\nCheck your code at "+d+":"+Y0+"."}return""}function rU(x){if(x!==null&&x!==void 0)return aV(x.__source);return""}var P6={};function aU(x){var d=b8();if(!d){var Y0=typeof x==="string"?x:x.displayName||x.name;if(Y0)d="\n\nCheck the top-level render call using <"+Y0+">."}return d}function IJ(x,d){if(!x._store||x._store.validated||x.key!=null)return;x._store.validated=!0;var Y0=aU(d);if(P6[Y0])return;P6[Y0]=!0;var U0="";if(x&&x._owner&&x._owner!==T.current)U0=" It was passed a child from "+u8(x._owner.type)+".";Fq(x),a('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',Y0,U0),Fq(null)}function Bq(x,d){if(typeof x!=="object")return;if(I6(x))for(var Y0=0;Y0<x.length;Y0++){var U0=x[Y0];if(E6(U0))IJ(U0,d)}else if(E6(x)){if(x._store)x._store.validated=!0}else if(x){var I0=E(x);if(typeof I0==="function"){if(I0!==x.entries){var U6=I0.call(x),o0;while(!(o0=U6.next()).done)if(E6(o0.value))IJ(o0.value,d)}}}}function Nq(x){{var d=x.type;if(d===null||d===void 0||typeof d==="string")return;var Y0;if(typeof d==="function")Y0=d.propTypes;else if(typeof d==="object"&&(d.$$typeof===z||d.$$typeof===B))Y0=d.propTypes;else return;if(Y0){var U0=u8(d);sU(Y0,x.props,"prop",U0,x)}else if(d.PropTypes!==void 0&&!YG){YG=!0;var I0=u8(d);a("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",I0||"Unknown")}if(typeof d.getDefaultProps==="function"&&!d.getDefaultProps.isReactClassApproved)a("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function oV(x){{var d=Object.keys(x.props);for(var Y0=0;Y0<d.length;Y0++){var U0=d[Y0];if(U0!=="children"&&U0!=="key"){Fq(x),a("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",U0),Fq(null);break}}if(x.ref!==null)Fq(x),a("Invalid attribute `ref` supplied to `React.Fragment`."),Fq(null)}}function c5(x,d,Y0){var U0=R0(x);if(!U0){var I0="";if(x===void 0||typeof x==="object"&&x!==null&&Object.keys(x).length===0)I0+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.";var U6=rU(d);if(U6)I0+=U6;else I0+=b8();var o0;if(x===null)o0="null";else if(I6(x))o0="array";else if(x!==void 0&&x.$$typeof===Q)o0="<"+(u8(x.type)||"Unknown")+" />",I0=" Did you accidentally export a JSX literal instead of a component?";else o0=typeof x;a("React.createElement: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",o0,I0)}var k6=f4.apply(this,arguments);if(k6==null)return k6;if(U0)for(var q8=2;q8<arguments.length;q8++)Bq(arguments[q8],x);if(x===q)oV(k6);else Nq(k6);return k6}var I9=!1;function tV(x){var d=c5.bind(null,x);d.type=x;{if(!I9)I9=!0,Q0("React.createFactory() is deprecated and will be removed in a future major release. Consider using JSX or use React.createElement() directly instead.");Object.defineProperty(d,"type",{enumerable:!1,get:function(){return Q0("Factory.type is deprecated. Access the class directly before passing it to createFactory."),Object.defineProperty(this,"type",{value:x}),x}})}return d}function h4(x,d,Y0){var U0=X6.apply(this,arguments);for(var I0=2;I0<arguments.length;I0++)Bq(arguments[I0],U0.type);return Nq(U0),U0}function I7(x,d){var Y0=A.transition;A.transition={};var U0=A.transition;A.transition._updatedFibers=new Set;try{x()}finally{if(A.transition=Y0,Y0===null&&U0._updatedFibers){var I0=U0._updatedFibers.size;if(I0>10)Q0("Detected a large number of updates inside startTransition. If this is due to a subscription please re-write it to use React provided hooks. Otherwise concurrent mode guarantees are off the table.");U0._updatedFibers.clear()}}}var B1=!1,sK=null;function KG(x){if(sK===null)try{var d=("require"+Math.random()).slice(0,7),Y0=XB&&XB[d];sK=Y0.call(XB,"timers").setImmediate}catch(U0){sK=function(I0){if(B1===!1){if(B1=!0,typeof MessageChannel==="undefined")a("This browser does not have a MessageChannel implementation, so enqueuing tasks via await act(async () => ...) will fail. Please file an issue at https://github.com/facebook/react/issues if you encounter this warning.")}var U6=new MessageChannel;U6.port1.onmessage=I0,U6.port2.postMessage(void 0)}}return sK(x)}var tQ=0,$G=!1;function oU(x){{var d=tQ;if(tQ++,w.current===null)w.current=[];var Y0=w.isBatchingLegacy,U0;try{if(w.isBatchingLegacy=!0,U0=x(),!Y0&&w.didScheduleLegacyUpdate){var I0=w.current;if(I0!==null)w.didScheduleLegacyUpdate=!1,aK(I0)}}catch(H9){throw rK(d),H9}finally{w.isBatchingLegacy=Y0}if(U0!==null&&typeof U0==="object"&&typeof U0.then==="function"){var U6=U0,o0=!1,k6={then:function(H9,S9){o0=!0,U6.then(function(V5){if(rK(d),tQ===0)WG(V5,H9,S9);else H9(V5)},function(V5){rK(d),S9(V5)})}};if(!$G&&typeof Promise!=="undefined")Promise.resolve().then(function(){}).then(function(){if(!o0)$G=!0,a("You called act(async () => ...) without await. This could lead to unexpected testing behaviour, interleaving multiple act calls and mixing their scopes. You should - await act(async () => ...);")});return k6}else{var q8=U0;if(rK(d),tQ===0){var x8=w.current;if(x8!==null)aK(x8),w.current=null;var Q9={then:function(H9,S9){if(w.current===null)w.current=[],WG(q8,H9,S9);else H9(q8)}};return Q9}else{var Z9={then:function(H9,S9){H9(q8)}};return Z9}}}}function rK(x){{if(x!==tQ-1)a("You seem to have overlapping act() calls, this is not supported. Be sure to await previous act() calls before making a new one. ");tQ=x}}function WG(x,d,Y0){{var U0=w.current;if(U0!==null)try{aK(U0),KG(function(){if(U0.length===0)w.current=null,d(x);else WG(x,d,Y0)})}catch(I0){Y0(I0)}else d(x)}}var Mq=!1;function aK(x){if(!Mq){Mq=!0;var d=0;try{for(;d<x.length;d++){var Y0=x[d];do Y0=Y0(!0);while(Y0!==null)}x.length=0}catch(U0){throw x=x.slice(d+1),U0}finally{Mq=!1}}}var oK=c5,tU=h4,eU=tV,JL={map:s8,forEach:L1,count:U1,toArray:aQ,only:oQ};if(fZ0.Children=JL,fZ0.Component=K6,fZ0.Fragment=q,fZ0.Profiler=$,fZ0.PureComponent=c6,fZ0.StrictMode=Y,fZ0.Suspense=U,fZ0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J0,fZ0.act=oU,fZ0.cloneElement=tU,fZ0.createContext=cX,fZ0.createElement=oK,fZ0.createFactory=eU,fZ0.createRef=G6,fZ0.forwardRef=$4,fZ0.isValidElement=E6,fZ0.lazy=K4,fZ0.memo=f0,fZ0.startTransition=I7,fZ0.unstable_act=oU,fZ0.useCallback=_8,fZ0.useContext=G0,fZ0.useDebugValue=T8,fZ0.useDeferredValue=w7,fZ0.useEffect=N6,fZ0.useId=$5,fZ0.useImperativeHandle=E8,fZ0.useInsertionEffect=h0,fZ0.useLayoutEffect=Z6,fZ0.useMemo=N8,fZ0.useReducer=w0,fZ0.useRef=g0,fZ0.useState=M0,fZ0.useSyncExternalStore=W4,fZ0.useTransition=k7,fZ0.version=J,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!=="undefined"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop==="function")__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)})()});var Hf=F0((gZ0)=>{(function(){if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!=="undefined"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart==="function")__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var J=!1,Q=!1,Z=5;function q(x0,X6){var E6=x0.length;x0.push(X6),W(x0,X6,E6)}function Y(x0){return x0.length===0?null:x0[0]}function $(x0){if(x0.length===0)return null;var X6=x0[0],E6=x0.pop();if(E6!==X6)x0[0]=E6,G(x0,E6,0);return X6}function W(x0,X6,E6){var W8=E6;while(W8>0){var c8=W8-1>>>1,K5=x0[c8];if(z(K5,X6)>0)x0[c8]=X6,x0[W8]=K5,W8=c8;else return}}function G(x0,X6,E6){var W8=E6,c8=x0.length,K5=c8>>>1;while(W8<K5){var w9=(W8+1)*2-1,wJ=x0[w9],P8=w9+1,u5=x0[P8];if(z(wJ,X6)<0)if(P8<c8&&z(u5,wJ)<0)x0[W8]=u5,x0[P8]=X6,W8=P8;else x0[W8]=wJ,x0[w9]=X6,W8=w9;else if(P8<c8&&z(u5,X6)<0)x0[W8]=u5,x0[P8]=X6,W8=P8;else return}}function z(x0,X6){var E6=x0.sortIndex-X6.sortIndex;return E6!==0?E6:x0.id-X6.id}var U=1,F=2,B=3,M=4,O=5;function R(x0,X6){}var V=typeof performance==="object"&&typeof performance.now==="function";if(V){var E=performance;gZ0.unstable_now=function(){return E.now()}}else{var _=Date,A=_.now();gZ0.unstable_now=function(){return _.now()-A}}var w=1073741823,T=-1,k=250,P=5000,y=1e4,p=w,s=[],c=[],t=1,X0=null,J0=B,Q0=!1,a=!1,_0=!1,T0=typeof setTimeout==="function"?setTimeout:null,r0=typeof clearTimeout==="function"?clearTimeout:null,C0=typeof setImmediate!=="undefined"?setImmediate:null,k0=typeof navigator!=="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0?navigator.scheduling.isInputPending.bind(navigator.scheduling):null;function b0(x0){var X6=Y(c);while(X6!==null){if(X6.callback===null)$(c);else if(X6.startTime<=x0)$(c),X6.sortIndex=X6.expirationTime,q(s,X6);else return;X6=Y(c)}}function K6(x0){if(_0=!1,b0(x0),!a)if(Y(s)!==null)a=!0,J7(b6);else{var X6=Y(c);if(X6!==null)G9(K6,X6.startTime-x0)}}function b6(x0,X6){if(a=!1,_0)_0=!1,E7();Q0=!0;var E6=J0;try{if(Q)try{return I8(x0,X6)}catch(c8){if(X0!==null){var W8=gZ0.unstable_now();R(X0,W8),X0.isQueued=!1}throw c8}else return I8(x0,X6)}finally{X0=null,J0=E6,Q0=!1}}function I8(x0,X6){var E6=X6;b0(E6),X0=Y(s);while(X0!==null&&!J){if(X0.expirationTime>E6&&(!x0||W9()))break;var W8=X0.callback;if(typeof W8==="function"){X0.callback=null,J0=X0.priorityLevel;var c8=X0.expirationTime<=E6,K5=W8(c8);if(E6=gZ0.unstable_now(),typeof K5==="function")X0.callback=K5;else if(X0===Y(s))$(s);b0(E6)}else $(s);X0=Y(s)}if(X0!==null)return!0;else{var w9=Y(c);if(w9!==null)G9(K6,w9.startTime-E6);return!1}}function _6(x0,X6){switch(x0){case U:case F:case B:case M:case O:break;default:x0=B}var E6=J0;J0=x0;try{return X6()}finally{J0=E6}}function x6(x0){var X6;switch(J0){case U:case F:case B:X6=B;break;default:X6=J0;break}var E6=J0;J0=X6;try{return x0()}finally{J0=E6}}function c6(x0){var X6=J0;return function(){var E6=J0;J0=X6;try{return x0.apply(this,arguments)}finally{J0=E6}}}function $8(x0,X6,E6){var W8=gZ0.unstable_now(),c8;if(typeof E6==="object"&&E6!==null){var K5=E6.delay;if(typeof K5==="number"&&K5>0)c8=W8+K5;else c8=W8}else c8=W8;var w9;switch(x0){case U:w9=T;break;case F:w9=k;break;case O:w9=p;break;case M:w9=y;break;case B:default:w9=P;break}var wJ=c8+w9,P8={id:t++,callback:X6,priorityLevel:x0,startTime:c8,expirationTime:wJ,sortIndex:-1};if(c8>W8){if(P8.sortIndex=c8,q(c,P8),Y(s)===null&&P8===Y(c)){if(_0)E7();else _0=!0;G9(K6,c8-W8)}}else if(P8.sortIndex=wJ,q(s,P8),!a&&!Q0)a=!0,J7(b6);return P8}function G6(){}function i6(){if(!a&&!Q0)a=!0,J7(b6)}function I6(){return Y(s)}function J9(x0){x0.callback=null}function R8(){return J0}var j8=!1,W6=null,S6=-1,f8=Z,u8=-1;function W9(){var x0=gZ0.unstable_now()-u8;if(x0<f8)return!1;return!0}function j7(){}function Y5(x0){if(x0<0||x0>125){console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported");return}if(x0>0)f8=Math.floor(1000/x0);else f8=Z}var kJ=function(){if(W6!==null){var x0=gZ0.unstable_now();u8=x0;var X6=!0,E6=!0;try{E6=W6(X6,x0)}finally{if(E6)m5();else j8=!1,W6=null}}else j8=!1},m5;if(typeof C0==="function")m5=function(){C0(kJ)};else if(typeof MessageChannel!=="undefined"){var _7=new MessageChannel,h5=_7.port2;_7.port1.onmessage=kJ,m5=function(){h5.postMessage(null)}}else m5=function(){T0(kJ,0)};function J7(x0){if(W6=x0,!j8)j8=!0,m5()}function G9(x0,X6){S6=T0(function(){x0(gZ0.unstable_now())},X6)}function E7(){r0(S6),S6=-1}var C7=j7,f4=null;if(gZ0.unstable_IdlePriority=O,gZ0.unstable_ImmediatePriority=U,gZ0.unstable_LowPriority=M,gZ0.unstable_NormalPriority=B,gZ0.unstable_Profiling=f4,gZ0.unstable_UserBlockingPriority=F,gZ0.unstable_cancelCallback=J9,gZ0.unstable_continueExecution=i6,gZ0.unstable_forceFrameRate=Y5,gZ0.unstable_getCurrentPriorityLevel=R8,gZ0.unstable_getFirstCallbackNode=I6,gZ0.unstable_next=x6,gZ0.unstable_pauseExecution=G6,gZ0.unstable_requestPaint=C7,gZ0.unstable_runWithPriority=_6,gZ0.unstable_scheduleCallback=$8,gZ0.unstable_shouldYield=W9,gZ0.unstable_wrapCallback=c6,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!=="undefined"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop==="function")__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)})()});var uq=F0((mZ0)=>{var J=v(o(),1),Q=v(Hf(),1);(function(){if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!=="undefined"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart==="function")__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var Z=J.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,q=!1;function Y(X){q=X}function $(X){if(!q){for(var K=arguments.length,H=new Array(K>1?K-1:0),L=1;L<K;L++)H[L-1]=arguments[L];G("warn",X,H)}}function W(X){if(!q){for(var K=arguments.length,H=new Array(K>1?K-1:0),L=1;L<K;L++)H[L-1]=arguments[L];G("error",X,H)}}function G(X,K,H){{var L=Z.ReactDebugCurrentFrame,N=L.getStackAddendum();if(N!=="")K+="%s",H=H.concat([N]);var D=H.map(function(C){return String(C)});D.unshift("Warning: "+K),Function.prototype.apply.call(console[X],console,D)}}var z=0,U=1,F=2,B=3,M=4,O=5,R=6,V=7,E=8,_=9,A=10,w=11,T=12,k=13,P=14,y=15,p=16,s=17,c=18,t=19,X0=21,J0=22,Q0=23,a=24,_0=25,T0=!0,r0=!1,C0=!1,k0=!1,b0=!1,K6=!0,b6=!1,I8=!0,_6=!0,x6=!0,c6=!0,$8=new Set,G6={},i6={};function I6(X,K){J9(X,K),J9(X+"Capture",K)}function J9(X,K){if(G6[X])W("EventRegistry: More than one plugin attempted to publish the same registration name, `%s`.",X);G6[X]=K;{var H=X.toLowerCase();if(i6[H]=X,X==="onDoubleClick")i6.ondblclick=X}for(var L=0;L<K.length;L++)$8.add(K[L])}var R8=typeof window!=="undefined"&&typeof window.document!=="undefined"&&typeof window.document.createElement!=="undefined",j8=Object.prototype.hasOwnProperty;function W6(X){{var K=typeof Symbol==="function"&&Symbol.toStringTag,H=K&&X[Symbol.toStringTag]||X.constructor.name||"Object";return H}}function S6(X){try{return f8(X),!1}catch(K){return!0}}function f8(X){return""+X}function u8(X,K){if(S6(X))return W("The provided `%s` attribute is an unsupported type %s. This value must be coerced to a string before before using it here.",K,W6(X)),f8(X)}function W9(X){if(S6(X))return W("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",W6(X)),f8(X)}function j7(X,K){if(S6(X))return W("The provided `%s` prop is an unsupported type %s. This value must be coerced to a string before before using it here.",K,W6(X)),f8(X)}function Y5(X,K){if(S6(X))return W("The provided `%s` CSS property is an unsupported type %s. This value must be coerced to a string before before using it here.",K,W6(X)),f8(X)}function kJ(X){if(S6(X))return W("The provided HTML markup uses a value of unsupported type %s. This value must be coerced to a string before before using it here.",W6(X)),f8(X)}function m5(X){if(S6(X))return W("Form field values (value, checked, defaultValue, or defaultChecked props) must be strings, not %s. This value must be coerced to a string before before using it here.",W6(X)),f8(X)}var _7=0,h5=1,J7=2,G9=3,E7=4,C7=5,f4=6,x0=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",X6=x0+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",E6=new RegExp("^["+x0+"]["+X6+"]*$"),W8={},c8={};function K5(X){if(j8.call(c8,X))return!0;if(j8.call(W8,X))return!1;if(E6.test(X))return c8[X]=!0,!0;return W8[X]=!0,W("Invalid attribute name: `%s`",X),!1}function w9(X,K,H){if(K!==null)return K.type===_7;if(H)return!1;if(X.length>2&&(X[0]==="o"||X[0]==="O")&&(X[1]==="n"||X[1]==="N"))return!0;return!1}function wJ(X,K,H,L){if(H!==null&&H.type===_7)return!1;switch(typeof K){case"function":case"symbol":return!0;case"boolean":{if(L)return!1;if(H!==null)return!H.acceptsBooleans;else{var N=X.toLowerCase().slice(0,5);return N!=="data-"&&N!=="aria-"}}default:return!1}}function P8(X,K,H,L){if(K===null||typeof K==="undefined")return!0;if(wJ(X,K,H,L))return!0;if(L)return!1;if(H!==null)switch(H.type){case G9:return!K;case E7:return K===!1;case C7:return isNaN(K);case f4:return isNaN(K)||K<1}return!1}function u5(X){return s8.hasOwnProperty(X)?s8[X]:null}function G8(X,K,H,L,N,D,C){this.acceptsBooleans=K===J7||K===G9||K===E7,this.attributeName=L,this.attributeNamespace=N,this.mustUseProperty=H,this.propertyName=X,this.type=K,this.sanitizeURL=D,this.removeEmptyString=C}var s8={},U1=["children","dangerouslySetInnerHTML","defaultValue","defaultChecked","innerHTML","suppressContentEditableWarning","suppressHydrationWarning","style"];U1.forEach(function(X){s8[X]=new G8(X,_7,!1,X,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(X){var K=X[0],H=X[1];s8[K]=new G8(K,h5,!1,H,null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(X){s8[X]=new G8(X,J7,!1,X.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(X){s8[X]=new G8(X,J7,!1,X,null,!1,!1)}),["allowFullScreen","async","autoFocus","autoPlay","controls","default","defer","disabled","disablePictureInPicture","disableRemotePlayback","formNoValidate","hidden","loop","noModule","noValidate","open","playsInline","readOnly","required","reversed","scoped","seamless","itemScope"].forEach(function(X){s8[X]=new G8(X,G9,!1,X.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(X){s8[X]=new G8(X,G9,!0,X,null,!1,!1)}),["capture","download"].forEach(function(X){s8[X]=new G8(X,E7,!1,X,null,!1,!1)}),["cols","rows","size","span"].forEach(function(X){s8[X]=new G8(X,f4,!1,X,null,!1,!1)}),["rowSpan","start"].forEach(function(X){s8[X]=new G8(X,C7,!1,X.toLowerCase(),null,!1,!1)});var L1=/[\-\:]([a-z])/g,aQ=function(X){return X[1].toUpperCase()};["accent-height","alignment-baseline","arabic-form","baseline-shift","cap-height","clip-path","clip-rule","color-interpolation","color-interpolation-filters","color-profile","color-rendering","dominant-baseline","enable-background","fill-opacity","fill-rule","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-name","glyph-orientation-horizontal","glyph-orientation-vertical","horiz-adv-x","horiz-origin-x","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","overline-position","overline-thickness","paint-order","panose-1","pointer-events","rendering-intent","shape-rendering","stop-color","stop-opacity","strikethrough-position","strikethrough-thickness","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-rendering","underline-position","underline-thickness","unicode-bidi","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","vector-effect","vert-adv-y","vert-origin-x","vert-origin-y","word-spacing","writing-mode","xmlns:xlink","x-height"].forEach(function(X){var K=X.replace(L1,aQ);s8[K]=new G8(K,h5,!1,X,null,!1,!1)}),["xlink:actuate","xlink:arcrole","xlink:role","xlink:show","xlink:title","xlink:type"].forEach(function(X){var K=X.replace(L1,aQ);s8[K]=new G8(K,h5,!1,X,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(X){var K=X.replace(L1,aQ);s8[K]=new G8(K,h5,!1,X,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(X){s8[X]=new G8(X,h5,!1,X.toLowerCase(),null,!1,!1)});var oQ="xlinkHref";s8[oQ]=new G8("xlinkHref",h5,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(X){s8[X]=new G8(X,h5,!1,X.toLowerCase(),null,!0,!0)});var cX=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i,A7=!1;function g4(X){if(!A7&&cX.test(X))A7=!0,W("A future version of React will block javascript: URLs as a security precaution. Use event handlers instead if you can. If you need to generate unsafe HTML try using dangerouslySetInnerHTML instead. React was passed %s.",JSON.stringify(X))}function Gq(X,K,H,L){if(L.mustUseProperty){var N=L.propertyName;return X[N]}else{if(u8(H,K),L.sanitizeURL)g4(""+H);var D=L.attributeName,C=null;if(L.type===E7){if(X.hasAttribute(D)){var I=X.getAttribute(D);if(I==="")return!0;if(P8(K,H,L,!1))return I;if(I===""+H)return H;return I}}else if(X.hasAttribute(D)){if(P8(K,H,L,!1))return X.getAttribute(D);if(L.type===G9)return H;C=X.getAttribute(D)}if(P8(K,H,L,!1))return C===null?H:C;else if(C===""+H)return H;else return C}}function Hq(X,K,H,L){{if(!K5(K))return;if(!X.hasAttribute(K))return H===void 0?void 0:null;var N=X.getAttribute(K);if(u8(H,K),N===""+H)return H;return N}}function F1(X,K,H,L){var N=u5(K);if(w9(K,N,L))return;if(P8(K,H,N,L))H=null;if(L||N===null){if(K5(K)){var D=K;if(H===null)X.removeAttribute(D);else u8(H,K),X.setAttribute(D,""+H)}return}var C=N.mustUseProperty;if(C){var I=N.propertyName;if(H===null){var b=N.type;X[I]=b===G9?!1:""}else X[I]=H;return}var{attributeName:S,attributeNamespace:g}=N;if(H===null)X.removeAttribute(S);else{var n=N.type,i;if(n===G9||n===E7&&H===!0)i="";else if(u8(H,S),i=""+H,N.sanitizeURL)g4(i.toString());if(g)X.setAttributeNS(g,S,i);else X.setAttribute(S,i)}}var K4=Symbol.for("react.element"),$4=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),R0=Symbol.for("react.strict_mode"),f0=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),G0=Symbol.for("react.context"),M0=Symbol.for("react.forward_ref"),w0=Symbol.for("react.suspense"),g0=Symbol.for("react.suspense_list"),N6=Symbol.for("react.memo"),h0=Symbol.for("react.lazy"),Z6=Symbol.for("react.scope"),_8=Symbol.for("react.debug_trace_mode"),N8=Symbol.for("react.offscreen"),E8=Symbol.for("react.legacy_hidden"),T8=Symbol.for("react.cache"),k7=Symbol.for("react.tracing_marker"),w7=Symbol.iterator,$5="@@iterator";function W4(X){if(X===null||typeof X!=="object")return null;var K=w7&&X[w7]||X[$5];if(typeof K==="function")return K;return null}var y6=Object.assign,QQ=0,a2,o2,t2,e2,JG,QG,ZG;function lU(){}lU.__reactDisabledLog=!0;function sV(){{if(QQ===0){a2=console.log,o2=console.info,t2=console.warn,e2=console.error,JG=console.group,QG=console.groupCollapsed,ZG=console.groupEnd;var X={configurable:!0,enumerable:!0,value:lU,writable:!0};Object.defineProperties(console,{info:X,log:X,warn:X,error:X,group:X,groupCollapsed:X,groupEnd:X})}QQ++}}function qG(){{if(QQ--,QQ===0){var X={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:y6({},X,{value:a2}),info:y6({},X,{value:o2}),warn:y6({},X,{value:t2}),error:y6({},X,{value:e2}),group:y6({},X,{value:JG}),groupCollapsed:y6({},X,{value:QG}),groupEnd:y6({},X,{value:ZG})})}if(QQ<0)W("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var pX=Z.ReactCurrentDispatcher,zq;function m4(X,K,H){{if(zq===void 0)try{throw Error()}catch(N){var L=N.stack.trim().match(/\n( *(at )?)/);zq=L&&L[1]||""}return"\n"+zq+X}}var Uq=!1,lK;{var iU=typeof WeakMap==="function"?WeakMap:Map;lK=new iU}function XG(X,K){if(!X||Uq)return"";{var H=lK.get(X);if(H!==void 0)return H}var L;Uq=!0;var N=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var D;D=pX.current,pX.current=null,sV();try{if(K){var C=function(){throw Error()};if(Object.defineProperty(C.prototype,"props",{set:function(){throw Error()}}),typeof Reflect==="object"&&Reflect.construct){try{Reflect.construct(C,[])}catch($0){L=$0}Reflect.construct(X,[],C)}else{try{C.call()}catch($0){L=$0}X.call(C.prototype)}}else{try{throw Error()}catch($0){L=$0}X()}}catch($0){if($0&&L&&typeof $0.stack==="string"){var I=$0.stack.split("\n"),b=L.stack.split("\n"),S=I.length-1,g=b.length-1;while(S>=1&&g>=0&&I[S]!==b[g])g--;for(;S>=1&&g>=0;S--,g--)if(I[S]!==b[g]){if(S!==1||g!==1)do if(S--,g--,g<0||I[S]!==b[g]){var n="\n"+I[S].replace(" at new "," at ");if(X.displayName&&n.includes("<anonymous>"))n=n.replace("<anonymous>",X.displayName);if(typeof X==="function")lK.set(X,n);return n}while(S>=1&&g>=0);break}}}finally{Uq=!1,pX.current=D,qG(),Error.prepareStackTrace=N}var i=X?X.displayName||X.name:"",K0=i?m4(i):"";if(typeof X==="function")lK.set(X,K0);return K0}function rV(X,K,H){return XG(X,!0)}function Lq(X,K,H){return XG(X,!1)}function nU(X){var K=X.prototype;return!!(K&&K.isReactComponent)}function iK(X,K,H){if(X==null)return"";if(typeof X==="function")return XG(X,nU(X));if(typeof X==="string")return m4(X);switch(X){case w0:return m4("Suspense");case g0:return m4("SuspenseList")}if(typeof X==="object")switch(X.$$typeof){case M0:return Lq(X.render);case N6:return iK(X.type,K,H);case h0:{var L=X,N=L._payload,D=L._init;try{return iK(D(N),K,H)}catch(C){}}}return""}function nK(X){var K=X._debugOwner?X._debugOwner.type:null,H=X._debugSource;switch(X.tag){case O:return m4(X.type);case p:return m4("Lazy");case k:return m4("Suspense");case t:return m4("SuspenseList");case z:case F:case y:return Lq(X.type);case w:return Lq(X.type.render);case U:return rV(X.type);default:return""}}function sU(X){try{var K="",H=X;do K+=nK(H),H=H.return;while(H);return K}catch(L){return"\nError generating stack: "+L.message+"\n"+L.stack}}function Fq(X,K,H){var L=X.displayName;if(L)return L;var N=K.displayName||K.name||"";return N!==""?H+"("+N+")":H}function YG(X){return X.displayName||"Context"}function b8(X){if(X==null)return null;if(typeof X.tag==="number")W("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue.");if(typeof X==="function")return X.displayName||X.name||null;if(typeof X==="string")return X;switch(X){case l:return"Fragment";case $4:return"Portal";case f0:return"Profiler";case R0:return"StrictMode";case w0:return"Suspense";case g0:return"SuspenseList"}if(typeof X==="object")switch(X.$$typeof){case G0:var K=X;return YG(K)+".Consumer";case m:var H=X;return YG(H._context)+".Provider";case M0:return Fq(X,X.render,"ForwardRef");case N6:var L=X.displayName||null;if(L!==null)return L;return b8(X.type)||"Memo";case h0:{var N=X,D=N._payload,C=N._init;try{return b8(C(D))}catch(I){return null}}}return null}function aV(X,K,H){var L=K.displayName||K.name||"";return X.displayName||(L!==""?H+"("+L+")":H)}function rU(X){return X.displayName||"Context"}function P6(X){var{tag:K,type:H}=X;switch(K){case a:return"Cache";case _:var L=H;return rU(L)+".Consumer";case A:var N=H;return rU(N._context)+".Provider";case c:return"DehydratedFragment";case w:return aV(H,H.render,"ForwardRef");case V:return"Fragment";case O:return H;case M:return"Portal";case B:return"Root";case R:return"Text";case p:return b8(H);case E:if(H===R0)return"StrictMode";return"Mode";case J0:return"Offscreen";case T:return"Profiler";case X0:return"Scope";case k:return"Suspense";case t:return"SuspenseList";case _0:return"TracingMarker";case U:case z:case s:case F:case P:case y:if(typeof H==="function")return H.displayName||H.name||null;if(typeof H==="string")return H;break}return null}var aU=Z.ReactDebugCurrentFrame,IJ=null,Bq=!1;function Nq(){{if(IJ===null)return null;var X=IJ._debugOwner;if(X!==null&&typeof X!=="undefined")return P6(X)}return null}function oV(){{if(IJ===null)return"";return sU(IJ)}}function c5(){aU.getCurrentStack=null,IJ=null,Bq=!1}function I9(X){aU.getCurrentStack=X===null?null:oV,IJ=X,Bq=!1}function tV(){return IJ}function h4(X){Bq=X}function I7(X){return""+X}function B1(X){switch(typeof X){case"boolean":case"number":case"string":case"undefined":return X;case"object":return m5(X),X;default:return""}}var sK={button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0};function KG(X,K){{if(!(sK[K.type]||K.onChange||K.onInput||K.readOnly||K.disabled||K.value==null))W("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.");if(!(K.onChange||K.readOnly||K.disabled||K.checked==null))W("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")}}function tQ(X){var{type:K,nodeName:H}=X;return H&&H.toLowerCase()==="input"&&(K==="checkbox"||K==="radio")}function $G(X){return X._valueTracker}function oU(X){X._valueTracker=null}function rK(X){var K="";if(!X)return K;if(tQ(X))K=X.checked?"true":"false";else K=X.value;return K}function WG(X){var K=tQ(X)?"checked":"value",H=Object.getOwnPropertyDescriptor(X.constructor.prototype,K);m5(X[K]);var L=""+X[K];if(X.hasOwnProperty(K)||typeof H==="undefined"||typeof H.get!=="function"||typeof H.set!=="function")return;var{get:N,set:D}=H;Object.defineProperty(X,K,{configurable:!0,get:function(){return N.call(this)},set:function(I){m5(I),L=""+I,D.call(this,I)}}),Object.defineProperty(X,K,{enumerable:H.enumerable});var C={getValue:function(){return L},setValue:function(I){m5(I),L=""+I},stopTracking:function(){oU(X),delete X[K]}};return C}function Mq(X){if($G(X))return;X._valueTracker=WG(X)}function aK(X){if(!X)return!1;var K=$G(X);if(!K)return!0;var H=K.getValue(),L=rK(X);if(L!==H)return K.setValue(L),!0;return!1}function oK(X){if(X=X||(typeof document!=="undefined"?document:void 0),typeof X==="undefined")return null;try{return X.activeElement||X.body}catch(K){return X.body}}var tU=!1,eU=!1,JL=!1,x=!1;function d(X){var K=X.type==="checkbox"||X.type==="radio";return K?X.checked!=null:X.value!=null}function Y0(X,K){var H=X,L=K.checked,N=y6({},K,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:L!=null?L:H._wrapperState.initialChecked});return N}function U0(X,K){{if(KG("input",K),K.checked!==void 0&&K.defaultChecked!==void 0&&!eU)W("%s contains an input of type %s with both checked and defaultChecked props. Input elements must be either controlled or uncontrolled (specify either the checked prop, or the defaultChecked prop, but not both). Decide between using a controlled or uncontrolled input element and remove one of these props. More info: https://reactjs.org/link/controlled-components",Nq()||"A component",K.type),eU=!0;if(K.value!==void 0&&K.defaultValue!==void 0&&!tU)W("%s contains an input of type %s with both value and defaultValue props. Input elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled input element and remove one of these props. More info: https://reactjs.org/link/controlled-components",Nq()||"A component",K.type),tU=!0}var H=X,L=K.defaultValue==null?"":K.defaultValue;H._wrapperState={initialChecked:K.checked!=null?K.checked:K.defaultChecked,initialValue:B1(K.value!=null?K.value:L),controlled:d(K)}}function I0(X,K){var H=X,L=K.checked;if(L!=null)F1(H,"checked",L,!1)}function U6(X,K){var H=X;{var L=d(K);if(!H._wrapperState.controlled&&L&&!x)W("A component is changing an uncontrolled input to be controlled. This is likely caused by the value changing from undefined to a defined value, which should not happen. Decide between using a controlled or uncontrolled input element for the lifetime of the component. More info: https://reactjs.org/link/controlled-components"),x=!0;if(H._wrapperState.controlled&&!L&&!JL)W("A component is changing a controlled input to be uncontrolled. This is likely caused by the value changing from a defined to undefined, which should not happen. Decide between using a controlled or uncontrolled input element for the lifetime of the component. More info: https://reactjs.org/link/controlled-components"),JL=!0}I0(X,K);var N=B1(K.value),D=K.type;if(N!=null){if(D==="number"){if(N===0&&H.value===""||H.value!=N)H.value=I7(N)}else if(H.value!==I7(N))H.value=I7(N)}else if(D==="submit"||D==="reset"){H.removeAttribute("value");return}if(K.hasOwnProperty("value"))x8(H,K.type,N);else if(K.hasOwnProperty("defaultValue"))x8(H,K.type,B1(K.defaultValue));if(K.checked==null&&K.defaultChecked!=null)H.defaultChecked=!!K.defaultChecked}function o0(X,K,H){var L=X;if(K.hasOwnProperty("value")||K.hasOwnProperty("defaultValue")){var N=K.type,D=N==="submit"||N==="reset";if(D&&(K.value===void 0||K.value===null))return;var C=I7(L._wrapperState.initialValue);if(!H){if(C!==L.value)L.value=C}L.defaultValue=C}var I=L.name;if(I!=="")L.name="";if(L.defaultChecked=!L.defaultChecked,L.defaultChecked=!!L._wrapperState.initialChecked,I!=="")L.name=I}function k6(X,K){var H=X;U6(H,K),q8(H,K)}function q8(X,K){var H=K.name;if(K.type==="radio"&&H!=null){var L=X;while(L.parentNode)L=L.parentNode;u8(H,"name");var N=L.querySelectorAll("input[name="+JSON.stringify(""+H)+'][type="radio"]');for(var D=0;D<N.length;D++){var C=N[D];if(C===X||C.form!==X.form)continue;var I=cL(C);if(!I)throw new Error("ReactDOMInput: Mixing React and non-React radio inputs with the same `name` is not supported.");aK(C),U6(C,I)}}}function x8(X,K,H){if(K!=="number"||oK(X.ownerDocument)!==X){if(H==null)X.defaultValue=I7(X._wrapperState.initialValue);else if(X.defaultValue!==I7(H))X.defaultValue=I7(H)}}var Q9=!1,Z9=!1,H9=!1;function S9(X,K){{if(K.value==null){if(typeof K.children==="object"&&K.children!==null)J.Children.forEach(K.children,function(H){if(H==null)return;if(typeof H==="string"||typeof H==="number")return;if(!Z9)Z9=!0,W("Cannot infer the option value of complex children. Pass a `value` prop or use a plain string as children to <option>.")});else if(K.dangerouslySetInnerHTML!=null){if(!H9)H9=!0,W("Pass a `value` prop if you set dangerouslyInnerHTML so React knows which value should be selected.")}}if(K.selected!=null&&!Q9)W("Use the `defaultValue` or `value` props on <select> instead of setting `selected` on <option>."),Q9=!0}}function V5(X,K){if(K.value!=null)X.setAttribute("value",I7(B1(K.value)))}var tK=Array.isArray;function D5(X){return tK(X)}var GG=!1;function QL(){var X=Nq();if(X)return"\n\nCheck the render method of `"+X+"`.";return""}var HG=["value","defaultValue"];function eV(X){{KG("select",X);for(var K=0;K<HG.length;K++){var H=HG[K];if(X[H]==null)continue;var L=D5(X[H]);if(X.multiple&&!L)W("The `%s` prop supplied to <select> must be an array if `multiple` is true.%s",H,QL());else if(!X.multiple&&L)W("The `%s` prop supplied to <select> must be a scalar value if `multiple` is false.%s",H,QL())}}}function eQ(X,K,H,L){var N=X.options;if(K){var D=H,C={};for(var I=0;I<D.length;I++)C["$"+D[I]]=!0;for(var b=0;b<N.length;b++){var S=C.hasOwnProperty("$"+N[b].value);if(N[b].selected!==S)N[b].selected=S;if(S&&L)N[b].defaultSelected=!0}}else{var g=I7(B1(H)),n=null;for(var i=0;i<N.length;i++){if(N[i].value===g){if(N[i].selected=!0,L)N[i].defaultSelected=!0;return}if(n===null&&!N[i].disabled)n=N[i]}if(n!==null)n.selected=!0}}function zG(X,K){return y6({},K,{value:void 0})}function Jb(X,K){var H=X;if(eV(K),H._wrapperState={wasMultiple:!!K.multiple},K.value!==void 0&&K.defaultValue!==void 0&&!GG)W("Select elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled select element and remove one of these props. More info: https://reactjs.org/link/controlled-components"),GG=!0}function z60(X,K){var H=X;H.multiple=!!K.multiple;var L=K.value;if(L!=null)eQ(H,!!K.multiple,L,!1);else if(K.defaultValue!=null)eQ(H,!!K.multiple,K.defaultValue,!0)}function U60(X,K){var H=X,L=H._wrapperState.wasMultiple;H._wrapperState.wasMultiple=!!K.multiple;var N=K.value;if(N!=null)eQ(H,!!K.multiple,N,!1);else if(L!==!!K.multiple)if(K.defaultValue!=null)eQ(H,!!K.multiple,K.defaultValue,!0);else eQ(H,!!K.multiple,K.multiple?[]:"",!1)}function L60(X,K){var H=X,L=K.value;if(L!=null)eQ(H,!!K.multiple,L,!1)}var Qb=!1;function JD(X,K){var H=X;if(K.dangerouslySetInnerHTML!=null)throw new Error("`dangerouslySetInnerHTML` does not make sense on <textarea>.");var L=y6({},K,{value:void 0,defaultValue:void 0,children:I7(H._wrapperState.initialValue)});return L}function Zb(X,K){var H=X;if(KG("textarea",K),K.value!==void 0&&K.defaultValue!==void 0&&!Qb)W("%s contains a textarea with both value and defaultValue props. Textarea elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled textarea and remove one of these props. More info: https://reactjs.org/link/controlled-components",Nq()||"A component"),Qb=!0;var L=K.value;if(L==null){var{children:N,defaultValue:D}=K;if(N!=null){W("Use the `defaultValue` or `value` props instead of setting children on <textarea>.");{if(D!=null)throw new Error("If you supply `defaultValue` on a <textarea>, do not pass children.");if(D5(N)){if(N.length>1)throw new Error("<textarea> can only have at most one child.");N=N[0]}D=N}}if(D==null)D="";L=D}H._wrapperState={initialValue:B1(L)}}function qb(X,K){var H=X,L=B1(K.value),N=B1(K.defaultValue);if(L!=null){var D=I7(L);if(D!==H.value)H.value=D;if(K.defaultValue==null&&H.defaultValue!==D)H.defaultValue=D}if(N!=null)H.defaultValue=I7(N)}function Xb(X,K){var H=X,L=H.textContent;if(L===H._wrapperState.initialValue){if(L!==""&&L!==null)H.value=L}}function F60(X,K){qb(X,K)}var JZ="http://www.w3.org/1999/xhtml",B60="http://www.w3.org/1998/Math/MathML",QD="http://www.w3.org/2000/svg";function ZD(X){switch(X){case"svg":return QD;case"math":return B60;default:return JZ}}function qD(X,K){if(X==null||X===JZ)return ZD(K);if(X===QD&&K==="foreignObject")return JZ;return X}var N60=function(X){if(typeof MSApp!=="undefined"&&MSApp.execUnsafeLocalFunction)return function(K,H,L,N){MSApp.execUnsafeLocalFunction(function(){return X(K,H,L,N)})};else return X},ZL,Yb=N60(function(X,K){if(X.namespaceURI===QD){if(!("innerHTML"in X)){ZL=ZL||document.createElement("div"),ZL.innerHTML="<svg>"+K.valueOf().toString()+"</svg>";var H=ZL.firstChild;while(X.firstChild)X.removeChild(X.firstChild);while(H.firstChild)X.appendChild(H.firstChild);return}}X.innerHTML=K}),P7=1,QZ=3,W5=8,ZZ=9,XD=11,qL=function(X,K){if(K){var H=X.firstChild;if(H&&H===X.lastChild&&H.nodeType===QZ){H.nodeValue=K;return}}X.textContent=K},M60={animation:["animationDelay","animationDirection","animationDuration","animationFillMode","animationIterationCount","animationName","animationPlayState","animationTimingFunction"],background:["backgroundAttachment","backgroundClip","backgroundColor","backgroundImage","backgroundOrigin","backgroundPositionX","backgroundPositionY","backgroundRepeat","backgroundSize"],backgroundPosition:["backgroundPositionX","backgroundPositionY"],border:["borderBottomColor","borderBottomStyle","borderBottomWidth","borderImageOutset","borderImageRepeat","borderImageSlice","borderImageSource","borderImageWidth","borderLeftColor","borderLeftStyle","borderLeftWidth","borderRightColor","borderRightStyle","borderRightWidth","borderTopColor","borderTopStyle","borderTopWidth"],borderBlockEnd:["borderBlockEndColor","borderBlockEndStyle","borderBlockEndWidth"],borderBlockStart:["borderBlockStartColor","borderBlockStartStyle","borderBlockStartWidth"],borderBottom:["borderBottomColor","borderBottomStyle","borderBottomWidth"],borderColor:["borderBottomColor","borderLeftColor","borderRightColor","borderTopColor"],borderImage:["borderImageOutset","borderImageRepeat","borderImageSlice","borderImageSource","borderImageWidth"],borderInlineEnd:["borderInlineEndColor","borderInlineEndStyle","borderInlineEndWidth"],borderInlineStart:["borderInlineStartColor","borderInlineStartStyle","borderInlineStartWidth"],borderLeft:["borderLeftColor","borderLeftStyle","borderLeftWidth"],borderRadius:["borderBottomLeftRadius","borderBottomRightRadius","borderTopLeftRadius","borderTopRightRadius"],borderRight:["borderRightColor","borderRightStyle","borderRightWidth"],borderStyle:["borderBottomStyle","borderLeftStyle","borderRightStyle","borderTopStyle"],borderTop:["borderTopColor","borderTopStyle","borderTopWidth"],borderWidth:["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth"],columnRule:["columnRuleColor","columnRuleStyle","columnRuleWidth"],columns:["columnCount","columnWidth"],flex:["flexBasis","flexGrow","flexShrink"],flexFlow:["flexDirection","flexWrap"],font:["fontFamily","fontFeatureSettings","fontKerning","fontLanguageOverride","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontVariantAlternates","fontVariantCaps","fontVariantEastAsian","fontVariantLigatures","fontVariantNumeric","fontVariantPosition","fontWeight","lineHeight"],fontVariant:["fontVariantAlternates","fontVariantCaps","fontVariantEastAsian","fontVariantLigatures","fontVariantNumeric","fontVariantPosition"],gap:["columnGap","rowGap"],grid:["gridAutoColumns","gridAutoFlow","gridAutoRows","gridTemplateAreas","gridTemplateColumns","gridTemplateRows"],gridArea:["gridColumnEnd","gridColumnStart","gridRowEnd","gridRowStart"],gridColumn:["gridColumnEnd","gridColumnStart"],gridColumnGap:["columnGap"],gridGap:["columnGap","rowGap"],gridRow:["gridRowEnd","gridRowStart"],gridRowGap:["rowGap"],gridTemplate:["gridTemplateAreas","gridTemplateColumns","gridTemplateRows"],listStyle:["listStyleImage","listStylePosition","listStyleType"],margin:["marginBottom","marginLeft","marginRight","marginTop"],marker:["markerEnd","markerMid","markerStart"],mask:["maskClip","maskComposite","maskImage","maskMode","maskOrigin","maskPositionX","maskPositionY","maskRepeat","maskSize"],maskPosition:["maskPositionX","maskPositionY"],outline:["outlineColor","outlineStyle","outlineWidth"],overflow:["overflowX","overflowY"],padding:["paddingBottom","paddingLeft","paddingRight","paddingTop"],placeContent:["alignContent","justifyContent"],placeItems:["alignItems","justifyItems"],placeSelf:["alignSelf","justifySelf"],textDecoration:["textDecorationColor","textDecorationLine","textDecorationStyle"],textEmphasis:["textEmphasisColor","textEmphasisStyle"],transition:["transitionDelay","transitionDuration","transitionProperty","transitionTimingFunction"],wordWrap:["overflowWrap"]},UG={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};function O60(X,K){return X+K.charAt(0).toUpperCase()+K.substring(1)}var V60=["Webkit","ms","Moz","O"];Object.keys(UG).forEach(function(X){V60.forEach(function(K){UG[O60(K,X)]=UG[X]})});function YD(X,K,H){var L=K==null||typeof K==="boolean"||K==="";if(L)return"";if(!H&&typeof K==="number"&&K!==0&&!(UG.hasOwnProperty(X)&&UG[X]))return K+"px";return Y5(K,X),(""+K).trim()}var D60=/([A-Z])/g,R60=/^ms-/;function j60(X){return X.replace(D60,"-$1").toLowerCase().replace(R60,"-ms-")}var Kb=function(){};{var _60=/^(?:webkit|moz|o)[A-Z]/,E60=/^-ms-/,C60=/-(.)/g,$b=/;\s*$/,eK={},KD={},Wb=!1,Gb=!1,A60=function(X){return X.replace(C60,function(K,H){return H.toUpperCase()})},k60=function(X){if(eK.hasOwnProperty(X)&&eK[X])return;eK[X]=!0,W("Unsupported style property %s. Did you mean %s?",X,A60(X.replace(E60,"ms-")))},w60=function(X){if(eK.hasOwnProperty(X)&&eK[X])return;eK[X]=!0,W("Unsupported vendor-prefixed style property %s. Did you mean %s?",X,X.charAt(0).toUpperCase()+X.slice(1))},I60=function(X,K){if(KD.hasOwnProperty(K)&&KD[K])return;KD[K]=!0,W(`Style property values shouldn't contain a semicolon. Try "%s: %s" instead.`,X,K.replace($b,""))},P60=function(X,K){if(Wb)return;Wb=!0,W("`NaN` is an invalid value for the `%s` css style property.",X)},T60=function(X,K){if(Gb)return;Gb=!0,W("`Infinity` is an invalid value for the `%s` css style property.",X)};Kb=function(X,K){if(X.indexOf("-")>-1)k60(X);else if(_60.test(X))w60(X);else if($b.test(K))I60(X,K);if(typeof K==="number"){if(isNaN(K))P60(X,K);else if(!isFinite(K))T60(X,K)}}}var b60=Kb;function x60(X){{var K="",H="";for(var L in X){if(!X.hasOwnProperty(L))continue;var N=X[L];if(N!=null){var D=L.indexOf("--")===0;K+=H+(D?L:j60(L))+":",K+=YD(L,N,D),H=";"}}return K||null}}function Hb(X,K){var H=X.style;for(var L in K){if(!K.hasOwnProperty(L))continue;var N=L.indexOf("--")===0;if(!N)b60(L,K[L]);var D=YD(L,K[L],N);if(L==="float")L="cssFloat";if(N)H.setProperty(L,D);else H[L]=D}}function y60(X){return X==null||typeof X==="boolean"||X===""}function zb(X){var K={};for(var H in X){var L=M60[H]||[H];for(var N=0;N<L.length;N++)K[L[N]]=H}return K}function v60(X,K){{if(!K)return;var H=zb(X),L=zb(K),N={};for(var D in H){var C=H[D],I=L[D];if(I&&C!==I){var b=C+","+I;if(N[b])continue;N[b]=!0,W("%s a style property during rerender (%s) when a conflicting property is set (%s) can lead to styling bugs. To avoid this, don't mix shorthand and non-shorthand properties for the same value; instead, replace the shorthand with separate values.",y60(X[C])?"Removing":"Updating",C,I)}}}}var S60={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},f60=y6({menuitem:!0},S60),g60="__html";function $D(X,K){if(!K)return;if(f60[X]){if(K.children!=null||K.dangerouslySetInnerHTML!=null)throw new Error(X+" is a void element tag and must neither have `children` nor use `dangerouslySetInnerHTML`.")}if(K.dangerouslySetInnerHTML!=null){if(K.children!=null)throw new Error("Can only set one of `children` or `props.dangerouslySetInnerHTML`.");if(typeof K.dangerouslySetInnerHTML!=="object"||!(g60 in K.dangerouslySetInnerHTML))throw new Error("`props.dangerouslySetInnerHTML` must be in the form `{__html: ...}`. Please visit https://reactjs.org/link/dangerously-set-inner-html for more information.")}if(!K.suppressContentEditableWarning&&K.contentEditable&&K.children!=null)W("A component is `contentEditable` and contains `children` managed by React. It is now your responsibility to guarantee that none of those nodes are unexpectedly modified or duplicated. This is probably not intentional.");if(K.style!=null&&typeof K.style!=="object")throw new Error("The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX.")}function dX(X,K){if(X.indexOf("-")===-1)return typeof K.is==="string";switch(X){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var XL={accept:"accept",acceptcharset:"acceptCharset","accept-charset":"acceptCharset",accesskey:"accessKey",action:"action",allowfullscreen:"allowFullScreen",alt:"alt",as:"as",async:"async",autocapitalize:"autoCapitalize",autocomplete:"autoComplete",autocorrect:"autoCorrect",autofocus:"autoFocus",autoplay:"autoPlay",autosave:"autoSave",capture:"capture",cellpadding:"cellPadding",cellspacing:"cellSpacing",challenge:"challenge",charset:"charSet",checked:"checked",children:"children",cite:"cite",class:"className",classid:"classID",classname:"className",cols:"cols",colspan:"colSpan",content:"content",contenteditable:"contentEditable",contextmenu:"contextMenu",controls:"controls",controlslist:"controlsList",coords:"coords",crossorigin:"crossOrigin",dangerouslysetinnerhtml:"dangerouslySetInnerHTML",data:"data",datetime:"dateTime",default:"default",defaultchecked:"defaultChecked",defaultvalue:"defaultValue",defer:"defer",dir:"dir",disabled:"disabled",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback",download:"download",draggable:"draggable",enctype:"encType",enterkeyhint:"enterKeyHint",for:"htmlFor",form:"form",formmethod:"formMethod",formaction:"formAction",formenctype:"formEncType",formnovalidate:"formNoValidate",formtarget:"formTarget",frameborder:"frameBorder",headers:"headers",height:"height",hidden:"hidden",high:"high",href:"href",hreflang:"hrefLang",htmlfor:"htmlFor",httpequiv:"httpEquiv","http-equiv":"httpEquiv",icon:"icon",id:"id",imagesizes:"imageSizes",imagesrcset:"imageSrcSet",innerhtml:"innerHTML",inputmode:"inputMode",integrity:"integrity",is:"is",itemid:"itemID",itemprop:"itemProp",itemref:"itemRef",itemscope:"itemScope",itemtype:"itemType",keyparams:"keyParams",keytype:"keyType",kind:"kind",label:"label",lang:"lang",list:"list",loop:"loop",low:"low",manifest:"manifest",marginwidth:"marginWidth",marginheight:"marginHeight",max:"max",maxlength:"maxLength",media:"media",mediagroup:"mediaGroup",method:"method",min:"min",minlength:"minLength",multiple:"multiple",muted:"muted",name:"name",nomodule:"noModule",nonce:"nonce",novalidate:"noValidate",open:"open",optimum:"optimum",pattern:"pattern",placeholder:"placeholder",playsinline:"playsInline",poster:"poster",preload:"preload",profile:"profile",radiogroup:"radioGroup",readonly:"readOnly",referrerpolicy:"referrerPolicy",rel:"rel",required:"required",reversed:"reversed",role:"role",rows:"rows",rowspan:"rowSpan",sandbox:"sandbox",scope:"scope",scoped:"scoped",scrolling:"scrolling",seamless:"seamless",selected:"selected",shape:"shape",size:"size",sizes:"sizes",span:"span",spellcheck:"spellCheck",src:"src",srcdoc:"srcDoc",srclang:"srcLang",srcset:"srcSet",start:"start",step:"step",style:"style",summary:"summary",tabindex:"tabIndex",target:"target",title:"title",type:"type",usemap:"useMap",value:"value",width:"width",wmode:"wmode",wrap:"wrap",about:"about",accentheight:"accentHeight","accent-height":"accentHeight",accumulate:"accumulate",additive:"additive",alignmentbaseline:"alignmentBaseline","alignment-baseline":"alignmentBaseline",allowreorder:"allowReorder",alphabetic:"alphabetic",amplitude:"amplitude",arabicform:"arabicForm","arabic-form":"arabicForm",ascent:"ascent",attributename:"attributeName",attributetype:"attributeType",autoreverse:"autoReverse",azimuth:"azimuth",basefrequency:"baseFrequency",baselineshift:"baselineShift","baseline-shift":"baselineShift",baseprofile:"baseProfile",bbox:"bbox",begin:"begin",bias:"bias",by:"by",calcmode:"calcMode",capheight:"capHeight","cap-height":"capHeight",clip:"clip",clippath:"clipPath","clip-path":"clipPath",clippathunits:"clipPathUnits",cliprule:"clipRule","clip-rule":"clipRule",color:"color",colorinterpolation:"colorInterpolation","color-interpolation":"colorInterpolation",colorinterpolationfilters:"colorInterpolationFilters","color-interpolation-filters":"colorInterpolationFilters",colorprofile:"colorProfile","color-profile":"colorProfile",colorrendering:"colorRendering","color-rendering":"colorRendering",contentscripttype:"contentScriptType",contentstyletype:"contentStyleType",cursor:"cursor",cx:"cx",cy:"cy",d:"d",datatype:"datatype",decelerate:"decelerate",descent:"descent",diffuseconstant:"diffuseConstant",direction:"direction",display:"display",divisor:"divisor",dominantbaseline:"dominantBaseline","dominant-baseline":"dominantBaseline",dur:"dur",dx:"dx",dy:"dy",edgemode:"edgeMode",elevation:"elevation",enablebackground:"enableBackground","enable-background":"enableBackground",end:"end",exponent:"exponent",externalresourcesrequired:"externalResourcesRequired",fill:"fill",fillopacity:"fillOpacity","fill-opacity":"fillOpacity",fillrule:"fillRule","fill-rule":"fillRule",filter:"filter",filterres:"filterRes",filterunits:"filterUnits",floodopacity:"floodOpacity","flood-opacity":"floodOpacity",floodcolor:"floodColor","flood-color":"floodColor",focusable:"focusable",fontfamily:"fontFamily","font-family":"fontFamily",fontsize:"fontSize","font-size":"fontSize",fontsizeadjust:"fontSizeAdjust","font-size-adjust":"fontSizeAdjust",fontstretch:"fontStretch","font-stretch":"fontStretch",fontstyle:"fontStyle","font-style":"fontStyle",fontvariant:"fontVariant","font-variant":"fontVariant",fontweight:"fontWeight","font-weight":"fontWeight",format:"format",from:"from",fx:"fx",fy:"fy",g1:"g1",g2:"g2",glyphname:"glyphName","glyph-name":"glyphName",glyphorientationhorizontal:"glyphOrientationHorizontal","glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphorientationvertical:"glyphOrientationVertical","glyph-orientation-vertical":"glyphOrientationVertical",glyphref:"glyphRef",gradienttransform:"gradientTransform",gradientunits:"gradientUnits",hanging:"hanging",horizadvx:"horizAdvX","horiz-adv-x":"horizAdvX",horizoriginx:"horizOriginX","horiz-origin-x":"horizOriginX",ideographic:"ideographic",imagerendering:"imageRendering","image-rendering":"imageRendering",in2:"in2",in:"in",inlist:"inlist",intercept:"intercept",k1:"k1",k2:"k2",k3:"k3",k4:"k4",k:"k",kernelmatrix:"kernelMatrix",kernelunitlength:"kernelUnitLength",kerning:"kerning",keypoints:"keyPoints",keysplines:"keySplines",keytimes:"keyTimes",lengthadjust:"lengthAdjust",letterspacing:"letterSpacing","letter-spacing":"letterSpacing",lightingcolor:"lightingColor","lighting-color":"lightingColor",limitingconeangle:"limitingConeAngle",local:"local",markerend:"markerEnd","marker-end":"markerEnd",markerheight:"markerHeight",markermid:"markerMid","marker-mid":"markerMid",markerstart:"markerStart","marker-start":"markerStart",markerunits:"markerUnits",markerwidth:"markerWidth",mask:"mask",maskcontentunits:"maskContentUnits",maskunits:"maskUnits",mathematical:"mathematical",mode:"mode",numoctaves:"numOctaves",offset:"offset",opacity:"opacity",operator:"operator",order:"order",orient:"orient",orientation:"orientation",origin:"origin",overflow:"overflow",overlineposition:"overlinePosition","overline-position":"overlinePosition",overlinethickness:"overlineThickness","overline-thickness":"overlineThickness",paintorder:"paintOrder","paint-order":"paintOrder",panose1:"panose1","panose-1":"panose1",pathlength:"pathLength",patterncontentunits:"patternContentUnits",patterntransform:"patternTransform",patternunits:"patternUnits",pointerevents:"pointerEvents","pointer-events":"pointerEvents",points:"points",pointsatx:"pointsAtX",pointsaty:"pointsAtY",pointsatz:"pointsAtZ",prefix:"prefix",preservealpha:"preserveAlpha",preserveaspectratio:"preserveAspectRatio",primitiveunits:"primitiveUnits",property:"property",r:"r",radius:"radius",refx:"refX",refy:"refY",renderingintent:"renderingIntent","rendering-intent":"renderingIntent",repeatcount:"repeatCount",repeatdur:"repeatDur",requiredextensions:"requiredExtensions",requiredfeatures:"requiredFeatures",resource:"resource",restart:"restart",result:"result",results:"results",rotate:"rotate",rx:"rx",ry:"ry",scale:"scale",security:"security",seed:"seed",shaperendering:"shapeRendering","shape-rendering":"shapeRendering",slope:"slope",spacing:"spacing",specularconstant:"specularConstant",specularexponent:"specularExponent",speed:"speed",spreadmethod:"spreadMethod",startoffset:"startOffset",stddeviation:"stdDeviation",stemh:"stemh",stemv:"stemv",stitchtiles:"stitchTiles",stopcolor:"stopColor","stop-color":"stopColor",stopopacity:"stopOpacity","stop-opacity":"stopOpacity",strikethroughposition:"strikethroughPosition","strikethrough-position":"strikethroughPosition",strikethroughthickness:"strikethroughThickness","strikethrough-thickness":"strikethroughThickness",string:"string",stroke:"stroke",strokedasharray:"strokeDasharray","stroke-dasharray":"strokeDasharray",strokedashoffset:"strokeDashoffset","stroke-dashoffset":"strokeDashoffset",strokelinecap:"strokeLinecap","stroke-linecap":"strokeLinecap",strokelinejoin:"strokeLinejoin","stroke-linejoin":"strokeLinejoin",strokemiterlimit:"strokeMiterlimit","stroke-miterlimit":"strokeMiterlimit",strokewidth:"strokeWidth","stroke-width":"strokeWidth",strokeopacity:"strokeOpacity","stroke-opacity":"strokeOpacity",suppresscontenteditablewarning:"suppressContentEditableWarning",suppresshydrationwarning:"suppressHydrationWarning",surfacescale:"surfaceScale",systemlanguage:"systemLanguage",tablevalues:"tableValues",targetx:"targetX",targety:"targetY",textanchor:"textAnchor","text-anchor":"textAnchor",textdecoration:"textDecoration","text-decoration":"textDecoration",textlength:"textLength",textrendering:"textRendering","text-rendering":"textRendering",to:"to",transform:"transform",typeof:"typeof",u1:"u1",u2:"u2",underlineposition:"underlinePosition","underline-position":"underlinePosition",underlinethickness:"underlineThickness","underline-thickness":"underlineThickness",unicode:"unicode",unicodebidi:"unicodeBidi","unicode-bidi":"unicodeBidi",unicoderange:"unicodeRange","unicode-range":"unicodeRange",unitsperem:"unitsPerEm","units-per-em":"unitsPerEm",unselectable:"unselectable",valphabetic:"vAlphabetic","v-alphabetic":"vAlphabetic",values:"values",vectoreffect:"vectorEffect","vector-effect":"vectorEffect",version:"version",vertadvy:"vertAdvY","vert-adv-y":"vertAdvY",vertoriginx:"vertOriginX","vert-origin-x":"vertOriginX",vertoriginy:"vertOriginY","vert-origin-y":"vertOriginY",vhanging:"vHanging","v-hanging":"vHanging",videographic:"vIdeographic","v-ideographic":"vIdeographic",viewbox:"viewBox",viewtarget:"viewTarget",visibility:"visibility",vmathematical:"vMathematical","v-mathematical":"vMathematical",vocab:"vocab",widths:"widths",wordspacing:"wordSpacing","word-spacing":"wordSpacing",writingmode:"writingMode","writing-mode":"writingMode",x1:"x1",x2:"x2",x:"x",xchannelselector:"xChannelSelector",xheight:"xHeight","x-height":"xHeight",xlinkactuate:"xlinkActuate","xlink:actuate":"xlinkActuate",xlinkarcrole:"xlinkArcrole","xlink:arcrole":"xlinkArcrole",xlinkhref:"xlinkHref","xlink:href":"xlinkHref",xlinkrole:"xlinkRole","xlink:role":"xlinkRole",xlinkshow:"xlinkShow","xlink:show":"xlinkShow",xlinktitle:"xlinkTitle","xlink:title":"xlinkTitle",xlinktype:"xlinkType","xlink:type":"xlinkType",xmlbase:"xmlBase","xml:base":"xmlBase",xmllang:"xmlLang","xml:lang":"xmlLang",xmlns:"xmlns","xml:space":"xmlSpace",xmlnsxlink:"xmlnsXlink","xmlns:xlink":"xmlnsXlink",xmlspace:"xmlSpace",y1:"y1",y2:"y2",y:"y",ychannelselector:"yChannelSelector",z:"z",zoomandpan:"zoomAndPan"},Ub={"aria-current":0,"aria-description":0,"aria-details":0,"aria-disabled":0,"aria-hidden":0,"aria-invalid":0,"aria-keyshortcuts":0,"aria-label":0,"aria-roledescription":0,"aria-autocomplete":0,"aria-checked":0,"aria-expanded":0,"aria-haspopup":0,"aria-level":0,"aria-modal":0,"aria-multiline":0,"aria-multiselectable":0,"aria-orientation":0,"aria-placeholder":0,"aria-pressed":0,"aria-readonly":0,"aria-required":0,"aria-selected":0,"aria-sort":0,"aria-valuemax":0,"aria-valuemin":0,"aria-valuenow":0,"aria-valuetext":0,"aria-atomic":0,"aria-busy":0,"aria-live":0,"aria-relevant":0,"aria-dropeffect":0,"aria-grabbed":0,"aria-activedescendant":0,"aria-colcount":0,"aria-colindex":0,"aria-colspan":0,"aria-controls":0,"aria-describedby":0,"aria-errormessage":0,"aria-flowto":0,"aria-labelledby":0,"aria-owns":0,"aria-posinset":0,"aria-rowcount":0,"aria-rowindex":0,"aria-rowspan":0,"aria-setsize":0},J$={},m60=new RegExp("^(aria)-["+X6+"]*$"),h60=new RegExp("^(aria)[A-Z]["+X6+"]*$");function u60(X,K){{if(j8.call(J$,K)&&J$[K])return!0;if(h60.test(K)){var H="aria-"+K.slice(4).toLowerCase(),L=Ub.hasOwnProperty(H)?H:null;if(L==null)return W("Invalid ARIA attribute `%s`. ARIA attributes follow the pattern aria-* and must be lowercase.",K),J$[K]=!0,!0;if(K!==L)return W("Invalid ARIA attribute `%s`. Did you mean `%s`?",K,L),J$[K]=!0,!0}if(m60.test(K)){var N=K.toLowerCase(),D=Ub.hasOwnProperty(N)?N:null;if(D==null)return J$[K]=!0,!1;if(K!==D)return W("Unknown ARIA attribute `%s`. Did you mean `%s`?",K,D),J$[K]=!0,!0}}return!0}function c60(X,K){{var H=[];for(var L in K){var N=u60(X,L);if(!N)H.push(L)}var D=H.map(function(C){return"`"+C+"`"}).join(", ");if(H.length===1)W("Invalid aria prop %s on <%s> tag. For details, see https://reactjs.org/link/invalid-aria-props",D,X);else if(H.length>1)W("Invalid aria props %s on <%s> tag. For details, see https://reactjs.org/link/invalid-aria-props",D,X)}}function p60(X,K){if(dX(X,K))return;c60(X,K)}var Lb=!1;function d60(X,K){{if(X!=="input"&&X!=="textarea"&&X!=="select")return;if(K!=null&&K.value===null&&!Lb)if(Lb=!0,X==="select"&&K.multiple)W("`value` prop on `%s` should not be null. Consider using an empty array when `multiple` is set to `true` to clear the component or `undefined` for uncontrolled components.",X);else W("`value` prop on `%s` should not be null. Consider using an empty string to clear the component or `undefined` for uncontrolled components.",X)}}var Fb=function(){};{var Q7={},Bb=/^on./,l60=/^on[^A-Z]/,i60=new RegExp("^(aria)-["+X6+"]*$"),n60=new RegExp("^(aria)[A-Z]["+X6+"]*$");Fb=function(X,K,H,L){if(j8.call(Q7,K)&&Q7[K])return!0;var N=K.toLowerCase();if(N==="onfocusin"||N==="onfocusout")return W("React uses onFocus and onBlur instead of onFocusIn and onFocusOut. All React events are normalized to bubble, so onFocusIn and onFocusOut are not needed/supported by React."),Q7[K]=!0,!0;if(L!=null){var{registrationNameDependencies:D,possibleRegistrationNames:C}=L;if(D.hasOwnProperty(K))return!0;var I=C.hasOwnProperty(N)?C[N]:null;if(I!=null)return W("Invalid event handler property `%s`. Did you mean `%s`?",K,I),Q7[K]=!0,!0;if(Bb.test(K))return W("Unknown event handler property `%s`. It will be ignored.",K),Q7[K]=!0,!0}else if(Bb.test(K)){if(l60.test(K))W("Invalid event handler property `%s`. React events use the camelCase naming convention, for example `onClick`.",K);return Q7[K]=!0,!0}if(i60.test(K)||n60.test(K))return!0;if(N==="innerhtml")return W("Directly setting property `innerHTML` is not permitted. For more information, lookup documentation on `dangerouslySetInnerHTML`."),Q7[K]=!0,!0;if(N==="aria")return W("The `aria` attribute is reserved for future use in React. Pass individual `aria-` attributes instead."),Q7[K]=!0,!0;if(N==="is"&&H!==null&&H!==void 0&&typeof H!=="string")return W("Received a `%s` for a string attribute `is`. If this is expected, cast the value to a string.",typeof H),Q7[K]=!0,!0;if(typeof H==="number"&&isNaN(H))return W("Received NaN for the `%s` attribute. If this is expected, cast the value to a string.",K),Q7[K]=!0,!0;var b=u5(K),S=b!==null&&b.type===_7;if(XL.hasOwnProperty(N)){var g=XL[N];if(g!==K)return W("Invalid DOM property `%s`. Did you mean `%s`?",K,g),Q7[K]=!0,!0}else if(!S&&K!==N)return W("React does not recognize the `%s` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `%s` instead. If you accidentally passed it from a parent component, remove it from the DOM element.",K,N),Q7[K]=!0,!0;if(typeof H==="boolean"&&wJ(K,H,b,!1)){if(H)W('Received `%s` for a non-boolean attribute `%s`.\n\nIf you want to write it to the DOM, pass a string instead: %s="%s" or %s={value.toString()}.',H,K,K,H,K);else W('Received `%s` for a non-boolean attribute `%s`.\n\nIf you want to write it to the DOM, pass a string instead: %s="%s" or %s={value.toString()}.\n\nIf you used to conditionally omit it with %s={condition && value}, pass %s={condition ? value : undefined} instead.',H,K,K,H,K,K,K);return Q7[K]=!0,!0}if(S)return!0;if(wJ(K,H,b,!1))return Q7[K]=!0,!1;if((H==="false"||H==="true")&&b!==null&&b.type===G9)return W("Received the string `%s` for the boolean attribute `%s`. %s Did you mean %s={%s}?",H,K,H==="false"?"The browser will interpret it as a truthy value.":'Although this works, it will not work as expected if you pass the string "false".',K,H),Q7[K]=!0,!0;return!0}}var s60=function(X,K,H){{var L=[];for(var N in K){var D=Fb(X,N,K[N],H);if(!D)L.push(N)}var C=L.map(function(I){return"`"+I+"`"}).join(", ");if(L.length===1)W("Invalid value for prop %s on <%s> tag. Either remove it from the element, or pass a string or number value to keep it in the DOM. For details, see https://reactjs.org/link/attribute-behavior ",C,X);else if(L.length>1)W("Invalid values for props %s on <%s> tag. Either remove them from the element, or pass a string or number value to keep them in the DOM. For details, see https://reactjs.org/link/attribute-behavior ",C,X)}};function r60(X,K,H){if(dX(X,K))return;s60(X,K,H)}var Nb=1,WD=1<<1,LG=1<<2,a60=Nb|WD|LG,FG=null;function o60(X){if(FG!==null)W("Expected currently replaying event to be null. This error is likely caused by a bug in React. Please file an issue.");FG=X}function t60(){if(FG===null)W("Expected currently replaying event to not be null. This error is likely caused by a bug in React. Please file an issue.");FG=null}function e60(X){return X===FG}function GD(X){var K=X.target||X.srcElement||window;if(K.correspondingUseElement)K=K.correspondingUseElement;return K.nodeType===QZ?K.parentNode:K}var HD=null,Q$=null,Z$=null;function Mb(X){var K=Cq(X);if(!K)return;if(typeof HD!=="function")throw new Error("setRestoreImplementation() needs to be called to handle a target for controlled events. This error is likely caused by a bug in React. Please file an issue.");var H=K.stateNode;if(H){var L=cL(H);HD(K.stateNode,K.type,L)}}function J80(X){HD=X}function Ob(X){if(Q$)if(Z$)Z$.push(X);else Z$=[X];else Q$=X}function Q80(){return Q$!==null||Z$!==null}function Vb(){if(!Q$)return;var X=Q$,K=Z$;if(Q$=null,Z$=null,Mb(X),K)for(var H=0;H<K.length;H++)Mb(K[H])}var Db=function(X,K){return X(K)},Rb=function(){},zD=!1;function Z80(){var X=Q80();if(X)Rb(),Vb()}function jb(X,K,H){if(zD)return X(K,H);zD=!0;try{return Db(X,K,H)}finally{zD=!1,Z80()}}function q80(X,K,H){Db=X,Rb=H}function X80(X){return X==="button"||X==="input"||X==="select"||X==="textarea"}function Y80(X,K,H){switch(X){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":return!!(H.disabled&&X80(K));default:return!1}}function BG(X,K){var H=X.stateNode;if(H===null)return null;var L=cL(H);if(L===null)return null;var N=L[K];if(Y80(K,X.type,L))return null;if(N&&typeof N!=="function")throw new Error("Expected `"+K+"` listener to be a function, instead got a value of `"+typeof N+"` type.");return N}var UD=!1;if(R8)try{var NG={};Object.defineProperty(NG,"passive",{get:function(){UD=!0}}),window.addEventListener("test",NG,NG),window.removeEventListener("test",NG,NG)}catch(X){UD=!1}function _b(X,K,H,L,N,D,C,I,b){var S=Array.prototype.slice.call(arguments,3);try{K.apply(H,S)}catch(g){this.onError(g)}}var Eb=_b;if(typeof window!=="undefined"&&typeof window.dispatchEvent==="function"&&typeof document!=="undefined"&&typeof document.createEvent==="function"){var LD=document.createElement("react");Eb=function X(K,H,L,N,D,C,I,b,S){if(typeof document==="undefined"||document===null)throw new Error("The `document` global was defined when React was initialized, but is not defined anymore. This can happen in a test environment if a component schedules an update from an asynchronous callback, but the test has already finished running. To solve this, you can either unmount the component at the end of your test (and ensure that any asynchronous operations get canceled in `componentWillUnmount`), or you can change the test itself to be asynchronous.");var g=document.createEvent("Event"),n=!1,i=!0,K0=window.event,$0=Object.getOwnPropertyDescriptor(window,"event");function H0(){if(LD.removeEventListener(L0,$6,!1),typeof window.event!=="undefined"&&window.hasOwnProperty("event"))window.event=K0}var S0=Array.prototype.slice.call(arguments,3);function $6(){n=!0,H0(),H.apply(L,S0),i=!1}var Q6,n6=!1,s6=!1;function Z0(q0){if(Q6=q0.error,n6=!0,Q6===null&&q0.colno===0&&q0.lineno===0)s6=!0;if(q0.defaultPrevented){if(Q6!=null&&typeof Q6==="object")try{Q6._suppressLogging=!0}catch(E0){}}}var L0="react-"+(K?K:"invokeguardedcallback");if(window.addEventListener("error",Z0),LD.addEventListener(L0,$6,!1),g.initEvent(L0,!1,!1),LD.dispatchEvent(g),$0)Object.defineProperty(window,"event",$0);if(n&&i){if(!n6)Q6=new Error(`An error was thrown inside one of your components, but React doesn't know what it was. This is likely due to browser flakiness. React does its best to preserve the "Pause on exceptions" behavior of the DevTools, which requires some DEV-mode only tricks. It's possible that these don't work in your browser. Try triggering the error in production mode, or switching to a modern browser. If you suspect that this is actually an issue with React, please file an issue.`);else if(s6)Q6=new Error("A cross-origin error was thrown. React doesn't have access to the actual error object in development. See https://reactjs.org/link/crossorigin-error for more information.");this.onError(Q6)}if(window.removeEventListener("error",Z0),!n)return H0(),_b.apply(this,arguments)}}var K80=Eb,q$=!1,YL=null,KL=!1,FD=null,$80={onError:function(X){q$=!0,YL=X}};function BD(X,K,H,L,N,D,C,I,b){q$=!1,YL=null,K80.apply($80,arguments)}function W80(X,K,H,L,N,D,C,I,b){if(BD.apply(this,arguments),q$){var S=ND();if(!KL)KL=!0,FD=S}}function G80(){if(KL){var X=FD;throw KL=!1,FD=null,X}}function H80(){return q$}function ND(){if(q$){var X=YL;return q$=!1,YL=null,X}else throw new Error("clearCaughtError was called but no error was captured. This error is likely caused by a bug in React. Please file an issue.")}function X$(X){return X._reactInternals}function z80(X){return X._reactInternals!==void 0}function U80(X,K){X._reactInternals=K}var F6=0,Y$=1,G5=2,X8=4,lX=16,MG=32,MD=64,M8=128,qZ=256,Oq=512,iX=1024,N1=2048,XZ=4096,nX=8192,$L=16384,L80=N1|X8|MD|Oq|iX|$L,F80=32767,OG=32768,Z7=65536,OD=131072,Cb=1048576,VD=2097152,sX=4194304,DD=8388608,YZ=16777216,WL=33554432,RD=X8|iX|0,jD=G5|X8|lX|MG|Oq|XZ|nX,VG=X8|MD|Oq|nX,K$=N1|lX,KZ=sX|DD|VD,B80=Z.ReactCurrentOwner;function rX(X){var K=X,H=X;if(!X.alternate){var L=K;do{if(K=L,(K.flags&(G5|XZ))!==F6)H=K.return;L=K.return}while(L)}else while(K.return)K=K.return;if(K.tag===B)return H;return null}function Ab(X){if(X.tag===k){var K=X.memoizedState;if(K===null){var H=X.alternate;if(H!==null)K=H.memoizedState}if(K!==null)return K.dehydrated}return null}function kb(X){return X.tag===B?X.stateNode.containerInfo:null}function N80(X){return rX(X)===X}function M80(X){{var K=B80.current;if(K!==null&&K.tag===U){var H=K,L=H.stateNode;if(!L._warnedAboutRefsInRender)W("%s is accessing isMounted inside its render() function. render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",P6(H)||"A component");L._warnedAboutRefsInRender=!0}}var N=X$(X);if(!N)return!1;return rX(N)===N}function wb(X){if(rX(X)!==X)throw new Error("Unable to find node on an unmounted component.")}function Ib(X){var K=X.alternate;if(!K){var H=rX(X);if(H===null)throw new Error("Unable to find node on an unmounted component.");if(H!==X)return null;return X}var L=X,N=K;while(!0){var D=L.return;if(D===null)break;var C=D.alternate;if(C===null){var I=D.return;if(I!==null){L=N=I;continue}break}if(D.child===C.child){var b=D.child;while(b){if(b===L)return wb(D),X;if(b===N)return wb(D),K;b=b.sibling}throw new Error("Unable to find node on an unmounted component.")}if(L.return!==N.return)L=D,N=C;else{var S=!1,g=D.child;while(g){if(g===L){S=!0,L=D,N=C;break}if(g===N){S=!0,N=D,L=C;break}g=g.sibling}if(!S){g=C.child;while(g){if(g===L){S=!0,L=C,N=D;break}if(g===N){S=!0,N=C,L=D;break}g=g.sibling}if(!S)throw new Error("Child was not found in either parent set. This indicates a bug in React related to the return pointer. Please file an issue.")}}if(L.alternate!==N)throw new Error("Return fibers should always be each others' alternates. This error is likely caused by a bug in React. Please file an issue.")}if(L.tag!==B)throw new Error("Unable to find node on an unmounted component.");if(L.stateNode.current===L)return X;return K}function Pb(X){var K=Ib(X);return K!==null?Tb(K):null}function Tb(X){if(X.tag===O||X.tag===R)return X;var K=X.child;while(K!==null){var H=Tb(K);if(H!==null)return H;K=K.sibling}return null}function O80(X){var K=Ib(X);return K!==null?bb(K):null}function bb(X){if(X.tag===O||X.tag===R)return X;var K=X.child;while(K!==null){if(K.tag!==M){var H=bb(K);if(H!==null)return H}K=K.sibling}return null}var xb=Q.unstable_scheduleCallback,V80=Q.unstable_cancelCallback,D80=Q.unstable_shouldYield,R80=Q.unstable_requestPaint,p5=Q.unstable_now,j80=Q.unstable_getCurrentPriorityLevel,GL=Q.unstable_ImmediatePriority,_D=Q.unstable_UserBlockingPriority,aX=Q.unstable_NormalPriority,_80=Q.unstable_LowPriority,ED=Q.unstable_IdlePriority,E80=Q.unstable_yieldValue,C80=Q.unstable_setDisableYieldValue,oX=null,$J=null,c0=null,ZQ=!1,M1=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!=="undefined";function A80(X){if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__==="undefined")return!1;var K=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(K.isDisabled)return!0;if(!K.supportsFiber)return W("The installed version of React DevTools is too old and will not work with the current version of React. Please update React DevTools. https://reactjs.org/link/react-devtools"),!0;try{if(_6)X=y6({},X,{getLaneLabelMap:b80,injectProfilingHooks:T80});oX=K.inject(X),$J=K}catch(H){W("React instrumentation encountered an error: %s.",H)}if(K.checkDCE)return!0;else return!1}function k80(X,K){if($J&&typeof $J.onScheduleFiberRoot==="function")try{$J.onScheduleFiberRoot(oX,X,K)}catch(H){if(!ZQ)ZQ=!0,W("React instrumentation encountered an error: %s",H)}}function w80(X,K){if($J&&typeof $J.onCommitFiberRoot==="function")try{var H=(X.current.flags&M8)===M8;if(x6){var L;switch(K){case z4:L=GL;break;case WZ:L=_D;break;case GZ:L=aX;break;case ML:L=ED;break;default:L=aX;break}$J.onCommitFiberRoot(oX,X,L,H)}else $J.onCommitFiberRoot(oX,X,void 0,H)}catch(N){if(!ZQ)ZQ=!0,W("React instrumentation encountered an error: %s",N)}}function I80(X){if($J&&typeof $J.onPostCommitFiberRoot==="function")try{$J.onPostCommitFiberRoot(oX,X)}catch(K){if(!ZQ)ZQ=!0,W("React instrumentation encountered an error: %s",K)}}function P80(X){if($J&&typeof $J.onCommitFiberUnmount==="function")try{$J.onCommitFiberUnmount(oX,X)}catch(K){if(!ZQ)ZQ=!0,W("React instrumentation encountered an error: %s",K)}}function d5(X){{if(typeof E80==="function")C80(X),Y(X);if($J&&typeof $J.setStrictMode==="function")try{$J.setStrictMode(oX,X)}catch(K){if(!ZQ)ZQ=!0,W("React instrumentation encountered an error: %s",K)}}}function T80(X){c0=X}function b80(){{var X=new Map,K=1;for(var H=0;H<AD;H++){var L=t80(K);X.set(K,L),K*=2}return X}}function x80(X){if(c0!==null&&typeof c0.markCommitStarted==="function")c0.markCommitStarted(X)}function yb(){if(c0!==null&&typeof c0.markCommitStopped==="function")c0.markCommitStopped()}function DG(X){if(c0!==null&&typeof c0.markComponentRenderStarted==="function")c0.markComponentRenderStarted(X)}function $$(){if(c0!==null&&typeof c0.markComponentRenderStopped==="function")c0.markComponentRenderStopped()}function y80(X){if(c0!==null&&typeof c0.markComponentPassiveEffectMountStarted==="function")c0.markComponentPassiveEffectMountStarted(X)}function v80(){if(c0!==null&&typeof c0.markComponentPassiveEffectMountStopped==="function")c0.markComponentPassiveEffectMountStopped()}function S80(X){if(c0!==null&&typeof c0.markComponentPassiveEffectUnmountStarted==="function")c0.markComponentPassiveEffectUnmountStarted(X)}function f80(){if(c0!==null&&typeof c0.markComponentPassiveEffectUnmountStopped==="function")c0.markComponentPassiveEffectUnmountStopped()}function g80(X){if(c0!==null&&typeof c0.markComponentLayoutEffectMountStarted==="function")c0.markComponentLayoutEffectMountStarted(X)}function m80(){if(c0!==null&&typeof c0.markComponentLayoutEffectMountStopped==="function")c0.markComponentLayoutEffectMountStopped()}function vb(X){if(c0!==null&&typeof c0.markComponentLayoutEffectUnmountStarted==="function")c0.markComponentLayoutEffectUnmountStarted(X)}function Sb(){if(c0!==null&&typeof c0.markComponentLayoutEffectUnmountStopped==="function")c0.markComponentLayoutEffectUnmountStopped()}function h80(X,K,H){if(c0!==null&&typeof c0.markComponentErrored==="function")c0.markComponentErrored(X,K,H)}function u80(X,K,H){if(c0!==null&&typeof c0.markComponentSuspended==="function")c0.markComponentSuspended(X,K,H)}function c80(X){if(c0!==null&&typeof c0.markLayoutEffectsStarted==="function")c0.markLayoutEffectsStarted(X)}function p80(){if(c0!==null&&typeof c0.markLayoutEffectsStopped==="function")c0.markLayoutEffectsStopped()}function d80(X){if(c0!==null&&typeof c0.markPassiveEffectsStarted==="function")c0.markPassiveEffectsStarted(X)}function l80(){if(c0!==null&&typeof c0.markPassiveEffectsStopped==="function")c0.markPassiveEffectsStopped()}function fb(X){if(c0!==null&&typeof c0.markRenderStarted==="function")c0.markRenderStarted(X)}function i80(){if(c0!==null&&typeof c0.markRenderYielded==="function")c0.markRenderYielded()}function gb(){if(c0!==null&&typeof c0.markRenderStopped==="function")c0.markRenderStopped()}function n80(X){if(c0!==null&&typeof c0.markRenderScheduled==="function")c0.markRenderScheduled(X)}function s80(X,K){if(c0!==null&&typeof c0.markForceUpdateScheduled==="function")c0.markForceUpdateScheduled(X,K)}function CD(X,K){if(c0!==null&&typeof c0.markStateUpdateScheduled==="function")c0.markStateUpdateScheduled(X,K)}var H6=0,r6=1,g8=2,p9=8,qQ=16,mb=Math.clz32?Math.clz32:o80,r80=Math.log,a80=Math.LN2;function o80(X){var K=X>>>0;if(K===0)return 32;return 31-(r80(K)/a80|0)|0}var AD=31,O0=0,l5=0,V6=1,W$=2,$Z=4,tX=8,XQ=16,RG=32,G$=4194240,jG=64,kD=128,wD=256,ID=512,PD=1024,TD=2048,bD=4096,xD=8192,yD=16384,vD=32768,SD=65536,fD=131072,gD=262144,mD=524288,hD=1048576,uD=2097152,HL=130023424,H$=4194304,cD=8388608,pD=16777216,dD=33554432,lD=67108864,hb=H$,_G=134217728,ub=268435455,EG=268435456,eX=536870912,G4=1073741824;function t80(X){{if(X&V6)return"Sync";if(X&W$)return"InputContinuousHydration";if(X&$Z)return"InputContinuous";if(X&tX)return"DefaultHydration";if(X&XQ)return"Default";if(X&RG)return"TransitionHydration";if(X&G$)return"Transition";if(X&HL)return"Retry";if(X&_G)return"SelectiveHydration";if(X&EG)return"IdleHydration";if(X&eX)return"Idle";if(X&G4)return"Offscreen"}}var z9=-1,zL=jG,UL=H$;function CG(X){switch(JY(X)){case V6:return V6;case W$:return W$;case $Z:return $Z;case tX:return tX;case XQ:return XQ;case RG:return RG;case jG:case kD:case wD:case ID:case PD:case TD:case bD:case xD:case yD:case vD:case SD:case fD:case gD:case mD:case hD:case uD:return X&G$;case H$:case cD:case pD:case dD:case lD:return X&HL;case _G:return _G;case EG:return EG;case eX:return eX;case G4:return G4;default:return W("Should have found matching lanes. This is a bug in React."),X}}function LL(X,K){var H=X.pendingLanes;if(H===O0)return O0;var L=O0,N=X.suspendedLanes,D=X.pingedLanes,C=H&ub;if(C!==O0){var I=C&~N;if(I!==O0)L=CG(I);else{var b=C&D;if(b!==O0)L=CG(b)}}else{var S=H&~N;if(S!==O0)L=CG(S);else if(D!==O0)L=CG(D)}if(L===O0)return O0;if(K!==O0&&K!==L&&(K&N)===O0){var g=JY(L),n=JY(K);if(g>=n||g===XQ&&(n&G$)!==O0)return K}if((L&$Z)!==O0)L|=H&XQ;var i=X.entangledLanes;if(i!==O0){var K0=X.entanglements,$0=L&i;while($0>0){var H0=QY($0),S0=1<<H0;L|=K0[H0],$0&=~S0}}return L}function e80(X,K){var H=X.eventTimes,L=z9;while(K>0){var N=QY(K),D=1<<N,C=H[N];if(C>L)L=C;K&=~D}return L}function J90(X,K){switch(X){case V6:case W$:case $Z:return K+250;case tX:case XQ:case RG:case jG:case kD:case wD:case ID:case PD:case TD:case bD:case xD:case yD:case vD:case SD:case fD:case gD:case mD:case hD:case uD:return K+5000;case H$:case cD:case pD:case dD:case lD:return z9;case _G:case EG:case eX:case G4:return z9;default:return W("Should have found matching lanes. This is a bug in React."),z9}}function Q90(X,K){var{pendingLanes:H,suspendedLanes:L,pingedLanes:N,expirationTimes:D}=X,C=H;while(C>0){var I=QY(C),b=1<<I,S=D[I];if(S===z9){if((b&L)===O0||(b&N)!==O0)D[I]=J90(b,K)}else if(S<=K)X.expiredLanes|=b;C&=~b}}function Z90(X){return CG(X.pendingLanes)}function iD(X){var K=X.pendingLanes&~G4;if(K!==O0)return K;if(K&G4)return G4;return O0}function q90(X){return(X&V6)!==O0}function nD(X){return(X&ub)!==O0}function cb(X){return(X&HL)===X}function X90(X){var K=V6|$Z|XQ;return(X&K)===O0}function Y90(X){return(X&G$)===X}function FL(X,K){var H=W$|$Z|tX|XQ;return(K&H)!==O0}function K90(X,K){return(K&X.expiredLanes)!==O0}function pb(X){return(X&G$)!==O0}function db(){var X=zL;if(zL<<=1,(zL&G$)===O0)zL=jG;return X}function $90(){var X=UL;if(UL<<=1,(UL&HL)===O0)UL=H$;return X}function JY(X){return X&-X}function AG(X){return JY(X)}function QY(X){return 31-mb(X)}function sD(X){return QY(X)}function H4(X,K){return(X&K)!==O0}function z$(X,K){return(X&K)===K}function f6(X,K){return X|K}function BL(X,K){return X&~K}function lb(X,K){return X&K}function NL(X){return X}function W90(X,K){return X!==l5&&X<K?X:K}function rD(X){var K=[];for(var H=0;H<AD;H++)K.push(X);return K}function kG(X,K,H){if(X.pendingLanes|=K,K!==eX)X.suspendedLanes=O0,X.pingedLanes=O0;var L=X.eventTimes,N=sD(K);L[N]=H}function G90(X,K){X.suspendedLanes|=K,X.pingedLanes&=~K;var H=X.expirationTimes,L=K;while(L>0){var N=QY(L),D=1<<N;H[N]=z9,L&=~D}}function ib(X,K,H){X.pingedLanes|=X.suspendedLanes&K}function H90(X,K){var H=X.pendingLanes&~K;X.pendingLanes=K,X.suspendedLanes=O0,X.pingedLanes=O0,X.expiredLanes&=K,X.mutableReadLanes&=K,X.entangledLanes&=K;var{entanglements:L,eventTimes:N,expirationTimes:D}=X,C=H;while(C>0){var I=QY(C),b=1<<I;L[I]=O0,N[I]=z9,D[I]=z9,C&=~b}}function aD(X,K){var H=X.entangledLanes|=K,L=X.entanglements,N=H;while(N){var D=QY(N),C=1<<D;if(C&K|L[D]&K)L[D]|=K;N&=~C}}function z90(X,K){var H=JY(K),L;switch(H){case $Z:L=W$;break;case XQ:L=tX;break;case jG:case kD:case wD:case ID:case PD:case TD:case bD:case xD:case yD:case vD:case SD:case fD:case gD:case mD:case hD:case uD:case H$:case cD:case pD:case dD:case lD:L=RG;break;case eX:L=EG;break;default:L=l5;break}if((L&(X.suspendedLanes|K))!==l5)return l5;return L}function nb(X,K,H){if(!M1)return;var L=X.pendingUpdatersLaneMap;while(H>0){var N=sD(H),D=1<<N,C=L[N];C.add(K),H&=~D}}function sb(X,K){if(!M1)return;var{pendingUpdatersLaneMap:H,memoizedUpdaters:L}=X;while(K>0){var N=sD(K),D=1<<N,C=H[N];if(C.size>0)C.forEach(function(I){var b=I.alternate;if(b===null||!L.has(b))L.add(I)}),C.clear();K&=~D}}function rb(X,K){return null}var z4=V6,WZ=$Z,GZ=XQ,ML=eX,wG=l5;function O1(){return wG}function i5(X){wG=X}function U90(X,K){var H=wG;try{return wG=X,K()}finally{wG=H}}function L90(X,K){return X!==0&&X<K?X:K}function F90(X,K){return X===0||X>K?X:K}function oD(X,K){return X!==0&&X<K}function ab(X){var K=JY(X);if(!oD(z4,K))return z4;if(!oD(WZ,K))return WZ;if(nD(K))return GZ;return ML}function OL(X){var K=X.current.memoizedState;return K.isDehydrated}var ob;function B90(X){ob=X}function N90(X){ob(X)}var tD;function M90(X){tD=X}var tb;function O90(X){tb=X}var eb;function V90(X){eb=X}var Jx;function D90(X){Jx=X}var eD=!1,VL=[],Vq=null,Dq=null,Rq=null,IG=new Map,PG=new Map,jq=[],R90=["mousedown","mouseup","touchcancel","touchend","touchstart","auxclick","dblclick","pointercancel","pointerdown","pointerup","dragend","dragstart","drop","compositionend","compositionstart","keydown","keypress","keyup","input","textInput","copy","cut","paste","click","change","contextmenu","reset","submit"];function j90(X){return R90.indexOf(X)>-1}function _90(X,K,H,L,N){return{blockedOn:X,domEventName:K,eventSystemFlags:H,nativeEvent:N,targetContainers:[L]}}function Qx(X,K){switch(X){case"focusin":case"focusout":Vq=null;break;case"dragenter":case"dragleave":Dq=null;break;case"mouseover":case"mouseout":Rq=null;break;case"pointerover":case"pointerout":{var H=K.pointerId;IG.delete(H);break}case"gotpointercapture":case"lostpointercapture":{var L=K.pointerId;PG.delete(L);break}}}function TG(X,K,H,L,N,D){if(X===null||X.nativeEvent!==D){var C=_90(K,H,L,N,D);if(K!==null){var I=Cq(K);if(I!==null)tD(I)}return C}X.eventSystemFlags|=L;var b=X.targetContainers;if(N!==null&&b.indexOf(N)===-1)b.push(N);return X}function E90(X,K,H,L,N){switch(K){case"focusin":{var D=N;return Vq=TG(Vq,X,K,H,L,D),!0}case"dragenter":{var C=N;return Dq=TG(Dq,X,K,H,L,C),!0}case"mouseover":{var I=N;return Rq=TG(Rq,X,K,H,L,I),!0}case"pointerover":{var b=N,S=b.pointerId;return IG.set(S,TG(IG.get(S)||null,X,K,H,L,b)),!0}case"gotpointercapture":{var g=N,n=g.pointerId;return PG.set(n,TG(PG.get(n)||null,X,K,H,L,g)),!0}}return!1}function Zx(X){var K=XY(X.target);if(K!==null){var H=rX(K);if(H!==null){var L=H.tag;if(L===k){var N=Ab(H);if(N!==null){X.blockedOn=N,Jx(X.priority,function(){tb(H)});return}}else if(L===B){var D=H.stateNode;if(OL(D)){X.blockedOn=kb(H);return}}}}X.blockedOn=null}function C90(X){var K=eb(),H={blockedOn:null,target:X,priority:K},L=0;for(;L<jq.length;L++)if(!oD(K,jq[L].priority))break;if(jq.splice(L,0,H),L===0)Zx(H)}function DL(X){if(X.blockedOn!==null)return!1;var K=X.targetContainers;while(K.length>0){var H=K[0],L=ZR(X.domEventName,X.eventSystemFlags,H,X.nativeEvent);if(L===null){var N=X.nativeEvent,D=new N.constructor(N.type,N);o60(D),N.target.dispatchEvent(D),t60()}else{var C=Cq(L);if(C!==null)tD(C);return X.blockedOn=L,!1}K.shift()}return!0}function qx(X,K,H){if(DL(X))H.delete(K)}function A90(){if(eD=!1,Vq!==null&&DL(Vq))Vq=null;if(Dq!==null&&DL(Dq))Dq=null;if(Rq!==null&&DL(Rq))Rq=null;IG.forEach(qx),PG.forEach(qx)}function bG(X,K){if(X.blockedOn===K){if(X.blockedOn=null,!eD)eD=!0,Q.unstable_scheduleCallback(Q.unstable_NormalPriority,A90)}}function xG(X){if(VL.length>0){bG(VL[0],X);for(var K=1;K<VL.length;K++){var H=VL[K];if(H.blockedOn===X)H.blockedOn=null}}if(Vq!==null)bG(Vq,X);if(Dq!==null)bG(Dq,X);if(Rq!==null)bG(Rq,X);var L=function(I){return bG(I,X)};IG.forEach(L),PG.forEach(L);for(var N=0;N<jq.length;N++){var D=jq[N];if(D.blockedOn===X)D.blockedOn=null}while(jq.length>0){var C=jq[0];if(C.blockedOn!==null)break;else if(Zx(C),C.blockedOn===null)jq.shift()}}var U$=Z.ReactCurrentBatchConfig,JR=!0;function Xx(X){JR=!!X}function k90(){return JR}function w90(X,K,H){var L=Yx(K),N;switch(L){case z4:N=I90;break;case WZ:N=P90;break;case GZ:default:N=QR;break}return N.bind(null,K,H,X)}function I90(X,K,H,L){var N=O1(),D=U$.transition;U$.transition=null;try{i5(z4),QR(X,K,H,L)}finally{i5(N),U$.transition=D}}function P90(X,K,H,L){var N=O1(),D=U$.transition;U$.transition=null;try{i5(WZ),QR(X,K,H,L)}finally{i5(N),U$.transition=D}}function QR(X,K,H,L){if(!JR)return;T90(X,K,H,L)}function T90(X,K,H,L){var N=ZR(X,K,H,L);if(N===null){NR(X,K,L,RL,H),Qx(X,L);return}if(E90(N,X,K,H,L)){L.stopPropagation();return}if(Qx(X,L),K&LG&&j90(X)){while(N!==null){var D=Cq(N);if(D!==null)N90(D);var C=ZR(X,K,H,L);if(C===null)NR(X,K,L,RL,H);if(C===N)break;N=C}if(N!==null)L.stopPropagation();return}NR(X,K,L,null,H)}var RL=null;function ZR(X,K,H,L){RL=null;var N=GD(L),D=XY(N);if(D!==null){var C=rX(D);if(C===null)D=null;else{var I=C.tag;if(I===k){var b=Ab(C);if(b!==null)return b;D=null}else if(I===B){var S=C.stateNode;if(OL(S))return kb(C);D=null}else if(C!==D)D=null}}return RL=D,null}function Yx(X){switch(X){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return z4;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return WZ;case"message":{var K=j80();switch(K){case GL:return z4;case _D:return WZ;case aX:case _80:return GZ;case ED:return ML;default:return GZ}}default:return GZ}}function b90(X,K,H){return X.addEventListener(K,H,!1),H}function x90(X,K,H){return X.addEventListener(K,H,!0),H}function y90(X,K,H,L){return X.addEventListener(K,H,{capture:!0,passive:L}),H}function v90(X,K,H,L){return X.addEventListener(K,H,{passive:L}),H}var yG=null,qR=null,vG=null;function S90(X){return yG=X,qR=$x(),!0}function f90(){yG=null,qR=null,vG=null}function Kx(){if(vG)return vG;var X,K=qR,H=K.length,L,N=$x(),D=N.length;for(X=0;X<H;X++)if(K[X]!==N[X])break;var C=H-X;for(L=1;L<=C;L++)if(K[H-L]!==N[D-L])break;var I=L>1?1-L:void 0;return vG=N.slice(X,I),vG}function $x(){if("value"in yG)return yG.value;return yG.textContent}function jL(X){var K,H=X.keyCode;if("charCode"in X){if(K=X.charCode,K===0&&H===13)K=13}else K=H;if(K===10)K=13;if(K>=32||K===13)return K;return 0}function _L(){return!0}function Wx(){return!1}function U4(X){function K(H,L,N,D,C){this._reactName=H,this._targetInst=N,this.type=L,this.nativeEvent=D,this.target=C,this.currentTarget=null;for(var I in X){if(!X.hasOwnProperty(I))continue;var b=X[I];if(b)this[I]=b(D);else this[I]=D[I]}var S=D.defaultPrevented!=null?D.defaultPrevented:D.returnValue===!1;if(S)this.isDefaultPrevented=_L;else this.isDefaultPrevented=Wx;return this.isPropagationStopped=Wx,this}return y6(K.prototype,{preventDefault:function(){this.defaultPrevented=!0;var H=this.nativeEvent;if(!H)return;if(H.preventDefault)H.preventDefault();else if(typeof H.returnValue!=="unknown")H.returnValue=!1;this.isDefaultPrevented=_L},stopPropagation:function(){var H=this.nativeEvent;if(!H)return;if(H.stopPropagation)H.stopPropagation();else if(typeof H.cancelBubble!=="unknown")H.cancelBubble=!0;this.isPropagationStopped=_L},persist:function(){},isPersistent:_L}),K}var L$={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(X){return X.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},XR=U4(L$),SG=y6({},L$,{view:0,detail:0}),g90=U4(SG),YR,KR,fG;function m90(X){if(X!==fG){if(fG&&X.type==="mousemove")YR=X.screenX-fG.screenX,KR=X.screenY-fG.screenY;else YR=0,KR=0;fG=X}}var EL=y6({},SG,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:WR,button:0,buttons:0,relatedTarget:function(X){if(X.relatedTarget===void 0)return X.fromElement===X.srcElement?X.toElement:X.fromElement;return X.relatedTarget},movementX:function(X){if("movementX"in X)return X.movementX;return m90(X),YR},movementY:function(X){if("movementY"in X)return X.movementY;return KR}}),Gx=U4(EL),h90=y6({},EL,{dataTransfer:0}),u90=U4(h90),c90=y6({},SG,{relatedTarget:0}),$R=U4(c90),p90=y6({},L$,{animationName:0,elapsedTime:0,pseudoElement:0}),d90=U4(p90),l90=y6({},L$,{clipboardData:function(X){return"clipboardData"in X?X.clipboardData:window.clipboardData}}),i90=U4(l90),n90=y6({},L$,{data:0}),Hx=U4(n90),s90=Hx,r90={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},a90={"8":"Backspace","9":"Tab","12":"Clear","13":"Enter","16":"Shift","17":"Control","18":"Alt","19":"Pause","20":"CapsLock","27":"Escape","32":" ","33":"PageUp","34":"PageDown","35":"End","36":"Home","37":"ArrowLeft","38":"ArrowUp","39":"ArrowRight","40":"ArrowDown","45":"Insert","46":"Delete","112":"F1","113":"F2","114":"F3","115":"F4","116":"F5","117":"F6","118":"F7","119":"F8","120":"F9","121":"F10","122":"F11","123":"F12","144":"NumLock","145":"ScrollLock","224":"Meta"};function o90(X){if(X.key){var K=r90[X.key]||X.key;if(K!=="Unidentified")return K}if(X.type==="keypress"){var H=jL(X);return H===13?"Enter":String.fromCharCode(H)}if(X.type==="keydown"||X.type==="keyup")return a90[X.keyCode]||"Unidentified";return""}var t90={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function e90(X){var K=this,H=K.nativeEvent;if(H.getModifierState)return H.getModifierState(X);var L=t90[X];return L?!!H[L]:!1}function WR(X){return e90}var J50=y6({},SG,{key:o90,code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:WR,charCode:function(X){if(X.type==="keypress")return jL(X);return 0},keyCode:function(X){if(X.type==="keydown"||X.type==="keyup")return X.keyCode;return 0},which:function(X){if(X.type==="keypress")return jL(X);if(X.type==="keydown"||X.type==="keyup")return X.keyCode;return 0}}),Q50=U4(J50),Z50=y6({},EL,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zx=U4(Z50),q50=y6({},SG,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:WR}),X50=U4(q50),Y50=y6({},L$,{propertyName:0,elapsedTime:0,pseudoElement:0}),K50=U4(Y50),$50=y6({},EL,{deltaX:function(X){return"deltaX"in X?X.deltaX:("wheelDeltaX"in X)?-X.wheelDeltaX:0},deltaY:function(X){return"deltaY"in X?X.deltaY:("wheelDeltaY"in X)?-X.wheelDeltaY:("wheelDelta"in X)?-X.wheelDelta:0},deltaZ:0,deltaMode:0}),W50=U4($50),G50=[9,13,27,32],Ux=229,GR=R8&&"CompositionEvent"in window,gG=null;if(R8&&"documentMode"in document)gG=document.documentMode;var H50=R8&&"TextEvent"in window&&!gG,Lx=R8&&(!GR||gG&&gG>8&&gG<=11),Fx=32,Bx=String.fromCharCode(Fx);function z50(){I6("onBeforeInput",["compositionend","keypress","textInput","paste"]),I6("onCompositionEnd",["compositionend","focusout","keydown","keypress","keyup","mousedown"]),I6("onCompositionStart",["compositionstart","focusout","keydown","keypress","keyup","mousedown"]),I6("onCompositionUpdate",["compositionupdate","focusout","keydown","keypress","keyup","mousedown"])}var Nx=!1;function U50(X){return(X.ctrlKey||X.altKey||X.metaKey)&&!(X.ctrlKey&&X.altKey)}function L50(X){switch(X){case"compositionstart":return"onCompositionStart";case"compositionend":return"onCompositionEnd";case"compositionupdate":return"onCompositionUpdate"}}function F50(X,K){return X==="keydown"&&K.keyCode===Ux}function Mx(X,K){switch(X){case"keyup":return G50.indexOf(K.keyCode)!==-1;case"keydown":return K.keyCode!==Ux;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ox(X){var K=X.detail;if(typeof K==="object"&&"data"in K)return K.data;return null}function Vx(X){return X.locale==="ko"}var F$=!1;function B50(X,K,H,L,N){var D,C;if(GR)D=L50(K);else if(!F$){if(F50(K,L))D="onCompositionStart"}else if(Mx(K,L))D="onCompositionEnd";if(!D)return null;if(Lx&&!Vx(L)){if(!F$&&D==="onCompositionStart")F$=S90(N);else if(D==="onCompositionEnd"){if(F$)C=Kx()}}var I=IL(H,D);if(I.length>0){var b=new Hx(D,K,null,L,N);if(X.push({event:b,listeners:I}),C)b.data=C;else{var S=Ox(L);if(S!==null)b.data=S}}}function N50(X,K){switch(X){case"compositionend":return Ox(K);case"keypress":var H=K.which;if(H!==Fx)return null;return Nx=!0,Bx;case"textInput":var L=K.data;if(L===Bx&&Nx)return null;return L;default:return null}}function M50(X,K){if(F$){if(X==="compositionend"||!GR&&Mx(X,K)){var H=Kx();return f90(),F$=!1,H}return null}switch(X){case"paste":return null;case"keypress":if(!U50(K)){if(K.char&&K.char.length>1)return K.char;else if(K.which)return String.fromCharCode(K.which)}return null;case"compositionend":return Lx&&!Vx(K)?null:K.data;default:return null}}function O50(X,K,H,L,N){var D;if(H50)D=N50(K,L);else D=M50(K,L);if(!D)return null;var C=IL(H,"onBeforeInput");if(C.length>0){var I=new s90("onBeforeInput","beforeinput",null,L,N);X.push({event:I,listeners:C}),I.data=D}}function V50(X,K,H,L,N,D,C){B50(X,K,H,L,N),O50(X,K,H,L,N)}var D50={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dx(X){var K=X&&X.nodeName&&X.nodeName.toLowerCase();if(K==="input")return!!D50[X.type];if(K==="textarea")return!0;return!1}function R50(X){if(!R8)return!1;var K="on"+X,H=K in document;if(!H){var L=document.createElement("div");L.setAttribute(K,"return;"),H=typeof L[K]==="function"}return H}function j50(){I6("onChange",["change","click","focusin","focusout","input","keydown","keyup","selectionchange"])}function Rx(X,K,H,L){Ob(L);var N=IL(K,"onChange");if(N.length>0){var D=new XR("onChange","change",null,H,L);X.push({event:D,listeners:N})}}var mG=null,hG=null;function _50(X){var K=X.nodeName&&X.nodeName.toLowerCase();return K==="select"||K==="input"&&X.type==="file"}function E50(X){var K=[];Rx(K,hG,X,GD(X)),jb(C50,K)}function C50(X){mx(X,0)}function CL(X){var K=D$(X);if(aK(K))return X}function A50(X,K){if(X==="change")return K}var jx=!1;if(R8)jx=R50("input")&&(!document.documentMode||document.documentMode>9);function k50(X,K){mG=X,hG=K,mG.attachEvent("onpropertychange",Ex)}function _x(){if(!mG)return;mG.detachEvent("onpropertychange",Ex),mG=null,hG=null}function Ex(X){if(X.propertyName!=="value")return;if(CL(hG))E50(X)}function w50(X,K,H){if(X==="focusin")_x(),k50(K,H);else if(X==="focusout")_x()}function I50(X,K){if(X==="selectionchange"||X==="keyup"||X==="keydown")return CL(hG)}function P50(X){var K=X.nodeName;return K&&K.toLowerCase()==="input"&&(X.type==="checkbox"||X.type==="radio")}function T50(X,K){if(X==="click")return CL(K)}function b50(X,K){if(X==="input"||X==="change")return CL(K)}function x50(X){var K=X._wrapperState;if(!K||!K.controlled||X.type!=="number")return;x8(X,"number",X.value)}function y50(X,K,H,L,N,D,C){var I=H?D$(H):window,b,S;if(_50(I))b=A50;else if(Dx(I))if(jx)b=b50;else b=I50,S=w50;else if(P50(I))b=T50;if(b){var g=b(K,H);if(g){Rx(X,g,L,N);return}}if(S)S(K,I,H);if(K==="focusout")x50(I)}function v50(){J9("onMouseEnter",["mouseout","mouseover"]),J9("onMouseLeave",["mouseout","mouseover"]),J9("onPointerEnter",["pointerout","pointerover"]),J9("onPointerLeave",["pointerout","pointerover"])}function S50(X,K,H,L,N,D,C){var I=K==="mouseover"||K==="pointerover",b=K==="mouseout"||K==="pointerout";if(I&&!e60(L)){var S=L.relatedTarget||L.fromElement;if(S){if(XY(S)||QH(S))return}}if(!b&&!I)return;var g;if(N.window===N)g=N;else{var n=N.ownerDocument;if(n)g=n.defaultView||n.parentWindow;else g=window}var i,K0;if(b){var $0=L.relatedTarget||L.toElement;if(i=H,K0=$0?XY($0):null,K0!==null){var H0=rX(K0);if(K0!==H0||K0.tag!==O&&K0.tag!==R)K0=null}}else i=null,K0=H;if(i===K0)return;var S0=Gx,$6="onMouseLeave",Q6="onMouseEnter",n6="mouse";if(K==="pointerout"||K==="pointerover")S0=zx,$6="onPointerLeave",Q6="onPointerEnter",n6="pointer";var s6=i==null?g:D$(i),Z0=K0==null?g:D$(K0),L0=new S0($6,n6+"leave",i,L,N);L0.target=s6,L0.relatedTarget=Z0;var q0=null,E0=XY(N);if(E0===H){var i0=new S0(Q6,n6+"enter",K0,L,N);i0.target=Z0,i0.relatedTarget=s6,q0=i0}KJ0(X,L0,q0,i,K0)}function f50(X,K){return X===K&&(X!==0||1/X===1/K)||X!==X&&K!==K}var L4=typeof Object.is==="function"?Object.is:f50;function uG(X,K){if(L4(X,K))return!0;if(typeof X!=="object"||X===null||typeof K!=="object"||K===null)return!1;var H=Object.keys(X),L=Object.keys(K);if(H.length!==L.length)return!1;for(var N=0;N<H.length;N++){var D=H[N];if(!j8.call(K,D)||!L4(X[D],K[D]))return!1}return!0}function Cx(X){while(X&&X.firstChild)X=X.firstChild;return X}function g50(X){while(X){if(X.nextSibling)return X.nextSibling;X=X.parentNode}}function Ax(X,K){var H=Cx(X),L=0,N=0;while(H){if(H.nodeType===QZ){if(N=L+H.textContent.length,L<=K&&N>=K)return{node:H,offset:K-L};L=N}H=Cx(g50(H))}}function m50(X){var K=X.ownerDocument,H=K&&K.defaultView||window,L=H.getSelection&&H.getSelection();if(!L||L.rangeCount===0)return null;var{anchorNode:N,anchorOffset:D,focusNode:C,focusOffset:I}=L;try{N.nodeType,C.nodeType}catch(b){return null}return h50(X,N,D,C,I)}function h50(X,K,H,L,N){var D=0,C=-1,I=-1,b=0,S=0,g=X,n=null;J:while(!0){var i=null;while(!0){if(g===K&&(H===0||g.nodeType===QZ))C=D+H;if(g===L&&(N===0||g.nodeType===QZ))I=D+N;if(g.nodeType===QZ)D+=g.nodeValue.length;if((i=g.firstChild)===null)break;n=g,g=i}while(!0){if(g===X)break J;if(n===K&&++b===H)C=D;if(n===L&&++S===N)I=D;if((i=g.nextSibling)!==null)break;g=n,n=g.parentNode}g=i}if(C===-1||I===-1)return null;return{start:C,end:I}}function u50(X,K){var H=X.ownerDocument||document,L=H&&H.defaultView||window;if(!L.getSelection)return;var N=L.getSelection(),D=X.textContent.length,C=Math.min(K.start,D),I=K.end===void 0?C:Math.min(K.end,D);if(!N.extend&&C>I){var b=I;I=C,C=b}var S=Ax(X,C),g=Ax(X,I);if(S&&g){if(N.rangeCount===1&&N.anchorNode===S.node&&N.anchorOffset===S.offset&&N.focusNode===g.node&&N.focusOffset===g.offset)return;var n=H.createRange();if(n.setStart(S.node,S.offset),N.removeAllRanges(),C>I)N.addRange(n),N.extend(g.node,g.offset);else n.setEnd(g.node,g.offset),N.addRange(n)}}function kx(X){return X&&X.nodeType===QZ}function wx(X,K){if(!X||!K)return!1;else if(X===K)return!0;else if(kx(X))return!1;else if(kx(K))return wx(X,K.parentNode);else if("contains"in X)return X.contains(K);else if(X.compareDocumentPosition)return!!(X.compareDocumentPosition(K)&16);else return!1}function c50(X){return X&&X.ownerDocument&&wx(X.ownerDocument.documentElement,X)}function p50(X){try{return typeof X.contentWindow.location.href==="string"}catch(K){return!1}}function Ix(){var X=window,K=oK();while(K instanceof X.HTMLIFrameElement){if(p50(K))X=K.contentWindow;else return K;K=oK(X.document)}return K}function HR(X){var K=X&&X.nodeName&&X.nodeName.toLowerCase();return K&&(K==="input"&&(X.type==="text"||X.type==="search"||X.type==="tel"||X.type==="url"||X.type==="password")||K==="textarea"||X.contentEditable==="true")}function d50(){var X=Ix();return{focusedElem:X,selectionRange:HR(X)?i50(X):null}}function l50(X){var K=Ix(),H=X.focusedElem,L=X.selectionRange;if(K!==H&&c50(H)){if(L!==null&&HR(H))n50(H,L);var N=[],D=H;while(D=D.parentNode)if(D.nodeType===P7)N.push({element:D,left:D.scrollLeft,top:D.scrollTop});if(typeof H.focus==="function")H.focus();for(var C=0;C<N.length;C++){var I=N[C];I.element.scrollLeft=I.left,I.element.scrollTop=I.top}}}function i50(X){var K;if("selectionStart"in X)K={start:X.selectionStart,end:X.selectionEnd};else K=m50(X);return K||{start:0,end:0}}function n50(X,K){var{start:H,end:L}=K;if(L===void 0)L=H;if("selectionStart"in X)X.selectionStart=H,X.selectionEnd=Math.min(L,X.value.length);else u50(X,K)}var s50=R8&&"documentMode"in document&&document.documentMode<=11;function r50(){I6("onSelect",["focusout","contextmenu","dragend","focusin","keydown","keyup","mousedown","mouseup","selectionchange"])}var B$=null,zR=null,cG=null,UR=!1;function a50(X){if("selectionStart"in X&&HR(X))return{start:X.selectionStart,end:X.selectionEnd};else{var K=X.ownerDocument&&X.ownerDocument.defaultView||window,H=K.getSelection();return{anchorNode:H.anchorNode,anchorOffset:H.anchorOffset,focusNode:H.focusNode,focusOffset:H.focusOffset}}}function o50(X){return X.window===X?X.document:X.nodeType===ZZ?X:X.ownerDocument}function Px(X,K,H){var L=o50(H);if(UR||B$==null||B$!==oK(L))return;var N=a50(B$);if(!cG||!uG(cG,N)){cG=N;var D=IL(zR,"onSelect");if(D.length>0){var C=new XR("onSelect","select",null,K,H);X.push({event:C,listeners:D}),C.target=B$}}}function t50(X,K,H,L,N,D,C){var I=H?D$(H):window;switch(K){case"focusin":if(Dx(I)||I.contentEditable==="true")B$=I,zR=H,cG=null;break;case"focusout":B$=null,zR=null,cG=null;break;case"mousedown":UR=!0;break;case"contextmenu":case"mouseup":case"dragend":UR=!1,Px(X,L,N);break;case"selectionchange":if(s50)break;case"keydown":case"keyup":Px(X,L,N)}}function AL(X,K){var H={};return H[X.toLowerCase()]=K.toLowerCase(),H["Webkit"+X]="webkit"+K,H["Moz"+X]="moz"+K,H}var N$={animationend:AL("Animation","AnimationEnd"),animationiteration:AL("Animation","AnimationIteration"),animationstart:AL("Animation","AnimationStart"),transitionend:AL("Transition","TransitionEnd")},LR={},Tx={};if(R8){if(Tx=document.createElement("div").style,!("AnimationEvent"in window))delete N$.animationend.animation,delete N$.animationiteration.animation,delete N$.animationstart.animation;if(!("TransitionEvent"in window))delete N$.transitionend.transition}function kL(X){if(LR[X])return LR[X];else if(!N$[X])return X;var K=N$[X];for(var H in K)if(K.hasOwnProperty(H)&&H in Tx)return LR[X]=K[H];return X}var bx=kL("animationend"),xx=kL("animationiteration"),yx=kL("animationstart"),vx=kL("transitionend"),Sx=new Map,fx=["abort","auxClick","cancel","canPlay","canPlayThrough","click","close","contextMenu","copy","cut","drag","dragEnd","dragEnter","dragExit","dragLeave","dragOver","dragStart","drop","durationChange","emptied","encrypted","ended","error","gotPointerCapture","input","invalid","keyDown","keyPress","keyUp","load","loadedData","loadedMetadata","loadStart","lostPointerCapture","mouseDown","mouseMove","mouseOut","mouseOver","mouseUp","paste","pause","play","playing","pointerCancel","pointerDown","pointerMove","pointerOut","pointerOver","pointerUp","progress","rateChange","reset","resize","seeked","seeking","stalled","submit","suspend","timeUpdate","touchCancel","touchEnd","touchStart","volumeChange","scroll","toggle","touchMove","waiting","wheel"];function _q(X,K){Sx.set(X,K),I6(K,[X])}function e50(){for(var X=0;X<fx.length;X++){var K=fx[X],H=K.toLowerCase(),L=K[0].toUpperCase()+K.slice(1);_q(H,"on"+L)}_q(bx,"onAnimationEnd"),_q(xx,"onAnimationIteration"),_q(yx,"onAnimationStart"),_q("dblclick","onDoubleClick"),_q("focusin","onFocus"),_q("focusout","onBlur"),_q(vx,"onTransitionEnd")}function JJ0(X,K,H,L,N,D,C){var I=Sx.get(K);if(I===void 0)return;var b=XR,S=K;switch(K){case"keypress":if(jL(L)===0)return;case"keydown":case"keyup":b=Q50;break;case"focusin":S="focus",b=$R;break;case"focusout":S="blur",b=$R;break;case"beforeblur":case"afterblur":b=$R;break;case"click":if(L.button===2)return;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=Gx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=u90;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=X50;break;case bx:case xx:case yx:b=d90;break;case vx:b=K50;break;case"scroll":b=g90;break;case"wheel":b=W50;break;case"copy":case"cut":case"paste":b=i90;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=zx;break}var g=(D&LG)!==0;{var n=!g&&K==="scroll",i=XJ0(H,I,L.type,g,n);if(i.length>0){var K0=new b(I,S,null,L,N);X.push({event:K0,listeners:i})}}}e50(),v50(),j50(),r50(),z50();function QJ0(X,K,H,L,N,D,C){JJ0(X,K,H,L,N,D);var I=(D&a60)===0;if(I)S50(X,K,H,L,N),y50(X,K,H,L,N),t50(X,K,H,L,N),V50(X,K,H,L,N)}var pG=["abort","canplay","canplaythrough","durationchange","emptied","encrypted","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","resize","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],FR=new Set(["cancel","close","invalid","load","scroll","toggle"].concat(pG));function gx(X,K,H){var L=X.type||"unknown-event";X.currentTarget=H,W80(L,K,void 0,X),X.currentTarget=null}function ZJ0(X,K,H){var L;if(H)for(var N=K.length-1;N>=0;N--){var D=K[N],C=D.instance,I=D.currentTarget,b=D.listener;if(C!==L&&X.isPropagationStopped())return;gx(X,b,I),L=C}else for(var S=0;S<K.length;S++){var g=K[S],n=g.instance,i=g.currentTarget,K0=g.listener;if(n!==L&&X.isPropagationStopped())return;gx(X,K0,i),L=n}}function mx(X,K){var H=(K&LG)!==0;for(var L=0;L<X.length;L++){var N=X[L],D=N.event,C=N.listeners;ZJ0(D,C,H)}G80()}function qJ0(X,K,H,L,N){var D=GD(H),C=[];QJ0(C,X,L,H,D,K),mx(C,K)}function V9(X,K){if(!FR.has(X))W('Did not expect a listenToNonDelegatedEvent() call for "%s". This is a bug in React. Please file an issue.',X);var H=!1,L=x70(K),N=$J0(X,H);if(!L.has(N))hx(K,X,WD,H),L.add(N)}function BR(X,K,H){if(FR.has(X)&&!K)W('Did not expect a listenToNativeEvent() call for "%s" in the bubble phase. This is a bug in React. Please file an issue.',X);var L=0;if(K)L|=LG;hx(H,X,L,K)}var wL="_reactListening"+Math.random().toString(36).slice(2);function dG(X){if(!X[wL]){X[wL]=!0,$8.forEach(function(H){if(H!=="selectionchange"){if(!FR.has(H))BR(H,!1,X);BR(H,!0,X)}});var K=X.nodeType===ZZ?X:X.ownerDocument;if(K!==null){if(!K[wL])K[wL]=!0,BR("selectionchange",!1,K)}}}function hx(X,K,H,L,N){var D=w90(X,K,H),C=void 0;if(UD){if(K==="touchstart"||K==="touchmove"||K==="wheel")C=!0}X=X;var I;if(L)if(C!==void 0)I=y90(X,K,D,C);else I=x90(X,K,D);else if(C!==void 0)I=v90(X,K,D,C);else I=b90(X,K,D)}function ux(X,K){return X===K||X.nodeType===W5&&X.parentNode===K}function NR(X,K,H,L,N){var D=L;if((K&Nb)===0&&(K&WD)===0){var C=N;if(L!==null){var I=L;J:while(!0){if(I===null)return;var b=I.tag;if(b===B||b===M){var S=I.stateNode.containerInfo;if(ux(S,C))break;if(b===M){var g=I.return;while(g!==null){var n=g.tag;if(n===B||n===M){var i=g.stateNode.containerInfo;if(ux(i,C))return}g=g.return}}while(S!==null){var K0=XY(S);if(K0===null)return;var $0=K0.tag;if($0===O||$0===R){I=D=K0;continue J}S=S.parentNode}}I=I.return}}}jb(function(){return qJ0(X,K,H,D)})}function lG(X,K,H){return{instance:X,listener:K,currentTarget:H}}function XJ0(X,K,H,L,N,D){var C=K!==null?K+"Capture":null,I=L?C:K,b=[],S=X,g=null;while(S!==null){var n=S,i=n.stateNode,K0=n.tag;if(K0===O&&i!==null){if(g=i,I!==null){var $0=BG(S,I);if($0!=null)b.push(lG(S,$0,g))}}if(N)break;S=S.return}return b}function IL(X,K){var H=K+"Capture",L=[],N=X;while(N!==null){var D=N,C=D.stateNode,I=D.tag;if(I===O&&C!==null){var b=C,S=BG(N,H);if(S!=null)L.unshift(lG(N,S,b));var g=BG(N,K);if(g!=null)L.push(lG(N,g,b))}N=N.return}return L}function M$(X){if(X===null)return null;do X=X.return;while(X&&X.tag!==O);if(X)return X;return null}function YJ0(X,K){var H=X,L=K,N=0;for(var D=H;D;D=M$(D))N++;var C=0;for(var I=L;I;I=M$(I))C++;while(N-C>0)H=M$(H),N--;while(C-N>0)L=M$(L),C--;var b=N;while(b--){if(H===L||L!==null&&H===L.alternate)return H;H=M$(H),L=M$(L)}return null}function cx(X,K,H,L,N){var D=K._reactName,C=[],I=H;while(I!==null){if(I===L)break;var b=I,S=b.alternate,g=b.stateNode,n=b.tag;if(S!==null&&S===L)break;if(n===O&&g!==null){var i=g;if(N){var K0=BG(I,D);if(K0!=null)C.unshift(lG(I,K0,i))}else if(!N){var $0=BG(I,D);if($0!=null)C.push(lG(I,$0,i))}}I=I.return}if(C.length!==0)X.push({event:K,listeners:C})}function KJ0(X,K,H,L,N){var D=L&&N?YJ0(L,N):null;if(L!==null)cx(X,K,L,D,!1);if(N!==null&&H!==null)cx(X,H,N,D,!0)}function $J0(X,K){return X+"__"+(K?"capture":"bubble")}var T7=!1,iG="dangerouslySetInnerHTML",PL="suppressContentEditableWarning",Eq="suppressHydrationWarning",px="autoFocus",ZY="children",qY="style",TL="__html",MR,bL,nG,dx,xL,lx,ix;MR={dialog:!0,webview:!0},bL=function(X,K){p60(X,K),d60(X,K),r60(X,K,{registrationNameDependencies:G6,possibleRegistrationNames:i6})},lx=R8&&!document.documentMode,nG=function(X,K,H){if(T7)return;var L=yL(H),N=yL(K);if(N===L)return;T7=!0,W("Prop `%s` did not match. Server: %s Client: %s",X,JSON.stringify(N),JSON.stringify(L))},dx=function(X){if(T7)return;T7=!0;var K=[];X.forEach(function(H){K.push(H)}),W("Extra attributes from the server: %s",K)},xL=function(X,K){if(K===!1)W("Expected `%s` listener to be a function, instead got `false`.\n\nIf you used to conditionally omit it with %s={condition && value}, pass %s={condition ? value : undefined} instead.",X,X,X);else W("Expected `%s` listener to be a function, instead got a value of `%s` type.",X,typeof K)},ix=function(X,K){var H=X.namespaceURI===JZ?X.ownerDocument.createElement(X.tagName):X.ownerDocument.createElementNS(X.namespaceURI,X.tagName);return H.innerHTML=K,H.innerHTML};var WJ0=/\r\n?/g,GJ0=/\u0000|\uFFFD/g;function yL(X){kJ(X);var K=typeof X==="string"?X:""+X;return K.replace(WJ0,"\n").replace(GJ0,"")}function vL(X,K,H,L){var N=yL(K),D=yL(X);if(D===N)return;if(L){if(!T7)T7=!0,W('Text content did not match. Server: "%s" Client: "%s"',D,N)}if(H&&T0)throw new Error("Text content does not match server-rendered HTML.")}function nx(X){return X.nodeType===ZZ?X:X.ownerDocument}function HJ0(){}function SL(X){X.onclick=HJ0}function zJ0(X,K,H,L,N){for(var D in L){if(!L.hasOwnProperty(D))continue;var C=L[D];if(D===qY){if(C)Object.freeze(C);Hb(K,C)}else if(D===iG){var I=C?C[TL]:void 0;if(I!=null)Yb(K,I)}else if(D===ZY){if(typeof C==="string"){var b=X!=="textarea"||C!=="";if(b)qL(K,C)}else if(typeof C==="number")qL(K,""+C)}else if(D===PL||D===Eq);else if(D===px);else if(G6.hasOwnProperty(D)){if(C!=null){if(typeof C!=="function")xL(D,C);if(D==="onScroll")V9("scroll",K)}}else if(C!=null)F1(K,D,C,N)}}function UJ0(X,K,H,L){for(var N=0;N<K.length;N+=2){var D=K[N],C=K[N+1];if(D===qY)Hb(X,C);else if(D===iG)Yb(X,C);else if(D===ZY)qL(X,C);else F1(X,D,C,L)}}function LJ0(X,K,H,L){var N,D=nx(H),C,I=L;if(I===JZ)I=ZD(X);if(I===JZ){if(N=dX(X,K),!N&&X!==X.toLowerCase())W("<%s /> is using incorrect casing. Use PascalCase for React components, or lowercase for HTML elements.",X);if(X==="script"){var b=D.createElement("div");b.innerHTML="<script></script>";var S=b.firstChild;C=b.removeChild(S)}else if(typeof K.is==="string")C=D.createElement(X,{is:K.is});else if(C=D.createElement(X),X==="select"){var g=C;if(K.multiple)g.multiple=!0;else if(K.size)g.size=K.size}}else C=D.createElementNS(I,X);if(I===JZ){if(!N&&Object.prototype.toString.call(C)==="[object HTMLUnknownElement]"&&!j8.call(MR,X))MR[X]=!0,W("The tag <%s> is unrecognized in this browser. If you meant to render a React component, start its name with an uppercase letter.",X)}return C}function FJ0(X,K){return nx(K).createTextNode(X)}function BJ0(X,K,H,L){var N=dX(K,H);bL(K,H);var D;switch(K){case"dialog":V9("cancel",X),V9("close",X),D=H;break;case"iframe":case"object":case"embed":V9("load",X),D=H;break;case"video":case"audio":for(var C=0;C<pG.length;C++)V9(pG[C],X);D=H;break;case"source":V9("error",X),D=H;break;case"img":case"image":case"link":V9("error",X),V9("load",X),D=H;break;case"details":V9("toggle",X),D=H;break;case"input":U0(X,H),D=Y0(X,H),V9("invalid",X);break;case"option":S9(X,H),D=H;break;case"select":Jb(X,H),D=zG(X,H),V9("invalid",X);break;case"textarea":Zb(X,H),D=JD(X,H),V9("invalid",X);break;default:D=H}switch($D(K,D),zJ0(K,X,L,D,N),K){case"input":Mq(X),o0(X,H,!1);break;case"textarea":Mq(X),Xb(X);break;case"option":V5(X,H);break;case"select":z60(X,H);break;default:if(typeof D.onClick==="function")SL(X);break}}function NJ0(X,K,H,L,N){bL(K,L);var D=null,C,I;switch(K){case"input":C=Y0(X,H),I=Y0(X,L),D=[];break;case"select":C=zG(X,H),I=zG(X,L),D=[];break;case"textarea":C=JD(X,H),I=JD(X,L),D=[];break;default:if(C=H,I=L,typeof C.onClick!=="function"&&typeof I.onClick==="function")SL(X);break}$D(K,I);var b,S,g=null;for(b in C){if(I.hasOwnProperty(b)||!C.hasOwnProperty(b)||C[b]==null)continue;if(b===qY){var n=C[b];for(S in n)if(n.hasOwnProperty(S)){if(!g)g={};g[S]=""}}else if(b===iG||b===ZY);else if(b===PL||b===Eq);else if(b===px);else if(G6.hasOwnProperty(b)){if(!D)D=[]}else(D=D||[]).push(b,null)}for(b in I){var i=I[b],K0=C!=null?C[b]:void 0;if(!I.hasOwnProperty(b)||i===K0||i==null&&K0==null)continue;if(b===qY){if(i)Object.freeze(i);if(K0){for(S in K0)if(K0.hasOwnProperty(S)&&(!i||!i.hasOwnProperty(S))){if(!g)g={};g[S]=""}for(S in i)if(i.hasOwnProperty(S)&&K0[S]!==i[S]){if(!g)g={};g[S]=i[S]}}else{if(!g){if(!D)D=[];D.push(b,g)}g=i}}else if(b===iG){var $0=i?i[TL]:void 0,H0=K0?K0[TL]:void 0;if($0!=null){if(H0!==$0)(D=D||[]).push(b,$0)}}else if(b===ZY){if(typeof i==="string"||typeof i==="number")(D=D||[]).push(b,""+i)}else if(b===PL||b===Eq);else if(G6.hasOwnProperty(b)){if(i!=null){if(typeof i!=="function")xL(b,i);if(b==="onScroll")V9("scroll",X)}if(!D&&K0!==i)D=[]}else(D=D||[]).push(b,i)}if(g)v60(g,I[qY]),(D=D||[]).push(qY,g);return D}function MJ0(X,K,H,L,N){if(H==="input"&&N.type==="radio"&&N.name!=null)I0(X,N);var D=dX(H,L),C=dX(H,N);switch(UJ0(X,K,D,C),H){case"input":U6(X,N);break;case"textarea":qb(X,N);break;case"select":U60(X,N);break}}function OJ0(X){{var K=X.toLowerCase();if(!XL.hasOwnProperty(K))return null;return XL[K]||null}}function VJ0(X,K,H,L,N,D,C){var I,b;switch(I=dX(K,H),bL(K,H),K){case"dialog":V9("cancel",X),V9("close",X);break;case"iframe":case"object":case"embed":V9("load",X);break;case"video":case"audio":for(var S=0;S<pG.length;S++)V9(pG[S],X);break;case"source":V9("error",X);break;case"img":case"image":case"link":V9("error",X),V9("load",X);break;case"details":V9("toggle",X);break;case"input":U0(X,H),V9("invalid",X);break;case"option":S9(X,H);break;case"select":Jb(X,H),V9("invalid",X);break;case"textarea":Zb(X,H),V9("invalid",X);break}$D(K,H);{b=new Set;var g=X.attributes;for(var n=0;n<g.length;n++){var i=g[n].name.toLowerCase();switch(i){case"value":break;case"checked":break;case"selected":break;default:b.add(g[n].name)}}}var K0=null;for(var $0 in H){if(!H.hasOwnProperty($0))continue;var H0=H[$0];if($0===ZY){if(typeof H0==="string"){if(X.textContent!==H0){if(H[Eq]!==!0)vL(X.textContent,H0,D,C);K0=[ZY,H0]}}else if(typeof H0==="number"){if(X.textContent!==""+H0){if(H[Eq]!==!0)vL(X.textContent,H0,D,C);K0=[ZY,""+H0]}}}else if(G6.hasOwnProperty($0)){if(H0!=null){if(typeof H0!=="function")xL($0,H0);if($0==="onScroll")V9("scroll",X)}}else if(C&&!0&&typeof I==="boolean"){var S0=void 0,$6=I&&b6?null:u5($0);if(H[Eq]===!0);else if($0===PL||$0===Eq||$0==="value"||$0==="checked"||$0==="selected");else if($0===iG){var Q6=X.innerHTML,n6=H0?H0[TL]:void 0;if(n6!=null){var s6=ix(X,n6);if(s6!==Q6)nG($0,Q6,s6)}}else if($0===qY){if(b.delete($0),lx){var Z0=x60(H0);if(S0=X.getAttribute("style"),Z0!==S0)nG($0,S0,Z0)}}else if(I&&!b6){if(b.delete($0.toLowerCase()),S0=Hq(X,$0,H0),H0!==S0)nG($0,S0,H0)}else if(!w9($0,$6,I)&&!P8($0,H0,$6,I)){var L0=!1;if($6!==null)b.delete($6.attributeName),S0=Gq(X,$0,H0,$6);else{var q0=L;if(q0===JZ)q0=ZD(K);if(q0===JZ)b.delete($0.toLowerCase());else{var E0=OJ0($0);if(E0!==null&&E0!==$0)L0=!0,b.delete(E0);b.delete($0)}S0=Hq(X,$0,H0)}var i0=b6;if(!i0&&H0!==S0&&!L0)nG($0,S0,H0)}}}if(C){if(b.size>0&&H[Eq]!==!0)dx(b)}switch(K){case"input":Mq(X),o0(X,H,!0);break;case"textarea":Mq(X),Xb(X);break;case"select":case"option":break;default:if(typeof H.onClick==="function")SL(X);break}return K0}function DJ0(X,K,H){var L=X.nodeValue!==K;return L}function OR(X,K){{if(T7)return;T7=!0,W("Did not expect server HTML to contain a <%s> in <%s>.",K.nodeName.toLowerCase(),X.nodeName.toLowerCase())}}function VR(X,K){{if(T7)return;T7=!0,W('Did not expect server HTML to contain the text node "%s" in <%s>.',K.nodeValue,X.nodeName.toLowerCase())}}function DR(X,K,H){{if(T7)return;T7=!0,W("Expected server HTML to contain a matching <%s> in <%s>.",K,X.nodeName.toLowerCase())}}function RR(X,K){{if(K==="")return;if(T7)return;T7=!0,W('Expected server HTML to contain a matching text node for "%s" in <%s>.',K,X.nodeName.toLowerCase())}}function RJ0(X,K,H){switch(K){case"input":k6(X,H);return;case"textarea":F60(X,H);return;case"select":L60(X,H);return}}var sG=function(){},rG=function(){};{var jJ0=["address","applet","area","article","aside","base","basefont","bgsound","blockquote","body","br","button","caption","center","col","colgroup","dd","details","dir","div","dl","dt","embed","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","iframe","img","input","isindex","li","link","listing","main","marquee","menu","menuitem","meta","nav","noembed","noframes","noscript","object","ol","p","param","plaintext","pre","script","section","select","source","style","summary","table","tbody","td","template","textarea","tfoot","th","thead","title","tr","track","ul","wbr","xmp"],sx=["applet","caption","html","table","td","th","marquee","object","template","foreignObject","desc","title"],_J0=sx.concat(["button"]),EJ0=["dd","dt","li","option","optgroup","p","rp","rt"],rx={current:null,formTag:null,aTagInScope:null,buttonTagInScope:null,nobrTagInScope:null,pTagInButtonScope:null,listItemTagAutoclosing:null,dlItemTagAutoclosing:null};rG=function(X,K){var H=y6({},X||rx),L={tag:K};if(sx.indexOf(K)!==-1)H.aTagInScope=null,H.buttonTagInScope=null,H.nobrTagInScope=null;if(_J0.indexOf(K)!==-1)H.pTagInButtonScope=null;if(jJ0.indexOf(K)!==-1&&K!=="address"&&K!=="div"&&K!=="p")H.listItemTagAutoclosing=null,H.dlItemTagAutoclosing=null;if(H.current=L,K==="form")H.formTag=L;if(K==="a")H.aTagInScope=L;if(K==="button")H.buttonTagInScope=L;if(K==="nobr")H.nobrTagInScope=L;if(K==="p")H.pTagInButtonScope=L;if(K==="li")H.listItemTagAutoclosing=L;if(K==="dd"||K==="dt")H.dlItemTagAutoclosing=L;return H};var CJ0=function(X,K){switch(K){case"select":return X==="option"||X==="optgroup"||X==="#text";case"optgroup":return X==="option"||X==="#text";case"option":return X==="#text";case"tr":return X==="th"||X==="td"||X==="style"||X==="script"||X==="template";case"tbody":case"thead":case"tfoot":return X==="tr"||X==="style"||X==="script"||X==="template";case"colgroup":return X==="col"||X==="template";case"table":return X==="caption"||X==="colgroup"||X==="tbody"||X==="tfoot"||X==="thead"||X==="style"||X==="script"||X==="template";case"head":return X==="base"||X==="basefont"||X==="bgsound"||X==="link"||X==="meta"||X==="title"||X==="noscript"||X==="noframes"||X==="style"||X==="script"||X==="template";case"html":return X==="head"||X==="body"||X==="frameset";case"frameset":return X==="frame";case"#document":return X==="html"}switch(X){case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return K!=="h1"&&K!=="h2"&&K!=="h3"&&K!=="h4"&&K!=="h5"&&K!=="h6";case"rp":case"rt":return EJ0.indexOf(K)===-1;case"body":case"caption":case"col":case"colgroup":case"frameset":case"frame":case"head":case"html":case"tbody":case"td":case"tfoot":case"th":case"thead":case"tr":return K==null}return!0},AJ0=function(X,K){switch(X){case"address":case"article":case"aside":case"blockquote":case"center":case"details":case"dialog":case"dir":case"div":case"dl":case"fieldset":case"figcaption":case"figure":case"footer":case"header":case"hgroup":case"main":case"menu":case"nav":case"ol":case"p":case"section":case"summary":case"ul":case"pre":case"listing":case"table":case"hr":case"xmp":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return K.pTagInButtonScope;case"form":return K.formTag||K.pTagInButtonScope;case"li":return K.listItemTagAutoclosing;case"dd":case"dt":return K.dlItemTagAutoclosing;case"button":return K.buttonTagInScope;case"a":return K.aTagInScope;case"nobr":return K.nobrTagInScope}return null},ax={};sG=function(X,K,H){H=H||rx;var L=H.current,N=L&&L.tag;if(K!=null){if(X!=null)W("validateDOMNesting: when childText is passed, childTag should be null");X="#text"}var D=CJ0(X,N)?null:L,C=D?null:AJ0(X,H),I=D||C;if(!I)return;var b=I.tag,S=!!D+"|"+X+"|"+b;if(ax[S])return;ax[S]=!0;var g=X,n="";if(X==="#text")if(/\S/.test(K))g="Text nodes";else g="Whitespace text nodes",n=" Make sure you don't have any extra whitespace between tags on each line of your source code.";else g="<"+X+">";if(D){var i="";if(b==="table"&&X==="tr")i+=" Add a <tbody>, <thead> or <tfoot> to your code to match the DOM tree generated by the browser.";W("validateDOMNesting(...): %s cannot appear as a child of <%s>.%s%s",g,b,n,i)}else W("validateDOMNesting(...): %s cannot appear as a descendant of <%s>.",g,b)}}var fL="suppressHydrationWarning",gL="$",mL="/$",aG="$?",oG="$!",kJ0="style",jR=null,_R=null;function wJ0(X){var K,H,L=X.nodeType;switch(L){case ZZ:case XD:{K=L===ZZ?"#document":"#fragment";var N=X.documentElement;H=N?N.namespaceURI:qD(null,"");break}default:{var D=L===W5?X.parentNode:X,C=D.namespaceURI||null;K=D.tagName,H=qD(C,K);break}}{var I=K.toLowerCase(),b=rG(null,I);return{namespace:H,ancestorInfo:b}}}function IJ0(X,K,H){{var L=X,N=qD(L.namespace,K),D=rG(L.ancestorInfo,K);return{namespace:N,ancestorInfo:D}}}function ER(X){return X}function PJ0(X){jR=k90(),_R=d50();var K=null;return Xx(!1),K}function TJ0(X){l50(_R),Xx(jR),jR=null,_R=null}function bJ0(X,K,H,L,N){var D;{var C=L;if(sG(X,null,C.ancestorInfo),typeof K.children==="string"||typeof K.children==="number"){var I=""+K.children,b=rG(C.ancestorInfo,X);sG(null,I,b)}D=C.namespace}var S=LJ0(X,K,H,D);return JH(N,S),bR(S,K),S}function xJ0(X,K){X.appendChild(K)}function yJ0(X,K,H,L,N){switch(BJ0(X,K,H,L),K){case"button":case"input":case"select":case"textarea":return!!H.autoFocus;case"img":return!0;default:return!1}}function vJ0(X,K,H,L,N,D){{var C=D;if(typeof L.children!==typeof H.children&&(typeof L.children==="string"||typeof L.children==="number")){var I=""+L.children,b=rG(C.ancestorInfo,K);sG(null,I,b)}}return NJ0(X,K,H,L)}function CR(X,K){return X==="textarea"||X==="noscript"||typeof K.children==="string"||typeof K.children==="number"||typeof K.dangerouslySetInnerHTML==="object"&&K.dangerouslySetInnerHTML!==null&&K.dangerouslySetInnerHTML.__html!=null}function SJ0(X,K,H,L){{var N=H;sG(null,X,N.ancestorInfo)}var D=FJ0(X,K);return JH(L,D),D}function fJ0(){var X=window.event;if(X===void 0)return GZ;return Yx(X.type)}var AR=typeof setTimeout==="function"?setTimeout:void 0,gJ0=typeof clearTimeout==="function"?clearTimeout:void 0,kR=-1,ox=typeof Promise==="function"?Promise:void 0,mJ0=typeof queueMicrotask==="function"?queueMicrotask:typeof ox!=="undefined"?function(X){return ox.resolve(null).then(X).catch(hJ0)}:AR;function hJ0(X){setTimeout(function(){throw X})}function uJ0(X,K,H,L){switch(K){case"button":case"input":case"select":case"textarea":if(H.autoFocus)X.focus();return;case"img":{if(H.src)X.src=H.src;return}}}function cJ0(X,K,H,L,N,D){MJ0(X,K,H,L,N),bR(X,N)}function tx(X){qL(X,"")}function pJ0(X,K,H){X.nodeValue=H}function dJ0(X,K){X.appendChild(K)}function lJ0(X,K){var H;if(X.nodeType===W5)H=X.parentNode,H.insertBefore(K,X);else H=X,H.appendChild(K);var L=X._reactRootContainer;if((L===null||L===void 0)&&H.onclick===null)SL(H)}function iJ0(X,K,H){X.insertBefore(K,H)}function nJ0(X,K,H){if(X.nodeType===W5)X.parentNode.insertBefore(K,H);else X.insertBefore(K,H)}function sJ0(X,K){X.removeChild(K)}function rJ0(X,K){if(X.nodeType===W5)X.parentNode.removeChild(K);else X.removeChild(K)}function wR(X,K){var H=K,L=0;do{var N=H.nextSibling;if(X.removeChild(H),N&&N.nodeType===W5){var D=N.data;if(D===mL)if(L===0){X.removeChild(N),xG(K);return}else L--;else if(D===gL||D===aG||D===oG)L++}H=N}while(H);xG(K)}function aJ0(X,K){if(X.nodeType===W5)wR(X.parentNode,K);else if(X.nodeType===P7)wR(X,K);xG(X)}function oJ0(X){X=X;var K=X.style;if(typeof K.setProperty==="function")K.setProperty("display","none","important");else K.display="none"}function tJ0(X){X.nodeValue=""}function eJ0(X,K){X=X;var H=K[kJ0],L=H!==void 0&&H!==null&&H.hasOwnProperty("display")?H.display:null;X.style.display=YD("display",L)}function J70(X,K){X.nodeValue=K}function Q70(X){if(X.nodeType===P7)X.textContent="";else if(X.nodeType===ZZ){if(X.documentElement)X.removeChild(X.documentElement)}}function Z70(X,K,H){if(X.nodeType!==P7||K.toLowerCase()!==X.nodeName.toLowerCase())return null;return X}function q70(X,K){if(K===""||X.nodeType!==QZ)return null;return X}function X70(X){if(X.nodeType!==W5)return null;return X}function ex(X){return X.data===aG}function IR(X){return X.data===oG}function Y70(X){var K=X.nextSibling&&X.nextSibling.dataset,H,L,N;if(K)H=K.dgst,L=K.msg,N=K.stck;return{message:L,digest:H,stack:N}}function K70(X,K){X._reactRetry=K}function hL(X){for(;X!=null;X=X.nextSibling){var K=X.nodeType;if(K===P7||K===QZ)break;if(K===W5){var H=X.data;if(H===gL||H===oG||H===aG)break;if(H===mL)return null}}return X}function tG(X){return hL(X.nextSibling)}function $70(X){return hL(X.firstChild)}function W70(X){return hL(X.firstChild)}function G70(X){return hL(X.nextSibling)}function H70(X,K,H,L,N,D,C){JH(D,X),bR(X,H);var I;{var b=N;I=b.namespace}var S=(D.mode&r6)!==H6;return VJ0(X,K,H,I,L,S,C)}function z70(X,K,H,L){JH(H,X);var N=(H.mode&r6)!==H6;return DJ0(X,K)}function U70(X,K){JH(K,X)}function L70(X){var K=X.nextSibling,H=0;while(K){if(K.nodeType===W5){var L=K.data;if(L===mL)if(H===0)return tG(K);else H--;else if(L===gL||L===oG||L===aG)H++}K=K.nextSibling}return null}function Jy(X){var K=X.previousSibling,H=0;while(K){if(K.nodeType===W5){var L=K.data;if(L===gL||L===oG||L===aG)if(H===0)return K;else H--;else if(L===mL)H++}K=K.previousSibling}return null}function F70(X){xG(X)}function B70(X){xG(X)}function N70(X){return X!=="head"&&X!=="body"}function M70(X,K,H,L){var N=!0;vL(K.nodeValue,H,L,N)}function O70(X,K,H,L,N,D){if(K[fL]!==!0){var C=!0;vL(L.nodeValue,N,D,C)}}function V70(X,K){if(K.nodeType===P7)OR(X,K);else if(K.nodeType===W5);else VR(X,K)}function D70(X,K){{var H=X.parentNode;if(H!==null)if(K.nodeType===P7)OR(H,K);else if(K.nodeType===W5);else VR(H,K)}}function R70(X,K,H,L,N){if(N||K[fL]!==!0)if(L.nodeType===P7)OR(H,L);else if(L.nodeType===W5);else VR(H,L)}function j70(X,K,H){DR(X,K)}function _70(X,K){RR(X,K)}function E70(X,K,H){{var L=X.parentNode;if(L!==null)DR(L,K)}}function C70(X,K){{var H=X.parentNode;if(H!==null)RR(H,K)}}function A70(X,K,H,L,N,D){if(D||K[fL]!==!0)DR(H,L)}function k70(X,K,H,L,N){if(N||K[fL]!==!0)RR(H,L)}function w70(X){W("An error occurred during hydration. The server HTML was replaced with client content in <%s>.",X.nodeName.toLowerCase())}function I70(X){dG(X)}var O$=Math.random().toString(36).slice(2),V$="__reactFiber$"+O$,PR="__reactProps$"+O$,eG="__reactContainer$"+O$,TR="__reactEvents$"+O$,P70="__reactListeners$"+O$,T70="__reactHandles$"+O$;function b70(X){delete X[V$],delete X[PR],delete X[TR],delete X[P70],delete X[T70]}function JH(X,K){K[V$]=X}function uL(X,K){K[eG]=X}function Qy(X){X[eG]=null}function QH(X){return!!X[eG]}function XY(X){var K=X[V$];if(K)return K;var H=X.parentNode;while(H){if(K=H[eG]||H[V$],K){var L=K.alternate;if(K.child!==null||L!==null&&L.child!==null){var N=Jy(X);while(N!==null){var D=N[V$];if(D)return D;N=Jy(N)}}return K}X=H,H=X.parentNode}return null}function Cq(X){var K=X[V$]||X[eG];if(K)if(K.tag===O||K.tag===R||K.tag===k||K.tag===B)return K;else return null;return null}function D$(X){if(X.tag===O||X.tag===R)return X.stateNode;throw new Error("getNodeFromInstance: Invalid argument.")}function cL(X){return X[PR]||null}function bR(X,K){X[PR]=K}function x70(X){var K=X[TR];if(K===void 0)K=X[TR]=new Set;return K}var Zy={},qy=Z.ReactDebugCurrentFrame;function pL(X){if(X){var K=X._owner,H=iK(X.type,X._source,K?K.type:null);qy.setExtraStackFrame(H)}else qy.setExtraStackFrame(null)}function V1(X,K,H,L,N){{var D=Function.call.bind(j8);for(var C in X)if(D(X,C)){var I=void 0;try{if(typeof X[C]!=="function"){var b=Error((L||"React class")+": "+H+" type `"+C+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof X[C]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw b.name="Invariant Violation",b}I=X[C](K,C,L,H,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(S){I=S}if(I&&!(I instanceof Error))pL(N),W("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",L||"React class",H,C,typeof I),pL(null);if(I instanceof Error&&!(I.message in Zy))Zy[I.message]=!0,pL(N),W("Failed %s type: %s",H,I.message),pL(null)}}}var xR=[],dL;dL=[];var HZ=-1;function Aq(X){return{current:X}}function PJ(X,K){if(HZ<0){W("Unexpected pop.");return}if(K!==dL[HZ])W("Unexpected Fiber popped.");X.current=xR[HZ],xR[HZ]=null,dL[HZ]=null,HZ--}function TJ(X,K,H){HZ++,xR[HZ]=X.current,dL[HZ]=H,X.current=K}var Xy={},F4={};Object.freeze(F4);var zZ=Aq(F4),YQ=Aq(!1),yR=F4;function R$(X,K,H){{if(H&&KQ(K))return yR;return zZ.current}}function Yy(X,K,H){{var L=X.stateNode;L.__reactInternalMemoizedUnmaskedChildContext=K,L.__reactInternalMemoizedMaskedChildContext=H}}function j$(X,K){{var H=X.type,L=H.contextTypes;if(!L)return F4;var N=X.stateNode;if(N&&N.__reactInternalMemoizedUnmaskedChildContext===K)return N.__reactInternalMemoizedMaskedChildContext;var D={};for(var C in L)D[C]=K[C];{var I=P6(X)||"Unknown";V1(L,D,"context",I)}if(N)Yy(X,K,D);return D}}function lL(){return YQ.current}function KQ(X){{var K=X.childContextTypes;return K!==null&&K!==void 0}}function iL(X){PJ(YQ,X),PJ(zZ,X)}function vR(X){PJ(YQ,X),PJ(zZ,X)}function Ky(X,K,H){{if(zZ.current!==F4)throw new Error("Unexpected context found on stack. This error is likely caused by a bug in React. Please file an issue.");TJ(zZ,K,X),TJ(YQ,H,X)}}function $y(X,K,H){{var L=X.stateNode,N=K.childContextTypes;if(typeof L.getChildContext!=="function"){{var D=P6(X)||"Unknown";if(!Xy[D])Xy[D]=!0,W("%s.childContextTypes is specified but there is no getChildContext() method on the instance. You can either define getChildContext() on %s or remove childContextTypes from it.",D,D)}return H}var C=L.getChildContext();for(var I in C)if(!(I in N))throw new Error((P6(X)||"Unknown")+".getChildContext(): key \""+I+"\" is not defined in childContextTypes.");{var b=P6(X)||"Unknown";V1(N,C,"child context",b)}return y6({},H,C)}}function nL(X){{var K=X.stateNode,H=K&&K.__reactInternalMemoizedMergedChildContext||F4;return yR=zZ.current,TJ(zZ,H,X),TJ(YQ,YQ.current,X),!0}}function Wy(X,K,H){{var L=X.stateNode;if(!L)throw new Error("Expected to have an instance by this point. This error is likely caused by a bug in React. Please file an issue.");if(H){var N=$y(X,K,yR);L.__reactInternalMemoizedMergedChildContext=N,PJ(YQ,X),PJ(zZ,X),TJ(zZ,N,X),TJ(YQ,H,X)}else PJ(YQ,X),TJ(YQ,H,X)}}function y70(X){{if(!N80(X)||X.tag!==U)throw new Error("Expected subtree parent to be a mounted class component. This error is likely caused by a bug in React. Please file an issue.");var K=X;do{switch(K.tag){case B:return K.stateNode.context;case U:{var H=K.type;if(KQ(H))return K.stateNode.__reactInternalMemoizedMergedChildContext;break}}K=K.return}while(K!==null);throw new Error("Found unexpected detached subtree parent. This error is likely caused by a bug in React. Please file an issue.")}}var kq=0,sL=1,UZ=null,SR=!1,fR=!1;function Gy(X){if(UZ===null)UZ=[X];else UZ.push(X)}function v70(X){SR=!0,Gy(X)}function Hy(){if(SR)wq()}function wq(){if(!fR&&UZ!==null){fR=!0;var X=0,K=O1();try{var H=!0,L=UZ;i5(z4);for(;X<L.length;X++){var N=L[X];do N=N(H);while(N!==null)}UZ=null,SR=!1}catch(D){if(UZ!==null)UZ=UZ.slice(X+1);throw xb(GL,wq),D}finally{i5(K),fR=!1}}return null}var _$=[],E$=0,rL=null,aL=0,u4=[],c4=0,YY=null,LZ=1,FZ="";function S70(X){return $Y(),(X.flags&Cb)!==F6}function f70(X){return $Y(),aL}function g70(){var X=FZ,K=LZ,H=K&~m70(K);return H.toString(32)+X}function KY(X,K){$Y(),_$[E$++]=aL,_$[E$++]=rL,rL=X,aL=K}function zy(X,K,H){$Y(),u4[c4++]=LZ,u4[c4++]=FZ,u4[c4++]=YY,YY=X;var L=LZ,N=FZ,D=oL(L)-1,C=L&~(1<<D),I=H+1,b=oL(K)+D;if(b>30){var S=D-D%5,g=(1<<S)-1,n=(C&g).toString(32),i=C>>S,K0=D-S,$0=oL(K)+K0,H0=I<<K0,S0=H0|i,$6=n+N;LZ=1<<$0|S0,FZ=$6}else{var Q6=I<<D,n6=Q6|C,s6=N;LZ=1<<b|n6,FZ=s6}}function gR(X){$Y();var K=X.return;if(K!==null){var H=1,L=0;KY(X,H),zy(X,H,L)}}function oL(X){return 32-mb(X)}function m70(X){return 1<<oL(X)-1}function mR(X){while(X===rL)rL=_$[--E$],_$[E$]=null,aL=_$[--E$],_$[E$]=null;while(X===YY)YY=u4[--c4],u4[c4]=null,FZ=u4[--c4],u4[c4]=null,LZ=u4[--c4],u4[c4]=null}function h70(){if($Y(),YY!==null)return{id:LZ,overflow:FZ};else return null}function u70(X,K){$Y(),u4[c4++]=LZ,u4[c4++]=FZ,u4[c4++]=YY,LZ=K.id,FZ=K.overflow,YY=X}function $Y(){if(!GJ())W("Expected to be hydrating. This is a bug in React. Please file an issue.")}var WJ=null,p4=null,D1=!1,WY=!1,Iq=null;function c70(){if(D1)W("We should not be hydrating here. This is a bug in React. Please file a bug.")}function Uy(){WY=!0}function p70(){return WY}function d70(X){var K=X.stateNode.containerInfo;return p4=W70(K),WJ=X,D1=!0,Iq=null,WY=!1,!0}function l70(X,K,H){if(p4=G70(K),WJ=X,D1=!0,Iq=null,WY=!1,H!==null)u70(X,H);return!0}function Ly(X,K){switch(X.tag){case B:{V70(X.stateNode.containerInfo,K);break}case O:{var H=(X.mode&r6)!==H6;R70(X.type,X.memoizedProps,X.stateNode,K,H);break}case k:{var L=X.memoizedState;if(L.dehydrated!==null)D70(L.dehydrated,K);break}}}function Fy(X,K){Ly(X,K);var H=eQ0();H.stateNode=K,H.return=X;var L=X.deletions;if(L===null)X.deletions=[H],X.flags|=lX;else L.push(H)}function hR(X,K){{if(WY)return;switch(X.tag){case B:{var H=X.stateNode.containerInfo;switch(K.tag){case O:var{type:L,pendingProps:N}=K;j70(H,L);break;case R:var D=K.pendingProps;_70(H,D);break}break}case O:{var{type:C,memoizedProps:I,stateNode:b}=X;switch(K.tag){case O:{var{type:S,pendingProps:g}=K,n=(X.mode&r6)!==H6;A70(C,I,b,S,g,n);break}case R:{var i=K.pendingProps,K0=(X.mode&r6)!==H6;k70(C,I,b,i,K0);break}}break}case k:{var $0=X.memoizedState,H0=$0.dehydrated;if(H0!==null)switch(K.tag){case O:var{type:S0,pendingProps:$6}=K;E70(H0,S0);break;case R:var Q6=K.pendingProps;C70(H0,Q6);break}break}default:return}}}function By(X,K){K.flags=K.flags&~XZ|G5,hR(X,K)}function Ny(X,K){switch(X.tag){case O:{var{type:H,pendingProps:L}=X,N=Z70(K,H);if(N!==null)return X.stateNode=N,WJ=X,p4=$70(N),!0;return!1}case R:{var D=X.pendingProps,C=q70(K,D);if(C!==null)return X.stateNode=C,WJ=X,p4=null,!0;return!1}case k:{var I=X70(K);if(I!==null){var b={dehydrated:I,treeContext:h70(),retryLane:G4};X.memoizedState=b;var S=JZ0(I);return S.return=X,X.child=S,WJ=X,p4=null,!0}return!1}default:return!1}}function uR(X){return(X.mode&r6)!==H6&&(X.flags&M8)===F6}function cR(X){throw new Error("Hydration failed because the initial UI does not match what was rendered on the server.")}function pR(X){if(!D1)return;var K=p4;if(!K){if(uR(X))hR(WJ,X),cR();By(WJ,X),D1=!1,WJ=X;return}var H=K;if(!Ny(X,K)){if(uR(X))hR(WJ,X),cR();K=tG(H);var L=WJ;if(!K||!Ny(X,K)){By(WJ,X),D1=!1,WJ=X;return}Fy(L,H)}}function i70(X,K,H){var L=X.stateNode,N=!WY,D=H70(L,X.type,X.memoizedProps,K,H,X,N);if(X.updateQueue=D,D!==null)return!0;return!1}function n70(X){var{stateNode:K,memoizedProps:H}=X,L=z70(K,H,X);if(L){var N=WJ;if(N!==null)switch(N.tag){case B:{var D=N.stateNode.containerInfo,C=(N.mode&r6)!==H6;M70(D,K,H,C);break}case O:{var{type:I,memoizedProps:b,stateNode:S}=N,g=(N.mode&r6)!==H6;O70(I,b,S,K,H,g);break}}}return L}function s70(X){var K=X.memoizedState,H=K!==null?K.dehydrated:null;if(!H)throw new Error("Expected to have a hydrated suspense instance. This error is likely caused by a bug in React. Please file an issue.");U70(H,X)}function r70(X){var K=X.memoizedState,H=K!==null?K.dehydrated:null;if(!H)throw new Error("Expected to have a hydrated suspense instance. This error is likely caused by a bug in React. Please file an issue.");return L70(H)}function My(X){var K=X.return;while(K!==null&&K.tag!==O&&K.tag!==B&&K.tag!==k)K=K.return;WJ=K}function tL(X){if(X!==WJ)return!1;if(!D1)return My(X),D1=!0,!1;if(X.tag!==B&&(X.tag!==O||N70(X.type)&&!CR(X.type,X.memoizedProps))){var K=p4;if(K)if(uR(X))Oy(X),cR();else while(K)Fy(X,K),K=tG(K)}if(My(X),X.tag===k)p4=r70(X);else p4=WJ?tG(X.stateNode):null;return!0}function a70(){return D1&&p4!==null}function Oy(X){var K=p4;while(K)Ly(X,K),K=tG(K)}function C$(){WJ=null,p4=null,D1=!1,WY=!1}function Vy(){if(Iq!==null)LS(Iq),Iq=null}function GJ(){return D1}function dR(X){if(Iq===null)Iq=[X];else Iq.push(X)}var o70=Z.ReactCurrentBatchConfig,t70=null;function e70(){return o70.transition}var R1={recordUnsafeLifecycleWarnings:function(X,K){},flushPendingUnsafeLifecycleWarnings:function(){},recordLegacyContextWarning:function(X,K){},flushLegacyContextWarning:function(){},discardPendingWarnings:function(){}};{var J40=function(X){var K=null,H=X;while(H!==null){if(H.mode&p9)K=H;H=H.return}return K},GY=function(X){var K=[];return X.forEach(function(H){K.push(H)}),K.sort().join(", ")},ZH=[],qH=[],XH=[],YH=[],KH=[],$H=[],HY=new Set;R1.recordUnsafeLifecycleWarnings=function(X,K){if(HY.has(X.type))return;if(typeof K.componentWillMount==="function"&&K.componentWillMount.__suppressDeprecationWarning!==!0)ZH.push(X);if(X.mode&p9&&typeof K.UNSAFE_componentWillMount==="function")qH.push(X);if(typeof K.componentWillReceiveProps==="function"&&K.componentWillReceiveProps.__suppressDeprecationWarning!==!0)XH.push(X);if(X.mode&p9&&typeof K.UNSAFE_componentWillReceiveProps==="function")YH.push(X);if(typeof K.componentWillUpdate==="function"&&K.componentWillUpdate.__suppressDeprecationWarning!==!0)KH.push(X);if(X.mode&p9&&typeof K.UNSAFE_componentWillUpdate==="function")$H.push(X)},R1.flushPendingUnsafeLifecycleWarnings=function(){var X=new Set;if(ZH.length>0)ZH.forEach(function(i){X.add(P6(i)||"Component"),HY.add(i.type)}),ZH=[];var K=new Set;if(qH.length>0)qH.forEach(function(i){K.add(P6(i)||"Component"),HY.add(i.type)}),qH=[];var H=new Set;if(XH.length>0)XH.forEach(function(i){H.add(P6(i)||"Component"),HY.add(i.type)}),XH=[];var L=new Set;if(YH.length>0)YH.forEach(function(i){L.add(P6(i)||"Component"),HY.add(i.type)}),YH=[];var N=new Set;if(KH.length>0)KH.forEach(function(i){N.add(P6(i)||"Component"),HY.add(i.type)}),KH=[];var D=new Set;if($H.length>0)$H.forEach(function(i){D.add(P6(i)||"Component"),HY.add(i.type)}),$H=[];if(K.size>0){var C=GY(K);W("Using UNSAFE_componentWillMount in strict mode is not recommended and may indicate bugs in your code. See https://reactjs.org/link/unsafe-component-lifecycles for details.\n\n* Move code with side effects to componentDidMount, and set initial state in the constructor.\n\nPlease update the following components: %s",C)}if(L.size>0){var I=GY(L);W("Using UNSAFE_componentWillReceiveProps in strict mode is not recommended and may indicate bugs in your code. See https://reactjs.org/link/unsafe-component-lifecycles for details.\n\n* Move data fetching code or side effects to componentDidUpdate.\n* If you're updating state whenever props change, refactor your code to use memoization techniques or move it to static getDerivedStateFromProps. Learn more at: https://reactjs.org/link/derived-state\n\nPlease update the following components: %s",I)}if(D.size>0){var b=GY(D);W("Using UNSAFE_componentWillUpdate in strict mode is not recommended and may indicate bugs in your code. See https://reactjs.org/link/unsafe-component-lifecycles for details.\n\n* Move data fetching code or side effects to componentDidUpdate.\n\nPlease update the following components: %s",b)}if(X.size>0){var S=GY(X);$("componentWillMount has been renamed, and is not recommended for use. See https://reactjs.org/link/unsafe-component-lifecycles for details.\n\n* Move code with side effects to componentDidMount, and set initial state in the constructor.\n* Rename componentWillMount to UNSAFE_componentWillMount to suppress this warning in non-strict mode. In React 18.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run `npx react-codemod rename-unsafe-lifecycles` in your project source folder.\n\nPlease update the following components: %s",S)}if(H.size>0){var g=GY(H);$("componentWillReceiveProps has been renamed, and is not recommended for use. See https://reactjs.org/link/unsafe-component-lifecycles for details.\n\n* Move data fetching code or side effects to componentDidUpdate.\n* If you're updating state whenever props change, refactor your code to use memoization techniques or move it to static getDerivedStateFromProps. Learn more at: https://reactjs.org/link/derived-state\n* Rename componentWillReceiveProps to UNSAFE_componentWillReceiveProps to suppress this warning in non-strict mode. In React 18.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run `npx react-codemod rename-unsafe-lifecycles` in your project source folder.\n\nPlease update the following components: %s",g)}if(N.size>0){var n=GY(N);$("componentWillUpdate has been renamed, and is not recommended for use. See https://reactjs.org/link/unsafe-component-lifecycles for details.\n\n* Move data fetching code or side effects to componentDidUpdate.\n* Rename componentWillUpdate to UNSAFE_componentWillUpdate to suppress this warning in non-strict mode. In React 18.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run `npx react-codemod rename-unsafe-lifecycles` in your project source folder.\n\nPlease update the following components: %s",n)}};var eL=new Map,Dy=new Set;R1.recordLegacyContextWarning=function(X,K){var H=J40(X);if(H===null){W("Expected to find a StrictMode component in a strict mode tree. This error is likely caused by a bug in React. Please file an issue.");return}if(Dy.has(X.type))return;var L=eL.get(H);if(X.type.contextTypes!=null||X.type.childContextTypes!=null||K!==null&&typeof K.getChildContext==="function"){if(L===void 0)L=[],eL.set(H,L);L.push(X)}},R1.flushLegacyContextWarning=function(){eL.forEach(function(X,K){if(X.length===0)return;var H=X[0],L=new Set;X.forEach(function(D){L.add(P6(D)||"Component"),Dy.add(D.type)});var N=GY(L);try{I9(H),W("Legacy context API has been detected within a strict-mode tree.\n\nThe old API will be supported in all 16.x releases, but applications using it should migrate to the new version.\n\nPlease update the following components: %s\n\nLearn more about this warning here: https://reactjs.org/link/legacy-context",N)}finally{c5()}})},R1.discardPendingWarnings=function(){ZH=[],qH=[],XH=[],YH=[],KH=[],$H=[],eL=new Map}}var lR,iR,nR,sR,rR,Ry=function(X,K){};lR=!1,iR=!1,nR={},sR={},rR={},Ry=function(X,K){if(X===null||typeof X!=="object")return;if(!X._store||X._store.validated||X.key!=null)return;if(typeof X._store!=="object")throw new Error("React Component in warnForMissingKey should have a _store. This error is likely caused by a bug in React. Please file an issue.");X._store.validated=!0;var H=P6(K)||"Component";if(sR[H])return;sR[H]=!0,W('Each child in a list should have a unique "key" prop. See https://reactjs.org/link/warning-keys for more information.')};function Q40(X){return X.prototype&&X.prototype.isReactComponent}function WH(X,K,H){var L=H.ref;if(L!==null&&typeof L!=="function"&&typeof L!=="object"){if((X.mode&p9||I8)&&!(H._owner&&H._self&&H._owner.stateNode!==H._self)&&!(H._owner&&H._owner.tag!==U)&&!(typeof H.type==="function"&&!Q40(H.type))&&H._owner){var N=P6(X)||"Component";if(!nR[N])W('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. We recommend using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',N,L),nR[N]=!0}if(H._owner){var D=H._owner,C;if(D){var I=D;if(I.tag!==U)throw new Error("Function components cannot have string refs. We recommend using useRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref");C=I.stateNode}if(!C)throw new Error("Missing owner for string ref "+L+". This error is likely caused by a bug in React. Please file an issue.");var b=C;j7(L,"ref");var S=""+L;if(K!==null&&K.ref!==null&&typeof K.ref==="function"&&K.ref._stringRef===S)return K.ref;var g=function(n){var i=b.refs;if(n===null)delete i[S];else i[S]=n};return g._stringRef=S,g}else{if(typeof L!=="string")throw new Error("Expected ref to be a function, a string, an object returned by React.createRef(), or null.");if(!H._owner)throw new Error("Element ref was specified as a string ("+L+") but no owner was set. This could happen for one of the following reasons:\n1. You may be adding a ref to a function component\n2. You may be adding a ref to a component that was not created inside a component's render method\n3. You have multiple copies of React loaded\nSee https://reactjs.org/link/refs-must-have-owner for more information.")}}return L}function JF(X,K){var H=Object.prototype.toString.call(K);throw new Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}function QF(X){{var K=P6(X)||"Component";if(rR[K])return;rR[K]=!0,W("Functions are not valid as a React child. This may happen if you return a Component instead of <Component /> from render. Or maybe you meant to call this function rather than return it.")}}function jy(X){var{_payload:K,_init:H}=X;return H(K)}function _y(X){function K(Z0,L0){if(!X)return;var q0=Z0.deletions;if(q0===null)Z0.deletions=[L0],Z0.flags|=lX;else q0.push(L0)}function H(Z0,L0){if(!X)return null;var q0=L0;while(q0!==null)K(Z0,q0),q0=q0.sibling;return null}function L(Z0,L0){var q0=new Map,E0=L0;while(E0!==null){if(E0.key!==null)q0.set(E0.key,E0);else q0.set(E0.index,E0);E0=E0.sibling}return q0}function N(Z0,L0){var q0=VY(Z0,L0);return q0.index=0,q0.sibling=null,q0}function D(Z0,L0,q0){if(Z0.index=q0,!X)return Z0.flags|=Cb,L0;var E0=Z0.alternate;if(E0!==null){var i0=E0.index;if(i0<L0)return Z0.flags|=G5,L0;else return i0}else return Z0.flags|=G5,L0}function C(Z0){if(X&&Z0.alternate===null)Z0.flags|=G5;return Z0}function I(Z0,L0,q0,E0){if(L0===null||L0.tag!==R){var i0=i_(q0,Z0.mode,E0);return i0.return=Z0,i0}else{var u0=N(L0,q0);return u0.return=Z0,u0}}function b(Z0,L0,q0,E0){var i0=q0.type;if(i0===l)return g(Z0,L0,q0.props.children,E0,q0.key);if(L0!==null){if(L0.elementType===i0||IS(L0,q0)||typeof i0==="object"&&i0!==null&&i0.$$typeof===h0&&jy(i0)===L0.type){var u0=N(L0,q0.props);return u0.ref=WH(Z0,L0,q0),u0.return=Z0,u0._debugSource=q0._source,u0._debugOwner=q0._owner,u0}}var M6=l_(q0,Z0.mode,E0);return M6.ref=WH(Z0,L0,q0),M6.return=Z0,M6}function S(Z0,L0,q0,E0){if(L0===null||L0.tag!==M||L0.stateNode.containerInfo!==q0.containerInfo||L0.stateNode.implementation!==q0.implementation){var i0=n_(q0,Z0.mode,E0);return i0.return=Z0,i0}else{var u0=N(L0,q0.children||[]);return u0.return=Z0,u0}}function g(Z0,L0,q0,E0,i0){if(L0===null||L0.tag!==V){var u0=hq(q0,Z0.mode,E0,i0);return u0.return=Z0,u0}else{var M6=N(L0,q0);return M6.return=Z0,M6}}function n(Z0,L0,q0){if(typeof L0==="string"&&L0!==""||typeof L0==="number"){var E0=i_(""+L0,Z0.mode,q0);return E0.return=Z0,E0}if(typeof L0==="object"&&L0!==null){switch(L0.$$typeof){case K4:{var i0=l_(L0,Z0.mode,q0);return i0.ref=WH(Z0,null,L0),i0.return=Z0,i0}case $4:{var u0=n_(L0,Z0.mode,q0);return u0.return=Z0,u0}case h0:{var{_payload:M6,_init:C6}=L0;return n(Z0,C6(M6),q0)}}if(D5(L0)||W4(L0)){var h8=hq(L0,Z0.mode,q0,null);return h8.return=Z0,h8}JF(Z0,L0)}if(typeof L0==="function")QF(Z0);return null}function i(Z0,L0,q0,E0){var i0=L0!==null?L0.key:null;if(typeof q0==="string"&&q0!==""||typeof q0==="number"){if(i0!==null)return null;return I(Z0,L0,""+q0,E0)}if(typeof q0==="object"&&q0!==null){switch(q0.$$typeof){case K4:if(q0.key===i0)return b(Z0,L0,q0,E0);else return null;case $4:if(q0.key===i0)return S(Z0,L0,q0,E0);else return null;case h0:{var{_payload:u0,_init:M6}=q0;return i(Z0,L0,M6(u0),E0)}}if(D5(q0)||W4(q0)){if(i0!==null)return null;return g(Z0,L0,q0,E0,null)}JF(Z0,q0)}if(typeof q0==="function")QF(Z0);return null}function K0(Z0,L0,q0,E0,i0){if(typeof E0==="string"&&E0!==""||typeof E0==="number"){var u0=Z0.get(q0)||null;return I(L0,u0,""+E0,i0)}if(typeof E0==="object"&&E0!==null){switch(E0.$$typeof){case K4:{var M6=Z0.get(E0.key===null?q0:E0.key)||null;return b(L0,M6,E0,i0)}case $4:{var C6=Z0.get(E0.key===null?q0:E0.key)||null;return S(L0,C6,E0,i0)}case h0:var{_payload:h8,_init:H8}=E0;return K0(Z0,L0,q0,H8(h8),i0)}if(D5(E0)||W4(E0)){var s9=Z0.get(q0)||null;return g(L0,s9,E0,i0,null)}JF(L0,E0)}if(typeof E0==="function")QF(L0);return null}function $0(Z0,L0,q0){{if(typeof Z0!=="object"||Z0===null)return L0;switch(Z0.$$typeof){case K4:case $4:Ry(Z0,q0);var E0=Z0.key;if(typeof E0!=="string")break;if(L0===null){L0=new Set,L0.add(E0);break}if(!L0.has(E0)){L0.add(E0);break}W("Encountered two children with the same key, `%s`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be "+"duplicated and/or omitted \u2014 the behavior is unsupported and "+"could change in a future version.",E0);break;case h0:var{_payload:i0,_init:u0}=Z0;$0(u0(i0),L0,q0);break}}return L0}function H0(Z0,L0,q0,E0){{var i0=null;for(var u0=0;u0<q0.length;u0++){var M6=q0[u0];i0=$0(M6,i0,Z0)}}var C6=null,h8=null,H8=L0,s9=0,z8=0,d9=null;for(;H8!==null&&z8<q0.length;z8++){if(H8.index>z8)d9=H8,H8=null;else d9=H8.sibling;var xJ=i(Z0,H8,q0[z8],E0);if(xJ===null){if(H8===null)H8=d9;break}if(X){if(H8&&xJ.alternate===null)K(Z0,H8)}if(s9=D(xJ,s9,z8),h8===null)C6=xJ;else h8.sibling=xJ;h8=xJ,H8=d9}if(z8===q0.length){if(H(Z0,H8),GJ()){var NJ=z8;KY(Z0,NJ)}return C6}if(H8===null){for(;z8<q0.length;z8++){var N4=n(Z0,q0[z8],E0);if(N4===null)continue;if(s9=D(N4,s9,z8),h8===null)C6=N4;else h8.sibling=N4;h8=N4}if(GJ()){var K7=z8;KY(Z0,K7)}return C6}var $7=L(Z0,H8);for(;z8<q0.length;z8++){var yJ=K0($7,Z0,z8,q0[z8],E0);if(yJ!==null){if(X){if(yJ.alternate!==null)$7.delete(yJ.key===null?z8:yJ.key)}if(s9=D(yJ,s9,z8),h8===null)C6=yJ;else h8.sibling=yJ;h8=yJ}}if(X)$7.forEach(function(d$){return K(Z0,d$)});if(GJ()){var RZ=z8;KY(Z0,RZ)}return C6}function S0(Z0,L0,q0,E0){var i0=W4(q0);if(typeof i0!=="function")throw new Error("An object is not an iterable. This error is likely caused by a bug in React. Please file an issue.");{if(typeof Symbol==="function"&&q0[Symbol.toStringTag]==="Generator"){if(!iR)W("Using Generators as children is unsupported and will likely yield unexpected results because enumerating a generator mutates it. You may convert it to an array with `Array.from()` or the `[...spread]` operator before rendering. Keep in mind you might need to polyfill these features for older browsers.");iR=!0}if(q0.entries===i0){if(!lR)W("Using Maps as children is not supported. Use an array of keyed ReactElements instead.");lR=!0}var u0=i0.call(q0);if(u0){var M6=null,C6=u0.next();for(;!C6.done;C6=u0.next()){var h8=C6.value;M6=$0(h8,M6,Z0)}}}var H8=i0.call(q0);if(H8==null)throw new Error("An iterable object provided no iterator.");var s9=null,z8=null,d9=L0,xJ=0,NJ=0,N4=null,K7=H8.next();for(;d9!==null&&!K7.done;NJ++,K7=H8.next()){if(d9.index>NJ)N4=d9,d9=null;else N4=d9.sibling;var $7=i(Z0,d9,K7.value,E0);if($7===null){if(d9===null)d9=N4;break}if(X){if(d9&&$7.alternate===null)K(Z0,d9)}if(xJ=D($7,xJ,NJ),z8===null)s9=$7;else z8.sibling=$7;z8=$7,d9=N4}if(K7.done){if(H(Z0,d9),GJ()){var yJ=NJ;KY(Z0,yJ)}return s9}if(d9===null){for(;!K7.done;NJ++,K7=H8.next()){var RZ=n(Z0,K7.value,E0);if(RZ===null)continue;if(xJ=D(RZ,xJ,NJ),z8===null)s9=RZ;else z8.sibling=RZ;z8=RZ}if(GJ()){var d$=NJ;KY(Z0,d$)}return s9}var hH=L(Z0,d9);for(;!K7.done;NJ++,K7=H8.next()){var FQ=K0(hH,Z0,NJ,K7.value,E0);if(FQ!==null){if(X){if(FQ.alternate!==null)hH.delete(FQ.key===null?NJ:FQ.key)}if(xJ=D(FQ,xJ,NJ),z8===null)s9=FQ;else z8.sibling=FQ;z8=FQ}}if(X)hH.forEach(function(TZ0){return K(Z0,TZ0)});if(GJ()){var PZ0=NJ;KY(Z0,PZ0)}return s9}function $6(Z0,L0,q0,E0){if(L0!==null&&L0.tag===R){H(Z0,L0.sibling);var i0=N(L0,q0);return i0.return=Z0,i0}H(Z0,L0);var u0=i_(q0,Z0.mode,E0);return u0.return=Z0,u0}function Q6(Z0,L0,q0,E0){var i0=q0.key,u0=L0;while(u0!==null){if(u0.key===i0){var M6=q0.type;if(M6===l){if(u0.tag===V){H(Z0,u0.sibling);var C6=N(u0,q0.props.children);return C6.return=Z0,C6._debugSource=q0._source,C6._debugOwner=q0._owner,C6}}else if(u0.elementType===M6||IS(u0,q0)||typeof M6==="object"&&M6!==null&&M6.$$typeof===h0&&jy(M6)===u0.type){H(Z0,u0.sibling);var h8=N(u0,q0.props);return h8.ref=WH(Z0,u0,q0),h8.return=Z0,h8._debugSource=q0._source,h8._debugOwner=q0._owner,h8}H(Z0,u0);break}else K(Z0,u0);u0=u0.sibling}if(q0.type===l){var H8=hq(q0.props.children,Z0.mode,E0,q0.key);return H8.return=Z0,H8}else{var s9=l_(q0,Z0.mode,E0);return s9.ref=WH(Z0,L0,q0),s9.return=Z0,s9}}function n6(Z0,L0,q0,E0){var i0=q0.key,u0=L0;while(u0!==null){if(u0.key===i0)if(u0.tag===M&&u0.stateNode.containerInfo===q0.containerInfo&&u0.stateNode.implementation===q0.implementation){H(Z0,u0.sibling);var M6=N(u0,q0.children||[]);return M6.return=Z0,M6}else{H(Z0,u0);break}else K(Z0,u0);u0=u0.sibling}var C6=n_(q0,Z0.mode,E0);return C6.return=Z0,C6}function s6(Z0,L0,q0,E0){var i0=typeof q0==="object"&&q0!==null&&q0.type===l&&q0.key===null;if(i0)q0=q0.props.children;if(typeof q0==="object"&&q0!==null){switch(q0.$$typeof){case K4:return C(Q6(Z0,L0,q0,E0));case $4:return C(n6(Z0,L0,q0,E0));case h0:var{_payload:u0,_init:M6}=q0;return s6(Z0,L0,M6(u0),E0)}if(D5(q0))return H0(Z0,L0,q0,E0);if(W4(q0))return S0(Z0,L0,q0,E0);JF(Z0,q0)}if(typeof q0==="string"&&q0!==""||typeof q0==="number")return C($6(Z0,L0,""+q0,E0));if(typeof q0==="function")QF(Z0);return H(Z0,L0)}return s6}var A$=_y(!0),Ey=_y(!1);function Z40(X,K){if(X!==null&&K.child!==X.child)throw new Error("Resuming work not yet implemented.");if(K.child===null)return;var H=K.child,L=VY(H,H.pendingProps);K.child=L,L.return=K;while(H.sibling!==null)H=H.sibling,L=L.sibling=VY(H,H.pendingProps),L.return=K;L.sibling=null}function q40(X,K){var H=X.child;while(H!==null)sQ0(H,K),H=H.sibling}var aR=Aq(null),oR;oR={};var ZF=null,k$=null,tR=null,qF=!1;function XF(){ZF=null,k$=null,tR=null,qF=!1}function Cy(){qF=!0}function Ay(){qF=!1}function ky(X,K,H){{TJ(aR,K._currentValue,X),K._currentValue=H;{if(K._currentRenderer!==void 0&&K._currentRenderer!==null&&K._currentRenderer!==oR)W("Detected multiple renderers concurrently rendering the same context provider. This is currently unsupported.");K._currentRenderer=oR}}}function eR(X,K){var H=aR.current;PJ(aR,K),X._currentValue=H}function Jj(X,K,H){var L=X;while(L!==null){var N=L.alternate;if(!z$(L.childLanes,K)){if(L.childLanes=f6(L.childLanes,K),N!==null)N.childLanes=f6(N.childLanes,K)}else if(N!==null&&!z$(N.childLanes,K))N.childLanes=f6(N.childLanes,K);if(L===H)break;L=L.return}if(L!==H)W("Expected to find the propagation root when scheduling context work. This error is likely caused by a bug in React. Please file an issue.")}function X40(X,K,H){Y40(X,K,H)}function Y40(X,K,H){var L=X.child;if(L!==null)L.return=X;while(L!==null){var N=void 0,D=L.dependencies;if(D!==null){N=L.child;var C=D.firstContext;while(C!==null){if(C.context===K){if(L.tag===U){var I=AG(H),b=BZ(z9,I);b.tag=KF;var S=L.updateQueue;if(S===null);else{var g=S.shared,n=g.pending;if(n===null)b.next=b;else b.next=n.next,n.next=b;g.pending=b}}L.lanes=f6(L.lanes,H);var i=L.alternate;if(i!==null)i.lanes=f6(i.lanes,H);Jj(L.return,H,X),D.lanes=f6(D.lanes,H);break}C=C.next}}else if(L.tag===A)N=L.type===X.type?null:L.child;else if(L.tag===c){var K0=L.return;if(K0===null)throw new Error("We just came from a parent so we must have had a parent. This is a bug in React.");K0.lanes=f6(K0.lanes,H);var $0=K0.alternate;if($0!==null)$0.lanes=f6($0.lanes,H);Jj(K0,H,X),N=L.sibling}else N=L.child;if(N!==null)N.return=L;else{N=L;while(N!==null){if(N===X){N=null;break}var H0=N.sibling;if(H0!==null){H0.return=N.return,N=H0;break}N=N.return}}L=N}}function w$(X,K){ZF=X,k$=null,tR=null;var H=X.dependencies;if(H!==null){var L=H.firstContext;if(L!==null){if(H4(H.lanes,K))_H();H.firstContext=null}}}function H5(X){if(qF)W("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo().");var K=X._currentValue;if(tR===X);else{var H={context:X,memoizedValue:K,next:null};if(k$===null){if(ZF===null)throw new Error("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo().");k$=H,ZF.dependencies={lanes:O0,firstContext:H}}else k$=k$.next=H}return K}var zY=null;function Qj(X){if(zY===null)zY=[X];else zY.push(X)}function K40(){if(zY!==null){for(var X=0;X<zY.length;X++){var K=zY[X],H=K.interleaved;if(H!==null){K.interleaved=null;var L=H.next,N=K.pending;if(N!==null){var D=N.next;N.next=L,H.next=D}K.pending=H}}zY=null}}function wy(X,K,H,L){var N=K.interleaved;if(N===null)H.next=H,Qj(K);else H.next=N.next,N.next=H;return K.interleaved=H,YF(X,L)}function $40(X,K,H,L){var N=K.interleaved;if(N===null)H.next=H,Qj(K);else H.next=N.next,N.next=H;K.interleaved=H}function W40(X,K,H,L){var N=K.interleaved;if(N===null)H.next=H,Qj(K);else H.next=N.next,N.next=H;return K.interleaved=H,YF(X,L)}function b7(X,K){return YF(X,K)}var G40=YF;function YF(X,K){X.lanes=f6(X.lanes,K);var H=X.alternate;if(H!==null)H.lanes=f6(H.lanes,K);if(H===null&&(X.flags&(G5|XZ))!==F6)CS(X);var L=X,N=X.return;while(N!==null){if(N.childLanes=f6(N.childLanes,K),H=N.alternate,H!==null)H.childLanes=f6(H.childLanes,K);else if((N.flags&(G5|XZ))!==F6)CS(X);L=N,N=N.return}if(L.tag===B){var D=L.stateNode;return D}else return null}var Iy=0,Py=1,KF=2,Zj=3,$F=!1,qj,WF;qj=!1,WF=null;function Xj(X){var K={baseState:X.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:O0},effects:null};X.updateQueue=K}function Ty(X,K){var H=K.updateQueue,L=X.updateQueue;if(H===L){var N={baseState:L.baseState,firstBaseUpdate:L.firstBaseUpdate,lastBaseUpdate:L.lastBaseUpdate,shared:L.shared,effects:L.effects};K.updateQueue=N}}function BZ(X,K){var H={eventTime:X,lane:K,tag:Iy,payload:null,callback:null,next:null};return H}function Pq(X,K,H){var L=X.updateQueue;if(L===null)return null;var N=L.shared;if(WF===N&&!qj)W("An update (setState, replaceState, or forceUpdate) was scheduled from inside an update function. Update functions should be pure, with zero side-effects. Consider using componentDidUpdate or a callback."),qj=!0;if(zQ0()){var D=N.pending;if(D===null)K.next=K;else K.next=D.next,D.next=K;return N.pending=K,G40(X,H)}else return W40(X,N,K,H)}function GF(X,K,H){var L=K.updateQueue;if(L===null)return;var N=L.shared;if(pb(H)){var D=N.lanes;D=lb(D,X.pendingLanes);var C=f6(D,H);N.lanes=C,aD(X,C)}}function Yj(X,K){var{updateQueue:H,alternate:L}=X;if(L!==null){var N=L.updateQueue;if(H===N){var D=null,C=null,I=H.firstBaseUpdate;if(I!==null){var b=I;do{var S={eventTime:b.eventTime,lane:b.lane,tag:b.tag,payload:b.payload,callback:b.callback,next:null};if(C===null)D=C=S;else C.next=S,C=S;b=b.next}while(b!==null);if(C===null)D=C=K;else C.next=K,C=K}else D=C=K;H={baseState:N.baseState,firstBaseUpdate:D,lastBaseUpdate:C,shared:N.shared,effects:N.effects},X.updateQueue=H;return}}var g=H.lastBaseUpdate;if(g===null)H.firstBaseUpdate=K;else g.next=K;H.lastBaseUpdate=K}function H40(X,K,H,L,N,D){switch(H.tag){case Py:{var C=H.payload;if(typeof C==="function"){Cy();var I=C.call(D,L,N);{if(X.mode&p9){d5(!0);try{C.call(D,L,N)}finally{d5(!1)}}Ay()}return I}return C}case Zj:X.flags=X.flags&~Z7|M8;case Iy:{var b=H.payload,S;if(typeof b==="function"){Cy(),S=b.call(D,L,N);{if(X.mode&p9){d5(!0);try{b.call(D,L,N)}finally{d5(!1)}}Ay()}}else S=b;if(S===null||S===void 0)return L;return y6({},L,S)}case KF:return $F=!0,L}return L}function HF(X,K,H,L){var N=X.updateQueue;$F=!1,WF=N.shared;var{firstBaseUpdate:D,lastBaseUpdate:C}=N,I=N.shared.pending;if(I!==null){N.shared.pending=null;var b=I,S=b.next;if(b.next=null,C===null)D=S;else C.next=S;C=b;var g=X.alternate;if(g!==null){var n=g.updateQueue,i=n.lastBaseUpdate;if(i!==C){if(i===null)n.firstBaseUpdate=S;else i.next=S;n.lastBaseUpdate=b}}}if(D!==null){var K0=N.baseState,$0=O0,H0=null,S0=null,$6=null,Q6=D;do{var{lane:n6,eventTime:s6}=Q6;if(!z$(L,n6)){var Z0={eventTime:s6,lane:n6,tag:Q6.tag,payload:Q6.payload,callback:Q6.callback,next:null};if($6===null)S0=$6=Z0,H0=K0;else $6=$6.next=Z0;$0=f6($0,n6)}else{if($6!==null){var L0={eventTime:s6,lane:l5,tag:Q6.tag,payload:Q6.payload,callback:Q6.callback,next:null};$6=$6.next=L0}K0=H40(X,N,Q6,K0,K,H);var q0=Q6.callback;if(q0!==null&&Q6.lane!==l5){X.flags|=MD;var E0=N.effects;if(E0===null)N.effects=[Q6];else E0.push(Q6)}}if(Q6=Q6.next,Q6===null)if(I=N.shared.pending,I===null)break;else{var i0=I,u0=i0.next;i0.next=null,Q6=u0,N.lastBaseUpdate=i0,N.shared.pending=null}}while(!0);if($6===null)H0=K0;N.baseState=H0,N.firstBaseUpdate=S0,N.lastBaseUpdate=$6;var M6=N.shared.interleaved;if(M6!==null){var C6=M6;do $0=f6($0,C6.lane),C6=C6.next;while(C6!==M6)}else if(D===null)N.shared.lanes=O0;vH($0),X.lanes=$0,X.memoizedState=K0}WF=null}function z40(X,K){if(typeof X!=="function")throw new Error("Invalid argument passed as callback. Expected a function. Instead "+("received: "+X));X.call(K)}function by(){$F=!1}function zF(){return $F}function xy(X,K,H){var L=K.effects;if(K.effects=null,L!==null)for(var N=0;N<L.length;N++){var D=L[N],C=D.callback;if(C!==null)D.callback=null,z40(C,H)}}var GH={},Tq=Aq(GH),HH=Aq(GH),UF=Aq(GH);function LF(X){if(X===GH)throw new Error("Expected host context to exist. This error is likely caused by a bug in React. Please file an issue.");return X}function yy(){var X=LF(UF.current);return X}function Kj(X,K){TJ(UF,K,X),TJ(HH,X,X),TJ(Tq,GH,X);var H=wJ0(K);PJ(Tq,X),TJ(Tq,H,X)}function I$(X){PJ(Tq,X),PJ(HH,X),PJ(UF,X)}function $j(){var X=LF(Tq.current);return X}function vy(X){var K=LF(UF.current),H=LF(Tq.current),L=IJ0(H,X.type);if(H===L)return;TJ(HH,X,X),TJ(Tq,L,X)}function Wj(X){if(HH.current!==X)return;PJ(Tq,X),PJ(HH,X)}var U40=0,Sy=1,fy=1,zH=2,j1=Aq(U40);function Gj(X,K){return(X&K)!==0}function P$(X){return X&Sy}function Hj(X,K){return X&Sy|K}function L40(X,K){return X|K}function bq(X,K){TJ(j1,K,X)}function T$(X){PJ(j1,X)}function F40(X,K){var H=X.memoizedState;if(H!==null){if(H.dehydrated!==null)return!0;return!1}var L=X.memoizedProps;return!0}function FF(X){var K=X;while(K!==null){if(K.tag===k){var H=K.memoizedState;if(H!==null){var L=H.dehydrated;if(L===null||ex(L)||IR(L))return K}}else if(K.tag===t&&K.memoizedProps.revealOrder!==void 0){var N=(K.flags&M8)!==F6;if(N)return K}else if(K.child!==null){K.child.return=K,K=K.child;continue}if(K===X)return null;while(K.sibling===null){if(K.return===null||K.return===X)return null;K=K.return}K.sibling.return=K.return,K=K.sibling}return null}var x7=0,R5=1,$Q=2,j5=4,HJ=8,zj=[];function Uj(){for(var X=0;X<zj.length;X++){var K=zj[X];K._workInProgressVersionPrimary=null}zj.length=0}function B40(X,K){var H=K._getVersion,L=H(K._source);if(X.mutableSourceEagerHydrationData==null)X.mutableSourceEagerHydrationData=[K,L];else X.mutableSourceEagerHydrationData.push(K,L)}var{ReactCurrentDispatcher:d0,ReactCurrentBatchConfig:UH}=Z,Lj,b$;Lj=new Set;var UY=O0,m8=null,_5=null,E5=null,BF=!1,LH=!1,FH=0,N40=0,M40=25,N0=null,d4=null,xq=-1,Fj=!1;function C8(){{var X=N0;if(d4===null)d4=[X];else d4.push(X)}}function y0(){{var X=N0;if(d4!==null){if(xq++,d4[xq]!==X)O40(X)}}}function x$(X){if(X!==void 0&&X!==null&&!D5(X))W("%s received a final argument that is not an array (instead, received `%s`). When specified, the final argument must be an array.",N0,typeof X)}function O40(X){{var K=P6(m8);if(!Lj.has(K)){if(Lj.add(K),d4!==null){var H="",L=30;for(var N=0;N<=xq;N++){var D=d4[N],C=N===xq?X:D,I=N+1+". "+D;while(I.length<L)I+=" ";I+=C+"\n",H+=I}W("React has detected a change in the order of Hooks called by %s. This will lead to bugs and errors if not fixed. For more information, read the Rules of Hooks: https://reactjs.org/link/rules-of-hooks\n\n   Previous render            Next render\n   ------------------------------------------------------\n%s   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n",K,H)}}}}function bJ(){throw new Error("Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:\n1. You might have mismatching versions of React and the renderer (such as React DOM)\n2. You might be breaking the Rules of Hooks\n3. You might have more than one copy of React in the same app\nSee https://reactjs.org/link/invalid-hook-call for tips about how to debug and fix this problem.")}function Bj(X,K){if(Fj)return!1;if(K===null)return W("%s received a final argument during this render, but not during the previous render. Even though the final argument is optional, its type cannot change between renders.",N0),!1;if(X.length!==K.length)W("The final argument passed to %s changed size between renders. The order and size of this array must remain constant.\n\nPrevious: %s\nIncoming: %s",N0,"["+K.join(", ")+"]","["+X.join(", ")+"]");for(var H=0;H<K.length&&H<X.length;H++){if(L4(X[H],K[H]))continue;return!1}return!0}function y$(X,K,H,L,N,D){if(UY=D,m8=K,d4=X!==null?X._debugHookTypes:null,xq=-1,Fj=X!==null&&X.type!==K.type,K.memoizedState=null,K.updateQueue=null,K.lanes=O0,X!==null&&X.memoizedState!==null)d0.current=Yv;else if(d4!==null)d0.current=Xv;else d0.current=qv;var C=H(L,N);if(LH){var I=0;do{if(LH=!1,FH=0,I>=M40)throw new Error("Too many re-renders. React limits the number of renders to prevent an infinite loop.");I+=1,Fj=!1,_5=null,E5=null,K.updateQueue=null,xq=-1,d0.current=Kv,C=H(L,N)}while(LH)}d0.current=PF,K._debugHookTypes=d4;var b=_5!==null&&_5.next!==null;if(UY=O0,m8=null,_5=null,E5=null,N0=null,d4=null,xq=-1,X!==null&&(X.flags&KZ)!==(K.flags&KZ)&&(X.mode&r6)!==H6)W("Internal React error: Expected static flag was missing. Please notify the React team.");if(BF=!1,b)throw new Error("Rendered fewer hooks than expected. This may be caused by an accidental early return statement.");return C}function v$(){var X=FH!==0;return FH=0,X}function gy(X,K,H){if(K.updateQueue=X.updateQueue,(K.mode&qQ)!==H6)K.flags&=~(WL|YZ|N1|X8);else K.flags&=~(N1|X8);X.lanes=BL(X.lanes,H)}function my(){if(d0.current=PF,BF){var X=m8.memoizedState;while(X!==null){var K=X.queue;if(K!==null)K.pending=null;X=X.next}BF=!1}UY=O0,m8=null,_5=null,E5=null,d4=null,xq=-1,N0=null,ty=!1,LH=!1,FH=0}function WQ(){var X={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};if(E5===null)m8.memoizedState=E5=X;else E5=E5.next=X;return E5}function l4(){var X;if(_5===null){var K=m8.alternate;if(K!==null)X=K.memoizedState;else X=null}else X=_5.next;var H;if(E5===null)H=m8.memoizedState;else H=E5.next;if(H!==null)E5=H,H=E5.next,_5=X;else{if(X===null)throw new Error("Rendered more hooks than during the previous render.");_5=X;var L={memoizedState:_5.memoizedState,baseState:_5.baseState,baseQueue:_5.baseQueue,queue:_5.queue,next:null};if(E5===null)m8.memoizedState=E5=L;else E5=E5.next=L}return E5}function hy(){return{lastEffect:null,stores:null}}function Nj(X,K){return typeof K==="function"?K(X):K}function Mj(X,K,H){var L=WQ(),N;if(H!==void 0)N=H(K);else N=K;L.memoizedState=L.baseState=N;var D={pending:null,interleaved:null,lanes:O0,dispatch:null,lastRenderedReducer:X,lastRenderedState:N};L.queue=D;var C=D.dispatch=R40.bind(null,m8,D);return[L.memoizedState,C]}function Oj(X,K,H){var L=l4(),N=L.queue;if(N===null)throw new Error("Should have a queue. This is likely a bug in React. Please file an issue.");N.lastRenderedReducer=X;var D=_5,C=D.baseQueue,I=N.pending;if(I!==null){if(C!==null){var b=C.next,S=I.next;C.next=S,I.next=b}if(D.baseQueue!==C)W("Internal error: Expected work-in-progress queue to be a clone. This is a bug in React.");D.baseQueue=C=I,N.pending=null}if(C!==null){var g=C.next,n=D.baseState,i=null,K0=null,$0=null,H0=g;do{var S0=H0.lane;if(!z$(UY,S0)){var $6={lane:S0,action:H0.action,hasEagerState:H0.hasEagerState,eagerState:H0.eagerState,next:null};if($0===null)K0=$0=$6,i=n;else $0=$0.next=$6;m8.lanes=f6(m8.lanes,S0),vH(S0)}else{if($0!==null){var Q6={lane:l5,action:H0.action,hasEagerState:H0.hasEagerState,eagerState:H0.eagerState,next:null};$0=$0.next=Q6}if(H0.hasEagerState)n=H0.eagerState;else{var n6=H0.action;n=X(n,n6)}}H0=H0.next}while(H0!==null&&H0!==g);if($0===null)i=n;else $0.next=K0;if(!L4(n,L.memoizedState))_H();L.memoizedState=n,L.baseState=i,L.baseQueue=$0,N.lastRenderedState=n}var s6=N.interleaved;if(s6!==null){var Z0=s6;do{var L0=Z0.lane;m8.lanes=f6(m8.lanes,L0),vH(L0),Z0=Z0.next}while(Z0!==s6)}else if(C===null)N.lanes=O0;var q0=N.dispatch;return[L.memoizedState,q0]}function Vj(X,K,H){var L=l4(),N=L.queue;if(N===null)throw new Error("Should have a queue. This is likely a bug in React. Please file an issue.");N.lastRenderedReducer=X;var{dispatch:D,pending:C}=N,I=L.memoizedState;if(C!==null){N.pending=null;var b=C.next,S=b;do{var g=S.action;I=X(I,g),S=S.next}while(S!==b);if(!L4(I,L.memoizedState))_H();if(L.memoizedState=I,L.baseQueue===null)L.baseState=I;N.lastRenderedState=I}return[I,D]}function Dj(X,K,H){return}function NF(X,K,H){return}function Rj(X,K,H){var L=m8,N=WQ(),D,C=GJ();if(C){if(H===void 0)throw new Error("Missing getServerSnapshot, which is required for server-rendered content. Will revert to client rendering.");if(D=H(),!b$){if(D!==H())W("The result of getServerSnapshot should be cached to avoid an infinite loop"),b$=!0}}else{if(D=K(),!b$){var I=K();if(!L4(D,I))W("The result of getSnapshot should be cached to avoid an infinite loop"),b$=!0}var b=rF();if(b===null)throw new Error("Expected a work-in-progress root. This is a bug in React. Please file an issue.");if(!FL(b,UY))uy(L,K,D)}N.memoizedState=D;var S={value:D,getSnapshot:K};return N.queue=S,RF(py.bind(null,L,S,X),[X]),L.flags|=N1,BH(R5|HJ,cy.bind(null,L,S,D,K),void 0,null),D}function MF(X,K,H){var L=m8,N=l4(),D=K();if(!b$){var C=K();if(!L4(D,C))W("The result of getSnapshot should be cached to avoid an infinite loop"),b$=!0}var I=N.memoizedState,b=!L4(I,D);if(b)N.memoizedState=D,_H();var S=N.queue;if(MH(py.bind(null,L,S,X),[X]),S.getSnapshot!==K||b||E5!==null&&E5.memoizedState.tag&R5){L.flags|=N1,BH(R5|HJ,cy.bind(null,L,S,D,K),void 0,null);var g=rF();if(g===null)throw new Error("Expected a work-in-progress root. This is a bug in React. Please file an issue.");if(!FL(g,UY))uy(L,K,D)}return D}function uy(X,K,H){X.flags|=$L;var L={getSnapshot:K,value:H},N=m8.updateQueue;if(N===null)N=hy(),m8.updateQueue=N,N.stores=[L];else{var D=N.stores;if(D===null)N.stores=[L];else D.push(L)}}function cy(X,K,H,L){if(K.value=H,K.getSnapshot=L,dy(K))ly(X)}function py(X,K,H){var L=function(){if(dy(K))ly(X)};return H(L)}function dy(X){var{getSnapshot:K,value:H}=X;try{var L=K();return!L4(H,L)}catch(N){return!0}}function ly(X){var K=b7(X,V6);if(K!==null)w5(K,X,V6,z9)}function OF(X){var K=WQ();if(typeof X==="function")X=X();K.memoizedState=K.baseState=X;var H={pending:null,interleaved:null,lanes:O0,dispatch:null,lastRenderedReducer:Nj,lastRenderedState:X};K.queue=H;var L=H.dispatch=j40.bind(null,m8,H);return[K.memoizedState,L]}function jj(X){return Oj(Nj)}function _j(X){return Vj(Nj)}function BH(X,K,H,L){var N={tag:X,create:K,destroy:H,deps:L,next:null},D=m8.updateQueue;if(D===null)D=hy(),m8.updateQueue=D,D.lastEffect=N.next=N;else{var C=D.lastEffect;if(C===null)D.lastEffect=N.next=N;else{var I=C.next;C.next=N,N.next=I,D.lastEffect=N}}return N}function Ej(X){var K=WQ();{var H={current:X};return K.memoizedState=H,H}}function VF(X){var K=l4();return K.memoizedState}function NH(X,K,H,L){var N=WQ(),D=L===void 0?null:L;m8.flags|=X,N.memoizedState=BH(R5|K,H,void 0,D)}function DF(X,K,H,L){var N=l4(),D=L===void 0?null:L,C=void 0;if(_5!==null){var I=_5.memoizedState;if(C=I.destroy,D!==null){var b=I.deps;if(Bj(D,b)){N.memoizedState=BH(K,H,C,D);return}}}m8.flags|=X,N.memoizedState=BH(R5|K,H,C,D)}function RF(X,K){if((m8.mode&qQ)!==H6)return NH(WL|N1|DD,HJ,X,K);else return NH(N1|DD,HJ,X,K)}function MH(X,K){return DF(N1,HJ,X,K)}function Cj(X,K){return NH(X8,$Q,X,K)}function jF(X,K){return DF(X8,$Q,X,K)}function Aj(X,K){var H=X8;if(H|=sX,(m8.mode&qQ)!==H6)H|=YZ;return NH(H,j5,X,K)}function _F(X,K){return DF(X8,j5,X,K)}function iy(X,K){if(typeof K==="function"){var H=K,L=X();return H(L),function(){H(null)}}else if(K!==null&&K!==void 0){var N=K;if(!N.hasOwnProperty("current"))W("Expected useImperativeHandle() first argument to either be a ref callback or React.createRef() object. Instead received: %s.","an object with keys {"+Object.keys(N).join(", ")+"}");var D=X();return N.current=D,function(){N.current=null}}}function kj(X,K,H){if(typeof K!=="function")W("Expected useImperativeHandle() second argument to be a function that creates a handle. Instead received: %s.",K!==null?typeof K:"null");var L=H!==null&&H!==void 0?H.concat([X]):null,N=X8;if(N|=sX,(m8.mode&qQ)!==H6)N|=YZ;return NH(N,j5,iy.bind(null,K,X),L)}function EF(X,K,H){if(typeof K!=="function")W("Expected useImperativeHandle() second argument to be a function that creates a handle. Instead received: %s.",K!==null?typeof K:"null");var L=H!==null&&H!==void 0?H.concat([X]):null;return DF(X8,j5,iy.bind(null,K,X),L)}function CF(X,K){}var AF=CF;function wj(X,K){var H=WQ(),L=K===void 0?null:K;return H.memoizedState=[X,L],X}function kF(X,K){var H=l4(),L=K===void 0?null:K,N=H.memoizedState;if(N!==null){if(L!==null){var D=N[1];if(Bj(L,D))return N[0]}}return H.memoizedState=[X,L],X}function Ij(X,K){var H=WQ(),L=K===void 0?null:K,N=X();return H.memoizedState=[N,L],N}function wF(X,K){var H=l4(),L=K===void 0?null:K,N=H.memoizedState;if(N!==null){if(L!==null){var D=N[1];if(Bj(L,D))return N[0]}}var C=X();return H.memoizedState=[C,L],C}function Pj(X){var K=WQ();return K.memoizedState=X,X}function ny(X){var K=l4(),H=_5,L=H.memoizedState;return ry(K,L,X)}function sy(X){var K=l4();if(_5===null)return K.memoizedState=X,X;else{var H=_5.memoizedState;return ry(K,H,X)}}function ry(X,K,H){var L=!X90(UY);if(L){if(!L4(H,K)){var N=db();m8.lanes=f6(m8.lanes,N),vH(N),X.baseState=!0}return K}else{if(X.baseState)X.baseState=!1,_H();return X.memoizedState=H,H}}function V40(X,K,H){var L=O1();i5(L90(L,WZ)),X(!0);var N=UH.transition;UH.transition={};var D=UH.transition;UH.transition._updatedFibers=new Set;try{X(!1),K()}finally{if(i5(L),UH.transition=N,N===null&&D._updatedFibers){var C=D._updatedFibers.size;if(C>10)$("Detected a large number of updates inside startTransition. If this is due to a subscription please re-write it to use React provided hooks. Otherwise concurrent mode guarantees are off the table.");D._updatedFibers.clear()}}}function Tj(){var X=OF(!1),K=X[0],H=X[1],L=V40.bind(null,H),N=WQ();return N.memoizedState=L,[K,L]}function ay(){var X=jj(),K=X[0],H=l4(),L=H.memoizedState;return[K,L]}function oy(){var X=_j(),K=X[0],H=l4(),L=H.memoizedState;return[K,L]}var ty=!1;function D40(){return ty}function bj(){var X=WQ(),K=rF(),H=K.identifierPrefix,L;if(GJ()){var N=g70();L=":"+H+"R"+N;var D=FH++;if(D>0)L+="H"+D.toString(32);L+=":"}else{var C=N40++;L=":"+H+"r"+C.toString(32)+":"}return X.memoizedState=L,L}function IF(){var X=l4(),K=X.memoizedState;return K}function R40(X,K,H){if(typeof arguments[3]==="function")W("State updates from the useState() and useReducer() Hooks don't support the second callback argument. To execute a side effect after rendering, declare it in the component body with useEffect().");var L=gq(X),N={lane:L,action:H,hasEagerState:!1,eagerState:null,next:null};if(ey(X))Jv(K,N);else{var D=wy(X,K,N,L);if(D!==null){var C=Y7();w5(D,X,L,C),Qv(D,K,L)}}Zv(X,L)}function j40(X,K,H){if(typeof arguments[3]==="function")W("State updates from the useState() and useReducer() Hooks don't support the second callback argument. To execute a side effect after rendering, declare it in the component body with useEffect().");var L=gq(X),N={lane:L,action:H,hasEagerState:!1,eagerState:null,next:null};if(ey(X))Jv(K,N);else{var D=X.alternate;if(X.lanes===O0&&(D===null||D.lanes===O0)){var C=K.lastRenderedReducer;if(C!==null){var I;I=d0.current,d0.current=_1;try{var b=K.lastRenderedState,S=C(b,H);if(N.hasEagerState=!0,N.eagerState=S,L4(S,b)){$40(X,K,N,L);return}}catch(i){}finally{d0.current=I}}}var g=wy(X,K,N,L);if(g!==null){var n=Y7();w5(g,X,L,n),Qv(g,K,L)}}Zv(X,L)}function ey(X){var K=X.alternate;return X===m8||K!==null&&K===m8}function Jv(X,K){LH=BF=!0;var H=X.pending;if(H===null)K.next=K;else K.next=H.next,H.next=K;X.pending=K}function Qv(X,K,H){if(pb(H)){var L=K.lanes;L=lb(L,X.pendingLanes);var N=f6(L,H);K.lanes=N,aD(X,N)}}function Zv(X,K,H){CD(X,K)}var PF={readContext:H5,useCallback:bJ,useContext:bJ,useEffect:bJ,useImperativeHandle:bJ,useInsertionEffect:bJ,useLayoutEffect:bJ,useMemo:bJ,useReducer:bJ,useRef:bJ,useState:bJ,useDebugValue:bJ,useDeferredValue:bJ,useTransition:bJ,useMutableSource:bJ,useSyncExternalStore:bJ,useId:bJ,unstable_isNewReconciler:r0},qv=null,Xv=null,Yv=null,Kv=null,GQ=null,_1=null,TF=null;{var xj=function(){W("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo().")},D6=function(){W("Do not call Hooks inside useEffect(...), useMemo(...), or other built-in Hooks. You can only call Hooks at the top level of your React function. For more information, see https://reactjs.org/link/rules-of-hooks")};qv={readContext:function(X){return H5(X)},useCallback:function(X,K){return N0="useCallback",C8(),x$(K),wj(X,K)},useContext:function(X){return N0="useContext",C8(),H5(X)},useEffect:function(X,K){return N0="useEffect",C8(),x$(K),RF(X,K)},useImperativeHandle:function(X,K,H){return N0="useImperativeHandle",C8(),x$(H),kj(X,K,H)},useInsertionEffect:function(X,K){return N0="useInsertionEffect",C8(),x$(K),Cj(X,K)},useLayoutEffect:function(X,K){return N0="useLayoutEffect",C8(),x$(K),Aj(X,K)},useMemo:function(X,K){N0="useMemo",C8(),x$(K);var H=d0.current;d0.current=GQ;try{return Ij(X,K)}finally{d0.current=H}},useReducer:function(X,K,H){N0="useReducer",C8();var L=d0.current;d0.current=GQ;try{return Mj(X,K,H)}finally{d0.current=L}},useRef:function(X){return N0="useRef",C8(),Ej(X)},useState:function(X){N0="useState",C8();var K=d0.current;d0.current=GQ;try{return OF(X)}finally{d0.current=K}},useDebugValue:function(X,K){return N0="useDebugValue",C8(),CF()},useDeferredValue:function(X){return N0="useDeferredValue",C8(),Pj(X)},useTransition:function(){return N0="useTransition",C8(),Tj()},useMutableSource:function(X,K,H){return N0="useMutableSource",C8(),Dj()},useSyncExternalStore:function(X,K,H){return N0="useSyncExternalStore",C8(),Rj(X,K,H)},useId:function(){return N0="useId",C8(),bj()},unstable_isNewReconciler:r0},Xv={readContext:function(X){return H5(X)},useCallback:function(X,K){return N0="useCallback",y0(),wj(X,K)},useContext:function(X){return N0="useContext",y0(),H5(X)},useEffect:function(X,K){return N0="useEffect",y0(),RF(X,K)},useImperativeHandle:function(X,K,H){return N0="useImperativeHandle",y0(),kj(X,K,H)},useInsertionEffect:function(X,K){return N0="useInsertionEffect",y0(),Cj(X,K)},useLayoutEffect:function(X,K){return N0="useLayoutEffect",y0(),Aj(X,K)},useMemo:function(X,K){N0="useMemo",y0();var H=d0.current;d0.current=GQ;try{return Ij(X,K)}finally{d0.current=H}},useReducer:function(X,K,H){N0="useReducer",y0();var L=d0.current;d0.current=GQ;try{return Mj(X,K,H)}finally{d0.current=L}},useRef:function(X){return N0="useRef",y0(),Ej(X)},useState:function(X){N0="useState",y0();var K=d0.current;d0.current=GQ;try{return OF(X)}finally{d0.current=K}},useDebugValue:function(X,K){return N0="useDebugValue",y0(),CF()},useDeferredValue:function(X){return N0="useDeferredValue",y0(),Pj(X)},useTransition:function(){return N0="useTransition",y0(),Tj()},useMutableSource:function(X,K,H){return N0="useMutableSource",y0(),Dj()},useSyncExternalStore:function(X,K,H){return N0="useSyncExternalStore",y0(),Rj(X,K,H)},useId:function(){return N0="useId",y0(),bj()},unstable_isNewReconciler:r0},Yv={readContext:function(X){return H5(X)},useCallback:function(X,K){return N0="useCallback",y0(),kF(X,K)},useContext:function(X){return N0="useContext",y0(),H5(X)},useEffect:function(X,K){return N0="useEffect",y0(),MH(X,K)},useImperativeHandle:function(X,K,H){return N0="useImperativeHandle",y0(),EF(X,K,H)},useInsertionEffect:function(X,K){return N0="useInsertionEffect",y0(),jF(X,K)},useLayoutEffect:function(X,K){return N0="useLayoutEffect",y0(),_F(X,K)},useMemo:function(X,K){N0="useMemo",y0();var H=d0.current;d0.current=_1;try{return wF(X,K)}finally{d0.current=H}},useReducer:function(X,K,H){N0="useReducer",y0();var L=d0.current;d0.current=_1;try{return Oj(X,K,H)}finally{d0.current=L}},useRef:function(X){return N0="useRef",y0(),VF()},useState:function(X){N0="useState",y0();var K=d0.current;d0.current=_1;try{return jj(X)}finally{d0.current=K}},useDebugValue:function(X,K){return N0="useDebugValue",y0(),AF()},useDeferredValue:function(X){return N0="useDeferredValue",y0(),ny(X)},useTransition:function(){return N0="useTransition",y0(),ay()},useMutableSource:function(X,K,H){return N0="useMutableSource",y0(),NF()},useSyncExternalStore:function(X,K,H){return N0="useSyncExternalStore",y0(),MF(X,K)},useId:function(){return N0="useId",y0(),IF()},unstable_isNewReconciler:r0},Kv={readContext:function(X){return H5(X)},useCallback:function(X,K){return N0="useCallback",y0(),kF(X,K)},useContext:function(X){return N0="useContext",y0(),H5(X)},useEffect:function(X,K){return N0="useEffect",y0(),MH(X,K)},useImperativeHandle:function(X,K,H){return N0="useImperativeHandle",y0(),EF(X,K,H)},useInsertionEffect:function(X,K){return N0="useInsertionEffect",y0(),jF(X,K)},useLayoutEffect:function(X,K){return N0="useLayoutEffect",y0(),_F(X,K)},useMemo:function(X,K){N0="useMemo",y0();var H=d0.current;d0.current=TF;try{return wF(X,K)}finally{d0.current=H}},useReducer:function(X,K,H){N0="useReducer",y0();var L=d0.current;d0.current=TF;try{return Vj(X,K,H)}finally{d0.current=L}},useRef:function(X){return N0="useRef",y0(),VF()},useState:function(X){N0="useState",y0();var K=d0.current;d0.current=TF;try{return _j(X)}finally{d0.current=K}},useDebugValue:function(X,K){return N0="useDebugValue",y0(),AF()},useDeferredValue:function(X){return N0="useDeferredValue",y0(),sy(X)},useTransition:function(){return N0="useTransition",y0(),oy()},useMutableSource:function(X,K,H){return N0="useMutableSource",y0(),NF()},useSyncExternalStore:function(X,K,H){return N0="useSyncExternalStore",y0(),MF(X,K)},useId:function(){return N0="useId",y0(),IF()},unstable_isNewReconciler:r0},GQ={readContext:function(X){return xj(),H5(X)},useCallback:function(X,K){return N0="useCallback",D6(),C8(),wj(X,K)},useContext:function(X){return N0="useContext",D6(),C8(),H5(X)},useEffect:function(X,K){return N0="useEffect",D6(),C8(),RF(X,K)},useImperativeHandle:function(X,K,H){return N0="useImperativeHandle",D6(),C8(),kj(X,K,H)},useInsertionEffect:function(X,K){return N0="useInsertionEffect",D6(),C8(),Cj(X,K)},useLayoutEffect:function(X,K){return N0="useLayoutEffect",D6(),C8(),Aj(X,K)},useMemo:function(X,K){N0="useMemo",D6(),C8();var H=d0.current;d0.current=GQ;try{return Ij(X,K)}finally{d0.current=H}},useReducer:function(X,K,H){N0="useReducer",D6(),C8();var L=d0.current;d0.current=GQ;try{return Mj(X,K,H)}finally{d0.current=L}},useRef:function(X){return N0="useRef",D6(),C8(),Ej(X)},useState:function(X){N0="useState",D6(),C8();var K=d0.current;d0.current=GQ;try{return OF(X)}finally{d0.current=K}},useDebugValue:function(X,K){return N0="useDebugValue",D6(),C8(),CF()},useDeferredValue:function(X){return N0="useDeferredValue",D6(),C8(),Pj(X)},useTransition:function(){return N0="useTransition",D6(),C8(),Tj()},useMutableSource:function(X,K,H){return N0="useMutableSource",D6(),C8(),Dj()},useSyncExternalStore:function(X,K,H){return N0="useSyncExternalStore",D6(),C8(),Rj(X,K,H)},useId:function(){return N0="useId",D6(),C8(),bj()},unstable_isNewReconciler:r0},_1={readContext:function(X){return xj(),H5(X)},useCallback:function(X,K){return N0="useCallback",D6(),y0(),kF(X,K)},useContext:function(X){return N0="useContext",D6(),y0(),H5(X)},useEffect:function(X,K){return N0="useEffect",D6(),y0(),MH(X,K)},useImperativeHandle:function(X,K,H){return N0="useImperativeHandle",D6(),y0(),EF(X,K,H)},useInsertionEffect:function(X,K){return N0="useInsertionEffect",D6(),y0(),jF(X,K)},useLayoutEffect:function(X,K){return N0="useLayoutEffect",D6(),y0(),_F(X,K)},useMemo:function(X,K){N0="useMemo",D6(),y0();var H=d0.current;d0.current=_1;try{return wF(X,K)}finally{d0.current=H}},useReducer:function(X,K,H){N0="useReducer",D6(),y0();var L=d0.current;d0.current=_1;try{return Oj(X,K,H)}finally{d0.current=L}},useRef:function(X){return N0="useRef",D6(),y0(),VF()},useState:function(X){N0="useState",D6(),y0();var K=d0.current;d0.current=_1;try{return jj(X)}finally{d0.current=K}},useDebugValue:function(X,K){return N0="useDebugValue",D6(),y0(),AF()},useDeferredValue:function(X){return N0="useDeferredValue",D6(),y0(),ny(X)},useTransition:function(){return N0="useTransition",D6(),y0(),ay()},useMutableSource:function(X,K,H){return N0="useMutableSource",D6(),y0(),NF()},useSyncExternalStore:function(X,K,H){return N0="useSyncExternalStore",D6(),y0(),MF(X,K)},useId:function(){return N0="useId",D6(),y0(),IF()},unstable_isNewReconciler:r0},TF={readContext:function(X){return xj(),H5(X)},useCallback:function(X,K){return N0="useCallback",D6(),y0(),kF(X,K)},useContext:function(X){return N0="useContext",D6(),y0(),H5(X)},useEffect:function(X,K){return N0="useEffect",D6(),y0(),MH(X,K)},useImperativeHandle:function(X,K,H){return N0="useImperativeHandle",D6(),y0(),EF(X,K,H)},useInsertionEffect:function(X,K){return N0="useInsertionEffect",D6(),y0(),jF(X,K)},useLayoutEffect:function(X,K){return N0="useLayoutEffect",D6(),y0(),_F(X,K)},useMemo:function(X,K){N0="useMemo",D6(),y0();var H=d0.current;d0.current=_1;try{return wF(X,K)}finally{d0.current=H}},useReducer:function(X,K,H){N0="useReducer",D6(),y0();var L=d0.current;d0.current=_1;try{return Vj(X,K,H)}finally{d0.current=L}},useRef:function(X){return N0="useRef",D6(),y0(),VF()},useState:function(X){N0="useState",D6(),y0();var K=d0.current;d0.current=_1;try{return _j(X)}finally{d0.current=K}},useDebugValue:function(X,K){return N0="useDebugValue",D6(),y0(),AF()},useDeferredValue:function(X){return N0="useDeferredValue",D6(),y0(),sy(X)},useTransition:function(){return N0="useTransition",D6(),y0(),oy()},useMutableSource:function(X,K,H){return N0="useMutableSource",D6(),y0(),NF()},useSyncExternalStore:function(X,K,H){return N0="useSyncExternalStore",D6(),y0(),MF(X,K)},useId:function(){return N0="useId",D6(),y0(),IF()},unstable_isNewReconciler:r0}}var yq=Q.unstable_now,$v=0,bF=-1,OH=-1,xF=-1,yj=!1,yF=!1;function Wv(){return yj}function _40(){yF=!0}function E40(){yj=!1,yF=!1}function C40(){yj=yF,yF=!1}function Gv(){return $v}function Hv(){$v=yq()}function vj(X){if(OH=yq(),X.actualStartTime<0)X.actualStartTime=yq()}function zv(X){OH=-1}function vF(X,K){if(OH>=0){var H=yq()-OH;if(X.actualDuration+=H,K)X.selfBaseDuration=H;OH=-1}}function HQ(X){if(bF>=0){var K=yq()-bF;bF=-1;var H=X.return;while(H!==null){switch(H.tag){case B:var L=H.stateNode;L.effectDuration+=K;return;case T:var N=H.stateNode;N.effectDuration+=K;return}H=H.return}}}function Sj(X){if(xF>=0){var K=yq()-xF;xF=-1;var H=X.return;while(H!==null){switch(H.tag){case B:var L=H.stateNode;if(L!==null)L.passiveEffectDuration+=K;return;case T:var N=H.stateNode;if(N!==null)N.passiveEffectDuration+=K;return}H=H.return}}}function zQ(){bF=yq()}function fj(){xF=yq()}function gj(X){var K=X.child;while(K)X.actualDuration+=K.actualDuration,K=K.sibling}function E1(X,K){if(X&&X.defaultProps){var H=y6({},K),L=X.defaultProps;for(var N in L)if(H[N]===void 0)H[N]=L[N];return H}return K}var mj={},hj,uj,cj,pj,dj,Uv,SF,lj,ij,nj,VH;{hj=new Set,uj=new Set,cj=new Set,pj=new Set,lj=new Set,dj=new Set,ij=new Set,nj=new Set,VH=new Set;var Lv=new Set;SF=function(X,K){if(X===null||typeof X==="function")return;var H=K+"_"+X;if(!Lv.has(H))Lv.add(H),W("%s(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",K,X)},Uv=function(X,K){if(K===void 0){var H=b8(X)||"Component";if(!dj.has(H))dj.add(H),W("%s.getDerivedStateFromProps(): A valid state object (or null) must be returned. You have returned undefined.",H)}},Object.defineProperty(mj,"_processChildContext",{enumerable:!1,value:function(){throw new Error("_processChildContext is not available in React 16+. This likely means you have multiple copies of React and are attempting to nest a React 15 tree inside a React 16 tree using unstable_renderSubtreeIntoContainer, which isn't supported. Try to make sure you have only one copy of React (and ideally, switch to ReactDOM.createPortal).")}}),Object.freeze(mj)}function sj(X,K,H,L){var N=X.memoizedState,D=H(L,N);{if(X.mode&p9){d5(!0);try{D=H(L,N)}finally{d5(!1)}}Uv(K,D)}var C=D===null||D===void 0?N:y6({},N,D);if(X.memoizedState=C,X.lanes===O0){var I=X.updateQueue;I.baseState=C}}var rj={isMounted:M80,enqueueSetState:function(X,K,H){var L=X$(X),N=Y7(),D=gq(L),C=BZ(N,D);if(C.payload=K,H!==void 0&&H!==null)SF(H,"setState"),C.callback=H;var I=Pq(L,C,D);if(I!==null)w5(I,L,D,N),GF(I,L,D);CD(L,D)},enqueueReplaceState:function(X,K,H){var L=X$(X),N=Y7(),D=gq(L),C=BZ(N,D);if(C.tag=Py,C.payload=K,H!==void 0&&H!==null)SF(H,"replaceState"),C.callback=H;var I=Pq(L,C,D);if(I!==null)w5(I,L,D,N),GF(I,L,D);CD(L,D)},enqueueForceUpdate:function(X,K){var H=X$(X),L=Y7(),N=gq(H),D=BZ(L,N);if(D.tag=KF,K!==void 0&&K!==null)SF(K,"forceUpdate"),D.callback=K;var C=Pq(H,D,N);if(C!==null)w5(C,H,N,L),GF(C,H,N);s80(H,N)}};function Fv(X,K,H,L,N,D,C){var I=X.stateNode;if(typeof I.shouldComponentUpdate==="function"){var b=I.shouldComponentUpdate(L,D,C);{if(X.mode&p9){d5(!0);try{b=I.shouldComponentUpdate(L,D,C)}finally{d5(!1)}}if(b===void 0)W("%s.shouldComponentUpdate(): Returned undefined instead of a boolean value. Make sure to return true or false.",b8(K)||"Component")}return b}if(K.prototype&&K.prototype.isPureReactComponent)return!uG(H,L)||!uG(N,D);return!0}function A40(X,K,H){var L=X.stateNode;{var N=b8(K)||"Component",D=L.render;if(!D)if(K.prototype&&typeof K.prototype.render==="function")W("%s(...): No `render` method found on the returned component instance: did you accidentally return an object from the constructor?",N);else W("%s(...): No `render` method found on the returned component instance: you may have forgotten to define `render`.",N);if(L.getInitialState&&!L.getInitialState.isReactClassApproved&&!L.state)W("getInitialState was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Did you mean to define a state property instead?",N);if(L.getDefaultProps&&!L.getDefaultProps.isReactClassApproved)W("getDefaultProps was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Use a static property to define defaultProps instead.",N);if(L.propTypes)W("propTypes was defined as an instance property on %s. Use a static property to define propTypes instead.",N);if(L.contextType)W("contextType was defined as an instance property on %s. Use a static property to define contextType instead.",N);{if(K.childContextTypes&&!VH.has(K)&&(X.mode&p9)===H6)VH.add(K),W("%s uses the legacy childContextTypes API which is no longer supported and will be removed in the next major release. Use React.createContext() instead\n\n.Learn more about this warning here: https://reactjs.org/link/legacy-context",N);if(K.contextTypes&&!VH.has(K)&&(X.mode&p9)===H6)VH.add(K),W("%s uses the legacy contextTypes API which is no longer supported and will be removed in the next major release. Use React.createContext() with static contextType instead.\n\nLearn more about this warning here: https://reactjs.org/link/legacy-context",N);if(L.contextTypes)W("contextTypes was defined as an instance property on %s. Use a static property to define contextTypes instead.",N);if(K.contextType&&K.contextTypes&&!ij.has(K))ij.add(K),W("%s declares both contextTypes and contextType static properties. The legacy contextTypes property will be ignored.",N)}if(typeof L.componentShouldUpdate==="function")W("%s has a method called componentShouldUpdate(). Did you mean shouldComponentUpdate()? The name is phrased as a question because the function is expected to return a value.",N);if(K.prototype&&K.prototype.isPureReactComponent&&typeof L.shouldComponentUpdate!=="undefined")W("%s has a method called shouldComponentUpdate(). shouldComponentUpdate should not be used when extending React.PureComponent. Please extend React.Component if shouldComponentUpdate is used.",b8(K)||"A pure component");if(typeof L.componentDidUnmount==="function")W("%s has a method called componentDidUnmount(). But there is no such lifecycle method. Did you mean componentWillUnmount()?",N);if(typeof L.componentDidReceiveProps==="function")W("%s has a method called componentDidReceiveProps(). But there is no such lifecycle method. If you meant to update the state in response to changing props, use componentWillReceiveProps(). If you meant to fetch data or run side-effects or mutations after React has updated the UI, use componentDidUpdate().",N);if(typeof L.componentWillRecieveProps==="function")W("%s has a method called componentWillRecieveProps(). Did you mean componentWillReceiveProps()?",N);if(typeof L.UNSAFE_componentWillRecieveProps==="function")W("%s has a method called UNSAFE_componentWillRecieveProps(). Did you mean UNSAFE_componentWillReceiveProps()?",N);var C=L.props!==H;if(L.props!==void 0&&C)W("%s(...): When calling super() in `%s`, make sure to pass up the same props that your component's constructor was passed.",N,N);if(L.defaultProps)W("Setting defaultProps as an instance property on %s is not supported and will be ignored. Instead, define defaultProps as a static property on %s.",N,N);if(typeof L.getSnapshotBeforeUpdate==="function"&&typeof L.componentDidUpdate!=="function"&&!cj.has(K))cj.add(K),W("%s: getSnapshotBeforeUpdate() should be used with componentDidUpdate(). This component defines getSnapshotBeforeUpdate() only.",b8(K));if(typeof L.getDerivedStateFromProps==="function")W("%s: getDerivedStateFromProps() is defined as an instance method and will be ignored. Instead, declare it as a static method.",N);if(typeof L.getDerivedStateFromError==="function")W("%s: getDerivedStateFromError() is defined as an instance method and will be ignored. Instead, declare it as a static method.",N);if(typeof K.getSnapshotBeforeUpdate==="function")W("%s: getSnapshotBeforeUpdate() is defined as a static method and will be ignored. Instead, declare it as an instance method.",N);var I=L.state;if(I&&(typeof I!=="object"||D5(I)))W("%s.state: must be set to an object or null",N);if(typeof L.getChildContext==="function"&&typeof K.childContextTypes!=="object")W("%s.getChildContext(): childContextTypes must be defined in order to use getChildContext().",N)}}function Bv(X,K){K.updater=rj,X.stateNode=K,U80(K,X),K._reactInternalInstance=mj}function Nv(X,K,H){var L=!1,N=F4,D=F4,C=K.contextType;if("contextType"in K){var I=C===null||C!==void 0&&C.$$typeof===G0&&C._context===void 0;if(!I&&!nj.has(K)){nj.add(K);var b="";if(C===void 0)b=" However, it is set to undefined. This can be caused by a typo or by mixing up named and default imports. This can also happen due to a circular dependency, so try moving the createContext() call to a separate file.";else if(typeof C!=="object")b=" However, it is set to a "+typeof C+".";else if(C.$$typeof===m)b=" Did you accidentally pass the Context.Provider instead?";else if(C._context!==void 0)b=" Did you accidentally pass the Context.Consumer instead?";else b=" However, it is set to an object with keys {"+Object.keys(C).join(", ")+"}.";W("%s defines an invalid contextType. contextType should point to the Context object returned by React.createContext().%s",b8(K)||"Component",b)}}if(typeof C==="object"&&C!==null)D=H5(C);else{N=R$(X,K,!0);var S=K.contextTypes;L=S!==null&&S!==void 0,D=L?j$(X,N):F4}var g=new K(H,D);if(X.mode&p9){d5(!0);try{g=new K(H,D)}finally{d5(!1)}}var n=X.memoizedState=g.state!==null&&g.state!==void 0?g.state:null;Bv(X,g);{if(typeof K.getDerivedStateFromProps==="function"&&n===null){var i=b8(K)||"Component";if(!uj.has(i))uj.add(i),W("`%s` uses `getDerivedStateFromProps` but its initial state is %s. This is not recommended. Instead, define the initial state by assigning an object to `this.state` in the constructor of `%s`. This ensures that `getDerivedStateFromProps` arguments have a consistent shape.",i,g.state===null?"null":"undefined",i)}if(typeof K.getDerivedStateFromProps==="function"||typeof g.getSnapshotBeforeUpdate==="function"){var K0=null,$0=null,H0=null;if(typeof g.componentWillMount==="function"&&g.componentWillMount.__suppressDeprecationWarning!==!0)K0="componentWillMount";else if(typeof g.UNSAFE_componentWillMount==="function")K0="UNSAFE_componentWillMount";if(typeof g.componentWillReceiveProps==="function"&&g.componentWillReceiveProps.__suppressDeprecationWarning!==!0)$0="componentWillReceiveProps";else if(typeof g.UNSAFE_componentWillReceiveProps==="function")$0="UNSAFE_componentWillReceiveProps";if(typeof g.componentWillUpdate==="function"&&g.componentWillUpdate.__suppressDeprecationWarning!==!0)H0="componentWillUpdate";else if(typeof g.UNSAFE_componentWillUpdate==="function")H0="UNSAFE_componentWillUpdate";if(K0!==null||$0!==null||H0!==null){var S0=b8(K)||"Component",$6=typeof K.getDerivedStateFromProps==="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";if(!pj.has(S0))pj.add(S0),W("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n%s uses %s but also contains the following legacy lifecycles:%s%s%s\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://reactjs.org/link/unsafe-component-lifecycles",S0,$6,K0!==null?"\n  "+K0:"",$0!==null?"\n  "+$0:"",H0!==null?"\n  "+H0:"")}}}if(L)Yy(X,N,D);return g}function k40(X,K){var H=K.state;if(typeof K.componentWillMount==="function")K.componentWillMount();if(typeof K.UNSAFE_componentWillMount==="function")K.UNSAFE_componentWillMount();if(H!==K.state)W("%s.componentWillMount(): Assigning directly to this.state is deprecated (except inside a component's constructor). Use setState instead.",P6(X)||"Component"),rj.enqueueReplaceState(K,K.state,null)}function Mv(X,K,H,L){var N=K.state;if(typeof K.componentWillReceiveProps==="function")K.componentWillReceiveProps(H,L);if(typeof K.UNSAFE_componentWillReceiveProps==="function")K.UNSAFE_componentWillReceiveProps(H,L);if(K.state!==N){{var D=P6(X)||"Component";if(!hj.has(D))hj.add(D),W("%s.componentWillReceiveProps(): Assigning directly to this.state is deprecated (except inside a component's constructor). Use setState instead.",D)}rj.enqueueReplaceState(K,K.state,null)}}function aj(X,K,H,L){A40(X,K,H);var N=X.stateNode;N.props=H,N.state=X.memoizedState,N.refs={},Xj(X);var D=K.contextType;if(typeof D==="object"&&D!==null)N.context=H5(D);else{var C=R$(X,K,!0);N.context=j$(X,C)}{if(N.state===H){var I=b8(K)||"Component";if(!lj.has(I))lj.add(I),W("%s: It is not recommended to assign props directly to state because updates to props won't be reflected in state. In most cases, it is better to use props directly.",I)}if(X.mode&p9)R1.recordLegacyContextWarning(X,N);R1.recordUnsafeLifecycleWarnings(X,N)}N.state=X.memoizedState;var b=K.getDerivedStateFromProps;if(typeof b==="function")sj(X,K,b,H),N.state=X.memoizedState;if(typeof K.getDerivedStateFromProps!=="function"&&typeof N.getSnapshotBeforeUpdate!=="function"&&(typeof N.UNSAFE_componentWillMount==="function"||typeof N.componentWillMount==="function"))k40(X,N),HF(X,H,N,L),N.state=X.memoizedState;if(typeof N.componentDidMount==="function"){var S=X8;if(S|=sX,(X.mode&qQ)!==H6)S|=YZ;X.flags|=S}}function w40(X,K,H,L){var{stateNode:N,memoizedProps:D}=X;N.props=D;var C=N.context,I=K.contextType,b=F4;if(typeof I==="object"&&I!==null)b=H5(I);else{var S=R$(X,K,!0);b=j$(X,S)}var g=K.getDerivedStateFromProps,n=typeof g==="function"||typeof N.getSnapshotBeforeUpdate==="function";if(!n&&(typeof N.UNSAFE_componentWillReceiveProps==="function"||typeof N.componentWillReceiveProps==="function")){if(D!==H||C!==b)Mv(X,N,H,b)}by();var i=X.memoizedState,K0=N.state=i;if(HF(X,H,N,L),K0=X.memoizedState,D===H&&i===K0&&!lL()&&!zF()){if(typeof N.componentDidMount==="function"){var $0=X8;if($0|=sX,(X.mode&qQ)!==H6)$0|=YZ;X.flags|=$0}return!1}if(typeof g==="function")sj(X,K,g,H),K0=X.memoizedState;var H0=zF()||Fv(X,K,D,H,i,K0,b);if(H0){if(!n&&(typeof N.UNSAFE_componentWillMount==="function"||typeof N.componentWillMount==="function")){if(typeof N.componentWillMount==="function")N.componentWillMount();if(typeof N.UNSAFE_componentWillMount==="function")N.UNSAFE_componentWillMount()}if(typeof N.componentDidMount==="function"){var S0=X8;if(S0|=sX,(X.mode&qQ)!==H6)S0|=YZ;X.flags|=S0}}else{if(typeof N.componentDidMount==="function"){var $6=X8;if($6|=sX,(X.mode&qQ)!==H6)$6|=YZ;X.flags|=$6}X.memoizedProps=H,X.memoizedState=K0}return N.props=H,N.state=K0,N.context=b,H0}function I40(X,K,H,L,N){var D=K.stateNode;Ty(X,K);var C=K.memoizedProps,I=K.type===K.elementType?C:E1(K.type,C);D.props=I;var b=K.pendingProps,S=D.context,g=H.contextType,n=F4;if(typeof g==="object"&&g!==null)n=H5(g);else{var i=R$(K,H,!0);n=j$(K,i)}var K0=H.getDerivedStateFromProps,$0=typeof K0==="function"||typeof D.getSnapshotBeforeUpdate==="function";if(!$0&&(typeof D.UNSAFE_componentWillReceiveProps==="function"||typeof D.componentWillReceiveProps==="function")){if(C!==b||S!==n)Mv(K,D,L,n)}by();var H0=K.memoizedState,S0=D.state=H0;if(HF(K,L,D,N),S0=K.memoizedState,C===b&&H0===S0&&!lL()&&!zF()&&!C0){if(typeof D.componentDidUpdate==="function"){if(C!==X.memoizedProps||H0!==X.memoizedState)K.flags|=X8}if(typeof D.getSnapshotBeforeUpdate==="function"){if(C!==X.memoizedProps||H0!==X.memoizedState)K.flags|=iX}return!1}if(typeof K0==="function")sj(K,H,K0,L),S0=K.memoizedState;var $6=zF()||Fv(K,H,I,L,H0,S0,n)||C0;if($6){if(!$0&&(typeof D.UNSAFE_componentWillUpdate==="function"||typeof D.componentWillUpdate==="function")){if(typeof D.componentWillUpdate==="function")D.componentWillUpdate(L,S0,n);if(typeof D.UNSAFE_componentWillUpdate==="function")D.UNSAFE_componentWillUpdate(L,S0,n)}if(typeof D.componentDidUpdate==="function")K.flags|=X8;if(typeof D.getSnapshotBeforeUpdate==="function")K.flags|=iX}else{if(typeof D.componentDidUpdate==="function"){if(C!==X.memoizedProps||H0!==X.memoizedState)K.flags|=X8}if(typeof D.getSnapshotBeforeUpdate==="function"){if(C!==X.memoizedProps||H0!==X.memoizedState)K.flags|=iX}K.memoizedProps=L,K.memoizedState=S0}return D.props=L,D.state=S0,D.context=n,$6}function LY(X,K){return{value:X,source:K,stack:sU(K),digest:null}}function oj(X,K,H){return{value:X,source:null,stack:H!=null?H:null,digest:K!=null?K:null}}function P40(X,K){return!0}function tj(X,K){try{var H=P40(X,K);if(H===!1)return;var{value:L,source:N,stack:D}=K,C=D!==null?D:"";if(L!=null&&L._suppressLogging){if(X.tag===U)return;console.error(L)}var I=N?P6(N):null,b=I?"The above error occurred in the <"+I+"> component:":"The above error occurred in one of your React components:",S;if(X.tag===B)S="Consider adding an error boundary to your tree to customize error handling behavior.\nVisit https://reactjs.org/link/error-boundaries to learn more about error boundaries.";else{var g=P6(X)||"Anonymous";S="React will try to recreate this component tree from scratch "+("using the error boundary you provided, "+g+".")}var n=b+"\n"+C+"\n\n"+(""+S);console.error(n)}catch(i){setTimeout(function(){throw i})}}var T40=typeof WeakMap==="function"?WeakMap:Map;function Ov(X,K,H){var L=BZ(z9,H);L.tag=Zj,L.payload={element:null};var N=K.value;return L.callback=function(){wQ0(N),tj(X,K)},L}function ej(X,K,H){var L=BZ(z9,H);L.tag=Zj;var N=X.type.getDerivedStateFromError;if(typeof N==="function"){var D=K.value;L.payload=function(){return N(D)},L.callback=function(){PS(X),tj(X,K)}}var C=X.stateNode;if(C!==null&&typeof C.componentDidCatch==="function")L.callback=function I(){if(PS(X),tj(X,K),typeof N!=="function")AQ0(this);var{value:b,stack:S}=K;if(this.componentDidCatch(b,{componentStack:S!==null?S:""}),typeof N!=="function"){if(!H4(X.lanes,V6))W("%s: Error boundaries should implement getDerivedStateFromError(). In that method, return a state update to display an error message or fallback UI.",P6(X)||"Unknown")}};return L}function Vv(X,K,H){var L=X.pingCache,N;if(L===null)L=X.pingCache=new T40,N=new Set,L.set(K,N);else if(N=L.get(K),N===void 0)N=new Set,L.set(K,N);if(!N.has(H)){N.add(H);var D=IQ0.bind(null,X,K,H);if(M1)SH(X,H);K.then(D,D)}}function b40(X,K,H,L){var N=X.updateQueue;if(N===null){var D=new Set;D.add(H),X.updateQueue=D}else N.add(H)}function x40(X,K){var H=X.tag;if((X.mode&r6)===H6&&(H===z||H===w||H===y)){var L=X.alternate;if(L)X.updateQueue=L.updateQueue,X.memoizedState=L.memoizedState,X.lanes=L.lanes;else X.updateQueue=null,X.memoizedState=null}}function Dv(X){var K=X;do{if(K.tag===k&&F40(K))return K;K=K.return}while(K!==null);return null}function Rv(X,K,H,L,N){if((X.mode&r6)===H6){if(X===K)X.flags|=Z7;else{if(X.flags|=M8,H.flags|=OD,H.flags&=~(L80|OG),H.tag===U){var D=H.alternate;if(D===null)H.tag=s;else{var C=BZ(z9,V6);C.tag=KF,Pq(H,C,V6)}}H.lanes=f6(H.lanes,V6)}return X}return X.flags|=Z7,X.lanes=N,X}function y40(X,K,H,L,N){if(H.flags|=OG,M1)SH(X,N);if(L!==null&&typeof L==="object"&&typeof L.then==="function"){var D=L;if(x40(H),GJ()&&H.mode&r6)Uy();var C=Dv(K);if(C!==null){if(C.flags&=~qZ,Rv(C,K,H,X,N),C.mode&r6)Vv(X,D,N);b40(C,X,D);return}else{if(!q90(N)){Vv(X,D,N),x_();return}var I=new Error("A component suspended while responding to synchronous input. This will cause the UI to be replaced with a loading indicator. To fix, updates that suspend should be wrapped with startTransition.");L=I}}else if(GJ()&&H.mode&r6){Uy();var b=Dv(K);if(b!==null){if((b.flags&Z7)===F6)b.flags|=qZ;Rv(b,K,H,X,N),dR(LY(L,H));return}}L=LY(L,H),OQ0(L);var S=K;do{switch(S.tag){case B:{var g=L;S.flags|=Z7;var n=AG(N);S.lanes=f6(S.lanes,n);var i=Ov(S,g,n);Yj(S,i);return}case U:var K0=L,$0=S.type,H0=S.stateNode;if((S.flags&M8)===F6&&(typeof $0.getDerivedStateFromError==="function"||H0!==null&&typeof H0.componentDidCatch==="function"&&!RS(H0))){S.flags|=Z7;var S0=AG(N);S.lanes=f6(S.lanes,S0);var $6=ej(S,K0,S0);Yj(S,$6);return}break}S=S.return}while(S!==null)}function v40(){return null}var DH=Z.ReactCurrentOwner,C1=!1,J_,RH,Q_,Z_,q_,FY,X_,fF,jH;J_={},RH={},Q_={},Z_={},q_={},FY=!1,X_={},fF={},jH={};function q7(X,K,H,L){if(X===null)K.child=Ey(K,null,H,L);else K.child=A$(K,X.child,H,L)}function S40(X,K,H,L){K.child=A$(K,X.child,null,L),K.child=A$(K,null,H,L)}function jv(X,K,H,L,N){if(K.type!==K.elementType){var D=H.propTypes;if(D)V1(D,L,"prop",b8(H))}var C=H.render,I=K.ref,b,S;w$(K,N),DG(K);{if(DH.current=K,h4(!0),b=y$(X,K,C,L,I,N),S=v$(),K.mode&p9){d5(!0);try{b=y$(X,K,C,L,I,N),S=v$()}finally{d5(!1)}}h4(!1)}if($$(),X!==null&&!C1)return gy(X,K,N),NZ(X,K,N);if(GJ()&&S)gR(K);return K.flags|=Y$,q7(X,K,b,N),K.child}function _v(X,K,H,L,N){if(X===null){var D=H.type;if(iQ0(D)&&H.compare===null&&H.defaultProps===void 0){var C=D;return C=p$(D),K.tag=y,K.type=C,$_(K,D),Ev(X,K,C,L,N)}{var I=D.propTypes;if(I)V1(I,L,"prop",b8(D));if(H.defaultProps!==void 0){var b=b8(D)||"Unknown";if(!jH[b])W("%s: Support for defaultProps will be removed from memo components in a future major release. Use JavaScript default parameters instead.",b),jH[b]=!0}}var S=d_(H.type,null,L,K,K.mode,N);return S.ref=K.ref,S.return=K,K.child=S,S}{var g=H.type,n=g.propTypes;if(n)V1(n,L,"prop",b8(g))}var i=X.child,K0=L_(X,N);if(!K0){var $0=i.memoizedProps,H0=H.compare;if(H0=H0!==null?H0:uG,H0($0,L)&&X.ref===K.ref)return NZ(X,K,N)}K.flags|=Y$;var S0=VY(i,L);return S0.ref=K.ref,S0.return=K,K.child=S0,S0}function Ev(X,K,H,L,N){if(K.type!==K.elementType){var D=K.elementType;if(D.$$typeof===h0){var C=D,I=C._payload,b=C._init;try{D=b(I)}catch(n){D=null}var S=D&&D.propTypes;if(S)V1(S,L,"prop",b8(D))}}if(X!==null){var g=X.memoizedProps;if(uG(g,L)&&X.ref===K.ref&&K.type===X.type){if(C1=!1,K.pendingProps=L=g,!L_(X,N))return K.lanes=X.lanes,NZ(X,K,N);else if((X.flags&OD)!==F6)C1=!0}}return Y_(X,K,H,L,N)}function Cv(X,K,H){var L=K.pendingProps,N=L.children,D=X!==null?X.memoizedState:null;if(L.mode==="hidden"||k0)if((K.mode&r6)===H6){var C={baseLanes:O0,cachePool:null,transitions:null};K.memoizedState=C,aF(K,H)}else if(!H4(H,G4)){var I=null,b;if(D!==null){var S=D.baseLanes;b=f6(S,H)}else b=H;K.lanes=K.childLanes=NL(G4);var g={baseLanes:b,cachePool:I,transitions:null};return K.memoizedState=g,K.updateQueue=null,aF(K,b),null}else{var n={baseLanes:O0,cachePool:null,transitions:null};K.memoizedState=n;var i=D!==null?D.baseLanes:H;aF(K,i)}else{var K0;if(D!==null)K0=f6(D.baseLanes,H),K.memoizedState=null;else K0=H;aF(K,K0)}return q7(X,K,N,H),K.child}function f40(X,K,H){var L=K.pendingProps;return q7(X,K,L,H),K.child}function g40(X,K,H){var L=K.pendingProps.children;return q7(X,K,L,H),K.child}function m40(X,K,H){{K.flags|=X8;{var L=K.stateNode;L.effectDuration=0,L.passiveEffectDuration=0}}var N=K.pendingProps,D=N.children;return q7(X,K,D,H),K.child}function Av(X,K){var H=K.ref;if(X===null&&H!==null||X!==null&&X.ref!==H)K.flags|=Oq,K.flags|=VD}function Y_(X,K,H,L,N){if(K.type!==K.elementType){var D=H.propTypes;if(D)V1(D,L,"prop",b8(H))}var C;{var I=R$(K,H,!0);C=j$(K,I)}var b,S;w$(K,N),DG(K);{if(DH.current=K,h4(!0),b=y$(X,K,H,L,C,N),S=v$(),K.mode&p9){d5(!0);try{b=y$(X,K,H,L,C,N),S=v$()}finally{d5(!1)}}h4(!1)}if($$(),X!==null&&!C1)return gy(X,K,N),NZ(X,K,N);if(GJ()&&S)gR(K);return K.flags|=Y$,q7(X,K,b,N),K.child}function kv(X,K,H,L,N){{switch($Z0(K)){case!1:{var{stateNode:D,type:C}=K,I=new C(K.memoizedProps,D.context),b=I.state;D.updater.enqueueSetState(D,b,null);break}case!0:{K.flags|=M8,K.flags|=Z7;var S=new Error("Simulated error coming from DevTools"),g=AG(N);K.lanes=f6(K.lanes,g);var n=ej(K,LY(S,K),g);Yj(K,n);break}}if(K.type!==K.elementType){var i=H.propTypes;if(i)V1(i,L,"prop",b8(H))}}var K0;if(KQ(H))K0=!0,nL(K);else K0=!1;w$(K,N);var $0=K.stateNode,H0;if($0===null)mF(X,K),Nv(K,H,L),aj(K,H,L,N),H0=!0;else if(X===null)H0=w40(K,H,L,N);else H0=I40(X,K,H,L,N);var S0=K_(X,K,H,H0,K0,N);{var $6=K.stateNode;if(H0&&$6.props!==L){if(!FY)W("It looks like %s is reassigning its own `this.props` while rendering. This is not supported and can lead to confusing bugs.",P6(K)||"a component");FY=!0}}return S0}function K_(X,K,H,L,N,D){Av(X,K);var C=(K.flags&M8)!==F6;if(!L&&!C){if(N)Wy(K,H,!1);return NZ(X,K,D)}var I=K.stateNode;DH.current=K;var b;if(C&&typeof H.getDerivedStateFromError!=="function")b=null,zv();else{DG(K);{if(h4(!0),b=I.render(),K.mode&p9){d5(!0);try{I.render()}finally{d5(!1)}}h4(!1)}$$()}if(K.flags|=Y$,X!==null&&C)S40(X,K,b,D);else q7(X,K,b,D);if(K.memoizedState=I.state,N)Wy(K,H,!0);return K.child}function wv(X){var K=X.stateNode;if(K.pendingContext)Ky(X,K.pendingContext,K.pendingContext!==K.context);else if(K.context)Ky(X,K.context,!1);Kj(X,K.containerInfo)}function h40(X,K,H){if(wv(K),X===null)throw new Error("Should have a current fiber. This is a bug in React.");var{pendingProps:L,memoizedState:N}=K,D=N.element;Ty(X,K),HF(K,L,null,H);var{memoizedState:C,stateNode:I}=K,b=C.element;if(N.isDehydrated){var S={element:b,isDehydrated:!1,cache:C.cache,pendingSuspenseBoundaries:C.pendingSuspenseBoundaries,transitions:C.transitions},g=K.updateQueue;if(g.baseState=S,K.memoizedState=S,K.flags&qZ){var n=LY(new Error("There was an error while hydrating. Because the error happened outside of a Suspense boundary, the entire root will switch to client rendering."),K);return Iv(X,K,b,H,n)}else if(b!==D){var i=LY(new Error("This root received an early update, before anything was able hydrate. Switched the entire root to client rendering."),K);return Iv(X,K,b,H,i)}else{d70(K);var K0=Ey(K,null,b,H);K.child=K0;var $0=K0;while($0)$0.flags=$0.flags&~G5|XZ,$0=$0.sibling}}else{if(C$(),b===D)return NZ(X,K,H);q7(X,K,b,H)}return K.child}function Iv(X,K,H,L,N){return C$(),dR(N),K.flags|=qZ,q7(X,K,H,L),K.child}function u40(X,K,H){if(vy(K),X===null)pR(K);var{type:L,pendingProps:N}=K,D=X!==null?X.memoizedProps:null,C=N.children,I=CR(L,N);if(I)C=null;else if(D!==null&&CR(L,D))K.flags|=MG;return Av(X,K),q7(X,K,C,H),K.child}function c40(X,K){if(X===null)pR(K);return null}function p40(X,K,H,L){mF(X,K);var N=K.pendingProps,D=H,C=D._payload,I=D._init,b=I(C);K.type=b;var S=K.tag=nQ0(b),g=E1(b,N),n;switch(S){case z:return $_(K,b),K.type=b=p$(b),n=Y_(null,K,b,g,L),n;case U:return K.type=b=g_(b),n=kv(null,K,b,g,L),n;case w:return K.type=b=m_(b),n=jv(null,K,b,g,L),n;case P:{if(K.type!==K.elementType){var i=b.propTypes;if(i)V1(i,g,"prop",b8(b))}return n=_v(null,K,b,E1(b.type,g),L),n}}var K0="";if(b!==null&&typeof b==="object"&&b.$$typeof===h0)K0=" Did you wrap a component in React.lazy() more than once?";throw new Error("Element type is invalid. Received a promise that resolves to: "+b+". "+("Lazy element type must resolve to a class or function."+K0))}function d40(X,K,H,L,N){mF(X,K),K.tag=U;var D;if(KQ(H))D=!0,nL(K);else D=!1;return w$(K,N),Nv(K,H,L),aj(K,H,L,N),K_(null,K,H,!0,D,N)}function l40(X,K,H,L){mF(X,K);var N=K.pendingProps,D;{var C=R$(K,H,!1);D=j$(K,C)}w$(K,L);var I,b;DG(K);{if(H.prototype&&typeof H.prototype.render==="function"){var S=b8(H)||"Unknown";if(!J_[S])W("The <%s /> component appears to have a render method, but doesn't extend React.Component. This is likely to cause errors. Change %s to extend React.Component instead.",S,S),J_[S]=!0}if(K.mode&p9)R1.recordLegacyContextWarning(K,null);h4(!0),DH.current=K,I=y$(null,K,H,N,D,L),b=v$(),h4(!1)}if($$(),K.flags|=Y$,typeof I==="object"&&I!==null&&typeof I.render==="function"&&I.$$typeof===void 0){var g=b8(H)||"Unknown";if(!RH[g])W("The <%s /> component appears to be a function component that returns a class instance. Change %s to a class that extends React.Component instead. If you can't use a class try assigning the prototype on the function as a workaround. `%s.prototype = React.Component.prototype`. Don't use an arrow function since it cannot be called with `new` by React.",g,g,g),RH[g]=!0}if(typeof I==="object"&&I!==null&&typeof I.render==="function"&&I.$$typeof===void 0){{var n=b8(H)||"Unknown";if(!RH[n])W("The <%s /> component appears to be a function component that returns a class instance. Change %s to a class that extends React.Component instead. If you can't use a class try assigning the prototype on the function as a workaround. `%s.prototype = React.Component.prototype`. Don't use an arrow function since it cannot be called with `new` by React.",n,n,n),RH[n]=!0}K.tag=U,K.memoizedState=null,K.updateQueue=null;var i=!1;if(KQ(H))i=!0,nL(K);else i=!1;return K.memoizedState=I.state!==null&&I.state!==void 0?I.state:null,Xj(K),Bv(K,I),aj(K,H,N,L),K_(null,K,H,!0,i,L)}else{if(K.tag=z,K.mode&p9){d5(!0);try{I=y$(null,K,H,N,D,L),b=v$()}finally{d5(!1)}}if(GJ()&&b)gR(K);return q7(null,K,I,L),$_(K,H),K.child}}function $_(X,K){{if(K){if(K.childContextTypes)W("%s(...): childContextTypes cannot be defined on a function component.",K.displayName||K.name||"Component")}if(X.ref!==null){var H="",L=Nq();if(L)H+="\n\nCheck the render method of `"+L+"`.";var N=L||"",D=X._debugSource;if(D)N=D.fileName+":"+D.lineNumber;if(!q_[N])q_[N]=!0,W("Function components cannot be given refs. Attempts to access this ref will fail. Did you mean to use React.forwardRef()?%s",H)}if(K.defaultProps!==void 0){var C=b8(K)||"Unknown";if(!jH[C])W("%s: Support for defaultProps will be removed from function components in a future major release. Use JavaScript default parameters instead.",C),jH[C]=!0}if(typeof K.getDerivedStateFromProps==="function"){var I=b8(K)||"Unknown";if(!Z_[I])W("%s: Function components do not support getDerivedStateFromProps.",I),Z_[I]=!0}if(typeof K.contextType==="object"&&K.contextType!==null){var b=b8(K)||"Unknown";if(!Q_[b])W("%s: Function components do not support contextType.",b),Q_[b]=!0}}}var W_={dehydrated:null,treeContext:null,retryLane:l5};function G_(X){return{baseLanes:X,cachePool:v40(),transitions:null}}function i40(X,K){var H=null;return{baseLanes:f6(X.baseLanes,K),cachePool:H,transitions:X.transitions}}function n40(X,K,H,L){if(K!==null){var N=K.memoizedState;if(N===null)return!1}return Gj(X,zH)}function s40(X,K){return BL(X.childLanes,K)}function Pv(X,K,H){var L=K.pendingProps;if(WZ0(K))K.flags|=M8;var N=j1.current,D=!1,C=(K.flags&M8)!==F6;if(C||n40(N,X))D=!0,K.flags&=~M8;else if(X===null||X.memoizedState!==null)N=L40(N,fy);if(N=P$(N),bq(K,N),X===null){pR(K);var I=K.memoizedState;if(I!==null){var b=I.dehydrated;if(b!==null)return e40(K,b)}var{children:S,fallback:g}=L;if(D){var n=r40(K,S,g,H),i=K.child;return i.memoizedState=G_(H),K.memoizedState=W_,n}else return H_(K,S)}else{var K0=X.memoizedState;if(K0!==null){var $0=K0.dehydrated;if($0!==null)return J10(X,K,C,L,$0,K0,H)}if(D){var{fallback:H0,children:S0}=L,$6=o40(X,K,S0,H0,H),Q6=K.child,n6=X.child.memoizedState;return Q6.memoizedState=n6===null?G_(H):i40(n6,H),Q6.childLanes=s40(X,H),K.memoizedState=W_,$6}else{var s6=L.children,Z0=a40(X,K,s6,H);return K.memoizedState=null,Z0}}}function H_(X,K,H){var L=X.mode,N={mode:"visible",children:K},D=z_(N,L);return D.return=X,X.child=D,D}function r40(X,K,H,L){var{mode:N,child:D}=X,C={mode:"hidden",children:K},I,b;if((N&r6)===H6&&D!==null){if(I=D,I.childLanes=O0,I.pendingProps=C,X.mode&g8)I.actualDuration=0,I.actualStartTime=-1,I.selfBaseDuration=0,I.treeBaseDuration=0;b=hq(H,N,L,null)}else I=z_(C,N),b=hq(H,N,L,null);return I.return=X,b.return=X,I.sibling=b,X.child=I,b}function z_(X,K,H){return bS(X,K,O0,null)}function Tv(X,K){return VY(X,K)}function a40(X,K,H,L){var N=X.child,D=N.sibling,C=Tv(N,{mode:"visible",children:H});if((K.mode&r6)===H6)C.lanes=L;if(C.return=K,C.sibling=null,D!==null){var I=K.deletions;if(I===null)K.deletions=[D],K.flags|=lX;else I.push(D)}return K.child=C,C}function o40(X,K,H,L,N){var D=K.mode,C=X.child,I=C.sibling,b={mode:"hidden",children:H},S;if((D&r6)===H6&&K.child!==C){var g=K.child;if(S=g,S.childLanes=O0,S.pendingProps=b,K.mode&g8)S.actualDuration=0,S.actualStartTime=-1,S.selfBaseDuration=C.selfBaseDuration,S.treeBaseDuration=C.treeBaseDuration;K.deletions=null}else S=Tv(C,b),S.subtreeFlags=C.subtreeFlags&KZ;var n;if(I!==null)n=VY(I,L);else n=hq(L,D,N,null),n.flags|=G5;return n.return=K,S.return=K,S.sibling=n,K.child=S,n}function gF(X,K,H,L){if(L!==null)dR(L);A$(K,X.child,null,H);var N=K.pendingProps,D=N.children,C=H_(K,D);return C.flags|=G5,K.memoizedState=null,C}function t40(X,K,H,L,N){var D=K.mode,C={mode:"visible",children:H},I=z_(C,D),b=hq(L,D,N,null);if(b.flags|=G5,I.return=K,b.return=K,I.sibling=b,K.child=I,(K.mode&r6)!==H6)A$(K,X.child,null,N);return b}function e40(X,K,H){if((X.mode&r6)===H6)W("Cannot hydrate Suspense in legacy mode. Switch from ReactDOM.hydrate(element, container) to ReactDOMClient.hydrateRoot(container, <App />).render(element) or remove the Suspense components from the server rendered components."),X.lanes=NL(V6);else if(IR(K))X.lanes=NL(tX);else X.lanes=NL(G4);return null}function J10(X,K,H,L,N,D,C){if(!H){if(c70(),(K.mode&r6)===H6)return gF(X,K,C,null);if(IR(N)){var I,b,S;{var g=Y70(N);I=g.digest,b=g.message,S=g.stack}var n;if(b)n=new Error(b);else n=new Error("The server could not finish this Suspense boundary, likely due to an error during server rendering. Switched to client rendering.");var i=oj(n,I,S);return gF(X,K,C,i)}var K0=H4(C,X.childLanes);if(C1||K0){var $0=rF();if($0!==null){var H0=z90($0,C);if(H0!==l5&&H0!==D.retryLane){D.retryLane=H0;var S0=z9;b7(X,H0),w5($0,X,H0,S0)}}x_();var $6=oj(new Error("This Suspense boundary received an update before it finished hydrating. This caused the boundary to switch to client rendering. The usual way to fix this is to wrap the original update in startTransition."));return gF(X,K,C,$6)}else if(ex(N)){K.flags|=M8,K.child=X.child;var Q6=PQ0.bind(null,X);return K70(N,Q6),null}else{l70(K,N,D.treeContext);var n6=L.children,s6=H_(K,n6);return s6.flags|=XZ,s6}}else if(K.flags&qZ){K.flags&=~qZ;var Z0=oj(new Error("There was an error while hydrating this Suspense boundary. Switched to client rendering."));return gF(X,K,C,Z0)}else if(K.memoizedState!==null)return K.child=X.child,K.flags|=M8,null;else{var{children:L0,fallback:q0}=L,E0=t40(X,K,L0,q0,C),i0=K.child;return i0.memoizedState=G_(C),K.memoizedState=W_,E0}}function bv(X,K,H){X.lanes=f6(X.lanes,K);var L=X.alternate;if(L!==null)L.lanes=f6(L.lanes,K);Jj(X.return,K,H)}function Q10(X,K,H){var L=K;while(L!==null){if(L.tag===k){var N=L.memoizedState;if(N!==null)bv(L,H,X)}else if(L.tag===t)bv(L,H,X);else if(L.child!==null){L.child.return=L,L=L.child;continue}if(L===X)return;while(L.sibling===null){if(L.return===null||L.return===X)return;L=L.return}L.sibling.return=L.return,L=L.sibling}}function Z10(X){var K=X,H=null;while(K!==null){var L=K.alternate;if(L!==null&&FF(L)===null)H=K;K=K.sibling}return H}function q10(X){if(X!==void 0&&X!=="forwards"&&X!=="backwards"&&X!=="together"&&!X_[X])if(X_[X]=!0,typeof X==="string")switch(X.toLowerCase()){case"together":case"forwards":case"backwards":{W('"%s" is not a valid value for revealOrder on <SuspenseList />. Use lowercase "%s" instead.',X,X.toLowerCase());break}case"forward":case"backward":{W('"%s" is not a valid value for revealOrder on <SuspenseList />. React uses the -s suffix in the spelling. Use "%ss" instead.',X,X.toLowerCase());break}default:W('"%s" is not a supported revealOrder on <SuspenseList />. Did you mean "together", "forwards" or "backwards"?',X);break}else W('%s is not a supported value for revealOrder on <SuspenseList />. Did you mean "together", "forwards" or "backwards"?',X)}function X10(X,K){if(X!==void 0&&!fF[X]){if(X!=="collapsed"&&X!=="hidden")fF[X]=!0,W('"%s" is not a supported value for tail on <SuspenseList />. Did you mean "collapsed" or "hidden"?',X);else if(K!=="forwards"&&K!=="backwards")fF[X]=!0,W('<SuspenseList tail="%s" /> is only valid if revealOrder is "forwards" or "backwards". Did you mean to specify revealOrder="forwards"?',X)}}function xv(X,K){{var H=D5(X),L=!H&&typeof W4(X)==="function";if(H||L){var N=H?"array":"iterable";return W("A nested %s was passed to row #%s in <SuspenseList />. Wrap it in an additional SuspenseList to configure its revealOrder: <SuspenseList revealOrder=...> ... <SuspenseList revealOrder=...>{%s}</SuspenseList> ... </SuspenseList>",N,K,N),!1}}return!0}function Y10(X,K){if((K==="forwards"||K==="backwards")&&X!==void 0&&X!==null&&X!==!1)if(D5(X)){for(var H=0;H<X.length;H++)if(!xv(X[H],H))return}else{var L=W4(X);if(typeof L==="function"){var N=L.call(X);if(N){var D=N.next(),C=0;for(;!D.done;D=N.next()){if(!xv(D.value,C))return;C++}}}else W('A single row was passed to a <SuspenseList revealOrder="%s" />. This is not useful since it needs multiple rows. Did you mean to pass multiple children or an array?',K)}}function U_(X,K,H,L,N){var D=X.memoizedState;if(D===null)X.memoizedState={isBackwards:K,rendering:null,renderingStartTime:0,last:L,tail:H,tailMode:N};else D.isBackwards=K,D.rendering=null,D.renderingStartTime=0,D.last=L,D.tail=H,D.tailMode=N}function yv(X,K,H){var L=K.pendingProps,N=L.revealOrder,D=L.tail,C=L.children;q10(N),X10(D,N),Y10(C,N),q7(X,K,C,H);var I=j1.current,b=Gj(I,zH);if(b)I=Hj(I,zH),K.flags|=M8;else{var S=X!==null&&(X.flags&M8)!==F6;if(S)Q10(K,K.child,H);I=P$(I)}if(bq(K,I),(K.mode&r6)===H6)K.memoizedState=null;else switch(N){case"forwards":{var g=Z10(K.child),n;if(g===null)n=K.child,K.child=null;else n=g.sibling,g.sibling=null;U_(K,!1,n,g,D);break}case"backwards":{var i=null,K0=K.child;K.child=null;while(K0!==null){var $0=K0.alternate;if($0!==null&&FF($0)===null){K.child=K0;break}var H0=K0.sibling;K0.sibling=i,i=K0,K0=H0}U_(K,!0,i,null,D);break}case"together":{U_(K,!1,null,null,void 0);break}default:K.memoizedState=null}return K.child}function K10(X,K,H){Kj(K,K.stateNode.containerInfo);var L=K.pendingProps;if(X===null)K.child=A$(K,null,L,H);else q7(X,K,L,H);return K.child}var vv=!1;function $10(X,K,H){var L=K.type,N=L._context,D=K.pendingProps,C=K.memoizedProps,I=D.value;{if(!("value"in D)){if(!vv)vv=!0,W("The `value` prop is required for the `<Context.Provider>`. Did you misspell it or forget to pass it?")}var b=K.type.propTypes;if(b)V1(b,D,"prop","Context.Provider")}if(ky(K,N,I),C!==null){var S=C.value;if(L4(S,I)){if(C.children===D.children&&!lL())return NZ(X,K,H)}else X40(K,N,H)}var g=D.children;return q7(X,K,g,H),K.child}var Sv=!1;function W10(X,K,H){var L=K.type;if(L._context===void 0){if(L!==L.Consumer){if(!Sv)Sv=!0,W("Rendering <Context> directly is not supported and will be removed in a future major release. Did you mean to render <Context.Consumer> instead?")}}else L=L._context;var N=K.pendingProps,D=N.children;if(typeof D!=="function")W("A context consumer was rendered with multiple children, or a child that isn't a function. A context consumer expects a single child that is a function. If you did pass a function, make sure there is no trailing or leading whitespace around it.");w$(K,H);var C=H5(L);DG(K);var I;return DH.current=K,h4(!0),I=D(C),h4(!1),$$(),K.flags|=Y$,q7(X,K,I,H),K.child}function _H(){C1=!0}function mF(X,K){if((K.mode&r6)===H6){if(X!==null)X.alternate=null,K.alternate=null,K.flags|=G5}}function NZ(X,K,H){if(X!==null)K.dependencies=X.dependencies;if(zv(),vH(K.lanes),!H4(H,K.childLanes))return null;return Z40(X,K),K.child}function G10(X,K,H){{var L=K.return;if(L===null)throw new Error("Cannot swap the root fiber.");if(X.alternate=null,K.alternate=null,H.index=K.index,H.sibling=K.sibling,H.return=K.return,H.ref=K.ref,K===L.child)L.child=H;else{var N=L.child;if(N===null)throw new Error("Expected parent to have a child.");while(N.sibling!==K)if(N=N.sibling,N===null)throw new Error("Expected to find the previous sibling.");N.sibling=H}var D=L.deletions;if(D===null)L.deletions=[X],L.flags|=lX;else D.push(X);return H.flags|=G5,H}}function L_(X,K){var H=X.lanes;if(H4(H,K))return!0;return!1}function H10(X,K,H){switch(K.tag){case B:wv(K);var L=K.stateNode;C$();break;case O:vy(K);break;case U:{var N=K.type;if(KQ(N))nL(K);break}case M:Kj(K,K.stateNode.containerInfo);break;case A:{var D=K.memoizedProps.value,C=K.type._context;ky(K,C,D);break}case T:{var I=H4(H,K.childLanes);if(I)K.flags|=X8;{var b=K.stateNode;b.effectDuration=0,b.passiveEffectDuration=0}}break;case k:{var S=K.memoizedState;if(S!==null){if(S.dehydrated!==null)return bq(K,P$(j1.current)),K.flags|=M8,null;var g=K.child,n=g.childLanes;if(H4(H,n))return Pv(X,K,H);else{bq(K,P$(j1.current));var i=NZ(X,K,H);if(i!==null)return i.sibling;else return null}}else bq(K,P$(j1.current));break}case t:{var K0=(X.flags&M8)!==F6,$0=H4(H,K.childLanes);if(K0){if($0)return yv(X,K,H);K.flags|=M8}var H0=K.memoizedState;if(H0!==null)H0.rendering=null,H0.tail=null,H0.lastEffect=null;if(bq(K,j1.current),$0)break;else return null}case J0:case Q0:return K.lanes=O0,Cv(X,K,H)}return NZ(X,K,H)}function fv(X,K,H){if(K._debugNeedsRemount&&X!==null)return G10(X,K,d_(K.type,K.key,K.pendingProps,K._debugOwner||null,K.mode,K.lanes));if(X!==null){var L=X.memoizedProps,N=K.pendingProps;if(L!==N||lL()||K.type!==X.type)C1=!0;else{var D=L_(X,H);if(!D&&(K.flags&M8)===F6)return C1=!1,H10(X,K,H);if((X.flags&OD)!==F6)C1=!0;else C1=!1}}else if(C1=!1,GJ()&&S70(K)){var C=K.index,I=f70();zy(K,I,C)}switch(K.lanes=O0,K.tag){case F:return l40(X,K,K.type,H);case p:{var b=K.elementType;return p40(X,K,b,H)}case z:{var{type:S,pendingProps:g}=K,n=K.elementType===S?g:E1(S,g);return Y_(X,K,S,n,H)}case U:{var{type:i,pendingProps:K0}=K,$0=K.elementType===i?K0:E1(i,K0);return kv(X,K,i,$0,H)}case B:return h40(X,K,H);case O:return u40(X,K,H);case R:return c40(X,K);case k:return Pv(X,K,H);case M:return K10(X,K,H);case w:{var{type:H0,pendingProps:S0}=K,$6=K.elementType===H0?S0:E1(H0,S0);return jv(X,K,H0,$6,H)}case V:return f40(X,K,H);case E:return g40(X,K,H);case T:return m40(X,K,H);case A:return $10(X,K,H);case _:return W10(X,K,H);case P:{var{type:Q6,pendingProps:n6}=K,s6=E1(Q6,n6);if(K.type!==K.elementType){var Z0=Q6.propTypes;if(Z0)V1(Z0,s6,"prop",b8(Q6))}return s6=E1(Q6.type,s6),_v(X,K,Q6,s6,H)}case y:return Ev(X,K,K.type,K.pendingProps,H);case s:{var{type:L0,pendingProps:q0}=K,E0=K.elementType===L0?q0:E1(L0,q0);return d40(X,K,L0,E0,H)}case t:return yv(X,K,H);case X0:break;case J0:return Cv(X,K,H)}throw new Error("Unknown unit of work tag ("+K.tag+"). This error is likely caused by a bug in React. Please file an issue.")}function S$(X){X.flags|=X8}function gv(X){X.flags|=Oq,X.flags|=VD}var mv,F_,hv,uv;mv=function(X,K,H,L){var N=K.child;while(N!==null){if(N.tag===O||N.tag===R)xJ0(X,N.stateNode);else if(N.tag===M);else if(N.child!==null){N.child.return=N,N=N.child;continue}if(N===K)return;while(N.sibling===null){if(N.return===null||N.return===K)return;N=N.return}N.sibling.return=N.return,N=N.sibling}},F_=function(X,K){},hv=function(X,K,H,L,N){var D=X.memoizedProps;if(D===L)return;var C=K.stateNode,I=$j(),b=vJ0(C,H,D,L,N,I);if(K.updateQueue=b,b)S$(K)},uv=function(X,K,H,L){if(H!==L)S$(K)};function EH(X,K){if(GJ())return;switch(X.tailMode){case"hidden":{var H=X.tail,L=null;while(H!==null){if(H.alternate!==null)L=H;H=H.sibling}if(L===null)X.tail=null;else L.sibling=null;break}case"collapsed":{var N=X.tail,D=null;while(N!==null){if(N.alternate!==null)D=N;N=N.sibling}if(D===null)if(!K&&X.tail!==null)X.tail.sibling=null;else X.tail=null;else D.sibling=null;break}}}function zJ(X){var K=X.alternate!==null&&X.alternate.child===X.child,H=O0,L=F6;if(!K){if((X.mode&g8)!==H6){var{actualDuration:N,selfBaseDuration:D,child:C}=X;while(C!==null)H=f6(H,f6(C.lanes,C.childLanes)),L|=C.subtreeFlags,L|=C.flags,N+=C.actualDuration,D+=C.treeBaseDuration,C=C.sibling;X.actualDuration=N,X.treeBaseDuration=D}else{var I=X.child;while(I!==null)H=f6(H,f6(I.lanes,I.childLanes)),L|=I.subtreeFlags,L|=I.flags,I.return=X,I=I.sibling}X.subtreeFlags|=L}else{if((X.mode&g8)!==H6){var{selfBaseDuration:b,child:S}=X;while(S!==null)H=f6(H,f6(S.lanes,S.childLanes)),L|=S.subtreeFlags&KZ,L|=S.flags&KZ,b+=S.treeBaseDuration,S=S.sibling;X.treeBaseDuration=b}else{var g=X.child;while(g!==null)H=f6(H,f6(g.lanes,g.childLanes)),L|=g.subtreeFlags&KZ,L|=g.flags&KZ,g.return=X,g=g.sibling}X.subtreeFlags|=L}return X.childLanes=H,K}function z10(X,K,H){if(a70()&&(K.mode&r6)!==H6&&(K.flags&M8)===F6)return Oy(K),C$(),K.flags|=qZ|OG|Z7,!1;var L=tL(K);if(H!==null&&H.dehydrated!==null)if(X===null){if(!L)throw new Error("A dehydrated suspense component was completed without a hydrated node. This is probably a bug in React.");if(s70(K),zJ(K),(K.mode&g8)!==H6){var N=H!==null;if(N){var D=K.child;if(D!==null)K.treeBaseDuration-=D.treeBaseDuration}}return!1}else{if(C$(),(K.flags&M8)===F6)K.memoizedState=null;if(K.flags|=X8,zJ(K),(K.mode&g8)!==H6){var C=H!==null;if(C){var I=K.child;if(I!==null)K.treeBaseDuration-=I.treeBaseDuration}}return!1}else return Vy(),!0}function cv(X,K,H){var L=K.pendingProps;switch(mR(K),K.tag){case F:case p:case y:case z:case w:case V:case E:case T:case _:case P:return zJ(K),null;case U:{var N=K.type;if(KQ(N))iL(K);return zJ(K),null}case B:{var D=K.stateNode;if(I$(K),vR(K),Uj(),D.pendingContext)D.context=D.pendingContext,D.pendingContext=null;if(X===null||X.child===null){var C=tL(K);if(C)S$(K);else if(X!==null){var I=X.memoizedState;if(!I.isDehydrated||(K.flags&qZ)!==F6)K.flags|=iX,Vy()}}return F_(X,K),zJ(K),null}case O:{Wj(K);var b=yy(),S=K.type;if(X!==null&&K.stateNode!=null){if(hv(X,K,S,L,b),X.ref!==K.ref)gv(K)}else{if(!L){if(K.stateNode===null)throw new Error("We must have new props for new mounts. This error is likely caused by a bug in React. Please file an issue.");return zJ(K),null}var g=$j(),n=tL(K);if(n){if(i70(K,b,g))S$(K)}else{var i=bJ0(S,L,b,g,K);if(mv(i,K,!1,!1),K.stateNode=i,yJ0(i,S,L,b))S$(K)}if(K.ref!==null)gv(K)}return zJ(K),null}case R:{var K0=L;if(X&&K.stateNode!=null){var $0=X.memoizedProps;uv(X,K,$0,K0)}else{if(typeof K0!=="string"){if(K.stateNode===null)throw new Error("We must have new props for new mounts. This error is likely caused by a bug in React. Please file an issue.")}var H0=yy(),S0=$j(),$6=tL(K);if($6){if(n70(K))S$(K)}else K.stateNode=SJ0(K0,H0,S0,K)}return zJ(K),null}case k:{T$(K);var Q6=K.memoizedState;if(X===null||X.memoizedState!==null&&X.memoizedState.dehydrated!==null){var n6=z10(X,K,Q6);if(!n6)if(K.flags&Z7)return K;else return null}if((K.flags&M8)!==F6){if(K.lanes=H,(K.mode&g8)!==H6)gj(K);return K}var s6=Q6!==null,Z0=X!==null&&X.memoizedState!==null;if(s6!==Z0){if(s6){var L0=K.child;if(L0.flags|=nX,(K.mode&r6)!==H6){var q0=X===null&&(K.memoizedProps.unstable_avoidThisFallback!==!0||!b0);if(q0||Gj(j1.current,fy))MQ0();else x_()}}}var E0=K.updateQueue;if(E0!==null)K.flags|=X8;if(zJ(K),(K.mode&g8)!==H6){if(s6){var i0=K.child;if(i0!==null)K.treeBaseDuration-=i0.treeBaseDuration}}return null}case M:if(I$(K),F_(X,K),X===null)I70(K.stateNode.containerInfo);return zJ(K),null;case A:var u0=K.type._context;return eR(u0,K),zJ(K),null;case s:{var M6=K.type;if(KQ(M6))iL(K);return zJ(K),null}case t:{T$(K);var C6=K.memoizedState;if(C6===null)return zJ(K),null;var h8=(K.flags&M8)!==F6,H8=C6.rendering;if(H8===null)if(!h8){var s9=VQ0()&&(X===null||(X.flags&M8)===F6);if(!s9){var z8=K.child;while(z8!==null){var d9=FF(z8);if(d9!==null){h8=!0,K.flags|=M8,EH(C6,!1);var xJ=d9.updateQueue;if(xJ!==null)K.updateQueue=xJ,K.flags|=X8;return K.subtreeFlags=F6,q40(K,H),bq(K,Hj(j1.current,zH)),K.child}z8=z8.sibling}}if(C6.tail!==null&&p5()>HS())K.flags|=M8,h8=!0,EH(C6,!1),K.lanes=hb}else EH(C6,!1);else{if(!h8){var NJ=FF(H8);if(NJ!==null){K.flags|=M8,h8=!0;var N4=NJ.updateQueue;if(N4!==null)K.updateQueue=N4,K.flags|=X8;if(EH(C6,!0),C6.tail===null&&C6.tailMode==="hidden"&&!H8.alternate&&!GJ())return zJ(K),null}else if(p5()*2-C6.renderingStartTime>HS()&&H!==G4)K.flags|=M8,h8=!0,EH(C6,!1),K.lanes=hb}if(C6.isBackwards)H8.sibling=K.child,K.child=H8;else{var K7=C6.last;if(K7!==null)K7.sibling=H8;else K.child=H8;C6.last=H8}}if(C6.tail!==null){var $7=C6.tail;C6.rendering=$7,C6.tail=$7.sibling,C6.renderingStartTime=p5(),$7.sibling=null;var yJ=j1.current;if(h8)yJ=Hj(yJ,zH);else yJ=P$(yJ);return bq(K,yJ),$7}return zJ(K),null}case X0:break;case J0:case Q0:{b_(K);var RZ=K.memoizedState,d$=RZ!==null;if(X!==null){var hH=X.memoizedState,FQ=hH!==null;if(FQ!==d$&&!k0)K.flags|=nX}if(!d$||(K.mode&r6)===H6)zJ(K);else if(H4(LQ,G4)){if(zJ(K),K.subtreeFlags&(G5|X8))K.flags|=nX}return null}case a:return null;case _0:return null}throw new Error("Unknown unit of work tag ("+K.tag+"). This error is likely caused by a bug in React. Please file an issue.")}function U10(X,K,H){switch(mR(K),K.tag){case U:{var L=K.type;if(KQ(L))iL(K);var N=K.flags;if(N&Z7){if(K.flags=N&~Z7|M8,(K.mode&g8)!==H6)gj(K);return K}return null}case B:{var D=K.stateNode;I$(K),vR(K),Uj();var C=K.flags;if((C&Z7)!==F6&&(C&M8)===F6)return K.flags=C&~Z7|M8,K;return null}case O:return Wj(K),null;case k:{T$(K);var I=K.memoizedState;if(I!==null&&I.dehydrated!==null){if(K.alternate===null)throw new Error("Threw in newly mounted dehydrated component. This is likely a bug in React. Please file an issue.");C$()}var b=K.flags;if(b&Z7){if(K.flags=b&~Z7|M8,(K.mode&g8)!==H6)gj(K);return K}return null}case t:return T$(K),null;case M:return I$(K),null;case A:var S=K.type._context;return eR(S,K),null;case J0:case Q0:return b_(K),null;case a:return null;default:return null}}function pv(X,K,H){switch(mR(K),K.tag){case U:{var L=K.type.childContextTypes;if(L!==null&&L!==void 0)iL(K);break}case B:{var N=K.stateNode;I$(K),vR(K),Uj();break}case O:{Wj(K);break}case M:I$(K);break;case k:T$(K);break;case t:T$(K);break;case A:var D=K.type._context;eR(D,K);break;case J0:case Q0:b_(K);break}}var dv=null;dv=new Set;var hF=!1,UJ=!1,L10=typeof WeakSet==="function"?WeakSet:Set,a0=null,f$=null,g$=null;function F10(X){BD(null,function(){throw X}),ND()}var B10=function(X,K){if(K.props=X.memoizedProps,K.state=X.memoizedState,X.mode&g8)try{zQ(),K.componentWillUnmount()}finally{HQ(X)}else K.componentWillUnmount()};function lv(X,K){try{vq(j5,X)}catch(H){q9(X,K,H)}}function B_(X,K,H){try{B10(X,H)}catch(L){q9(X,K,L)}}function N10(X,K,H){try{H.componentDidMount()}catch(L){q9(X,K,L)}}function iv(X,K){try{rv(X)}catch(H){q9(X,K,H)}}function m$(X,K){var H=X.ref;if(H!==null)if(typeof H==="function"){var L;try{if(x6&&c6&&X.mode&g8)try{zQ(),L=H(null)}finally{HQ(X)}else L=H(null)}catch(N){q9(X,K,N)}if(typeof L==="function")W("Unexpected return value from a callback ref in %s. A callback ref should not return a function.",P6(X))}else H.current=null}function uF(X,K,H){try{H()}catch(L){q9(X,K,L)}}var nv=null,sv=!1;function M10(X,K){nv=PJ0(X.containerInfo),a0=K,O10();var H=sv;return sv=!1,nv=null,H}function O10(){while(a0!==null){var X=a0,K=X.child;if((X.subtreeFlags&RD)!==F6&&K!==null)K.return=X,a0=K;else V10()}}function V10(){while(a0!==null){var X=a0;I9(X);try{D10(X)}catch(H){q9(X,X.return,H)}c5();var K=X.sibling;if(K!==null){K.return=X.return,a0=K;return}a0=X.return}}function D10(X){var{alternate:K,flags:H}=X;if((H&iX)!==F6){switch(I9(X),X.tag){case z:case w:case y:break;case U:{if(K!==null){var{memoizedProps:L,memoizedState:N}=K,D=X.stateNode;if(X.type===X.elementType&&!FY){if(D.props!==X.memoizedProps)W("Expected %s props to match memoized props before getSnapshotBeforeUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",P6(X)||"instance");if(D.state!==X.memoizedState)W("Expected %s state to match memoized state before getSnapshotBeforeUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",P6(X)||"instance")}var C=D.getSnapshotBeforeUpdate(X.elementType===X.type?L:E1(X.type,L),N);{var I=dv;if(C===void 0&&!I.has(X.type))I.add(X.type),W("%s.getSnapshotBeforeUpdate(): A snapshot value (or null) must be returned. You have returned undefined.",P6(X))}D.__reactInternalSnapshotBeforeUpdate=C}break}case B:{{var b=X.stateNode;Q70(b.containerInfo)}break}case O:case R:case M:case s:break;default:throw new Error("This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}c5()}}function A1(X,K,H){var L=K.updateQueue,N=L!==null?L.lastEffect:null;if(N!==null){var D=N.next,C=D;do{if((C.tag&X)===X){var I=C.destroy;if(C.destroy=void 0,I!==void 0){if((X&HJ)!==x7)S80(K);else if((X&j5)!==x7)vb(K);if((X&$Q)!==x7)fH(!0);if(uF(K,H,I),(X&$Q)!==x7)fH(!1);if((X&HJ)!==x7)f80();else if((X&j5)!==x7)Sb()}}C=C.next}while(C!==D)}}function vq(X,K){var H=K.updateQueue,L=H!==null?H.lastEffect:null;if(L!==null){var N=L.next,D=N;do{if((D.tag&X)===X){if((X&HJ)!==x7)y80(K);else if((X&j5)!==x7)g80(K);var C=D.create;if((X&$Q)!==x7)fH(!0);if(D.destroy=C(),(X&$Q)!==x7)fH(!1);if((X&HJ)!==x7)v80();else if((X&j5)!==x7)m80();{var I=D.destroy;if(I!==void 0&&typeof I!=="function"){var b=void 0;if((D.tag&j5)!==F6)b="useLayoutEffect";else if((D.tag&$Q)!==F6)b="useInsertionEffect";else b="useEffect";var S=void 0;if(I===null)S=" You returned null. If your effect does not require clean up, return undefined (or nothing).";else if(typeof I.then==="function")S="\n\nIt looks like you wrote "+b+"(async () => ...) or returned a Promise. Instead, write the async function inside your effect and call it immediately:\n\n"+b+"(() => {\n  async function fetchData() {\n    // You can await here\n    const response = await MyAPI.getData(someId);\n    // ...\n  }\n  fetchData();\n}, [someId]); // Or [] if effect doesn't need props or state\n\nLearn more about data fetching with Hooks: https://reactjs.org/link/hooks-data-fetching";else S=" You returned: "+I;W("%s must not return anything besides a function, which is used for clean-up.%s",b,S)}}}D=D.next}while(D!==N)}}function R10(X,K){if((K.flags&X8)!==F6)switch(K.tag){case T:{var H=K.stateNode.passiveEffectDuration,L=K.memoizedProps,N=L.id,D=L.onPostCommit,C=Gv(),I=K.alternate===null?"mount":"update";if(Wv())I="nested-update";if(typeof D==="function")D(N,I,H,C);var b=K.return;J:while(b!==null){switch(b.tag){case B:var S=b.stateNode;S.passiveEffectDuration+=H;break J;case T:var g=b.stateNode;g.passiveEffectDuration+=H;break J}b=b.return}break}}}function j10(X,K,H,L){if((H.flags&VG)!==F6)switch(H.tag){case z:case w:case y:{if(!UJ)if(H.mode&g8)try{zQ(),vq(j5|R5,H)}finally{HQ(H)}else vq(j5|R5,H);break}case U:{var N=H.stateNode;if(H.flags&X8){if(!UJ)if(K===null){if(H.type===H.elementType&&!FY){if(N.props!==H.memoizedProps)W("Expected %s props to match memoized props before componentDidMount. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",P6(H)||"instance");if(N.state!==H.memoizedState)W("Expected %s state to match memoized state before componentDidMount. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",P6(H)||"instance")}if(H.mode&g8)try{zQ(),N.componentDidMount()}finally{HQ(H)}else N.componentDidMount()}else{var D=H.elementType===H.type?K.memoizedProps:E1(H.type,K.memoizedProps),C=K.memoizedState;if(H.type===H.elementType&&!FY){if(N.props!==H.memoizedProps)W("Expected %s props to match memoized props before componentDidUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",P6(H)||"instance");if(N.state!==H.memoizedState)W("Expected %s state to match memoized state before componentDidUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",P6(H)||"instance")}if(H.mode&g8)try{zQ(),N.componentDidUpdate(D,C,N.__reactInternalSnapshotBeforeUpdate)}finally{HQ(H)}else N.componentDidUpdate(D,C,N.__reactInternalSnapshotBeforeUpdate)}}var I=H.updateQueue;if(I!==null){if(H.type===H.elementType&&!FY){if(N.props!==H.memoizedProps)W("Expected %s props to match memoized props before processing the update queue. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",P6(H)||"instance");if(N.state!==H.memoizedState)W("Expected %s state to match memoized state before processing the update queue. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",P6(H)||"instance")}xy(H,I,N)}break}case B:{var b=H.updateQueue;if(b!==null){var S=null;if(H.child!==null)switch(H.child.tag){case O:S=ER(H.child.stateNode);break;case U:S=H.child.stateNode;break}xy(H,b,S)}break}case O:{var g=H.stateNode;if(K===null&&H.flags&X8){var{type:n,memoizedProps:i}=H;uJ0(g,n,i)}break}case R:break;case M:break;case T:{{var K0=H.memoizedProps,$0=K0.onCommit,H0=K0.onRender,S0=H.stateNode.effectDuration,$6=Gv(),Q6=K===null?"mount":"update";if(Wv())Q6="nested-update";if(typeof H0==="function")H0(H.memoizedProps.id,Q6,H.actualDuration,H.treeBaseDuration,H.actualStartTime,$6);{if(typeof $0==="function")$0(H.memoizedProps.id,Q6,S0,$6);EQ0(H);var n6=H.return;J:while(n6!==null){switch(n6.tag){case B:var s6=n6.stateNode;s6.effectDuration+=S0;break J;case T:var Z0=n6.stateNode;Z0.effectDuration+=S0;break J}n6=n6.return}}}break}case k:{P10(X,H);break}case t:case s:case X0:case J0:case Q0:case _0:break;default:throw new Error("This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}if(!UJ){if(H.flags&Oq)rv(H)}}function _10(X){switch(X.tag){case z:case w:case y:{if(X.mode&g8)try{zQ(),lv(X,X.return)}finally{HQ(X)}else lv(X,X.return);break}case U:{var K=X.stateNode;if(typeof K.componentDidMount==="function")N10(X,X.return,K);iv(X,X.return);break}case O:{iv(X,X.return);break}}}function E10(X,K){var H=null;{var L=X;while(!0){if(L.tag===O){if(H===null){H=L;try{var N=L.stateNode;if(K)oJ0(N);else eJ0(L.stateNode,L.memoizedProps)}catch(C){q9(X,X.return,C)}}}else if(L.tag===R){if(H===null)try{var D=L.stateNode;if(K)tJ0(D);else J70(D,L.memoizedProps)}catch(C){q9(X,X.return,C)}}else if((L.tag===J0||L.tag===Q0)&&L.memoizedState!==null&&L!==X);else if(L.child!==null){L.child.return=L,L=L.child;continue}if(L===X)return;while(L.sibling===null){if(L.return===null||L.return===X)return;if(H===L)H=null;L=L.return}if(H===L)H=null;L.sibling.return=L.return,L=L.sibling}}}function rv(X){var K=X.ref;if(K!==null){var H=X.stateNode,L;switch(X.tag){case O:L=ER(H);break;default:L=H}if(typeof K==="function"){var N;if(X.mode&g8)try{zQ(),N=K(L)}finally{HQ(X)}else N=K(L);if(typeof N==="function")W("Unexpected return value from a callback ref in %s. A callback ref should not return a function.",P6(X))}else{if(!K.hasOwnProperty("current"))W("Unexpected ref object provided for %s. Use either a ref-setter function or React.createRef().",P6(X));K.current=L}}}function C10(X){var K=X.alternate;if(K!==null)K.return=null;X.return=null}function av(X){var K=X.alternate;if(K!==null)X.alternate=null,av(K);{if(X.child=null,X.deletions=null,X.sibling=null,X.tag===O){var H=X.stateNode;if(H!==null)b70(H)}X.stateNode=null,X._debugOwner=null,X.return=null,X.dependencies=null,X.memoizedProps=null,X.memoizedState=null,X.pendingProps=null,X.stateNode=null,X.updateQueue=null}}function A10(X){var K=X.return;while(K!==null){if(ov(K))return K;K=K.return}throw new Error("Expected to find a host parent. This error is likely caused by a bug in React. Please file an issue.")}function ov(X){return X.tag===O||X.tag===B||X.tag===M}function tv(X){var K=X;J:while(!0){while(K.sibling===null){if(K.return===null||ov(K.return))return null;K=K.return}K.sibling.return=K.return,K=K.sibling;while(K.tag!==O&&K.tag!==R&&K.tag!==c){if(K.flags&G5)continue J;if(K.child===null||K.tag===M)continue J;else K.child.return=K,K=K.child}if(!(K.flags&G5))return K.stateNode}}function k10(X){var K=A10(X);switch(K.tag){case O:{var H=K.stateNode;if(K.flags&MG)tx(H),K.flags&=~MG;var L=tv(X);M_(X,L,H);break}case B:case M:{var N=K.stateNode.containerInfo,D=tv(X);N_(X,D,N);break}default:throw new Error("Invalid host parent fiber. This error is likely caused by a bug in React. Please file an issue.")}}function N_(X,K,H){var L=X.tag,N=L===O||L===R;if(N){var D=X.stateNode;if(K)nJ0(H,D,K);else lJ0(H,D)}else if(L===M);else{var C=X.child;if(C!==null){N_(C,K,H);var I=C.sibling;while(I!==null)N_(I,K,H),I=I.sibling}}}function M_(X,K,H){var L=X.tag,N=L===O||L===R;if(N){var D=X.stateNode;if(K)iJ0(H,D,K);else dJ0(H,D)}else if(L===M);else{var C=X.child;if(C!==null){M_(C,K,H);var I=C.sibling;while(I!==null)M_(I,K,H),I=I.sibling}}}var LJ=null,k1=!1;function w10(X,K,H){{var L=K;J:while(L!==null){switch(L.tag){case O:{LJ=L.stateNode,k1=!1;break J}case B:{LJ=L.stateNode.containerInfo,k1=!0;break J}case M:{LJ=L.stateNode.containerInfo,k1=!0;break J}}L=L.return}if(LJ===null)throw new Error("Expected to find a host parent. This error is likely caused by a bug in React. Please file an issue.");ev(X,K,H),LJ=null,k1=!1}C10(H)}function Sq(X,K,H){var L=H.child;while(L!==null)ev(X,K,L),L=L.sibling}function ev(X,K,H){switch(P80(H),H.tag){case O:if(!UJ)m$(H,K);case R:{{var L=LJ,N=k1;if(LJ=null,Sq(X,K,H),LJ=L,k1=N,LJ!==null)if(k1)rJ0(LJ,H.stateNode);else sJ0(LJ,H.stateNode)}return}case c:{if(LJ!==null)if(k1)aJ0(LJ,H.stateNode);else wR(LJ,H.stateNode);return}case M:{{var D=LJ,C=k1;LJ=H.stateNode.containerInfo,k1=!0,Sq(X,K,H),LJ=D,k1=C}return}case z:case w:case P:case y:{if(!UJ){var I=H.updateQueue;if(I!==null){var b=I.lastEffect;if(b!==null){var S=b.next,g=S;do{var n=g,i=n.destroy,K0=n.tag;if(i!==void 0){if((K0&$Q)!==x7)uF(H,K,i);else if((K0&j5)!==x7){if(vb(H),H.mode&g8)zQ(),uF(H,K,i),HQ(H);else uF(H,K,i);Sb()}}g=g.next}while(g!==S)}}}Sq(X,K,H);return}case U:{if(!UJ){m$(H,K);var $0=H.stateNode;if(typeof $0.componentWillUnmount==="function")B_(H,K,$0)}Sq(X,K,H);return}case X0:{Sq(X,K,H);return}case J0:{if(H.mode&r6){var H0=UJ;UJ=H0||H.memoizedState!==null,Sq(X,K,H),UJ=H0}else Sq(X,K,H);break}default:{Sq(X,K,H);return}}}function I10(X){var K=X.memoizedState}function P10(X,K){var H=K.memoizedState;if(H===null){var L=K.alternate;if(L!==null){var N=L.memoizedState;if(N!==null){var D=N.dehydrated;if(D!==null)B70(D)}}}}function JS(X){var K=X.updateQueue;if(K!==null){X.updateQueue=null;var H=X.stateNode;if(H===null)H=X.stateNode=new L10;K.forEach(function(L){var N=TQ0.bind(null,X,L);if(!H.has(L)){if(H.add(L),M1)if(f$!==null&&g$!==null)SH(g$,f$);else throw Error("Expected finished root and lanes to be set. This is a bug in React.");L.then(N,N)}})}}function T10(X,K,H){f$=H,g$=X,I9(K),QS(K,X),I9(K),f$=null,g$=null}function w1(X,K,H){var L=K.deletions;if(L!==null)for(var N=0;N<L.length;N++){var D=L[N];try{w10(X,K,D)}catch(b){q9(D,K,b)}}var C=tV();if(K.subtreeFlags&jD){var I=K.child;while(I!==null)I9(I),QS(I,X),I=I.sibling}I9(C)}function QS(X,K,H){var{alternate:L,flags:N}=X;switch(X.tag){case z:case w:case P:case y:{if(w1(K,X),UQ(X),N&X8){try{A1($Q|R5,X,X.return),vq($Q|R5,X)}catch(M6){q9(X,X.return,M6)}if(X.mode&g8){try{zQ(),A1(j5|R5,X,X.return)}catch(M6){q9(X,X.return,M6)}HQ(X)}else try{A1(j5|R5,X,X.return)}catch(M6){q9(X,X.return,M6)}}return}case U:{if(w1(K,X),UQ(X),N&Oq){if(L!==null)m$(L,L.return)}return}case O:{if(w1(K,X),UQ(X),N&Oq){if(L!==null)m$(L,L.return)}{if(X.flags&MG){var D=X.stateNode;try{tx(D)}catch(M6){q9(X,X.return,M6)}}if(N&X8){var C=X.stateNode;if(C!=null){var I=X.memoizedProps,b=L!==null?L.memoizedProps:I,S=X.type,g=X.updateQueue;if(X.updateQueue=null,g!==null)try{cJ0(C,g,S,b,I,X)}catch(M6){q9(X,X.return,M6)}}}}return}case R:{if(w1(K,X),UQ(X),N&X8){if(X.stateNode===null)throw new Error("This should have a text node initialized. This error is likely caused by a bug in React. Please file an issue.");var{stateNode:n,memoizedProps:i}=X,K0=L!==null?L.memoizedProps:i;try{pJ0(n,K0,i)}catch(M6){q9(X,X.return,M6)}}return}case B:{if(w1(K,X),UQ(X),N&X8){if(L!==null){var $0=L.memoizedState;if($0.isDehydrated)try{F70(K.containerInfo)}catch(M6){q9(X,X.return,M6)}}}return}case M:{w1(K,X),UQ(X);return}case k:{w1(K,X),UQ(X);var H0=X.child;if(H0.flags&nX){var{stateNode:S0,memoizedState:$6}=H0,Q6=$6!==null;if(S0.isHidden=Q6,Q6){var n6=H0.alternate!==null&&H0.alternate.memoizedState!==null;if(!n6)NQ0()}}if(N&X8){try{I10(X)}catch(M6){q9(X,X.return,M6)}JS(X)}return}case J0:{var s6=L!==null&&L.memoizedState!==null;if(X.mode&r6){var Z0=UJ;UJ=Z0||s6,w1(K,X),UJ=Z0}else w1(K,X);if(UQ(X),N&nX){var{stateNode:L0,memoizedState:q0}=X,E0=q0!==null,i0=X;if(L0.isHidden=E0,E0){if(!s6){if((i0.mode&r6)!==H6){a0=i0;var u0=i0.child;while(u0!==null)a0=u0,x10(u0),u0=u0.sibling}}}E10(i0,E0)}return}case t:{if(w1(K,X),UQ(X),N&X8)JS(X);return}case X0:return;default:{w1(K,X),UQ(X);return}}}function UQ(X){var K=X.flags;if(K&G5){try{k10(X)}catch(H){q9(X,X.return,H)}X.flags&=~G5}if(K&XZ)X.flags&=~XZ}function b10(X,K,H){f$=H,g$=K,a0=X,ZS(X,K,H),f$=null,g$=null}function ZS(X,K,H){var L=(X.mode&r6)!==H6;while(a0!==null){var N=a0,D=N.child;if(N.tag===J0&&L){var C=N.memoizedState!==null,I=C||hF;if(I){O_(X,K,H);continue}else{var b=N.alternate,S=b!==null&&b.memoizedState!==null,g=S||UJ,n=hF,i=UJ;if(hF=I,UJ=g,UJ&&!i)a0=N,y10(N);var K0=D;while(K0!==null)a0=K0,ZS(K0,K,H),K0=K0.sibling;a0=N,hF=n,UJ=i,O_(X,K,H);continue}}if((N.subtreeFlags&VG)!==F6&&D!==null)D.return=N,a0=D;else O_(X,K,H)}}function O_(X,K,H){while(a0!==null){var L=a0;if((L.flags&VG)!==F6){var N=L.alternate;I9(L);try{j10(K,N,L,H)}catch(C){q9(L,L.return,C)}c5()}if(L===X){a0=null;return}var D=L.sibling;if(D!==null){D.return=L.return,a0=D;return}a0=L.return}}function x10(X){while(a0!==null){var K=a0,H=K.child;switch(K.tag){case z:case w:case P:case y:{if(K.mode&g8)try{zQ(),A1(j5,K,K.return)}finally{HQ(K)}else A1(j5,K,K.return);break}case U:{m$(K,K.return);var L=K.stateNode;if(typeof L.componentWillUnmount==="function")B_(K,K.return,L);break}case O:{m$(K,K.return);break}case J0:{var N=K.memoizedState!==null;if(N){qS(X);continue}break}}if(H!==null)H.return=K,a0=H;else qS(X)}}function qS(X){while(a0!==null){var K=a0;if(K===X){a0=null;return}var H=K.sibling;if(H!==null){H.return=K.return,a0=H;return}a0=K.return}}function y10(X){while(a0!==null){var K=a0,H=K.child;if(K.tag===J0){var L=K.memoizedState!==null;if(L){XS(X);continue}}if(H!==null)H.return=K,a0=H;else XS(X)}}function XS(X){while(a0!==null){var K=a0;I9(K);try{_10(K)}catch(L){q9(K,K.return,L)}if(c5(),K===X){a0=null;return}var H=K.sibling;if(H!==null){H.return=K.return,a0=H;return}a0=K.return}}function v10(X,K,H,L){a0=K,S10(K,X,H,L)}function S10(X,K,H,L){while(a0!==null){var N=a0,D=N.child;if((N.subtreeFlags&K$)!==F6&&D!==null)D.return=N,a0=D;else f10(X,K,H,L)}}function f10(X,K,H,L){while(a0!==null){var N=a0;if((N.flags&N1)!==F6){I9(N);try{g10(K,N,H,L)}catch(C){q9(N,N.return,C)}c5()}if(N===X){a0=null;return}var D=N.sibling;if(D!==null){D.return=N.return,a0=D;return}a0=N.return}}function g10(X,K,H,L){switch(K.tag){case z:case w:case y:{if(K.mode&g8){fj();try{vq(HJ|R5,K)}finally{Sj(K)}}else vq(HJ|R5,K);break}}}function m10(X){a0=X,h10()}function h10(){while(a0!==null){var X=a0,K=X.child;if((a0.flags&lX)!==F6){var H=X.deletions;if(H!==null){for(var L=0;L<H.length;L++){var N=H[L];a0=N,p10(N,X)}{var D=X.alternate;if(D!==null){var C=D.child;if(C!==null){D.child=null;do{var I=C.sibling;C.sibling=null,C=I}while(C!==null)}}}a0=X}}if((X.subtreeFlags&K$)!==F6&&K!==null)K.return=X,a0=K;else u10()}}function u10(){while(a0!==null){var X=a0;if((X.flags&N1)!==F6)I9(X),c10(X),c5();var K=X.sibling;if(K!==null){K.return=X.return,a0=K;return}a0=X.return}}function c10(X){switch(X.tag){case z:case w:case y:{if(X.mode&g8)fj(),A1(HJ|R5,X,X.return),Sj(X);else A1(HJ|R5,X,X.return);break}}}function p10(X,K){while(a0!==null){var H=a0;I9(H),l10(H,K),c5();var L=H.child;if(L!==null)L.return=H,a0=L;else d10(X)}}function d10(X){while(a0!==null){var K=a0,H=K.sibling,L=K.return;if(av(K),K===X){a0=null;return}if(H!==null){H.return=L,a0=H;return}a0=L}}function l10(X,K){switch(X.tag){case z:case w:case y:{if(X.mode&g8)fj(),A1(HJ,X,K),Sj(X);else A1(HJ,X,K);break}}}function i10(X){switch(X.tag){case z:case w:case y:{try{vq(j5|R5,X)}catch(H){q9(X,X.return,H)}break}case U:{var K=X.stateNode;try{K.componentDidMount()}catch(H){q9(X,X.return,H)}break}}}function n10(X){switch(X.tag){case z:case w:case y:{try{vq(HJ|R5,X)}catch(K){q9(X,X.return,K)}break}}}function s10(X){switch(X.tag){case z:case w:case y:{try{A1(j5|R5,X,X.return)}catch(H){q9(X,X.return,H)}break}case U:{var K=X.stateNode;if(typeof K.componentWillUnmount==="function")B_(X,X.return,K);break}}}function r10(X){switch(X.tag){case z:case w:case y:try{A1(HJ|R5,X,X.return)}catch(K){q9(X,X.return,K)}}}var a10=0,o10=1,t10=2,e10=3,JQ0=4;if(typeof Symbol==="function"&&Symbol.for){var CH=Symbol.for;a10=CH("selector.component"),o10=CH("selector.has_pseudo_class"),t10=CH("selector.role"),e10=CH("selector.test_id"),JQ0=CH("selector.text")}var QQ0=[];function ZQ0(){QQ0.forEach(function(X){return X()})}var qQ0=Z.ReactCurrentActQueue;function XQ0(X){{var K=typeof IS_REACT_ACT_ENVIRONMENT!=="undefined"?IS_REACT_ACT_ENVIRONMENT:void 0,H=typeof jest!=="undefined";return H&&K!==!1}}function YS(){{var X=typeof IS_REACT_ACT_ENVIRONMENT!=="undefined"?IS_REACT_ACT_ENVIRONMENT:void 0;if(!X&&qQ0.current!==null)W("The current testing environment is not configured to support act(...)");return X}}var YQ0=Math.ceil,V_=Z.ReactCurrentDispatcher,D_=Z.ReactCurrentOwner,FJ=Z.ReactCurrentBatchConfig,I1=Z.ReactCurrentActQueue,C5=0,KS=1,BJ=2,i4=4,MZ=0,AH=1,BY=2,cF=3,kH=4,$S=5,R_=6,a6=C5,X7=null,f9=null,A5=O0,LQ=O0,j_=Aq(O0),k5=MZ,wH=null,__=O0,pF=O0,IH=O0,dF=O0,PH=null,y7=null,E_=0,WS=500,GS=Infinity,KQ0=500,OZ=null;function TH(){GS=p5()+KQ0}function HS(){return GS}var lF=!1,C_=null,h$=null,NY=!1,fq=null,bH=O0,A_=[],k_=null,$Q0=50,xH=0,w_=null,I_=!1,iF=!1,WQ0=50,u$=0,nF=null,yH=z9,sF=O0,zS=!1;function rF(){return X7}function Y7(){if((a6&(BJ|i4))!==C5)return p5();if(yH!==z9)return yH;return yH=p5(),yH}function gq(X){var K=X.mode;if((K&r6)===H6)return V6;else if((a6&BJ)!==C5&&A5!==O0)return AG(A5);var H=e70()!==t70;if(H){if(FJ.transition!==null){var L=FJ.transition;if(!L._updatedFibers)L._updatedFibers=new Set;L._updatedFibers.add(X)}if(sF===l5)sF=db();return sF}var N=O1();if(N!==l5)return N;var D=fJ0();return D}function GQ0(X){var K=X.mode;if((K&r6)===H6)return V6;return $90()}function w5(X,K,H,L){if(xQ0(),zS)W("useInsertionEffect must not schedule updates.");if(I_)iF=!0;if(kG(X,H,L),(a6&BJ)!==O0&&X===X7)SQ0(K);else{if(M1)nb(X,K,H);if(fQ0(K),X===X7){if((a6&BJ)===C5)IH=f6(IH,H);if(k5===kH)mq(X,A5)}if(v7(X,L),H===V6&&a6===C5&&(K.mode&r6)===H6&&!I1.isBatchingLegacy)TH(),Hy()}}function HQ0(X,K,H){var L=X.current;L.lanes=K,kG(X,K,H),v7(X,H)}function zQ0(X){return(a6&BJ)!==C5}function v7(X,K){var H=X.callbackNode;Q90(X,K);var L=LL(X,X===X7?A5:O0);if(L===O0){if(H!==null)kS(H);X.callbackNode=null,X.callbackPriority=l5;return}var N=JY(L),D=X.callbackPriority;if(D===N&&!(I1.current!==null&&H!==S_)){if(H==null&&D!==V6)W("Expected scheduled callback to exist. This error is likely caused by a bug in React. Please file an issue.");return}if(H!=null)kS(H);var C;if(N===V6){if(X.tag===kq){if(I1.isBatchingLegacy!==null)I1.didScheduleLegacyUpdate=!0;v70(FS.bind(null,X))}else Gy(FS.bind(null,X));if(I1.current!==null)I1.current.push(wq);else mJ0(function(){if((a6&(BJ|i4))===C5)wq()});C=null}else{var I;switch(ab(L)){case z4:I=GL;break;case WZ:I=_D;break;case GZ:I=aX;break;case ML:I=ED;break;default:I=aX;break}C=f_(I,US.bind(null,X))}X.callbackPriority=N,X.callbackNode=C}function US(X,K){if(E40(),yH=z9,sF=O0,(a6&(BJ|i4))!==C5)throw new Error("Should not already be working.");var H=X.callbackNode,L=DZ();if(L){if(X.callbackNode!==H)return null}var N=LL(X,X===X7?A5:O0);if(N===O0)return null;var D=!FL(X,N)&&!K90(X,N)&&!K,C=D?RQ0(X,N):oF(X,N);if(C!==MZ){if(C===BY){var I=iD(X);if(I!==O0)N=I,C=P_(X,I)}if(C===AH){var b=wH;throw MY(X,O0),mq(X,N),v7(X,p5()),b}if(C===R_)mq(X,N);else{var S=!FL(X,N),g=X.current.alternate;if(S&&!LQ0(g)){if(C=oF(X,N),C===BY){var n=iD(X);if(n!==O0)N=n,C=P_(X,n)}if(C===AH){var i=wH;throw MY(X,O0),mq(X,N),v7(X,p5()),i}}X.finishedWork=g,X.finishedLanes=N,UQ0(X,C,N)}}if(v7(X,p5()),X.callbackNode===H)return US.bind(null,X);return null}function P_(X,K){var H=PH;if(OL(X)){var L=MY(X,K);L.flags|=qZ,w70(X.containerInfo)}var N=oF(X,K);if(N!==BY){var D=y7;if(y7=H,D!==null)LS(D)}return N}function LS(X){if(y7===null)y7=X;else y7.push.apply(y7,X)}function UQ0(X,K,H){switch(K){case MZ:case AH:throw new Error("Root did not complete. This is a bug in React.");case BY:{OY(X,y7,OZ);break}case cF:{if(mq(X,H),cb(H)&&!wS()){var L=E_+WS-p5();if(L>10){var N=LL(X,O0);if(N!==O0)break;var D=X.suspendedLanes;if(!z$(D,H)){var C=Y7();ib(X,D);break}X.timeoutHandle=AR(OY.bind(null,X,y7,OZ),L);break}}OY(X,y7,OZ);break}case kH:{if(mq(X,H),Y90(H))break;if(!wS()){var I=e80(X,H),b=I,S=p5()-b,g=bQ0(S)-S;if(g>10){X.timeoutHandle=AR(OY.bind(null,X,y7,OZ),g);break}}OY(X,y7,OZ);break}case $S:{OY(X,y7,OZ);break}default:throw new Error("Unknown root exit status.")}}function LQ0(X){var K=X;while(!0){if(K.flags&$L){var H=K.updateQueue;if(H!==null){var L=H.stores;if(L!==null)for(var N=0;N<L.length;N++){var D=L[N],C=D.getSnapshot,I=D.value;try{if(!L4(C(),I))return!1}catch(S){return!1}}}}var b=K.child;if(K.subtreeFlags&$L&&b!==null){b.return=K,K=b;continue}if(K===X)return!0;while(K.sibling===null){if(K.return===null||K.return===X)return!0;K=K.return}K.sibling.return=K.return,K=K.sibling}return!0}function mq(X,K){K=BL(K,dF),K=BL(K,IH),G90(X,K)}function FS(X){if(C40(),(a6&(BJ|i4))!==C5)throw new Error("Should not already be working.");DZ();var K=LL(X,O0);if(!H4(K,V6))return v7(X,p5()),null;var H=oF(X,K);if(X.tag!==kq&&H===BY){var L=iD(X);if(L!==O0)K=L,H=P_(X,L)}if(H===AH){var N=wH;throw MY(X,O0),mq(X,K),v7(X,p5()),N}if(H===R_)throw new Error("Root did not complete. This is a bug in React.");var D=X.current.alternate;return X.finishedWork=D,X.finishedLanes=K,OY(X,y7,OZ),v7(X,p5()),null}function FQ0(X,K){if(K!==O0){if(aD(X,f6(K,V6)),v7(X,p5()),(a6&(BJ|i4))===C5)TH(),wq()}}function T_(X,K){var H=a6;a6|=KS;try{return X(K)}finally{if(a6=H,a6===C5&&!I1.isBatchingLegacy)TH(),Hy()}}function BQ0(X,K,H,L,N){var D=O1(),C=FJ.transition;try{return FJ.transition=null,i5(z4),X(K,H,L,N)}finally{if(i5(D),FJ.transition=C,a6===C5)TH()}}function VZ(X){if(fq!==null&&fq.tag===kq&&(a6&(BJ|i4))===C5)DZ();var K=a6;a6|=KS;var H=FJ.transition,L=O1();try{if(FJ.transition=null,i5(z4),X)return X();else return}finally{if(i5(L),FJ.transition=H,a6=K,(a6&(BJ|i4))===C5)wq()}}function BS(){return(a6&(BJ|i4))!==C5}function aF(X,K){TJ(j_,LQ,X),LQ=f6(LQ,K),__=f6(__,K)}function b_(X){LQ=j_.current,PJ(j_,X)}function MY(X,K){X.finishedWork=null,X.finishedLanes=O0;var H=X.timeoutHandle;if(H!==kR)X.timeoutHandle=kR,gJ0(H);if(f9!==null){var L=f9.return;while(L!==null){var N=L.alternate;pv(N,L),L=L.return}}X7=X;var D=VY(X.current,null);return f9=D,A5=LQ=__=K,k5=MZ,wH=null,pF=O0,IH=O0,dF=O0,PH=null,y7=null,K40(),R1.discardPendingWarnings(),D}function NS(X,K){do{var H=f9;try{if(XF(),my(),c5(),D_.current=null,H===null||H.return===null){k5=AH,wH=K,f9=null;return}if(x6&&H.mode&g8)vF(H,!0);if(_6)if($$(),K!==null&&typeof K==="object"&&typeof K.then==="function"){var L=K;u80(H,L,A5)}else h80(H,K,A5);y40(X,H.return,H,K,A5),DS(H)}catch(N){if(K=N,f9===H&&H!==null)H=H.return,f9=H;else H=f9;continue}return}while(!0)}function MS(){var X=V_.current;if(V_.current=PF,X===null)return PF;else return X}function OS(X){V_.current=X}function NQ0(){E_=p5()}function vH(X){pF=f6(X,pF)}function MQ0(){if(k5===MZ)k5=cF}function x_(){if(k5===MZ||k5===cF||k5===BY)k5=kH;if(X7!==null&&(nD(pF)||nD(IH)))mq(X7,A5)}function OQ0(X){if(k5!==kH)k5=BY;if(PH===null)PH=[X];else PH.push(X)}function VQ0(){return k5===MZ}function oF(X,K){var H=a6;a6|=BJ;var L=MS();if(X7!==X||A5!==K){if(M1){var N=X.memoizedUpdaters;if(N.size>0)SH(X,A5),N.clear();sb(X,K)}OZ=rb(),MY(X,K)}fb(K);do try{DQ0();break}catch(D){NS(X,D)}while(!0);if(XF(),a6=H,OS(L),f9!==null)throw new Error("Cannot commit an incomplete root. This error is likely caused by a bug in React. Please file an issue.");return gb(),X7=null,A5=O0,k5}function DQ0(){while(f9!==null)VS(f9)}function RQ0(X,K){var H=a6;a6|=BJ;var L=MS();if(X7!==X||A5!==K){if(M1){var N=X.memoizedUpdaters;if(N.size>0)SH(X,A5),N.clear();sb(X,K)}OZ=rb(),TH(),MY(X,K)}fb(K);do try{jQ0();break}catch(D){NS(X,D)}while(!0);if(XF(),OS(L),a6=H,f9!==null)return i80(),MZ;else return gb(),X7=null,A5=O0,k5}function jQ0(){while(f9!==null&&!D80())VS(f9)}function VS(X){var K=X.alternate;I9(X);var H;if((X.mode&g8)!==H6)vj(X),H=y_(K,X,LQ),vF(X,!0);else H=y_(K,X,LQ);if(c5(),X.memoizedProps=X.pendingProps,H===null)DS(X);else f9=H;D_.current=null}function DS(X){var K=X;do{var{alternate:H,return:L}=K;if((K.flags&OG)===F6){I9(K);var N=void 0;if((K.mode&g8)===H6)N=cv(H,K,LQ);else vj(K),N=cv(H,K,LQ),vF(K,!1);if(c5(),N!==null){f9=N;return}}else{var D=U10(H,K);if(D!==null){D.flags&=F80,f9=D;return}if((K.mode&g8)!==H6){vF(K,!1);var{actualDuration:C,child:I}=K;while(I!==null)C+=I.actualDuration,I=I.sibling;K.actualDuration=C}if(L!==null)L.flags|=OG,L.subtreeFlags=F6,L.deletions=null;else{k5=R_,f9=null;return}}var b=K.sibling;if(b!==null){f9=b;return}K=L,f9=K}while(K!==null);if(k5===MZ)k5=$S}function OY(X,K,H){var L=O1(),N=FJ.transition;try{FJ.transition=null,i5(z4),_Q0(X,K,H,L)}finally{FJ.transition=N,i5(L)}return null}function _Q0(X,K,H,L){do DZ();while(fq!==null);if(yQ0(),(a6&(BJ|i4))!==C5)throw new Error("Should not already be working.");var{finishedWork:N,finishedLanes:D}=X;if(x80(D),N===null)return yb(),null;else if(D===O0)W("root.finishedLanes should not be empty during a commit. This is a bug in React.");if(X.finishedWork=null,X.finishedLanes=O0,N===X.current)throw new Error("Cannot commit the same tree as before. This error is likely caused by a bug in React. Please file an issue.");X.callbackNode=null,X.callbackPriority=l5;var C=f6(N.lanes,N.childLanes);if(H90(X,C),X===X7)X7=null,f9=null,A5=O0;if((N.subtreeFlags&K$)!==F6||(N.flags&K$)!==F6){if(!NY)NY=!0,k_=H,f_(aX,function(){return DZ(),null})}var I=(N.subtreeFlags&(RD|jD|VG|K$))!==F6,b=(N.flags&(RD|jD|VG|K$))!==F6;if(I||b){var S=FJ.transition;FJ.transition=null;var g=O1();i5(z4);var n=a6;a6|=i4,D_.current=null;var i=M10(X,N);Hv(),T10(X,N,D),TJ0(X.containerInfo),X.current=N,c80(D),b10(N,X,D),p80(),R80(),a6=n,i5(g),FJ.transition=S}else X.current=N,Hv();var K0=NY;if(NY)NY=!1,fq=X,bH=D;else u$=0,nF=null;if(C=X.pendingLanes,C===O0)h$=null;if(!K0)ES(X.current,!1);if(w80(N.stateNode,L),M1)X.memoizedUpdaters.clear();if(ZQ0(),v7(X,p5()),K!==null){var $0=X.onRecoverableError;for(var H0=0;H0<K.length;H0++){var S0=K[H0],$6=S0.stack,Q6=S0.digest;$0(S0.value,{componentStack:$6,digest:Q6})}}if(lF){lF=!1;var n6=C_;throw C_=null,n6}if(H4(bH,V6)&&X.tag!==kq)DZ();if(C=X.pendingLanes,H4(C,V6))if(_40(),X===w_)xH++;else xH=0,w_=X;else xH=0;return wq(),yb(),null}function DZ(){if(fq!==null){var X=ab(bH),K=F90(GZ,X),H=FJ.transition,L=O1();try{return FJ.transition=null,i5(K),CQ0()}finally{i5(L),FJ.transition=H}}return!1}function EQ0(X){if(A_.push(X),!NY)NY=!0,f_(aX,function(){return DZ(),null})}function CQ0(){if(fq===null)return!1;var X=k_;k_=null;var K=fq,H=bH;if(fq=null,bH=O0,(a6&(BJ|i4))!==C5)throw new Error("Cannot flush passive effects while already rendering.");I_=!0,iF=!1,d80(H);var L=a6;a6|=i4,m10(K.current),v10(K,K.current,H,X);{var N=A_;A_=[];for(var D=0;D<N.length;D++){var C=N[D];R10(K,C)}}l80(),ES(K.current,!0),a6=L,wq();{if(iF)if(K===nF)u$++;else u$=0,nF=K;else u$=0;I_=!1,iF=!1}I80(K);{var I=K.current.stateNode;I.effectDuration=0,I.passiveEffectDuration=0}return!0}function RS(X){return h$!==null&&h$.has(X)}function AQ0(X){if(h$===null)h$=new Set([X]);else h$.add(X)}function kQ0(X){if(!lF)lF=!0,C_=X}var wQ0=kQ0;function jS(X,K,H){var L=LY(H,K),N=Ov(X,L,V6),D=Pq(X,N,V6),C=Y7();if(D!==null)kG(D,V6,C),v7(D,C)}function q9(X,K,H){if(F10(H),fH(!1),X.tag===B){jS(X,X,H);return}var L=null;L=K;while(L!==null){if(L.tag===B){jS(L,X,H);return}else if(L.tag===U){var{type:N,stateNode:D}=L;if(typeof N.getDerivedStateFromError==="function"||typeof D.componentDidCatch==="function"&&!RS(D)){var C=LY(H,X),I=ej(L,C,V6),b=Pq(L,I,V6),S=Y7();if(b!==null)kG(b,V6,S),v7(b,S);return}}L=L.return}W("Internal React error: Attempted to capture a commit phase error inside a detached tree. This indicates a bug in React. Likely causes include deleting the same fiber more than once, committing an already-finished tree, or an inconsistent return pointer.\n\nError message:\n\n%s",H)}function IQ0(X,K,H){var L=X.pingCache;if(L!==null)L.delete(K);var N=Y7();if(ib(X,H),gQ0(X),X7===X&&z$(A5,H))if(k5===kH||k5===cF&&cb(A5)&&p5()-E_<WS)MY(X,O0);else dF=f6(dF,H);v7(X,N)}function _S(X,K){if(K===l5)K=GQ0(X);var H=Y7(),L=b7(X,K);if(L!==null)kG(L,K,H),v7(L,H)}function PQ0(X){var K=X.memoizedState,H=l5;if(K!==null)H=K.retryLane;_S(X,H)}function TQ0(X,K){var H=l5,L;switch(X.tag){case k:L=X.stateNode;var N=X.memoizedState;if(N!==null)H=N.retryLane;break;case t:L=X.stateNode;break;default:throw new Error("Pinged unknown suspense boundary type. This is probably a bug in React.")}if(L!==null)L.delete(K);_S(X,H)}function bQ0(X){return X<120?120:X<480?480:X<1080?1080:X<1920?1920:X<3000?3000:X<4320?4320:YQ0(X/1960)*1960}function xQ0(){if(xH>$Q0)throw xH=0,w_=null,new Error("Maximum update depth exceeded. This can happen when a component repeatedly calls setState inside componentWillUpdate or componentDidUpdate. React limits the number of nested updates to prevent infinite loops.");if(u$>WQ0)u$=0,nF=null,W("Maximum update depth exceeded. This can happen when a component calls setState inside useEffect, but useEffect either doesn't have a dependency array, or one of the dependencies changes on every render.")}function yQ0(){R1.flushLegacyContextWarning(),R1.flushPendingUnsafeLifecycleWarnings()}function ES(X,K){{if(I9(X),tF(X,YZ,s10),K)tF(X,WL,r10);if(tF(X,YZ,i10),K)tF(X,WL,n10);c5()}}function tF(X,K,H){{var L=X,N=null;while(L!==null){var D=L.subtreeFlags&K;if(L!==N&&L.child!==null&&D!==F6)L=L.child;else{if((L.flags&K)!==F6)H(L);if(L.sibling!==null)L=L.sibling;else L=N=L.return}}}}var eF=null;function CS(X){{if((a6&BJ)!==C5)return;if(!(X.mode&r6))return;var K=X.tag;if(K!==F&&K!==B&&K!==U&&K!==z&&K!==w&&K!==P&&K!==y)return;var H=P6(X)||"ReactComponent";if(eF!==null){if(eF.has(H))return;eF.add(H)}else eF=new Set([H]);var L=IJ;try{I9(X),W("Can't perform a React state update on a component that hasn't mounted yet. This indicates that you have a side-effect in your render function that asynchronously later calls tries to update the component. Move this work to useEffect instead.")}finally{if(L)I9(X);else c5()}}}var y_;{var vQ0=null;y_=function(X,K,H){var L=xS(vQ0,K);try{return fv(X,K,H)}catch(D){if(p70()||D!==null&&typeof D==="object"&&typeof D.then==="function")throw D;if(XF(),my(),pv(X,K),xS(K,L),K.mode&g8)vj(K);if(BD(null,fv,null,X,K,H),H80()){var N=ND();if(typeof N==="object"&&N!==null&&N._suppressLogging&&typeof D==="object"&&D!==null&&!D._suppressLogging)D._suppressLogging=!0}throw D}}}var AS=!1,v_;v_=new Set;function SQ0(X){if(Bq&&!D40())switch(X.tag){case z:case w:case y:{var K=f9&&P6(f9)||"Unknown",H=K;if(!v_.has(H)){v_.add(H);var L=P6(X)||"Unknown";W("Cannot update a component (`%s`) while rendering a different component (`%s`). To locate the bad setState() call inside `%s`, follow the stack trace as described in https://reactjs.org/link/setstate-in-render",L,K,K)}break}case U:{if(!AS)W("Cannot update during an existing state transition (such as within `render`). Render methods should be a pure function of props and state."),AS=!0;break}}}function SH(X,K){if(M1){var H=X.memoizedUpdaters;H.forEach(function(L){nb(X,L,K)})}}var S_={};function f_(X,K){{var H=I1.current;if(H!==null)return H.push(K),S_;else return xb(X,K)}}function kS(X){if(X===S_)return;return V80(X)}function wS(){return I1.current!==null}function fQ0(X){{if(X.mode&r6){if(!YS())return}else{if(!XQ0())return;if(a6!==C5)return;if(X.tag!==z&&X.tag!==w&&X.tag!==y)return}if(I1.current===null){var K=IJ;try{I9(X),W("An update to %s inside a test was not wrapped in act(...).\n\nWhen testing, code that causes React state updates should be wrapped into act(...):\n\nact(() => {\n  /* fire events that update state */\n});\n/* assert on the output */\n\nThis ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act",P6(X))}finally{if(K)I9(X);else c5()}}}}function gQ0(X){if(X.tag!==kq&&YS()&&I1.current===null)W("A suspended resource finished loading inside a test, but the event was not wrapped in act(...).\n\nWhen testing, code that resolves suspended data should be wrapped into act(...):\n\nact(() => {\n  /* finish loading suspended data */\n});\n/* assert on the output */\n\nThis ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act")}function fH(X){zS=X}var n4=null,c$=null,mQ0=function(X){n4=X};function p$(X){{if(n4===null)return X;var K=n4(X);if(K===void 0)return X;return K.current}}function g_(X){return p$(X)}function m_(X){{if(n4===null)return X;var K=n4(X);if(K===void 0){if(X!==null&&X!==void 0&&typeof X.render==="function"){var H=p$(X.render);if(X.render!==H){var L={$$typeof:M0,render:H};if(X.displayName!==void 0)L.displayName=X.displayName;return L}}return X}return K.current}}function IS(X,K){{if(n4===null)return!1;var H=X.elementType,L=K.type,N=!1,D=typeof L==="object"&&L!==null?L.$$typeof:null;switch(X.tag){case U:{if(typeof L==="function")N=!0;break}case z:{if(typeof L==="function")N=!0;else if(D===h0)N=!0;break}case w:{if(D===M0)N=!0;else if(D===h0)N=!0;break}case P:case y:{if(D===N6)N=!0;else if(D===h0)N=!0;break}default:return!1}if(N){var C=n4(H);if(C!==void 0&&C===n4(L))return!0}return!1}}function PS(X){{if(n4===null)return;if(typeof WeakSet!=="function")return;if(c$===null)c$=new WeakSet;c$.add(X)}}var hQ0=function(X,K){{if(n4===null)return;var{staleFamilies:H,updatedFamilies:L}=K;DZ(),VZ(function(){h_(X.current,L,H)})}},uQ0=function(X,K){{if(X.context!==F4)return;DZ(),VZ(function(){gH(K,X,null,null)})}};function h_(X,K,H){{var{alternate:L,child:N,sibling:D,tag:C,type:I}=X,b=null;switch(C){case z:case y:case U:b=I;break;case w:b=I.render;break}if(n4===null)throw new Error("Expected resolveFamily to be set during hot reload.");var S=!1,g=!1;if(b!==null){var n=n4(b);if(n!==void 0){if(H.has(n))g=!0;else if(K.has(n))if(C===U)g=!0;else S=!0}}if(c$!==null){if(c$.has(X)||L!==null&&c$.has(L))g=!0}if(g)X._debugNeedsRemount=!0;if(g||S){var i=b7(X,V6);if(i!==null)w5(i,X,V6,z9)}if(N!==null&&!g)h_(N,K,H);if(D!==null)h_(D,K,H)}}var cQ0=function(X,K){{var H=new Set,L=new Set(K.map(function(N){return N.current}));return u_(X.current,L,H),H}};function u_(X,K,H){{var{child:L,sibling:N,tag:D,type:C}=X,I=null;switch(D){case z:case y:case U:I=C;break;case w:I=C.render;break}var b=!1;if(I!==null){if(K.has(I))b=!0}if(b)pQ0(X,H);else if(L!==null)u_(L,K,H);if(N!==null)u_(N,K,H)}}function pQ0(X,K){{var H=dQ0(X,K);if(H)return;var L=X;while(!0){switch(L.tag){case O:K.add(L.stateNode);return;case M:K.add(L.stateNode.containerInfo);return;case B:K.add(L.stateNode.containerInfo);return}if(L.return===null)throw new Error("Expected to reach root first.");L=L.return}}}function dQ0(X,K){{var H=X,L=!1;while(!0){if(H.tag===O)L=!0,K.add(H.stateNode);else if(H.child!==null){H.child.return=H,H=H.child;continue}if(H===X)return L;while(H.sibling===null){if(H.return===null||H.return===X)return L;H=H.return}H.sibling.return=H.return,H=H.sibling}}return!1}var c_;{c_=!1;try{var TS=Object.preventExtensions({});}catch(X){c_=!0}}function lQ0(X,K,H,L){if(this.tag=X,this.key=H,this.elementType=null,this.type=null,this.stateNode=null,this.return=null,this.child=null,this.sibling=null,this.index=0,this.ref=null,this.pendingProps=K,this.memoizedProps=null,this.updateQueue=null,this.memoizedState=null,this.dependencies=null,this.mode=L,this.flags=F6,this.subtreeFlags=F6,this.deletions=null,this.lanes=O0,this.childLanes=O0,this.alternate=null,this.actualDuration=Number.NaN,this.actualStartTime=Number.NaN,this.selfBaseDuration=Number.NaN,this.treeBaseDuration=Number.NaN,this.actualDuration=0,this.actualStartTime=-1,this.selfBaseDuration=0,this.treeBaseDuration=0,this._debugSource=null,this._debugOwner=null,this._debugNeedsRemount=!1,this._debugHookTypes=null,!c_&&typeof Object.preventExtensions==="function")Object.preventExtensions(this)}var B4=function(X,K,H,L){return new lQ0(X,K,H,L)};function p_(X){var K=X.prototype;return!!(K&&K.isReactComponent)}function iQ0(X){return typeof X==="function"&&!p_(X)&&X.defaultProps===void 0}function nQ0(X){if(typeof X==="function")return p_(X)?U:z;else if(X!==void 0&&X!==null){var K=X.$$typeof;if(K===M0)return w;if(K===N6)return P}return F}function VY(X,K){var H=X.alternate;if(H===null)H=B4(X.tag,K,X.key,X.mode),H.elementType=X.elementType,H.type=X.type,H.stateNode=X.stateNode,H._debugSource=X._debugSource,H._debugOwner=X._debugOwner,H._debugHookTypes=X._debugHookTypes,H.alternate=X,X.alternate=H;else H.pendingProps=K,H.type=X.type,H.flags=F6,H.subtreeFlags=F6,H.deletions=null,H.actualDuration=0,H.actualStartTime=-1;H.flags=X.flags&KZ,H.childLanes=X.childLanes,H.lanes=X.lanes,H.child=X.child,H.memoizedProps=X.memoizedProps,H.memoizedState=X.memoizedState,H.updateQueue=X.updateQueue;var L=X.dependencies;switch(H.dependencies=L===null?null:{lanes:L.lanes,firstContext:L.firstContext},H.sibling=X.sibling,H.index=X.index,H.ref=X.ref,H.selfBaseDuration=X.selfBaseDuration,H.treeBaseDuration=X.treeBaseDuration,H._debugNeedsRemount=X._debugNeedsRemount,H.tag){case F:case z:case y:H.type=p$(X.type);break;case U:H.type=g_(X.type);break;case w:H.type=m_(X.type);break}return H}function sQ0(X,K){X.flags&=KZ|G5;var H=X.alternate;if(H===null)X.childLanes=O0,X.lanes=K,X.child=null,X.subtreeFlags=F6,X.memoizedProps=null,X.memoizedState=null,X.updateQueue=null,X.dependencies=null,X.stateNode=null,X.selfBaseDuration=0,X.treeBaseDuration=0;else{X.childLanes=H.childLanes,X.lanes=H.lanes,X.child=H.child,X.subtreeFlags=F6,X.deletions=null,X.memoizedProps=H.memoizedProps,X.memoizedState=H.memoizedState,X.updateQueue=H.updateQueue,X.type=H.type;var L=H.dependencies;X.dependencies=L===null?null:{lanes:L.lanes,firstContext:L.firstContext},X.selfBaseDuration=H.selfBaseDuration,X.treeBaseDuration=H.treeBaseDuration}return X}function rQ0(X,K,H){var L;if(X===sL){if(L=r6,K===!0)L|=p9,L|=qQ}else L=H6;if(M1)L|=g8;return B4(B,null,null,L)}function d_(X,K,H,L,N,D){var C=F,I=X;if(typeof X==="function")if(p_(X))C=U,I=g_(I);else I=p$(I);else if(typeof X==="string")C=O;else J:switch(X){case l:return hq(H.children,N,D,K);case R0:if(C=E,N|=p9,(N&r6)!==H6)N|=qQ;break;case f0:return aQ0(H,N,D,K);case w0:return oQ0(H,N,D,K);case g0:return tQ0(H,N,D,K);case N8:return bS(H,N,D,K);case E8:case Z6:case T8:case k7:case _8:default:{if(typeof X==="object"&&X!==null)switch(X.$$typeof){case m:C=A;break J;case G0:C=_;break J;case M0:C=w,I=m_(I);break J;case N6:C=P;break J;case h0:C=p,I=null;break J}var b="";{if(X===void 0||typeof X==="object"&&X!==null&&Object.keys(X).length===0)b+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.";var S=L?P6(L):null;if(S)b+="\n\nCheck the render method of `"+S+"`."}throw new Error("Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) "+("but got: "+(X==null?X:typeof X)+"."+b))}}var g=B4(C,H,K,N);return g.elementType=X,g.type=I,g.lanes=D,g._debugOwner=L,g}function l_(X,K,H){var L=null;L=X._owner;var{type:N,key:D,props:C}=X,I=d_(N,D,C,L,K,H);return I._debugSource=X._source,I._debugOwner=X._owner,I}function hq(X,K,H,L){var N=B4(V,X,L,K);return N.lanes=H,N}function aQ0(X,K,H,L){if(typeof X.id!=="string")W('Profiler must specify an "id" of type `string` as a prop. Received the type `%s` instead.',typeof X.id);var N=B4(T,X,L,K|g8);return N.elementType=f0,N.lanes=H,N.stateNode={effectDuration:0,passiveEffectDuration:0},N}function oQ0(X,K,H,L){var N=B4(k,X,L,K);return N.elementType=w0,N.lanes=H,N}function tQ0(X,K,H,L){var N=B4(t,X,L,K);return N.elementType=g0,N.lanes=H,N}function bS(X,K,H,L){var N=B4(J0,X,L,K);N.elementType=N8,N.lanes=H;var D={isHidden:!1};return N.stateNode=D,N}function i_(X,K,H){var L=B4(R,X,null,K);return L.lanes=H,L}function eQ0(){var X=B4(O,null,null,H6);return X.elementType="DELETED",X}function JZ0(X){var K=B4(c,null,null,H6);return K.stateNode=X,K}function n_(X,K,H){var L=X.children!==null?X.children:[],N=B4(M,L,X.key,K);return N.lanes=H,N.stateNode={containerInfo:X.containerInfo,pendingChildren:null,implementation:X.implementation},N}function xS(X,K){if(X===null)X=B4(F,null,null,H6);return X.tag=K.tag,X.key=K.key,X.elementType=K.elementType,X.type=K.type,X.stateNode=K.stateNode,X.return=K.return,X.child=K.child,X.sibling=K.sibling,X.index=K.index,X.ref=K.ref,X.pendingProps=K.pendingProps,X.memoizedProps=K.memoizedProps,X.updateQueue=K.updateQueue,X.memoizedState=K.memoizedState,X.dependencies=K.dependencies,X.mode=K.mode,X.flags=K.flags,X.subtreeFlags=K.subtreeFlags,X.deletions=K.deletions,X.lanes=K.lanes,X.childLanes=K.childLanes,X.alternate=K.alternate,X.actualDuration=K.actualDuration,X.actualStartTime=K.actualStartTime,X.selfBaseDuration=K.selfBaseDuration,X.treeBaseDuration=K.treeBaseDuration,X._debugSource=K._debugSource,X._debugOwner=K._debugOwner,X._debugNeedsRemount=K._debugNeedsRemount,X._debugHookTypes=K._debugHookTypes,X}function QZ0(X,K,H,L,N){this.tag=K,this.containerInfo=X,this.pendingChildren=null,this.current=null,this.pingCache=null,this.finishedWork=null,this.timeoutHandle=kR,this.context=null,this.pendingContext=null,this.callbackNode=null,this.callbackPriority=l5,this.eventTimes=rD(O0),this.expirationTimes=rD(z9),this.pendingLanes=O0,this.suspendedLanes=O0,this.pingedLanes=O0,this.expiredLanes=O0,this.mutableReadLanes=O0,this.finishedLanes=O0,this.entangledLanes=O0,this.entanglements=rD(O0),this.identifierPrefix=L,this.onRecoverableError=N,this.mutableSourceEagerHydrationData=null,this.effectDuration=0,this.passiveEffectDuration=0;{this.memoizedUpdaters=new Set;var D=this.pendingUpdatersLaneMap=[];for(var C=0;C<AD;C++)D.push(new Set)}switch(K){case sL:this._debugRootType=H?"hydrateRoot()":"createRoot()";break;case kq:this._debugRootType=H?"hydrate()":"render()";break}}function yS(X,K,H,L,N,D,C,I,b,S){var g=new QZ0(X,K,H,I,b),n=rQ0(K,D);g.current=n,n.stateNode=g;{var i={element:L,isDehydrated:H,cache:null,transitions:null,pendingSuspenseBoundaries:null};n.memoizedState=i}return Xj(n),g}var s_="18.3.1";function ZZ0(X,K,H){var L=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;return W9(L),{$$typeof:$4,key:L==null?null:""+L,children:X,containerInfo:K,implementation:H}}var r_,a_;r_=!1,a_={};function vS(X){if(!X)return F4;var K=X$(X),H=y70(K);if(K.tag===U){var L=K.type;if(KQ(L))return $y(K,L,H)}return H}function qZ0(X,K){{var H=X$(X);if(H===void 0)if(typeof X.render==="function")throw new Error("Unable to find node on an unmounted component.");else{var L=Object.keys(X).join(",");throw new Error("Argument appears to not be a ReactComponent. Keys: "+L)}var N=Pb(H);if(N===null)return null;if(N.mode&p9){var D=P6(H)||"Component";if(!a_[D]){a_[D]=!0;var C=IJ;try{if(I9(N),H.mode&p9)W("%s is deprecated in StrictMode. %s was passed an instance of %s which is inside StrictMode. Instead, add a ref directly to the element you want to reference. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-find-node",K,K,D);else W("%s is deprecated in StrictMode. %s was passed an instance of %s which renders StrictMode children. Instead, add a ref directly to the element you want to reference. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-find-node",K,K,D)}finally{if(C)I9(C);else c5()}}}return N.stateNode}}function SS(X,K,H,L,N,D,C,I){var b=!1,S=null;return yS(X,K,b,S,H,L,N,D,C)}function fS(X,K,H,L,N,D,C,I,b,S){var g=!0,n=yS(H,L,g,X,N,D,C,I,b);n.context=vS(null);var i=n.current,K0=Y7(),$0=gq(i),H0=BZ(K0,$0);return H0.callback=K!==void 0&&K!==null?K:null,Pq(i,H0,$0),HQ0(n,$0,K0),n}function gH(X,K,H,L){k80(K,X);var N=K.current,D=Y7(),C=gq(N);n80(C);var I=vS(H);if(K.context===null)K.context=I;else K.pendingContext=I;if(Bq&&IJ!==null&&!r_)r_=!0,W("Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate.\n\nCheck the render method of %s.",P6(IJ)||"Unknown");var b=BZ(D,C);if(b.payload={element:X},L=L===void 0?null:L,L!==null){if(typeof L!=="function")W("render(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",L);b.callback=L}var S=Pq(N,b,C);if(S!==null)w5(S,N,C,D),GF(S,N,C);return C}function JB(X){var K=X.current;if(!K.child)return null;switch(K.child.tag){case O:return ER(K.child.stateNode);default:return K.child.stateNode}}function XZ0(X){switch(X.tag){case B:{var K=X.stateNode;if(OL(K)){var H=Z90(K);FQ0(K,H)}break}case k:{VZ(function(){var N=b7(X,V6);if(N!==null){var D=Y7();w5(N,X,V6,D)}});var L=V6;o_(X,L);break}}}function gS(X,K){var H=X.memoizedState;if(H!==null&&H.dehydrated!==null)H.retryLane=W90(H.retryLane,K)}function o_(X,K){gS(X,K);var H=X.alternate;if(H)gS(H,K)}function YZ0(X){if(X.tag!==k)return;var K=_G,H=b7(X,K);if(H!==null){var L=Y7();w5(H,X,K,L)}o_(X,K)}function KZ0(X){if(X.tag!==k)return;var K=gq(X),H=b7(X,K);if(H!==null){var L=Y7();w5(H,X,K,L)}o_(X,K)}function mS(X){var K=O80(X);if(K===null)return null;return K.stateNode}var hS=function(X){return null};function $Z0(X){return hS(X)}var uS=function(X){return!1};function WZ0(X){return uS(X)}var cS=null,pS=null,dS=null,lS=null,iS=null,nS=null,sS=null,rS=null,aS=null;{var oS=function(X,K,H){var L=K[H],N=D5(X)?X.slice():y6({},X);if(H+1===K.length){if(D5(N))N.splice(L,1);else delete N[L];return N}return N[L]=oS(X[L],K,H+1),N},tS=function(X,K){return oS(X,K,0)},eS=function(X,K,H,L){var N=K[L],D=D5(X)?X.slice():y6({},X);if(L+1===K.length){var C=H[L];if(D[C]=D[N],D5(D))D.splice(N,1);else delete D[N]}else D[N]=eS(X[N],K,H,L+1);return D},Jf=function(X,K,H){if(K.length!==H.length){$("copyWithRename() expects paths of the same length");return}else for(var L=0;L<H.length-1;L++)if(K[L]!==H[L]){$("copyWithRename() expects paths to be the same except for the deepest key");return}return eS(X,K,H,0)},Qf=function(X,K,H,L){if(H>=K.length)return L;var N=K[H],D=D5(X)?X.slice():y6({},X);return D[N]=Qf(X[N],K,H+1,L),D},Zf=function(X,K,H){return Qf(X,K,0,H)},t_=function(X,K){var H=X.memoizedState;while(H!==null&&K>0)H=H.next,K--;return H};cS=function(X,K,H,L){var N=t_(X,K);if(N!==null){var D=Zf(N.memoizedState,H,L);N.memoizedState=D,N.baseState=D,X.memoizedProps=y6({},X.memoizedProps);var C=b7(X,V6);if(C!==null)w5(C,X,V6,z9)}},pS=function(X,K,H){var L=t_(X,K);if(L!==null){var N=tS(L.memoizedState,H);L.memoizedState=N,L.baseState=N,X.memoizedProps=y6({},X.memoizedProps);var D=b7(X,V6);if(D!==null)w5(D,X,V6,z9)}},dS=function(X,K,H,L){var N=t_(X,K);if(N!==null){var D=Jf(N.memoizedState,H,L);N.memoizedState=D,N.baseState=D,X.memoizedProps=y6({},X.memoizedProps);var C=b7(X,V6);if(C!==null)w5(C,X,V6,z9)}},lS=function(X,K,H){if(X.pendingProps=Zf(X.memoizedProps,K,H),X.alternate)X.alternate.pendingProps=X.pendingProps;var L=b7(X,V6);if(L!==null)w5(L,X,V6,z9)},iS=function(X,K){if(X.pendingProps=tS(X.memoizedProps,K),X.alternate)X.alternate.pendingProps=X.pendingProps;var H=b7(X,V6);if(H!==null)w5(H,X,V6,z9)},nS=function(X,K,H){if(X.pendingProps=Jf(X.memoizedProps,K,H),X.alternate)X.alternate.pendingProps=X.pendingProps;var L=b7(X,V6);if(L!==null)w5(L,X,V6,z9)},sS=function(X){var K=b7(X,V6);if(K!==null)w5(K,X,V6,z9)},rS=function(X){hS=X},aS=function(X){uS=X}}function GZ0(X){var K=Pb(X);if(K===null)return null;return K.stateNode}function HZ0(X){return null}function zZ0(){return IJ}function UZ0(X){var K=X.findFiberByHostInstance,H=Z.ReactCurrentDispatcher;return A80({bundleType:X.bundleType,version:X.version,rendererPackageName:X.rendererPackageName,rendererConfig:X.rendererConfig,overrideHookState:cS,overrideHookStateDeletePath:pS,overrideHookStateRenamePath:dS,overrideProps:lS,overridePropsDeletePath:iS,overridePropsRenamePath:nS,setErrorHandler:rS,setSuspenseHandler:aS,scheduleUpdate:sS,currentDispatcherRef:H,findHostInstanceByFiber:GZ0,findFiberByHostInstance:K||HZ0,findHostInstancesForRefresh:cQ0,scheduleRefresh:hQ0,scheduleRoot:uQ0,setRefreshHandler:mQ0,getCurrentFiber:zZ0,reconcilerVersion:s_})}var qf=typeof reportError==="function"?reportError:function(X){console.error(X)};function e_(X){this._internalRoot=X}QB.prototype.render=e_.prototype.render=function(X){var K=this._internalRoot;if(K===null)throw new Error("Cannot update an unmounted root.");{if(typeof arguments[1]==="function")W("render(...): does not support the second callback argument. To execute a side effect after rendering, declare it in a component body with useEffect().");else if(ZB(arguments[1]))W("You passed a container to the second argument of root.render(...). You don't need to pass it again since you already passed it to create the root.");else if(typeof arguments[1]!=="undefined")W("You passed a second argument to root.render(...) but it only accepts one argument.");var H=K.containerInfo;if(H.nodeType!==W5){var L=mS(K.current);if(L){if(L.parentNode!==H)W("render(...): It looks like the React-rendered content of the root container was removed without using React. This is not supported and will cause errors. Instead, call root.unmount() to empty a root's container.")}}}gH(X,K,null,null)},QB.prototype.unmount=e_.prototype.unmount=function(){if(typeof arguments[0]==="function")W("unmount(...): does not support a callback argument. To execute a side effect after rendering, declare it in a component body with useEffect().");var X=this._internalRoot;if(X!==null){this._internalRoot=null;var K=X.containerInfo;if(BS())W("Attempted to synchronously unmount a root while React was already rendering. React cannot finish unmounting the root until the current render has completed, which may lead to a race condition.");VZ(function(){gH(null,X,null,null)}),Qy(K)}};function LZ0(X,K){if(!ZB(X))throw new Error("createRoot(...): Target container is not a DOM element.");Xf(X);var H=!1,L=!1,N="",D=qf,C=null;if(K!==null&&K!==void 0){if(K.hydrate)$("hydrate through createRoot is deprecated. Use ReactDOMClient.hydrateRoot(container, <App />) instead.");else if(typeof K==="object"&&K!==null&&K.$$typeof===K4)W("You passed a JSX element to createRoot. You probably meant to call root.render instead. Example usage:\n\n  let root = createRoot(domContainer);\n  root.render(<App />);");if(K.unstable_strictMode===!0)H=!0;if(K.identifierPrefix!==void 0)N=K.identifierPrefix;if(K.onRecoverableError!==void 0)D=K.onRecoverableError;if(K.transitionCallbacks!==void 0)C=K.transitionCallbacks}var I=SS(X,sL,null,H,L,N,D);uL(I.current,X);var b=X.nodeType===W5?X.parentNode:X;return dG(b),new e_(I)}function QB(X){this._internalRoot=X}function FZ0(X){if(X)C90(X)}QB.prototype.unstable_scheduleHydration=FZ0;function BZ0(X,K,H){if(!ZB(X))throw new Error("hydrateRoot(...): Target container is not a DOM element.");if(Xf(X),K===void 0)W("Must provide initial children as second argument to hydrateRoot. Example usage: hydrateRoot(domContainer, <App />)");var L=H!=null?H:null,N=H!=null&&H.hydratedSources||null,D=!1,C=!1,I="",b=qf;if(H!==null&&H!==void 0){if(H.unstable_strictMode===!0)D=!0;if(H.identifierPrefix!==void 0)I=H.identifierPrefix;if(H.onRecoverableError!==void 0)b=H.onRecoverableError}var S=fS(K,null,X,sL,L,D,C,I,b);if(uL(S.current,X),dG(X),N)for(var g=0;g<N.length;g++){var n=N[g];B40(S,n)}return new QB(S)}function ZB(X){return!!(X&&(X.nodeType===P7||X.nodeType===ZZ||X.nodeType===XD||!K6))}function mH(X){return!!(X&&(X.nodeType===P7||X.nodeType===ZZ||X.nodeType===XD||X.nodeType===W5&&X.nodeValue===" react-mount-point-unstable "))}function Xf(X){{if(X.nodeType===P7&&X.tagName&&X.tagName.toUpperCase()==="BODY")W("createRoot(): Creating roots directly with document.body is discouraged, since its children are often manipulated by third-party scripts and browser extensions. This may lead to subtle reconciliation issues. Try using a container element created for your app.");if(QH(X))if(X._reactRootContainer)W("You are calling ReactDOMClient.createRoot() on a container that was previously passed to ReactDOM.render(). This is not supported.");else W("You are calling ReactDOMClient.createRoot() on a container that has already been passed to createRoot() before. Instead, call root.render() on the existing root instead if you want to update it.")}}var NZ0=Z.ReactCurrentOwner,Yf;Yf=function(X){if(X._reactRootContainer&&X.nodeType!==W5){var K=mS(X._reactRootContainer.current);if(K){if(K.parentNode!==X)W("render(...): It looks like the React-rendered content of this container was removed without using React. This is not supported and will cause errors. Instead, call ReactDOM.unmountComponentAtNode to empty a container.")}}var H=!!X._reactRootContainer,L=JE(X),N=!!(L&&Cq(L));if(N&&!H)W("render(...): Replacing React-rendered children with a new root component. If you intended to update the children of this node, you should instead have the existing children update their state and render the new components instead of calling ReactDOM.render.");if(X.nodeType===P7&&X.tagName&&X.tagName.toUpperCase()==="BODY")W("render(): Rendering components directly into document.body is discouraged, since its children are often manipulated by third-party scripts and browser extensions. This may lead to subtle reconciliation issues. Try rendering into a container element created for your app.")};function JE(X){if(!X)return null;if(X.nodeType===ZZ)return X.documentElement;else return X.firstChild}function Kf(){}function MZ0(X,K,H,L,N){if(N){if(typeof L==="function"){var D=L;L=function(){var i=JB(C);D.call(i)}}var C=fS(K,L,X,kq,null,!1,!1,"",Kf);X._reactRootContainer=C,uL(C.current,X);var I=X.nodeType===W5?X.parentNode:X;return dG(I),VZ(),C}else{var b;while(b=X.lastChild)X.removeChild(b);if(typeof L==="function"){var S=L;L=function(){var i=JB(g);S.call(i)}}var g=SS(X,kq,null,!1,!1,"",Kf);X._reactRootContainer=g,uL(g.current,X);var n=X.nodeType===W5?X.parentNode:X;return dG(n),VZ(function(){gH(K,g,H,L)}),g}}function OZ0(X,K){if(X!==null&&typeof X!=="function")W("%s(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",K,X)}function qB(X,K,H,L,N){Yf(H),OZ0(N===void 0?null:N,"render");var D=H._reactRootContainer,C;if(!D)C=MZ0(H,K,X,N,L);else{if(C=D,typeof N==="function"){var I=N;N=function(){var b=JB(C);I.call(b)}}gH(K,C,X,N)}return JB(C)}var $f=!1;function VZ0(X){{if(!$f)$f=!0,W("findDOMNode is deprecated and will be removed in the next major release. Instead, add a ref directly to the element you want to reference. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-find-node");var K=NZ0.current;if(K!==null&&K.stateNode!==null){var H=K.stateNode._warnedAboutRefsInRender;if(!H)W("%s is accessing findDOMNode inside its render(). render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",b8(K.type)||"A component");K.stateNode._warnedAboutRefsInRender=!0}}if(X==null)return null;if(X.nodeType===P7)return X;return qZ0(X,"findDOMNode")}function DZ0(X,K,H){if(W("ReactDOM.hydrate is no longer supported in React 18. Use hydrateRoot instead. Until you switch to the new API, your app will behave as if it's running React 17. Learn more: https://reactjs.org/link/switch-to-createroot"),!mH(K))throw new Error("Target container is not a DOM element.");{var L=QH(K)&&K._reactRootContainer===void 0;if(L)W("You are calling ReactDOM.hydrate() on a container that was previously passed to ReactDOMClient.createRoot(). This is not supported. Did you mean to call hydrateRoot(container, element)?")}return qB(null,X,K,!0,H)}function RZ0(X,K,H){if(W("ReactDOM.render is no longer supported in React 18. Use createRoot instead. Until you switch to the new API, your app will behave as if it's running React 17. Learn more: https://reactjs.org/link/switch-to-createroot"),!mH(K))throw new Error("Target container is not a DOM element.");{var L=QH(K)&&K._reactRootContainer===void 0;if(L)W("You are calling ReactDOM.render() on a container that was previously passed to ReactDOMClient.createRoot(). This is not supported. Did you mean to call root.render(element)?")}return qB(null,X,K,!1,H)}function jZ0(X,K,H,L){if(W("ReactDOM.unstable_renderSubtreeIntoContainer() is no longer supported in React 18. Consider using a portal instead. Until you switch to the createRoot API, your app will behave as if it's running React 17. Learn more: https://reactjs.org/link/switch-to-createroot"),!mH(H))throw new Error("Target container is not a DOM element.");if(X==null||!z80(X))throw new Error("parentComponent must be a valid React Component");return qB(X,K,H,!1,L)}var Wf=!1;function _Z0(X){if(!Wf)Wf=!0,W("unmountComponentAtNode is deprecated and will be removed in the next major release. Switch to the createRoot API. Learn more: https://reactjs.org/link/switch-to-createroot");if(!mH(X))throw new Error("unmountComponentAtNode(...): Target container is not a DOM element.");{var K=QH(X)&&X._reactRootContainer===void 0;if(K)W("You are calling ReactDOM.unmountComponentAtNode() on a container that was previously passed to ReactDOMClient.createRoot(). This is not supported. Did you mean to call root.unmount()?")}if(X._reactRootContainer){{var H=JE(X),L=H&&!Cq(H);if(L)W("unmountComponentAtNode(): The node you're attempting to unmount was rendered by another copy of React.")}return VZ(function(){qB(null,null,X,!1,function(){X._reactRootContainer=null,Qy(X)})}),!0}else{{var N=JE(X),D=!!(N&&Cq(N)),C=X.nodeType===P7&&mH(X.parentNode)&&!!X.parentNode._reactRootContainer;if(D)W("unmountComponentAtNode(): The node you're attempting to unmount was rendered by React and is not a top-level container. %s",C?"You may have accidentally passed in a React root node instead of its container.":"Instead, have the parent component update its state and rerender in order to remove this component.")}return!1}}if(B90(XZ0),M90(YZ0),O90(KZ0),V90(O1),D90(U90),typeof Map!=="function"||Map.prototype==null||typeof Map.prototype.forEach!=="function"||typeof Set!=="function"||Set.prototype==null||typeof Set.prototype.clear!=="function"||typeof Set.prototype.forEach!=="function")W("React depends on Map and Set built-in types. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills");J80(RJ0),q80(T_,BQ0,VZ);function EZ0(X,K){var H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!ZB(K))throw new Error("Target container is not a DOM element.");return ZZ0(X,K,null,H)}function CZ0(X,K,H,L){return jZ0(X,K,H,L)}var QE={usingClientEntryPoint:!1,Events:[Cq,D$,cL,Ob,Vb,T_]};function AZ0(X,K){if(!QE.usingClientEntryPoint)W('You are importing createRoot from "react-dom" which is not supported. You should instead import it from "react-dom/client".');return LZ0(X,K)}function kZ0(X,K,H){if(!QE.usingClientEntryPoint)W('You are importing hydrateRoot from "react-dom" which is not supported. You should instead import it from "react-dom/client".');return BZ0(X,K,H)}function wZ0(X){if(BS())W("flushSync was called from inside a lifecycle method. React cannot flush when React is already rendering. Consider moving this call to a scheduler task or micro task.");return VZ(X)}var IZ0=UZ0({findFiberByHostInstance:XY,bundleType:1,version:s_,rendererPackageName:"react-dom"});if(!IZ0&&R8&&window.top===window.self){if(navigator.userAgent.indexOf("Chrome")>-1&&navigator.userAgent.indexOf("Edge")===-1||navigator.userAgent.indexOf("Firefox")>-1){var Gf=window.location.protocol;if(/^(https?|file):$/.test(Gf))console.info("%cDownload the React DevTools for a better development experience: https://reactjs.org/link/react-devtools"+(Gf==="file:"?"\nYou might need to use a local HTTP server (instead of file://): https://reactjs.org/link/react-devtools-faq":""),"font-weight:bold")}}if(mZ0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=QE,mZ0.createPortal=EZ0,mZ0.createRoot=AZ0,mZ0.findDOMNode=VZ0,mZ0.flushSync=wZ0,mZ0.hydrate=DZ0,mZ0.hydrateRoot=kZ0,mZ0.render=RZ0,mZ0.unmountComponentAtNode=_Z0,mZ0.unstable_batchedUpdates=T_,mZ0.unstable_renderSubtreeIntoContainer=CZ0,mZ0.version=s_,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!=="undefined"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop==="function")__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)})()});var qE=F0((hZ0)=>{var l$=v(uq(),1);uH=l$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,hZ0.createRoot=function(J,Q){uH.usingClientEntryPoint=!0;try{return l$.createRoot(J,Q)}finally{uH.usingClientEntryPoint=!1}},hZ0.hydrateRoot=function(J,Q,Z){uH.usingClientEntryPoint=!0;try{return l$.hydrateRoot(J,Q,Z)}finally{uH.usingClientEntryPoint=!1}};var uH});var Rg=F0((MB,JW)=>{var _q0=function(J,Q){var Z=-1,q=J==null?0:J.length,Y=0,$=[];while(++Z<q){var W=J[Z];if(Q(W,Z,J))$[Y++]=W}return $},Eq0=function(J,Q){var Z=-1,q=Q.length,Y=J.length;while(++Z<q)J[Y+Z]=Q[Z];return J},Cq0=function(J,Q){var Z=-1,q=J==null?0:J.length;while(++Z<q)if(Q(J[Z],Z,J))return!0;return!1},Aq0=function(J,Q){var Z=-1,q=Array(J);while(++Z<J)q[Z]=Q(Z);return q},kq0=function(J){return function(Q){return J(Q)}},wq0=function(J,Q){return J.has(Q)},Iq0=function(J,Q){return J==null?void 0:J[Q]},Pq0=function(J){var Q=-1,Z=Array(J.size);return J.forEach(function(q,Y){Z[++Q]=[Y,q]}),Z},Tq0=function(J,Q){return function(Z){return J(Q(Z))}},bq0=function(J){var Q=-1,Z=Array(J.size);return J.forEach(function(q){Z[++Q]=q}),Z},kY=function(J){var Q=-1,Z=J==null?0:J.length;this.clear();while(++Q<Z){var q=J[Q];this.set(q[0],q[1])}},dq0=function(){this.__data__=Yz?Yz(null):{},this.size=0},lq0=function(J){var Q=this.has(J)&&delete this.__data__[J];return this.size-=Q?1:0,Q},iq0=function(J){var Q=this.__data__;if(Yz){var Z=Q[J];return Z===TE?void 0:Z}return MQ.call(Q,J)?Q[J]:void 0},nq0=function(J){var Q=this.__data__;return Yz?Q[J]!==void 0:MQ.call(Q,J)},sq0=function(J,Q){var Z=this.__data__;return this.size+=this.has(J)?0:1,Z[J]=Yz&&Q===void 0?TE:Q,this},kZ=function(J){var Q=-1,Z=J==null?0:J.length;this.clear();while(++Q<Z){var q=J[Q];this.set(q[0],q[1])}},rq0=function(){this.__data__=[],this.size=0},aq0=function(J){var Q=this.__data__,Z=kB(Q,J);if(Z<0)return!1;var q=Q.length-1;if(Z==q)Q.pop();else Sq0.call(Q,Z,1);return--this.size,!0},oq0=function(J){var Q=this.__data__,Z=kB(Q,J);return Z<0?void 0:Q[Z][1]},tq0=function(J){return kB(this.__data__,J)>-1},eq0=function(J,Q){var Z=this.__data__,q=kB(Z,J);if(q<0)++this.size,Z.push([J,Q]);else Z[q][1]=Q;return this},wY=function(J){var Q=-1,Z=J==null?0:J.length;this.clear();while(++Q<Z){var q=J[Q];this.set(q[0],q[1])}},JX0=function(){this.size=0,this.__data__={hash:new kY,map:new(Xz||kZ),string:new kY}},QX0=function(J){var Q=wB(this,J).delete(J);return this.size-=Q?1:0,Q},ZX0=function(J){return wB(this,J).get(J)},qX0=function(J){return wB(this,J).has(J)},XX0=function(J,Q){var Z=wB(this,J),q=Z.size;return Z.set(J,Q),this.size+=Z.size==q?0:1,this},_B=function(J){var Q=-1,Z=J==null?0:J.length;this.__data__=new wY;while(++Q<Z)this.add(J[Q])},YX0=function(J){return this.__data__.set(J,TE),this},KX0=function(J){return this.__data__.has(J)},oq=function(J){var Q=this.__data__=new kZ(J);this.size=Q.size},$X0=function(){this.__data__=new kZ,this.size=0},WX0=function(J){var Q=this.__data__,Z=Q.delete(J);return this.size=Q.size,Z},GX0=function(J){return this.__data__.get(J)},HX0=function(J){return this.__data__.has(J)},zX0=function(J,Q){var Z=this.__data__;if(Z instanceof kZ){var q=Z.__data__;if(!Xz||q.length<qq0-1)return q.push([J,Q]),this.size=++Z.size,this;Z=this.__data__=new wY(q)}return Z.set(J,Q),this.size=Z.size,this},UX0=function(J,Q){var Z=EB(J),q=!Z&&kX0(J),Y=!Z&&!q&&PE(J),$=!Z&&!q&&!Y&&Dg(J),W=Z||q||Y||$,G=W?Aq0(J.length,String):[],z=G.length;for(var U in J)if((Q||MQ.call(J,U))&&!(W&&(U=="length"||Y&&(U=="offset"||U=="parent")||$&&(U=="buffer"||U=="byteLength"||U=="byteOffset")||jX0(U,z))))G.push(U);return G},kB=function(J,Q){var Z=J.length;while(Z--)if(Ng(J[Z][0],Q))return Z;return-1},LX0=function(J,Q,Z){var q=Q(J);return EB(J)?q:Eq0(q,Z(J))},$z=function(J){if(J==null)return J===void 0?Gq0:Kq0;return AY&&AY in Object(J)?DX0(J):AX0(J)},af=function(J){return Kz(J)&&$z(J)==OB},Fg=function(J,Q,Z,q,Y){if(J===Q)return!0;if(J==null||Q==null||!Kz(J)&&!Kz(Q))return J!==J&&Q!==Q;return FX0(J,Q,Z,q,Fg,Y)},FX0=function(J,Q,Z,q,Y,$){var W=EB(J),G=EB(Q),z=W?EE:aq(J),U=G?EE:aq(Q);z=z==OB?e$:z,U=U==OB?e$:U;var F=z==e$,B=U==e$,M=z==U;if(M&&PE(J)){if(!PE(Q))return!1;W=!0,F=!1}if(M&&!F)return $||($=new oq),W||Dg(J)?Bg(J,Q,Z,q,Y,$):OX0(J,Q,z,Z,q,Y,$);if(!(Z&CB)){var O=F&&MQ.call(J,"__wrapped__"),R=B&&MQ.call(Q,"__wrapped__");if(O||R){var V=O?J.value():J,E=R?Q.value():Q;return $||($=new oq),Y(V,E,Z,q,$)}}if(!M)return!1;return $||($=new oq),VX0(J,Q,Z,q,Y,$)},BX0=function(J){if(!Vg(J)||EX0(J))return!1;var Q=Mg(J)?vq0:Dq0;return Q.test(IY(J))},NX0=function(J){return Kz(J)&&Og(J.length)&&!!R9[$z(J)]},MX0=function(J){if(!CX0(J))return gq0(J);var Q=[];for(var Z in Object(J))if(MQ.call(J,Z)&&Z!="constructor")Q.push(Z);return Q},Bg=function(J,Q,Z,q,Y,$){var W=Z&CB,G=J.length,z=Q.length;if(G!=z&&!(W&&z>G))return!1;var U=$.get(J);if(U&&$.get(Q))return U==Q;var F=-1,B=!0,M=Z&tf?new _B:void 0;$.set(J,Q),$.set(Q,J);while(++F<G){var O=J[F],R=Q[F];if(q)var V=W?q(R,O,F,Q,J,$):q(O,R,F,J,Q,$);if(V!==void 0){if(V)continue;B=!1;break}if(M){if(!Cq0(Q,function(E,_){if(!wq0(M,_)&&(O===E||Y(O,E,Z,q,$)))return M.push(_)})){B=!1;break}}else if(!(O===R||Y(O,R,Z,q,$))){B=!1;break}}return $.delete(J),$.delete(Q),B},OX0=function(J,Q,Z,q,Y,$,W){switch(Z){case RB:if(J.byteLength!=Q.byteLength||J.byteOffset!=Q.byteOffset)return!1;J=J.buffer,Q=Q.buffer;case $g:if(J.byteLength!=Q.byteLength||!$(new nf(J),new nf(Q)))return!1;return!0;case Jg:case Qg:case Xg:return Ng(+J,+Q);case Zg:return J.name==Q.name&&J.message==Q.message;case Yg:case Kg:return J==Q+"";case VB:var G=Pq0;case DB:var z=q&CB;if(G||(G=bq0),J.size!=Q.size&&!z)return!1;var U=W.get(J);if(U)return U==Q;q|=tf,W.set(J,Q);var F=Bg(G(J),G(Q),q,Y,$,W);return W.delete(J),F;case Wq0:if(_E)return _E.call(J)==_E.call(Q)}return!1},VX0=function(J,Q,Z,q,Y,$){var W=Z&CB,G=of(J),z=G.length,U=of(Q),F=U.length;if(z!=F&&!W)return!1;var B=z;while(B--){var M=G[B];if(!(W?M in Q:MQ.call(Q,M)))return!1}var O=$.get(J);if(O&&$.get(Q))return O==Q;var R=!0;$.set(J,Q),$.set(Q,J);var V=W;while(++B<z){M=G[B];var E=J[M],_=Q[M];if(q)var A=W?q(_,E,M,Q,J,$):q(E,_,M,J,Q,$);if(!(A===void 0?E===_||Y(E,_,Z,q,$):A)){R=!1;break}V||(V=M=="constructor")}if(R&&!V){var w=J.constructor,T=Q.constructor;if(w!=T&&(("constructor"in J)&&("constructor"in Q))&&!(typeof w=="function"&&w instanceof w&&typeof T=="function"&&T instanceof T))R=!1}return $.delete(J),$.delete(Q),R},of=function(J){return LX0(J,PX0,RX0)},wB=function(J,Q){var Z=J.__data__;return _X0(Q)?Z[typeof Q=="string"?"string":"hash"]:Z.map},QW=function(J,Q){var Z=Iq0(J,Q);return BX0(Z)?Z:void 0},DX0=function(J){var Q=MQ.call(J,AY),Z=J[AY];try{J[AY]=void 0;var q=!0}catch($){}var Y=Ug.call(J);if(q)if(Q)J[AY]=Z;else delete J[AY];return Y},jX0=function(J,Q){return Q=Q==null?ef:Q,!!Q&&(typeof J=="number"||Rq0.test(J))&&(J>-1&&J%1==0&&J<Q)},_X0=function(J){var Q=typeof J;return Q=="string"||Q=="number"||Q=="symbol"||Q=="boolean"?J!=="__proto__":J===null},EX0=function(J){return!!df&&df in J},CX0=function(J){var Q=J&&J.constructor,Z=typeof Q=="function"&&Q.prototype||AB;return J===Z},AX0=function(J){return Ug.call(J)},IY=function(J){if(J!=null){try{return zg.call(J)}catch(Q){}try{return J+""}catch(Q){}}return""},Ng=function(J,Q){return J===Q||J!==J&&Q!==Q},wX0=function(J){return J!=null&&Og(J.length)&&!Mg(J)},IX0=function(J,Q){return Fg(J,Q)},Mg=function(J){if(!Vg(J))return!1;var Q=$z(J);return Q==qg||Q==Yq0||Q==Xq0||Q==$q0},Og=function(J){return typeof J=="number"&&J>-1&&J%1==0&&J<=ef},Vg=function(J){var Q=typeof J;return J!=null&&(Q=="object"||Q=="function")},Kz=function(J){return J!=null&&typeof J=="object"},PX0=function(J){return wX0(J)?UX0(J):MX0(J)},TX0=function(){return[]},bX0=function(){return!1},qq0=200,TE="__lodash_hash_undefined__",CB=1,tf=2,ef=9007199254740991,OB="[object Arguments]",EE="[object Array]",Xq0="[object AsyncFunction]",Jg="[object Boolean]",Qg="[object Date]",Zg="[object Error]",qg="[object Function]",Yq0="[object GeneratorFunction]",VB="[object Map]",Xg="[object Number]",Kq0="[object Null]",e$="[object Object]",hf="[object Promise]",$q0="[object Proxy]",Yg="[object RegExp]",DB="[object Set]",Kg="[object String]",Wq0="[object Symbol]",Gq0="[object Undefined]",CE="[object WeakMap]",$g="[object ArrayBuffer]",RB="[object DataView]",Hq0="[object Float32Array]",zq0="[object Float64Array]",Uq0="[object Int8Array]",Lq0="[object Int16Array]",Fq0="[object Int32Array]",Bq0="[object Uint8Array]",Nq0="[object Uint8ClampedArray]",Mq0="[object Uint16Array]",Oq0="[object Uint32Array]",Vq0=/[\\^$.*+?()[\]{}|]/g,Dq0=/^\[object .+?Constructor\]$/,Rq0=/^(?:0|[1-9]\d*)$/,R9={};R9[Hq0]=R9[zq0]=R9[Uq0]=R9[Lq0]=R9[Fq0]=R9[Bq0]=R9[Nq0]=R9[Mq0]=R9[Oq0]=!0;R9[OB]=R9[EE]=R9[$g]=R9[Jg]=R9[RB]=R9[Qg]=R9[Zg]=R9[qg]=R9[VB]=R9[Xg]=R9[e$]=R9[Yg]=R9[DB]=R9[Kg]=R9[CE]=!1;var Wg=typeof global=="object"&&global&&global.Object===Object&&global,jq0=typeof self=="object"&&self&&self.Object===Object&&self,AZ=Wg||jq0||Function("return this")(),Gg=typeof MB=="object"&&MB&&!MB.nodeType&&MB,uf=Gg&&typeof JW=="object"&&JW&&!JW.nodeType&&JW,Hg=uf&&uf.exports===Gg,RE=Hg&&Wg.process,cf=function(){try{return RE&&RE.binding&&RE.binding("util")}catch(J){}}(),pf=cf&&cf.isTypedArray,xq0=Array.prototype,yq0=Function.prototype,AB=Object.prototype,jE=AZ["__core-js_shared__"],zg=yq0.toString,MQ=AB.hasOwnProperty,df=function(){var J=/[^.]+$/.exec(jE&&jE.keys&&jE.keys.IE_PROTO||"");return J?"Symbol(src)_1."+J:""}(),Ug=AB.toString,vq0=RegExp("^"+zg.call(MQ).replace(Vq0,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),lf=Hg?AZ.Buffer:void 0,jB=AZ.Symbol,nf=AZ.Uint8Array,Lg=AB.propertyIsEnumerable,Sq0=xq0.splice,AY=jB?jB.toStringTag:void 0,sf=Object.getOwnPropertySymbols,fq0=lf?lf.isBuffer:void 0,gq0=Tq0(Object.keys,Object),AE=QW(AZ,"DataView"),Xz=QW(AZ,"Map"),kE=QW(AZ,"Promise"),wE=QW(AZ,"Set"),IE=QW(AZ,"WeakMap"),Yz=QW(Object,"create"),mq0=IY(AE),hq0=IY(Xz),uq0=IY(kE),cq0=IY(wE),pq0=IY(IE),rf=jB?jB.prototype:void 0,_E=rf?rf.valueOf:void 0;kY.prototype.clear=dq0;kY.prototype.delete=lq0;kY.prototype.get=iq0;kY.prototype.has=nq0;kY.prototype.set=sq0;kZ.prototype.clear=rq0;kZ.prototype.delete=aq0;kZ.prototype.get=oq0;kZ.prototype.has=tq0;kZ.prototype.set=eq0;wY.prototype.clear=JX0;wY.prototype.delete=QX0;wY.prototype.get=ZX0;wY.prototype.has=qX0;wY.prototype.set=XX0;_B.prototype.add=_B.prototype.push=YX0;_B.prototype.has=KX0;oq.prototype.clear=$X0;oq.prototype.delete=WX0;oq.prototype.get=GX0;oq.prototype.has=HX0;oq.prototype.set=zX0;var RX0=!sf?TX0:function(J){if(J==null)return[];return J=Object(J),_q0(sf(J),function(Q){return Lg.call(J,Q)})},aq=$z;if(AE&&aq(new AE(new ArrayBuffer(1)))!=RB||Xz&&aq(new Xz)!=VB||kE&&aq(kE.resolve())!=hf||wE&&aq(new wE)!=DB||IE&&aq(new IE)!=CE)aq=function(J){var Q=$z(J),Z=Q==e$?J.constructor:void 0,q=Z?IY(Z):"";if(q)switch(q){case mq0:return RB;case hq0:return VB;case uq0:return hf;case cq0:return DB;case pq0:return CE}return Q};var kX0=af(function(){return arguments}())?af:function(J){return Kz(J)&&MQ.call(J,"callee")&&!Lg.call(J,"callee")},EB=Array.isArray,PE=fq0||bX0,Dg=pf?kq0(pf):NX0;JW.exports=IX0});var W0=F0((AY0)=>{var J=v(o(),1);(function(){var Q=Symbol.for("react.element"),Z=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),Y=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),W=Symbol.for("react.provider"),G=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),O=Symbol.for("react.offscreen"),R=Symbol.iterator,V="@@iterator";function E(m){if(m===null||typeof m!=="object")return null;var G0=R&&m[R]||m[V];if(typeof G0==="function")return G0;return null}var _=J.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function A(m){{for(var G0=arguments.length,M0=new Array(G0>1?G0-1:0),w0=1;w0<G0;w0++)M0[w0-1]=arguments[w0];w("error",m,M0)}}function w(m,G0,M0){{var w0=_.ReactDebugCurrentFrame,g0=w0.getStackAddendum();if(g0!=="")G0+="%s",M0=M0.concat([g0]);var N6=M0.map(function(h0){return String(h0)});N6.unshift("Warning: "+G0),Function.prototype.apply.call(console[m],console,N6)}}var T=!1,k=!1,P=!1,y=!1,p=!1,s;s=Symbol.for("react.module.reference");function c(m){if(typeof m==="string"||typeof m==="function")return!0;if(m===q||m===$||p||m===Y||m===U||m===F||y||m===O||T||k||P)return!0;if(typeof m==="object"&&m!==null){if(m.$$typeof===M||m.$$typeof===B||m.$$typeof===W||m.$$typeof===G||m.$$typeof===z||m.$$typeof===s||m.getModuleId!==void 0)return!0}return!1}function t(m,G0,M0){var w0=m.displayName;if(w0)return w0;var g0=G0.displayName||G0.name||"";return g0!==""?M0+"("+g0+")":M0}function X0(m){return m.displayName||"Context"}function J0(m){if(m==null)return null;if(typeof m.tag==="number")A("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue.");if(typeof m==="function")return m.displayName||m.name||null;if(typeof m==="string")return m;switch(m){case q:return"Fragment";case Z:return"Portal";case $:return"Profiler";case Y:return"StrictMode";case U:return"Suspense";case F:return"SuspenseList"}if(typeof m==="object")switch(m.$$typeof){case G:var G0=m;return X0(G0)+".Consumer";case W:var M0=m;return X0(M0._context)+".Provider";case z:return t(m,m.render,"ForwardRef");case B:var w0=m.displayName||null;if(w0!==null)return w0;return J0(m.type)||"Memo";case M:{var g0=m,N6=g0._payload,h0=g0._init;try{return J0(h0(N6))}catch(Z6){return null}}}return null}var Q0=Object.assign,a=0,_0,T0,r0,C0,k0,b0,K6;function b6(){}b6.__reactDisabledLog=!0;function I8(){{if(a===0){_0=console.log,T0=console.info,r0=console.warn,C0=console.error,k0=console.group,b0=console.groupCollapsed,K6=console.groupEnd;var m={configurable:!0,enumerable:!0,value:b6,writable:!0};Object.defineProperties(console,{info:m,log:m,warn:m,error:m,group:m,groupCollapsed:m,groupEnd:m})}a++}}function _6(){{if(a--,a===0){var m={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:Q0({},m,{value:_0}),info:Q0({},m,{value:T0}),warn:Q0({},m,{value:r0}),error:Q0({},m,{value:C0}),group:Q0({},m,{value:k0}),groupCollapsed:Q0({},m,{value:b0}),groupEnd:Q0({},m,{value:K6})})}if(a<0)A("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var x6=_.ReactCurrentDispatcher,c6;function $8(m,G0,M0){{if(c6===void 0)try{throw Error()}catch(g0){var w0=g0.stack.trim().match(/\n( *(at )?)/);c6=w0&&w0[1]||""}return"\n"+c6+m}}var G6=!1,i6;{var I6=typeof WeakMap==="function"?WeakMap:Map;i6=new I6}function J9(m,G0){if(!m||G6)return"";{var M0=i6.get(m);if(M0!==void 0)return M0}var w0;G6=!0;var g0=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var N6;N6=x6.current,x6.current=null,I8();try{if(G0){var h0=function(){throw Error()};if(Object.defineProperty(h0.prototype,"props",{set:function(){throw Error()}}),typeof Reflect==="object"&&Reflect.construct){try{Reflect.construct(h0,[])}catch($5){w0=$5}Reflect.construct(m,[],h0)}else{try{h0.call()}catch($5){w0=$5}m.call(h0.prototype)}}else{try{throw Error()}catch($5){w0=$5}m()}}catch($5){if($5&&w0&&typeof $5.stack==="string"){var Z6=$5.stack.split("\n"),_8=w0.stack.split("\n"),N8=Z6.length-1,E8=_8.length-1;while(N8>=1&&E8>=0&&Z6[N8]!==_8[E8])E8--;for(;N8>=1&&E8>=0;N8--,E8--)if(Z6[N8]!==_8[E8]){if(N8!==1||E8!==1)do if(N8--,E8--,E8<0||Z6[N8]!==_8[E8]){var T8="\n"+Z6[N8].replace(" at new "," at ");if(m.displayName&&T8.includes("<anonymous>"))T8=T8.replace("<anonymous>",m.displayName);if(typeof m==="function")i6.set(m,T8);return T8}while(N8>=1&&E8>=0);break}}}finally{G6=!1,x6.current=N6,_6(),Error.prepareStackTrace=g0}var k7=m?m.displayName||m.name:"",w7=k7?$8(k7):"";if(typeof m==="function")i6.set(m,w7);return w7}function R8(m,G0,M0){return J9(m,!1)}function j8(m){var G0=m.prototype;return!!(G0&&G0.isReactComponent)}function W6(m,G0,M0){if(m==null)return"";if(typeof m==="function")return J9(m,j8(m));if(typeof m==="string")return $8(m);switch(m){case U:return $8("Suspense");case F:return $8("SuspenseList")}if(typeof m==="object")switch(m.$$typeof){case z:return R8(m.render);case B:return W6(m.type,G0,M0);case M:{var w0=m,g0=w0._payload,N6=w0._init;try{return W6(N6(g0),G0,M0)}catch(h0){}}}return""}var S6=Object.prototype.hasOwnProperty,f8={},u8=_.ReactDebugCurrentFrame;function W9(m){if(m){var G0=m._owner,M0=W6(m.type,m._source,G0?G0.type:null);u8.setExtraStackFrame(M0)}else u8.setExtraStackFrame(null)}function j7(m,G0,M0,w0,g0){{var N6=Function.call.bind(S6);for(var h0 in m)if(N6(m,h0)){var Z6=void 0;try{if(typeof m[h0]!=="function"){var _8=Error((w0||"React class")+": "+M0+" type `"+h0+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof m[h0]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw _8.name="Invariant Violation",_8}Z6=m[h0](G0,h0,w0,M0,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(N8){Z6=N8}if(Z6&&!(Z6 instanceof Error))W9(g0),A("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",w0||"React class",M0,h0,typeof Z6),W9(null);if(Z6 instanceof Error&&!(Z6.message in f8))f8[Z6.message]=!0,W9(g0),A("Failed %s type: %s",M0,Z6.message),W9(null)}}}var Y5=Array.isArray;function kJ(m){return Y5(m)}function m5(m){{var G0=typeof Symbol==="function"&&Symbol.toStringTag,M0=G0&&m[Symbol.toStringTag]||m.constructor.name||"Object";return M0}}function _7(m){try{return h5(m),!1}catch(G0){return!0}}function h5(m){return""+m}function J7(m){if(_7(m))return A("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",m5(m)),h5(m)}var G9=_.ReactCurrentOwner,E7={key:!0,ref:!0,__self:!0,__source:!0},C7,f4,x0;x0={};function X6(m){if(S6.call(m,"ref")){var G0=Object.getOwnPropertyDescriptor(m,"ref").get;if(G0&&G0.isReactWarning)return!1}return m.ref!==void 0}function E6(m){if(S6.call(m,"key")){var G0=Object.getOwnPropertyDescriptor(m,"key").get;if(G0&&G0.isReactWarning)return!1}return m.key!==void 0}function W8(m,G0){if(typeof m.ref==="string"&&G9.current&&G0&&G9.current.stateNode!==G0){var M0=J0(G9.current.type);if(!x0[M0])A('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',J0(G9.current.type),m.ref),x0[M0]=!0}}function c8(m,G0){{var M0=function(){if(!C7)C7=!0,A("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",G0)};M0.isReactWarning=!0,Object.defineProperty(m,"key",{get:M0,configurable:!0})}}function K5(m,G0){{var M0=function(){if(!f4)f4=!0,A("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",G0)};M0.isReactWarning=!0,Object.defineProperty(m,"ref",{get:M0,configurable:!0})}}var w9=function(m,G0,M0,w0,g0,N6,h0){var Z6={$$typeof:Q,type:m,key:G0,ref:M0,props:h0,_owner:N6};if(Z6._store={},Object.defineProperty(Z6._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(Z6,"_self",{configurable:!1,enumerable:!1,writable:!1,value:w0}),Object.defineProperty(Z6,"_source",{configurable:!1,enumerable:!1,writable:!1,value:g0}),Object.freeze)Object.freeze(Z6.props),Object.freeze(Z6);return Z6};function wJ(m,G0,M0,w0,g0){{var N6,h0={},Z6=null,_8=null;if(M0!==void 0)J7(M0),Z6=""+M0;if(E6(G0))J7(G0.key),Z6=""+G0.key;if(X6(G0))_8=G0.ref,W8(G0,g0);for(N6 in G0)if(S6.call(G0,N6)&&!E7.hasOwnProperty(N6))h0[N6]=G0[N6];if(m&&m.defaultProps){var N8=m.defaultProps;for(N6 in N8)if(h0[N6]===void 0)h0[N6]=N8[N6]}if(Z6||_8){var E8=typeof m==="function"?m.displayName||m.name||"Unknown":m;if(Z6)c8(h0,E8);if(_8)K5(h0,E8)}return w9(m,Z6,_8,g0,w0,G9.current,h0)}}var{ReactCurrentOwner:P8,ReactDebugCurrentFrame:u5}=_;function G8(m){if(m){var G0=m._owner,M0=W6(m.type,m._source,G0?G0.type:null);u5.setExtraStackFrame(M0)}else u5.setExtraStackFrame(null)}var s8=!1;function U1(m){return typeof m==="object"&&m!==null&&m.$$typeof===Q}function L1(){{if(P8.current){var m=J0(P8.current.type);if(m)return"\n\nCheck the render method of `"+m+"`."}return""}}function aQ(m){{if(m!==void 0){var G0=m.fileName.replace(/^.*[\\\/]/,""),M0=m.lineNumber;return"\n\nCheck your code at "+G0+":"+M0+"."}return""}}var oQ={};function cX(m){{var G0=L1();if(!G0){var M0=typeof m==="string"?m:m.displayName||m.name;if(M0)G0="\n\nCheck the top-level render call using <"+M0+">."}return G0}}function A7(m,G0){{if(!m._store||m._store.validated||m.key!=null)return;m._store.validated=!0;var M0=cX(G0);if(oQ[M0])return;oQ[M0]=!0;var w0="";if(m&&m._owner&&m._owner!==P8.current)w0=" It was passed a child from "+J0(m._owner.type)+".";G8(m),A('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',M0,w0),G8(null)}}function g4(m,G0){{if(typeof m!=="object")return;if(kJ(m))for(var M0=0;M0<m.length;M0++){var w0=m[M0];if(U1(w0))A7(w0,G0)}else if(U1(m)){if(m._store)m._store.validated=!0}else if(m){var g0=E(m);if(typeof g0==="function"){if(g0!==m.entries){var N6=g0.call(m),h0;while(!(h0=N6.next()).done)if(U1(h0.value))A7(h0.value,G0)}}}}}function Gq(m){{var G0=m.type;if(G0===null||G0===void 0||typeof G0==="string")return;var M0;if(typeof G0==="function")M0=G0.propTypes;else if(typeof G0==="object"&&(G0.$$typeof===z||G0.$$typeof===B))M0=G0.propTypes;else return;if(M0){var w0=J0(G0);j7(M0,m.props,"prop",w0,m)}else if(G0.PropTypes!==void 0&&!s8){s8=!0;var g0=J0(G0);A("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",g0||"Unknown")}if(typeof G0.getDefaultProps==="function"&&!G0.getDefaultProps.isReactClassApproved)A("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function Hq(m){{var G0=Object.keys(m.props);for(var M0=0;M0<G0.length;M0++){var w0=G0[M0];if(w0!=="children"&&w0!=="key"){G8(m),A("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",w0),G8(null);break}}if(m.ref!==null)G8(m),A("Invalid attribute `ref` supplied to `React.Fragment`."),G8(null)}}var F1={};function K4(m,G0,M0,w0,g0,N6){{var h0=c(m);if(!h0){var Z6="";if(m===void 0||typeof m==="object"&&m!==null&&Object.keys(m).length===0)Z6+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.";var _8=aQ(g0);if(_8)Z6+=_8;else Z6+=L1();var N8;if(m===null)N8="null";else if(kJ(m))N8="array";else if(m!==void 0&&m.$$typeof===Q)N8="<"+(J0(m.type)||"Unknown")+" />",Z6=" Did you accidentally export a JSX literal instead of a component?";else N8=typeof m;A("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",N8,Z6)}var E8=wJ(m,G0,M0,g0,N6);if(E8==null)return E8;if(h0){var T8=G0.children;if(T8!==void 0)if(w0)if(kJ(T8)){for(var k7=0;k7<T8.length;k7++)g4(T8[k7],m);if(Object.freeze)Object.freeze(T8)}else A("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else g4(T8,m)}if(S6.call(G0,"key")){var w7=J0(m),$5=Object.keys(G0).filter(function(QQ){return QQ!=="key"}),W4=$5.length>0?"{key: someKey, "+$5.join(": ..., ")+": ...}":"{key: someKey}";if(!F1[w7+W4]){var y6=$5.length>0?"{"+$5.join(": ..., ")+": ...}":"{}";A('A props object containing a "key" prop is being spread into JSX:\n  let props = %s;\n  <%s {...props} />\nReact keys must be passed directly to JSX without using spread:\n  let props = %s;\n  <%s key={someKey} {...props} />',W4,w7,y6,w7),F1[w7+W4]=!0}}if(m===q)Hq(E8);else Gq(E8);return E8}}function $4(m,G0,M0){return K4(m,G0,M0,!0)}function l(m,G0,M0){return K4(m,G0,M0,!1)}var R0=l,f0=$4;AY0.Fragment=q,AY0.jsx=R0,AY0.jsxs=f0})()});var p8=F0((MT0,mB)=>{/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(){var J={}.hasOwnProperty;function Q(){var Y="";for(var $=0;$<arguments.length;$++){var W=arguments[$];if(W)Y=q(Y,Z(W))}return Y}function Z(Y){if(typeof Y==="string"||typeof Y==="number")return Y;if(typeof Y!=="object")return"";if(Array.isArray(Y))return Q.apply(null,Y);if(Y.toString!==Object.prototype.toString&&!Y.toString.toString().includes("[native code]"))return Y.toString();var $="";for(var W in Y)if(J.call(Y,W)&&Y[W])$=q($,W);return $}function q(Y,$){if(!$)return Y;if(Y)return Y+" "+$;return Y+$}if(typeof mB!=="undefined"&&MT0)Q.default=Q,mB.exports=Q;else if(typeof define==="function"&&typeof define.amd==="object"&&define.amd)define("classnames",[],function(){return Q});else window.classNames=Q})()});var Dh=F0((Ab0,Vh)=>{var fK0=function(J,Q,Z){var q,Y,$,W,G,z,U=0,F=!1,B=!1,M=!0;if(typeof J!="function")throw new TypeError(Oh);if(Q=Mh(Q)||0,eB(Z))F=!!Z.leading,B="maxWait"in Z,$=B?vK0(Mh(Z.maxWait)||0,Q):$,M="trailing"in Z?!!Z.trailing:M;function O(P){var y=q,p=Y;return q=Y=void 0,U=P,W=J.apply(p,y),W}function R(P){return U=P,G=setTimeout(_,Q),F?O(P):W}function V(P){var y=P-z,p=P-U,s=Q-y;return B?SK0(s,$-p):s}function E(P){var y=P-z,p=P-U;return z===void 0||y>=Q||y<0||B&&p>=$}function _(){var P=AC();if(E(P))return A(P);G=setTimeout(_,V(P))}function A(P){if(G=void 0,M&&q)return O(P);return q=Y=void 0,W}function w(){if(G!==void 0)clearTimeout(G);U=0,q=z=Y=G=void 0}function T(){return G===void 0?W:A(AC())}function k(){var P=AC(),y=E(P);if(q=arguments,Y=this,z=P,y){if(G===void 0)return R(z);if(B)return G=setTimeout(_,Q),O(z)}if(G===void 0)G=setTimeout(_,Q);return W}return k.cancel=w,k.flush=T,k},gK0=function(J,Q,Z){var q=!0,Y=!0;if(typeof J!="function")throw new TypeError(Oh);if(eB(Z))q="leading"in Z?!!Z.leading:q,Y="trailing"in Z?!!Z.trailing:Y;return fK0(J,Q,{leading:q,maxWait:Q,trailing:Y})},eB=function(J){var Q=typeof J;return!!J&&(Q=="object"||Q=="function")},mK0=function(J){return!!J&&typeof J=="object"},hK0=function(J){return typeof J=="symbol"||mK0(J)&&yK0.call(J)==EK0},Mh=function(J){if(typeof J=="number")return J;if(hK0(J))return Nh;if(eB(J)){var Q=typeof J.valueOf=="function"?J.valueOf():J;J=eB(Q)?Q+"":Q}if(typeof J!="string")return J===0?J:+J;J=J.replace(CK0,"");var Z=kK0.test(J);return Z||wK0.test(J)?IK0(J.slice(2),Z?2:8):AK0.test(J)?Nh:+J},Oh="Expected a function",Nh=NaN,EK0="[object Symbol]",CK0=/^\s+|\s+$/g,AK0=/^[-+]0x[0-9a-f]+$/i,kK0=/^0b[01]+$/i,wK0=/^0o[0-7]+$/i,IK0=parseInt,PK0=typeof global=="object"&&global&&global.Object===Object&&global,TK0=typeof self=="object"&&self&&self.Object===Object&&self,bK0=PK0||TK0||Function("return this")(),xK0=Object.prototype,yK0=xK0.toString,vK0=Math.max,SK0=Math.min,AC=function(){return bK0.Date.now()};Vh.exports=gK0});var Sh=F0((ob0,vh)=>{var oK0=function(J,Q){var Z=J?J.length:0;return!!Z&&J$0(J,Q,0)>-1},tK0=function(J,Q,Z){var q=-1,Y=J?J.length:0;while(++q<Y)if(Z(Q,J[q]))return!0;return!1},eK0=function(J,Q,Z,q){var Y=J.length,$=Z+(q?1:-1);while(q?$--:++$<Y)if(Q(J[$],$,J))return $;return-1},J$0=function(J,Q,Z){if(Q!==Q)return eK0(J,Q$0,Z);var q=Z-1,Y=J.length;while(++q<Y)if(J[q]===Q)return q;return-1},Q$0=function(J){return J!==J},Z$0=function(J,Q){return J.has(Q)},q$0=function(J,Q){return J==null?void 0:J[Q]},X$0=function(J){var Q=!1;if(J!=null&&typeof J.toString!="function")try{Q=!!(J+"")}catch(Z){}return Q},Th=function(J){var Q=-1,Z=Array(J.size);return J.forEach(function(q){Z[++Q]=q}),Z},gY=function(J){var Q=-1,Z=J?J.length:0;this.clear();while(++Q<Z){var q=J[Q];this.set(q[0],q[1])}},z$0=function(){this.__data__=tz?tz(null):{}},U$0=function(J){return this.has(J)&&delete this.__data__[J]},L$0=function(J){var Q=this.__data__;if(tz){var Z=Q[J];return Z===PC?void 0:Z}return bC.call(Q,J)?Q[J]:void 0},F$0=function(J){var Q=this.__data__;return tz?Q[J]!==void 0:bC.call(Q,J)},B$0=function(J,Q){var Z=this.__data__;return Z[J]=tz&&Q===void 0?PC:Q,this},_W=function(J){var Q=-1,Z=J?J.length:0;this.clear();while(++Q<Z){var q=J[Q];this.set(q[0],q[1])}},N$0=function(){this.__data__=[]},M$0=function(J){var Q=this.__data__,Z=ZN(Q,J);if(Z<0)return!1;var q=Q.length-1;if(Z==q)Q.pop();else G$0.call(Q,Z,1);return!0},O$0=function(J){var Q=this.__data__,Z=ZN(Q,J);return Z<0?void 0:Q[Z][1]},V$0=function(J){return ZN(this.__data__,J)>-1},D$0=function(J,Q){var Z=this.__data__,q=ZN(Z,J);if(q<0)Z.push([J,Q]);else Z[q][1]=Q;return this},EW=function(J){var Q=-1,Z=J?J.length:0;this.clear();while(++Q<Z){var q=J[Q];this.set(q[0],q[1])}},R$0=function(){this.__data__={hash:new gY,map:new(H$0||_W),string:new gY}},j$0=function(J){return qN(this,J).delete(J)},_$0=function(J){return qN(this,J).get(J)},E$0=function(J){return qN(this,J).has(J)},C$0=function(J,Q){return qN(this,J).set(J,Q),this},QN=function(J){var Q=-1,Z=J?J.length:0;this.__data__=new EW;while(++Q<Z)this.add(J[Q])},A$0=function(J){return this.__data__.set(J,PC),this},k$0=function(J){return this.__data__.has(J)},ZN=function(J,Q){var Z=J.length;while(Z--)if(v$0(J[Z][0],Q))return Z;return-1},w$0=function(J){if(!yh(J)||b$0(J))return!1;var Q=S$0(J)||X$0(J)?W$0:sK0;return Q.test(x$0(J))},I$0=function(J,Q,Z){var q=-1,Y=oK0,$=J.length,W=!0,G=[],z=G;if(Z)W=!1,Y=tK0;else if($>=pK0){var U=Q?null:P$0(J);if(U)return Th(U);W=!1,Y=Z$0,z=new QN}else z=Q?[]:G;J:while(++q<$){var F=J[q],B=Q?Q(F):F;if(F=Z||F!==0?F:0,W&&B===B){var M=z.length;while(M--)if(z[M]===B)continue J;if(Q)z.push(B);G.push(F)}else if(!Y(z,B,Z)){if(z!==G)z.push(B);G.push(F)}}return G},qN=function(J,Q){var Z=J.__data__;return T$0(Q)?Z[typeof Q=="string"?"string":"hash"]:Z.map},xC=function(J,Q){var Z=q$0(J,Q);return w$0(Z)?Z:void 0},T$0=function(J){var Q=typeof J;return Q=="string"||Q=="number"||Q=="symbol"||Q=="boolean"?J!=="__proto__":J===null},b$0=function(J){return!!Ph&&Ph in J},x$0=function(J){if(J!=null){try{return xh.call(J)}catch(Q){}try{return J+""}catch(Q){}}return""},y$0=function(J){return J&&J.length?I$0(J):[]},v$0=function(J,Q){return J===Q||J!==J&&Q!==Q},S$0=function(J){var Q=yh(J)?$$0.call(J):"";return Q==lK0||Q==iK0},yh=function(J){var Q=typeof J;return!!J&&(Q=="object"||Q=="function")},f$0=function(){},pK0=200,PC="__lodash_hash_undefined__",dK0=Infinity,lK0="[object Function]",iK0="[object GeneratorFunction]",nK0=/[\\^$.*+?()[\]{}|]/g,sK0=/^\[object .+?Constructor\]$/,rK0=typeof global=="object"&&global&&global.Object===Object&&global,aK0=typeof self=="object"&&self&&self.Object===Object&&self,TC=rK0||aK0||Function("return this")(),Y$0=Array.prototype,K$0=Function.prototype,bh=Object.prototype,wC=TC["__core-js_shared__"],Ph=function(){var J=/[^.]+$/.exec(wC&&wC.keys&&wC.keys.IE_PROTO||"");return J?"Symbol(src)_1."+J:""}(),xh=K$0.toString,bC=bh.hasOwnProperty,$$0=bh.toString,W$0=RegExp("^"+xh.call(bC).replace(nK0,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),G$0=Y$0.splice,H$0=xC(TC,"Map"),IC=xC(TC,"Set"),tz=xC(Object,"create");gY.prototype.clear=z$0;gY.prototype.delete=U$0;gY.prototype.get=L$0;gY.prototype.has=F$0;gY.prototype.set=B$0;_W.prototype.clear=N$0;_W.prototype.delete=M$0;_W.prototype.get=O$0;_W.prototype.has=V$0;_W.prototype.set=D$0;EW.prototype.clear=R$0;EW.prototype.delete=j$0;EW.prototype.get=_$0;EW.prototype.has=E$0;EW.prototype.set=C$0;QN.prototype.add=QN.prototype.push=A$0;QN.prototype.has=k$0;var P$0=!(IC&&1/Th(new IC([,-0]))[1]==dK0)?f$0:function(J){return new IC(J)};vh.exports=y$0});var Fu=F0((Bv0,QA)=>{var $3=function(){},EW0=function(J,Q,Z){this.fn=J,this.context=Q,this.once=Z||!1},Lu=function(J,Q,Z,q,Y){if(typeof Z!=="function")throw new TypeError("The listener must be a function");var $=new EW0(Z,q||J,Y),W=U7?U7+Q:Q;if(!J._events[W])J._events[W]=$,J._eventsCount++;else if(!J._events[W].fn)J._events[W].push($);else J._events[W]=[J._events[W],$];return J},zN=function(J,Q){if(--J._eventsCount===0)J._events=new $3;else delete J._events[Q]},gJ=function(){this._events=new $3,this._eventsCount=0},_W0=Object.prototype.hasOwnProperty,U7="~";if(Object.create){if($3.prototype=Object.create(null),!new $3().__proto__)U7=!1}gJ.prototype.eventNames=function J(){var Q=[],Z,q;if(this._eventsCount===0)return Q;for(q in Z=this._events)if(_W0.call(Z,q))Q.push(U7?q.slice(1):q);if(Object.getOwnPropertySymbols)return Q.concat(Object.getOwnPropertySymbols(Z));return Q};gJ.prototype.listeners=function J(Q){var Z=U7?U7+Q:Q,q=this._events[Z];if(!q)return[];if(q.fn)return[q.fn];for(var Y=0,$=q.length,W=new Array($);Y<$;Y++)W[Y]=q[Y].fn;return W};gJ.prototype.listenerCount=function J(Q){var Z=U7?U7+Q:Q,q=this._events[Z];if(!q)return 0;if(q.fn)return 1;return q.length};gJ.prototype.emit=function J(Q,Z,q,Y,$,W){var G=U7?U7+Q:Q;if(!this._events[G])return!1;var z=this._events[G],U=arguments.length,F,B;if(z.fn){if(z.once)this.removeListener(Q,z.fn,void 0,!0);switch(U){case 1:return z.fn.call(z.context),!0;case 2:return z.fn.call(z.context,Z),!0;case 3:return z.fn.call(z.context,Z,q),!0;case 4:return z.fn.call(z.context,Z,q,Y),!0;case 5:return z.fn.call(z.context,Z,q,Y,$),!0;case 6:return z.fn.call(z.context,Z,q,Y,$,W),!0}for(B=1,F=new Array(U-1);B<U;B++)F[B-1]=arguments[B];z.fn.apply(z.context,F)}else{var M=z.length,O;for(B=0;B<M;B++){if(z[B].once)this.removeListener(Q,z[B].fn,void 0,!0);switch(U){case 1:z[B].fn.call(z[B].context);break;case 2:z[B].fn.call(z[B].context,Z);break;case 3:z[B].fn.call(z[B].context,Z,q);break;case 4:z[B].fn.call(z[B].context,Z,q,Y);break;default:if(!F)for(O=1,F=new Array(U-1);O<U;O++)F[O-1]=arguments[O];z[B].fn.apply(z[B].context,F)}}}return!0};gJ.prototype.on=function J(Q,Z,q){return Lu(this,Q,Z,q,!1)};gJ.prototype.once=function J(Q,Z,q){return Lu(this,Q,Z,q,!0)};gJ.prototype.removeListener=function J(Q,Z,q,Y){var $=U7?U7+Q:Q;if(!this._events[$])return this;if(!Z)return zN(this,$),this;var W=this._events[$];if(W.fn){if(W.fn===Z&&(!Y||W.once)&&(!q||W.context===q))zN(this,$)}else{for(var G=0,z=[],U=W.length;G<U;G++)if(W[G].fn!==Z||Y&&!W[G].once||q&&W[G].context!==q)z.push(W[G]);if(z.length)this._events[$]=z.length===1?z[0]:z;else zN(this,$)}return this};gJ.prototype.removeAllListeners=function J(Q){var Z;if(Q){if(Z=U7?U7+Q:Q,this._events[Z])zN(this,Z)}else this._events=new $3,this._eventsCount=0;return this};gJ.prototype.off=gJ.prototype.removeListener;gJ.prototype.addListener=gJ.prototype.on;gJ.prefixed=U7;gJ.EventEmitter=gJ;if(typeof QA!=="undefined")QA.exports=gJ});var F7=F0((uA,kc)=>{var V3=function(J){return J&&J.Math===Math&&J};kc.exports=V3(typeof globalThis=="object"&&globalThis)||V3(typeof window=="object"&&window)||V3(typeof self=="object"&&self)||V3(typeof global=="object"&&global)||V3(typeof uA=="object"&&uA)||function(){return this}()||Function("return this")()});var cJ=F0((Uu0,wc)=>{wc.exports=function(J){try{return!!J()}catch(Q){return!0}}});var hZ=F0((Lu0,Ic)=>{var C20=cJ();Ic.exports=!C20(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})});var D3=F0((Fu0,Pc)=>{var A20=cJ();Pc.exports=!A20(function(){var J=function(){}.bind();return typeof J!="function"||J.hasOwnProperty("prototype")})});var AQ=F0((Bu0,Tc)=>{var k20=D3(),SN=Function.prototype.call;Tc.exports=k20?SN.bind(SN):function(){return SN.apply(SN,arguments)}});var yc=F0((I20)=>{var bc={}.propertyIsEnumerable,xc=Object.getOwnPropertyDescriptor,w20=xc&&!bc.call({1:2},1);I20.f=w20?function J(Q){var Z=xc(this,Q);return!!Z&&Z.enumerable}:bc});var cA=F0((Mu0,vc)=>{vc.exports=function(J,Q){return{enumerable:!(J&1),configurable:!(J&2),writable:!(J&4),value:Q}}});var v5=F0((Ou0,gc)=>{var Sc=D3(),fc=Function.prototype,pA=fc.call,T20=Sc&&fc.bind.bind(pA,pA);gc.exports=Sc?T20:function(J){return function(){return pA.apply(J,arguments)}}});var JK=F0((Vu0,hc)=>{var mc=v5(),b20=mc({}.toString),x20=mc("".slice);hc.exports=function(J){return x20(b20(J),8,-1)}});var cc=F0((Du0,uc)=>{var y20=v5(),v20=cJ(),S20=JK(),dA=Object,f20=y20("".split);uc.exports=v20(function(){return!dA("z").propertyIsEnumerable(0)})?function(J){return S20(J)==="String"?f20(J,""):dA(J)}:dA});var R3=F0((Ru0,pc)=>{pc.exports=function(J){return J===null||J===void 0}});var QK=F0((ju0,dc)=>{var g20=R3(),m20=TypeError;dc.exports=function(J){if(g20(J))throw new m20("Can't call method on "+J);return J}});var j3=F0((_u0,lc)=>{var h20=cc(),u20=QK();lc.exports=function(J){return h20(u20(J))}});var pJ=F0((Eu0,ic)=>{var lA=typeof document=="object"&&document.all;ic.exports=typeof lA=="undefined"&&lA!==void 0?function(J){return typeof J=="function"||J===lA}:function(J){return typeof J=="function"}});var OX=F0((Cu0,nc)=>{var c20=pJ();nc.exports=function(J){return typeof J=="object"?J!==null:c20(J)}});var _3=F0((Au0,sc)=>{var iA=F7(),p20=pJ(),d20=function(J){return p20(J)?J:void 0};sc.exports=function(J,Q){return arguments.length<2?d20(iA[J]):iA[J]&&iA[J][Q]}});var nA=F0((ku0,rc)=>{var l20=v5();rc.exports=l20({}.isPrototypeOf)});var oc=F0((wu0,ac)=>{ac.exports=typeof navigator!="undefined"&&String(navigator.userAgent)||""});var Xp=F0((Iu0,qp)=>{var Zp=F7(),sA=oc(),tc=Zp.process,ec=Zp.Deno,Jp=tc&&tc.versions||ec&&ec.version,Qp=Jp&&Jp.v8,h1,fN;if(Qp)h1=Qp.split("."),fN=h1[0]>0&&h1[0]<4?1:+(h1[0]+h1[1]);if(!fN&&sA){if(h1=sA.match(/Edge\/(\d+)/),!h1||h1[1]>=74){if(h1=sA.match(/Chrome\/(\d+)/),h1)fN=+h1[1]}}qp.exports=fN});var rA=F0((Pu0,Kp)=>{var Yp=Xp(),i20=cJ(),n20=F7(),s20=n20.String;Kp.exports=!!Object.getOwnPropertySymbols&&!i20(function(){var J=Symbol("symbol detection");return!s20(J)||!(Object(J)instanceof Symbol)||!Symbol.sham&&Yp&&Yp<41})});var aA=F0((Tu0,$p)=>{var r20=rA();$p.exports=r20&&!Symbol.sham&&typeof Symbol.iterator=="symbol"});var oA=F0((bu0,Wp)=>{var a20=_3(),o20=pJ(),t20=nA(),e20=aA(),JG0=Object;Wp.exports=e20?function(J){return typeof J=="symbol"}:function(J){var Q=a20("Symbol");return o20(Q)&&t20(Q.prototype,JG0(J))}});var Hp=F0((xu0,Gp)=>{var QG0=String;Gp.exports=function(J){try{return QG0(J)}catch(Q){return"Object"}}});var gN=F0((yu0,zp)=>{var ZG0=pJ(),qG0=Hp(),XG0=TypeError;zp.exports=function(J){if(ZG0(J))return J;throw new XG0(qG0(J)+" is not a function")}});var mN=F0((vu0,Up)=>{var YG0=gN(),KG0=R3();Up.exports=function(J,Q){var Z=J[Q];return KG0(Z)?void 0:YG0(Z)}});var Fp=F0((Su0,Lp)=>{var tA=AQ(),eA=pJ(),Jk=OX(),$G0=TypeError;Lp.exports=function(J,Q){var Z,q;if(Q==="string"&&eA(Z=J.toString)&&!Jk(q=tA(Z,J)))return q;if(eA(Z=J.valueOf)&&!Jk(q=tA(Z,J)))return q;if(Q!=="string"&&eA(Z=J.toString)&&!Jk(q=tA(Z,J)))return q;throw new $G0("Can't convert object to primitive value")}});var Qk=F0((fu0,Bp)=>{Bp.exports=!1});var hN=F0((gu0,Mp)=>{var Np=F7(),WG0=Object.defineProperty;Mp.exports=function(J,Q){try{WG0(Np,J,{value:Q,configurable:!0,writable:!0})}catch(Z){Np[J]=Q}return Q}});var uN=F0((mu0,Dp)=>{var GG0=Qk(),HG0=F7(),zG0=hN(),Op="__core-js_shared__",Vp=Dp.exports=HG0[Op]||zG0(Op,{});(Vp.versions||(Vp.versions=[])).push({version:"3.37.1",mode:GG0?"pure":"global",copyright:"\xA9 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.37.1/LICENSE",source:"https://github.com/zloirock/core-js"})});var cN=F0((hu0,jp)=>{var Rp=uN();jp.exports=function(J,Q){return Rp[J]||(Rp[J]=Q||{})}});var uW=F0((uu0,_p)=>{var UG0=QK(),LG0=Object;_p.exports=function(J){return LG0(UG0(J))}});var uZ=F0((cu0,Ep)=>{var FG0=v5(),BG0=uW(),NG0=FG0({}.hasOwnProperty);Ep.exports=Object.hasOwn||function J(Q,Z){return NG0(BG0(Q),Z)}});var Zk=F0((pu0,Cp)=>{var MG0=v5(),OG0=0,VG0=Math.random(),DG0=MG0(1 .toString);Cp.exports=function(J){return"Symbol("+(J===void 0?"":J)+")_"+DG0(++OG0+VG0,36)}});var kQ=F0((du0,kp)=>{var RG0=F7(),jG0=cN(),Ap=uZ(),_G0=Zk(),EG0=rA(),CG0=aA(),cW=RG0.Symbol,qk=jG0("wks"),AG0=CG0?cW.for||cW:cW&&cW.withoutSetter||_G0;kp.exports=function(J){if(!Ap(qk,J))qk[J]=EG0&&Ap(cW,J)?cW[J]:AG0("Symbol."+J);return qk[J]}});var Tp=F0((lu0,Pp)=>{var kG0=AQ(),wp=OX(),Ip=oA(),wG0=mN(),IG0=Fp(),PG0=kQ(),TG0=TypeError,bG0=PG0("toPrimitive");Pp.exports=function(J,Q){if(!wp(J)||Ip(J))return J;var Z=wG0(J,bG0),q;if(Z){if(Q===void 0)Q="default";if(q=kG0(Z,J,Q),!wp(q)||Ip(q))return q;throw new TG0("Can't convert object to primitive value")}if(Q===void 0)Q="number";return IG0(J,Q)}});var Xk=F0((iu0,bp)=>{var xG0=Tp(),yG0=oA();bp.exports=function(J){var Q=xG0(J,"string");return yG0(Q)?Q:Q+""}});var Kk=F0((nu0,yp)=>{var vG0=F7(),xp=OX(),Yk=vG0.document,SG0=xp(Yk)&&xp(Yk.createElement);yp.exports=function(J){return SG0?Yk.createElement(J):{}}});var $k=F0((su0,vp)=>{var fG0=hZ(),gG0=cJ(),mG0=Kk();vp.exports=!fG0&&!gG0(function(){return Object.defineProperty(mG0("div"),"a",{get:function(){return 7}}).a!==7})});var Wk=F0((sG0)=>{var hG0=hZ(),uG0=AQ(),cG0=yc(),pG0=cA(),dG0=j3(),lG0=Xk(),iG0=uZ(),nG0=$k(),Sp=Object.getOwnPropertyDescriptor;sG0.f=hG0?Sp:function J(Q,Z){if(Q=dG0(Q),Z=lG0(Z),nG0)try{return Sp(Q,Z)}catch(q){}if(iG0(Q,Z))return pG0(!uG0(cG0.f,Q,Z),Q[Z])}});var Gk=F0((au0,fp)=>{var aG0=hZ(),oG0=cJ();fp.exports=aG0&&oG0(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})});var VX=F0((ou0,gp)=>{var tG0=OX(),eG0=String,JH0=TypeError;gp.exports=function(J){if(tG0(J))return J;throw new JH0(eG0(J)+" is not an object")}});var pW=F0((KH0)=>{var QH0=hZ(),ZH0=$k(),qH0=Gk(),pN=VX(),mp=Xk(),XH0=TypeError,Hk=Object.defineProperty,YH0=Object.getOwnPropertyDescriptor,zk="enumerable",Uk="configurable",Lk="writable";KH0.f=QH0?qH0?function J(Q,Z,q){if(pN(Q),Z=mp(Z),pN(q),typeof Q==="function"&&Z==="prototype"&&"value"in q&&Lk in q&&!q[Lk]){var Y=YH0(Q,Z);if(Y&&Y[Lk])Q[Z]=q.value,q={configurable:Uk in q?q[Uk]:Y[Uk],enumerable:zk in q?q[zk]:Y[zk],writable:!1}}return Hk(Q,Z,q)}:Hk:function J(Q,Z,q){if(pN(Q),Z=mp(Z),pN(q),ZH0)try{return Hk(Q,Z,q)}catch(Y){}if("get"in q||"set"in q)throw new XH0("Accessors not supported");if("value"in q)Q[Z]=q.value;return Q}});var dN=F0((eu0,hp)=>{var WH0=hZ(),GH0=pW(),HH0=cA();hp.exports=WH0?function(J,Q,Z){return GH0.f(J,Q,HH0(1,Z))}:function(J,Q,Z){return J[Q]=Z,J}});var pp=F0((Jc0,cp)=>{var Fk=hZ(),zH0=uZ(),up=Function.prototype,UH0=Fk&&Object.getOwnPropertyDescriptor,Bk=zH0(up,"name"),LH0=Bk&&function J(){}.name==="something",FH0=Bk&&(!Fk||Fk&&UH0(up,"name").configurable);cp.exports={EXISTS:Bk,PROPER:LH0,CONFIGURABLE:FH0}});var Mk=F0((Qc0,dp)=>{var BH0=v5(),NH0=pJ(),Nk=uN(),MH0=BH0(Function.toString);if(!NH0(Nk.inspectSource))Nk.inspectSource=function(J){return MH0(J)};dp.exports=Nk.inspectSource});var np=F0((Zc0,ip)=>{var OH0=F7(),VH0=pJ(),lp=OH0.WeakMap;ip.exports=VH0(lp)&&/native code/.test(String(lp))});var Ok=F0((qc0,rp)=>{var DH0=cN(),RH0=Zk(),sp=DH0("keys");rp.exports=function(J){return sp[J]||(sp[J]=RH0(J))}});var lN=F0((Xc0,ap)=>{ap.exports={}});var jk=F0((Yc0,ep)=>{var jH0=np(),tp=F7(),_H0=OX(),EH0=dN(),Vk=uZ(),Dk=uN(),CH0=Ok(),AH0=lN(),op="Object already initialized",Rk=tp.TypeError,kH0=tp.WeakMap,iN,E3,nN,wH0=function(J){return nN(J)?E3(J):iN(J,{})},IH0=function(J){return function(Q){var Z;if(!_H0(Q)||(Z=E3(Q)).type!==J)throw new Rk("Incompatible receiver, "+J+" required");return Z}};if(jH0||Dk.state)u1=Dk.state||(Dk.state=new kH0),u1.get=u1.get,u1.has=u1.has,u1.set=u1.set,iN=function(J,Q){if(u1.has(J))throw new Rk(op);return Q.facade=J,u1.set(J,Q),Q},E3=function(J){return u1.get(J)||{}},nN=function(J){return u1.has(J)};else ZK=CH0("state"),AH0[ZK]=!0,iN=function(J,Q){if(Vk(J,ZK))throw new Rk(op);return Q.facade=J,EH0(J,ZK,Q),Q},E3=function(J){return Vk(J,ZK)?J[ZK]:{}},nN=function(J){return Vk(J,ZK)};var u1,ZK;ep.exports={set:iN,get:E3,has:nN,enforce:wH0,getterFor:IH0}});var qd=F0((Kc0,Zd)=>{var Ek=v5(),PH0=cJ(),TH0=pJ(),sN=uZ(),_k=hZ(),bH0=pp().CONFIGURABLE,xH0=Mk(),Qd=jk(),yH0=Qd.enforce,vH0=Qd.get,Jd=String,rN=Object.defineProperty,SH0=Ek("".slice),fH0=Ek("".replace),gH0=Ek([].join),mH0=_k&&!PH0(function(){return rN(function(){},"length",{value:8}).length!==8}),hH0=String(String).split("String"),uH0=Zd.exports=function(J,Q,Z){if(SH0(Jd(Q),0,7)==="Symbol(")Q="["+fH0(Jd(Q),/^Symbol\(([^)]*)\).*$/,"$1")+"]";if(Z&&Z.getter)Q="get "+Q;if(Z&&Z.setter)Q="set "+Q;if(!sN(J,"name")||bH0&&J.name!==Q)if(_k)rN(J,"name",{value:Q,configurable:!0});else J.name=Q;if(mH0&&Z&&sN(Z,"arity")&&J.length!==Z.arity)rN(J,"length",{value:Z.arity});try{if(Z&&sN(Z,"constructor")&&Z.constructor){if(_k)rN(J,"prototype",{writable:!1})}else if(J.prototype)J.prototype=void 0}catch(Y){}var q=yH0(J);if(!sN(q,"source"))q.source=gH0(hH0,typeof Q=="string"?Q:"");return J};Function.prototype.toString=uH0(function J(){return TH0(this)&&vH0(this).source||xH0(this)},"toString")});var Ck=F0(($c0,Xd)=>{var cH0=pJ(),pH0=pW(),dH0=qd(),lH0=hN();Xd.exports=function(J,Q,Z,q){if(!q)q={};var Y=q.enumerable,$=q.name!==void 0?q.name:Q;if(cH0(Z))dH0(Z,$,q);if(q.global)if(Y)J[Q]=Z;else lH0(Q,Z);else{try{if(!q.unsafe)delete J[Q];else if(J[Q])Y=!0}catch(W){}if(Y)J[Q]=Z;else pH0.f(J,Q,{value:Z,enumerable:!1,configurable:!q.nonConfigurable,writable:!q.nonWritable})}return J}});var Kd=F0((Wc0,Yd)=>{var{ceil:iH0,floor:nH0}=Math;Yd.exports=Math.trunc||function J(Q){var Z=+Q;return(Z>0?nH0:iH0)(Z)}});var DX=F0((Gc0,$d)=>{var sH0=Kd();$d.exports=function(J){var Q=+J;return Q!==Q||Q===0?0:sH0(Q)}});var Gd=F0((Hc0,Wd)=>{var rH0=DX(),aH0=Math.max,oH0=Math.min;Wd.exports=function(J,Q){var Z=rH0(J);return Z<0?aH0(Z+Q,0):oH0(Z,Q)}});var Ak=F0((zc0,Hd)=>{var tH0=DX(),eH0=Math.min;Hd.exports=function(J){var Q=tH0(J);return Q>0?eH0(Q,9007199254740991):0}});var dW=F0((Uc0,zd)=>{var Jz0=Ak();zd.exports=function(J){return Jz0(J.length)}});var Fd=F0((Lc0,Ld)=>{var Qz0=j3(),Zz0=Gd(),qz0=dW(),Ud=function(J){return function(Q,Z,q){var Y=Qz0(Q),$=qz0(Y);if($===0)return!J&&-1;var W=Zz0(q,$),G;if(J&&Z!==Z){while($>W)if(G=Y[W++],G!==G)return!0}else for(;$>W;W++)if((J||(W in Y))&&Y[W]===Z)return J||W||0;return!J&&-1}};Ld.exports={includes:Ud(!0),indexOf:Ud(!1)}});var wk=F0((Fc0,Nd)=>{var Xz0=v5(),kk=uZ(),Yz0=j3(),Kz0=Fd().indexOf,$z0=lN(),Bd=Xz0([].push);Nd.exports=function(J,Q){var Z=Yz0(J),q=0,Y=[],$;for($ in Z)!kk($z0,$)&&kk(Z,$)&&Bd(Y,$);while(Q.length>q)if(kk(Z,$=Q[q++]))~Kz0(Y,$)||Bd(Y,$);return Y}});var aN=F0((Bc0,Md)=>{Md.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]});var Od=F0((zz0)=>{var Wz0=wk(),Gz0=aN(),Hz0=Gz0.concat("length","prototype");zz0.f=Object.getOwnPropertyNames||function J(Q){return Wz0(Q,Hz0)}});var Vd=F0((Lz0)=>{Lz0.f=Object.getOwnPropertySymbols});var Rd=F0((Oc0,Dd)=>{var Bz0=_3(),Nz0=v5(),Mz0=Od(),Oz0=Vd(),Vz0=VX(),Dz0=Nz0([].concat);Dd.exports=Bz0("Reflect","ownKeys")||function J(Q){var Z=Mz0.f(Vz0(Q)),q=Oz0.f;return q?Dz0(Z,q(Q)):Z}});var Ed=F0((Vc0,_d)=>{var jd=uZ(),Rz0=Rd(),jz0=Wk(),_z0=pW();_d.exports=function(J,Q,Z){var q=Rz0(Q),Y=_z0.f,$=jz0.f;for(var W=0;W<q.length;W++){var G=q[W];if(!jd(J,G)&&!(Z&&jd(Z,G)))Y(J,G,$(Q,G))}}});var Ad=F0((Dc0,Cd)=>{var Ez0=cJ(),Cz0=pJ(),Az0=/#|\.prototype\./,C3=function(J,Q){var Z=wz0[kz0(J)];return Z===Pz0?!0:Z===Iz0?!1:Cz0(Q)?Ez0(Q):!!Q},kz0=C3.normalize=function(J){return String(J).replace(Az0,".").toLowerCase()},wz0=C3.data={},Iz0=C3.NATIVE="N",Pz0=C3.POLYFILL="P";Cd.exports=C3});var qK=F0((Rc0,kd)=>{var oN=F7(),Tz0=Wk().f,bz0=dN(),xz0=Ck(),yz0=hN(),vz0=Ed(),Sz0=Ad();kd.exports=function(J,Q){var{target:Z,global:q,stat:Y}=J,$,W,G,z,U,F;if(q)W=oN;else if(Y)W=oN[Z]||yz0(Z,{});else W=oN[Z]&&oN[Z].prototype;if(W)for(G in Q){if(U=Q[G],J.dontCallGetSet)F=Tz0(W,G),z=F&&F.value;else z=W[G];if($=Sz0(q?G:Z+(Y?".":"#")+G,J.forced),!$&&z!==void 0){if(typeof U==typeof z)continue;vz0(U,z)}if(J.sham||z&&z.sham)bz0(U,"sham",!0);xz0(W,G,U,J)}}});var Id=F0((jc0,wd)=>{var fz0=wk(),gz0=aN();wd.exports=Object.keys||function J(Q){return fz0(Q,gz0)}});var Pd=F0((lz0)=>{var mz0=hZ(),hz0=Gk(),uz0=pW(),cz0=VX(),pz0=j3(),dz0=Id();lz0.f=mz0&&!hz0?Object.defineProperties:function J(Q,Z){cz0(Q);var q=pz0(Z),Y=dz0(Z),$=Y.length,W=0,G;while($>W)uz0.f(Q,G=Y[W++],q[G]);return Q}});var bd=F0((Ec0,Td)=>{var nz0=_3();Td.exports=nz0("document","documentElement")});var bk=F0((Cc0,md)=>{var sz0=VX(),rz0=Pd(),xd=aN(),az0=lN(),oz0=bd(),tz0=Kk(),ez0=Ok(),yd=">",vd="<",Pk="prototype",Tk="script",fd=ez0("IE_PROTO"),Ik=function(){},gd=function(J){return vd+Tk+yd+J+vd+"/"+Tk+yd},Sd=function(J){J.write(gd("")),J.close();var Q=J.parentWindow.Object;return J=null,Q},J30=function(){var J=tz0("iframe"),Q="java"+Tk+":",Z;return J.style.display="none",oz0.appendChild(J),J.src=String(Q),Z=J.contentWindow.document,Z.open(),Z.write(gd("document.F=Object")),Z.close(),Z.F},tN,eN=function(){try{tN=new ActiveXObject("htmlfile")}catch(Q){}eN=typeof document!="undefined"?document.domain&&tN?Sd(tN):J30():Sd(tN);var J=xd.length;while(J--)delete eN[Pk][xd[J]];return eN()};az0[fd]=!0;md.exports=Object.create||function J(Q,Z){var q;if(Q!==null)Ik[Pk]=sz0(Q),q=new Ik,Ik[Pk]=null,q[fd]=Q;else q=eN();return Z===void 0?q:rz0.f(q,Z)}});var JM=F0((Ac0,hd)=>{var Q30=kQ(),Z30=bk(),q30=pW().f,xk=Q30("unscopables"),yk=Array.prototype;if(yk[xk]===void 0)q30(yk,xk,{configurable:!0,value:Z30(null)});hd.exports=function(J){yk[xk][J]=!0}});var ud=F0(()=>{var X30=qK(),Y30=uW(),K30=dW(),$30=DX(),W30=JM();X30({target:"Array",proto:!0},{at:function J(Q){var Z=Y30(this),q=K30(Z),Y=$30(Q),$=Y>=0?Y:q+Y;return $<0||$>=q?void 0:Z[$]}});W30("at")});var lW=F0((Ic0,cd)=>{var G30=F7(),H30=v5();cd.exports=function(J,Q){return H30(G30[J].prototype[Q])}});var dd=F0((Pc0,pd)=>{ud();var z30=lW();pd.exports=z30("Array","at")});var id=F0((Tc0,ld)=>{var U30=dd();ld.exports=U30});var vk=F0((bc0,nd)=>{var L30=JK();nd.exports=Array.isArray||function J(Q){return L30(Q)==="Array"}});var rd=F0((xc0,sd)=>{var F30=TypeError,B30=9007199254740991;sd.exports=function(J){if(J>B30)throw F30("Maximum allowed index exceeded");return J}});var od=F0((yc0,ad)=>{var N30=JK(),M30=v5();ad.exports=function(J){if(N30(J)==="Function")return M30(J)}});var Jl=F0((vc0,ed)=>{var td=od(),O30=gN(),V30=D3(),D30=td(td.bind);ed.exports=function(J,Q){return O30(J),Q===void 0?J:V30?D30(J,Q):function(){return J.apply(Q,arguments)}}});var Sk=F0((Sc0,Zl)=>{var R30=vk(),j30=dW(),_30=rd(),E30=Jl(),Ql=function(J,Q,Z,q,Y,$,W,G){var z=Y,U=0,F=W?E30(W,G):!1,B,M;while(U<q){if(U in Z){if(B=F?F(Z[U],U,Q):Z[U],$>0&&R30(B))M=j30(B),z=Ql(J,Q,B,M,z,$-1)-1;else _30(z+1),J[z]=B;z++}U++}return z};Zl.exports=Ql});var Yl=F0((fc0,Xl)=>{var C30=kQ(),A30=C30("toStringTag"),ql={};ql[A30]="z";Xl.exports=String(ql)==="[object z]"});var fk=F0((gc0,Kl)=>{var k30=Yl(),w30=pJ(),QM=JK(),I30=kQ(),P30=I30("toStringTag"),T30=Object,b30=QM(function(){return arguments}())==="Arguments",x30=function(J,Q){try{return J[Q]}catch(Z){}};Kl.exports=k30?QM:function(J){var Q,Z,q;return J===void 0?"Undefined":J===null?"Null":typeof(Z=x30(Q=T30(J),P30))=="string"?Z:b30?QM(Q):(q=QM(Q))==="Object"&&w30(Q.callee)?"Arguments":q}});var Ul=F0((mc0,zl)=>{var y30=v5(),v30=cJ(),$l=pJ(),S30=fk(),f30=_3(),g30=Mk(),Wl=function(){},Gl=f30("Reflect","construct"),gk=/^\s*(?:class|function)\b/,m30=y30(gk.exec),h30=!gk.test(Wl),A3=function J(Q){if(!$l(Q))return!1;try{return Gl(Wl,[],Q),!0}catch(Z){return!1}},Hl=function J(Q){if(!$l(Q))return!1;switch(S30(Q)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return h30||!!m30(gk,g30(Q))}catch(Z){return!0}};Hl.sham=!0;zl.exports=!Gl||v30(function(){var J;return A3(A3.call)||!A3(Object)||!A3(function(){J=!0})||J})?Hl:A3});var Nl=F0((hc0,Bl)=>{var Ll=vk(),u30=Ul(),c30=OX(),p30=kQ(),d30=p30("species"),Fl=Array;Bl.exports=function(J){var Q;if(Ll(J)){if(Q=J.constructor,u30(Q)&&(Q===Fl||Ll(Q.prototype)))Q=void 0;else if(c30(Q)){if(Q=Q[d30],Q===null)Q=void 0}}return Q===void 0?Fl:Q}});var mk=F0((uc0,Ml)=>{var l30=Nl();Ml.exports=function(J,Q){return new(l30(J))(Q===0?0:Q)}});var Ol=F0(()=>{var i30=qK(),n30=Sk(),s30=gN(),r30=uW(),a30=dW(),o30=mk();i30({target:"Array",proto:!0},{flatMap:function J(Q){var Z=r30(this),q=a30(Z),Y;return s30(Q),Y=o30(Z,0),Y.length=n30(Y,Z,Z,q,0,1,Q,arguments.length>1?arguments[1]:void 0),Y}})});var Vl=F0(()=>{var t30=JM();t30("flatMap")});var Rl=F0((ic0,Dl)=>{Ol();Vl();var e30=lW();Dl.exports=e30("Array","flatMap")});var _l=F0((nc0,jl)=>{var JU0=Rl();jl.exports=JU0});var El=F0(()=>{var QU0=qK(),ZU0=Sk(),qU0=uW(),XU0=dW(),YU0=DX(),KU0=mk();QU0({target:"Array",proto:!0},{flat:function J(){var Q=arguments.length?arguments[0]:void 0,Z=qU0(this),q=XU0(Z),Y=KU0(Z,0);return Y.length=ZU0(Y,Z,Z,q,0,Q===void 0?1:YU0(Q)),Y}})});var Cl=F0(()=>{var $U0=JM();$U0("flat")});var kl=F0((tc0,Al)=>{El();Cl();var WU0=lW();Al.exports=WU0("Array","flat")});var Il=F0((ec0,wl)=>{var GU0=kl();wl.exports=GU0});var iW=F0((Jp0,Pl)=>{var HU0=fk(),zU0=String;Pl.exports=function(J){if(HU0(J)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return zU0(J)}});var Tl=F0(()=>{var UU0=qK(),LU0=v5(),FU0=QK(),BU0=DX(),NU0=iW(),MU0=cJ(),OU0=LU0("".charAt),VU0=MU0(function(){return"\uD842\uDFB7".at(-2)!=="\uD842"});UU0({target:"String",proto:!0,forced:VU0},{at:function J(Q){var Z=NU0(FU0(this)),q=Z.length,Y=BU0(Q),$=Y>=0?Y:q+Y;return $<0||$>=q?void 0:OU0(Z,$)}})});var xl=F0((qp0,bl)=>{Tl();var DU0=lW();bl.exports=DU0("String","at")});var vl=F0((Xp0,yl)=>{var RU0=xl();yl.exports=RU0});var hk=F0((Yp0,Sl)=>{var jU0=VX();Sl.exports=function(){var J=jU0(this),Q="";if(J.hasIndices)Q+="d";if(J.global)Q+="g";if(J.ignoreCase)Q+="i";if(J.multiline)Q+="m";if(J.dotAll)Q+="s";if(J.unicode)Q+="u";if(J.unicodeSets)Q+="v";if(J.sticky)Q+="y";return Q}});var gl=F0((Kp0,fl)=>{var uk=cJ(),_U0=F7(),ck=_U0.RegExp,pk=uk(function(){var J=ck("a","y");return J.lastIndex=2,J.exec("abcd")!==null}),EU0=pk||uk(function(){return!ck("a","y").sticky}),CU0=pk||uk(function(){var J=ck("^r","gy");return J.lastIndex=2,J.exec("str")!==null});fl.exports={BROKEN_CARET:CU0,MISSED_STICKY:EU0,UNSUPPORTED_Y:pk}});var hl=F0(($p0,ml)=>{var AU0=cJ(),kU0=F7(),wU0=kU0.RegExp;ml.exports=AU0(function(){var J=wU0(".","s");return!(J.dotAll&&J.test("\n")&&J.flags==="s")})});var cl=F0((Wp0,ul)=>{var IU0=cJ(),PU0=F7(),TU0=PU0.RegExp;ul.exports=IU0(function(){var J=TU0("(?<a>b)","g");return J.exec("b").groups.a!=="b"||"b".replace(J,"$<a>c")!=="bc"})});var XM=F0((Gp0,dl)=>{var nW=AQ(),qM=v5(),bU0=iW(),xU0=hk(),yU0=gl(),vU0=cN(),SU0=bk(),fU0=jk().get,gU0=hl(),mU0=cl(),hU0=vU0("native-string-replace",String.prototype.replace),ZM=RegExp.prototype.exec,lk=ZM,uU0=qM("".charAt),cU0=qM("".indexOf),pU0=qM("".replace),dk=qM("".slice),ik=function(){var J=/a/,Q=/b*/g;return nW(ZM,J,"a"),nW(ZM,Q,"a"),J.lastIndex!==0||Q.lastIndex!==0}(),pl=yU0.BROKEN_CARET,nk=/()??/.exec("")[1]!==void 0,dU0=ik||nk||pl||gU0||mU0;if(dU0)lk=function J(Q){var Z=this,q=fU0(Z),Y=bU0(Q),$=q.raw,W,G,z,U,F,B,M;if($)return $.lastIndex=Z.lastIndex,W=nW(lk,$,Y),Z.lastIndex=$.lastIndex,W;var O=q.groups,R=pl&&Z.sticky,V=nW(xU0,Z),E=Z.source,_=0,A=Y;if(R){if(V=pU0(V,"y",""),cU0(V,"g")===-1)V+="g";if(A=dk(Y,Z.lastIndex),Z.lastIndex>0&&(!Z.multiline||Z.multiline&&uU0(Y,Z.lastIndex-1)!=="\n"))E="(?: "+E+")",A=" "+A,_++;G=new RegExp("^(?:"+E+")",V)}if(nk)G=new RegExp("^"+E+"$(?!\\s)",V);if(ik)z=Z.lastIndex;if(U=nW(ZM,R?G:Z,A),R)if(U)U.input=dk(U.input,_),U[0]=dk(U[0],_),U.index=Z.lastIndex,Z.lastIndex+=U[0].length;else Z.lastIndex=0;else if(ik&&U)Z.lastIndex=Z.global?U.index+U[0].length:z;if(nk&&U&&U.length>1)nW(hU0,U[0],G,function(){for(F=1;F<arguments.length-2;F++)if(arguments[F]===void 0)U[F]=void 0});if(U&&O){U.groups=B=SU0(null);for(F=0;F<O.length;F++)M=O[F],B[M[0]]=U[M[1]]}return U};dl.exports=lk});var sk=F0(()=>{var lU0=qK(),ll=XM();lU0({target:"RegExp",proto:!0,forced:/./.exec!==ll},{exec:ll})});var al=F0((Up0,rl)=>{var iU0=D3(),sl=Function.prototype,il=sl.apply,nl=sl.call;rl.exports=typeof Reflect=="object"&&Reflect.apply||(iU0?nl.bind(il):function(){return nl.apply(il,arguments)})});var Zi=F0((Lp0,Qi)=>{sk();var ol=AQ(),tl=Ck(),nU0=XM(),el=cJ(),Ji=kQ(),sU0=dN(),rU0=Ji("species"),rk=RegExp.prototype;Qi.exports=function(J,Q,Z,q){var Y=Ji(J),$=!el(function(){var U={};return U[Y]=function(){return 7},""[J](U)!==7}),W=$&&!el(function(){var U=!1,F=/a/;if(J==="split")F={},F.constructor={},F.constructor[rU0]=function(){return F},F.flags="",F[Y]=/./[Y];return F.exec=function(){return U=!0,null},F[Y](""),!U});if(!$||!W||Z){var G=/./[Y],z=Q(Y,""[J],function(U,F,B,M,O){var R=F.exec;if(R===nU0||R===rk.exec){if($&&!O)return{done:!0,value:ol(G,F,B,M)};return{done:!0,value:ol(U,B,F,M)}}return{done:!1}});tl(String.prototype,J,z[0]),tl(rk,Y,z[1])}if(q)sU0(rk[Y],"sham",!0)}});var Ki=F0((Fp0,Yi)=>{var ak=v5(),aU0=DX(),oU0=iW(),tU0=QK(),eU0=ak("".charAt),qi=ak("".charCodeAt),JL0=ak("".slice),Xi=function(J){return function(Q,Z){var q=oU0(tU0(Q)),Y=aU0(Z),$=q.length,W,G;if(Y<0||Y>=$)return J?"":void 0;return W=qi(q,Y),W<55296||W>56319||Y+1===$||(G=qi(q,Y+1))<56320||G>57343?J?eU0(q,Y):W:J?JL0(q,Y,Y+2):(W-55296<<10)+(G-56320)+65536}};Yi.exports={codeAt:Xi(!1),charAt:Xi(!0)}});var Wi=F0((Bp0,$i)=>{var QL0=Ki().charAt;$i.exports=function(J,Q,Z){return Q+(Z?QL0(J,Q).length:1)}});var Jw=F0((Np0,Gi)=>{var ek=v5(),ZL0=uW(),qL0=Math.floor,ok=ek("".charAt),XL0=ek("".replace),tk=ek("".slice),YL0=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,KL0=/\$([$&'`]|\d{1,2})/g;Gi.exports=function(J,Q,Z,q,Y,$){var W=Z+J.length,G=q.length,z=KL0;if(Y!==void 0)Y=ZL0(Y),z=YL0;return XL0($,z,function(U,F){var B;switch(ok(F,0)){case"$":return"$";case"&":return J;case"`":return tk(Q,0,Z);case"'":return tk(Q,W);case"<":B=Y[tk(F,1,-1)];break;default:var M=+F;if(M===0)return U;if(M>G){var O=qL0(M/10);if(O===0)return U;if(O<=G)return q[O-1]===void 0?ok(F,1):q[O-1]+ok(F,1);return U}B=q[M-1]}return B===void 0?"":B})}});var Ui=F0((Mp0,zi)=>{var Hi=AQ(),$L0=VX(),WL0=pJ(),GL0=JK(),HL0=XM(),zL0=TypeError;zi.exports=function(J,Q){var Z=J.exec;if(WL0(Z)){var q=Hi(Z,J,Q);if(q!==null)$L0(q);return q}if(GL0(J)==="RegExp")return Hi(HL0,J,Q);throw new zL0("RegExp#exec called on incompatible receiver")}});var Mi=F0(()=>{var UL0=al(),Li=AQ(),YM=v5(),LL0=Zi(),FL0=cJ(),BL0=VX(),NL0=pJ(),ML0=R3(),OL0=DX(),VL0=Ak(),sW=iW(),DL0=QK(),RL0=Wi(),jL0=mN(),_L0=Jw(),EL0=Ui(),CL0=kQ(),Zw=CL0("replace"),AL0=Math.max,kL0=Math.min,wL0=YM([].concat),Qw=YM([].push),Fi=YM("".indexOf),Bi=YM("".slice),IL0=function(J){return J===void 0?J:String(J)},PL0=function(){return"a".replace(/./,"$0")==="$0"}(),Ni=function(){if(/./[Zw])return/./[Zw]("a","$0")==="";return!1}(),TL0=!FL0(function(){var J=/./;return J.exec=function(){var Q=[];return Q.groups={a:"7"},Q},"".replace(J,"$<a>")!=="7"});LL0("replace",function(J,Q,Z){var q=Ni?"$":"$0";return[function Y($,W){var G=DL0(this),z=ML0($)?void 0:jL0($,Zw);return z?Li(z,$,G,W):Li(Q,sW(G),$,W)},function(Y,$){var W=BL0(this),G=sW(Y);if(typeof $=="string"&&Fi($,q)===-1&&Fi($,"$<")===-1){var z=Z(Q,W,G,$);if(z.done)return z.value}var U=NL0($);if(!U)$=sW($);var F=W.global,B;if(F)B=W.unicode,W.lastIndex=0;var M=[],O;while(!0){if(O=EL0(W,G),O===null)break;if(Qw(M,O),!F)break;var R=sW(O[0]);if(R==="")W.lastIndex=RL0(G,VL0(W.lastIndex),B)}var V="",E=0;for(var _=0;_<M.length;_++){O=M[_];var A=sW(O[0]),w=AL0(kL0(OL0(O.index),G.length),0),T=[],k;for(var P=1;P<O.length;P++)Qw(T,IL0(O[P]));var y=O.groups;if(U){var p=wL0([A],T,w,G);if(y!==void 0)Qw(p,y);k=sW(UL0($,void 0,p))}else k=_L0(A,G,w,T,y,$);if(w>=E)V+=Bi(G,E,w)+k,E=w+A.length}return V+Bi(G,E)}]},!TL0||!PL0||Ni)});var Vi=F0((Dp0,Oi)=>{var bL0=OX(),xL0=JK(),yL0=kQ(),vL0=yL0("match");Oi.exports=function(J){var Q;return bL0(J)&&((Q=J[vL0])!==void 0?!!Q:xL0(J)==="RegExp")}});var ji=F0((Rp0,Ri)=>{var SL0=AQ(),fL0=uZ(),gL0=nA(),mL0=hk(),Di=RegExp.prototype;Ri.exports=function(J){var Q=J.flags;return Q===void 0&&!("flags"in Di)&&!fL0(J,"flags")&&gL0(Di,J)?SL0(mL0,J):Q}});var Ci=F0(()=>{var hL0=qK(),uL0=AQ(),Xw=v5(),_i=QK(),cL0=pJ(),pL0=R3(),dL0=Vi(),rW=iW(),lL0=mN(),iL0=ji(),nL0=Jw(),sL0=kQ(),rL0=Qk(),aL0=sL0("replace"),oL0=TypeError,qw=Xw("".indexOf),tL0=Xw("".replace),Ei=Xw("".slice),eL0=Math.max;hL0({target:"String",proto:!0},{replaceAll:function J(Q,Z){var q=_i(this),Y,$,W,G,z,U,F,B,M,O=0,R=0,V="";if(!pL0(Q)){if(Y=dL0(Q),Y){if($=rW(_i(iL0(Q))),!~qw($,"g"))throw new oL0("`.replaceAll` does not allow non-global regexes")}if(W=lL0(Q,aL0),W)return uL0(W,Q,q,Z);else if(rL0&&Y)return tL0(rW(q),Q,Z)}if(G=rW(q),z=rW(Q),U=cL0(Z),!U)Z=rW(Z);F=z.length,B=eL0(1,F),O=qw(G,z);while(O!==-1)M=U?rW(Z(z,O,G)):nL0(z,G,O,[],void 0,Z),V+=Ei(G,R,O)+M,R=O+F,O=O+B>G.length?-1:qw(G,z,O+B);if(R<G.length)V+=Ei(G,R);return V}})});var ki=F0((Ep0,Ai)=>{sk();Mi();Ci();var JF0=lW();Ai.exports=JF0("String","replaceAll")});var Ii=F0((Cp0,wi)=>{var QF0=ki();wi.exports=QF0});var fa=F0((SJ6,gO)=>{var zP=function(){var J=String.fromCharCode,Q="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Z="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",q={};function Y(W,G){if(!q[W]){q[W]={};for(var z=0;z<W.length;z++)q[W][W.charAt(z)]=z}return q[W][G]}var $={compressToBase64:function(W){if(W==null)return"";var G=$._compress(W,6,function(z){return Q.charAt(z)});switch(G.length%4){default:case 0:return G;case 1:return G+"===";case 2:return G+"==";case 3:return G+"="}},decompressFromBase64:function(W){if(W==null)return"";if(W=="")return null;return $._decompress(W.length,32,function(G){return Y(Q,W.charAt(G))})},compressToUTF16:function(W){if(W==null)return"";return $._compress(W,15,function(G){return J(G+32)})+" "},decompressFromUTF16:function(W){if(W==null)return"";if(W=="")return null;return $._decompress(W.length,16384,function(G){return W.charCodeAt(G)-32})},compressToUint8Array:function(W){var G=$.compress(W),z=new Uint8Array(G.length*2);for(var U=0,F=G.length;U<F;U++){var B=G.charCodeAt(U);z[U*2]=B>>>8,z[U*2+1]=B%256}return z},decompressFromUint8Array:function(W){if(W===null||W===void 0)return $.decompress(W);else{var G=new Array(W.length/2);for(var z=0,U=G.length;z<U;z++)G[z]=W[z*2]*256+W[z*2+1];var F=[];return G.forEach(function(B){F.push(J(B))}),$.decompress(F.join(""))}},compressToEncodedURIComponent:function(W){if(W==null)return"";return $._compress(W,6,function(G){return Z.charAt(G)})},decompressFromEncodedURIComponent:function(W){if(W==null)return"";if(W=="")return null;return W=W.replace(/ /g,"+"),$._decompress(W.length,32,function(G){return Y(Z,W.charAt(G))})},compress:function(W){return $._compress(W,16,function(G){return J(G)})},_compress:function(W,G,z){if(W==null)return"";var U,F,B={},M={},O="",R="",V="",E=2,_=3,A=2,w=[],T=0,k=0,P;for(P=0;P<W.length;P+=1){if(O=W.charAt(P),!Object.prototype.hasOwnProperty.call(B,O))B[O]=_++,M[O]=!0;if(R=V+O,Object.prototype.hasOwnProperty.call(B,R))V=R;else{if(Object.prototype.hasOwnProperty.call(M,V)){if(V.charCodeAt(0)<256){for(U=0;U<A;U++)if(T=T<<1,k==G-1)k=0,w.push(z(T)),T=0;else k++;F=V.charCodeAt(0);for(U=0;U<8;U++){if(T=T<<1|F&1,k==G-1)k=0,w.push(z(T)),T=0;else k++;F=F>>1}}else{F=1;for(U=0;U<A;U++){if(T=T<<1|F,k==G-1)k=0,w.push(z(T)),T=0;else k++;F=0}F=V.charCodeAt(0);for(U=0;U<16;U++){if(T=T<<1|F&1,k==G-1)k=0,w.push(z(T)),T=0;else k++;F=F>>1}}if(E--,E==0)E=Math.pow(2,A),A++;delete M[V]}else{F=B[V];for(U=0;U<A;U++){if(T=T<<1|F&1,k==G-1)k=0,w.push(z(T)),T=0;else k++;F=F>>1}}if(E--,E==0)E=Math.pow(2,A),A++;B[R]=_++,V=String(O)}}if(V!==""){if(Object.prototype.hasOwnProperty.call(M,V)){if(V.charCodeAt(0)<256){for(U=0;U<A;U++)if(T=T<<1,k==G-1)k=0,w.push(z(T)),T=0;else k++;F=V.charCodeAt(0);for(U=0;U<8;U++){if(T=T<<1|F&1,k==G-1)k=0,w.push(z(T)),T=0;else k++;F=F>>1}}else{F=1;for(U=0;U<A;U++){if(T=T<<1|F,k==G-1)k=0,w.push(z(T)),T=0;else k++;F=0}F=V.charCodeAt(0);for(U=0;U<16;U++){if(T=T<<1|F&1,k==G-1)k=0,w.push(z(T)),T=0;else k++;F=F>>1}}if(E--,E==0)E=Math.pow(2,A),A++;delete M[V]}else{F=B[V];for(U=0;U<A;U++){if(T=T<<1|F&1,k==G-1)k=0,w.push(z(T)),T=0;else k++;F=F>>1}}if(E--,E==0)E=Math.pow(2,A),A++}F=2;for(U=0;U<A;U++){if(T=T<<1|F&1,k==G-1)k=0,w.push(z(T)),T=0;else k++;F=F>>1}while(!0)if(T=T<<1,k==G-1){w.push(z(T));break}else k++;return w.join("")},decompress:function(W){if(W==null)return"";if(W=="")return null;return $._decompress(W.length,32768,function(G){return W.charCodeAt(G)})},_decompress:function(W,G,z){var U=[],F,B=4,M=4,O=3,R="",V=[],E,_,A,w,T,k,P,y={val:z(0),position:G,index:1};for(E=0;E<3;E+=1)U[E]=E;A=0,T=Math.pow(2,2),k=1;while(k!=T){if(w=y.val&y.position,y.position>>=1,y.position==0)y.position=G,y.val=z(y.index++);A|=(w>0?1:0)*k,k<<=1}switch(F=A){case 0:A=0,T=Math.pow(2,8),k=1;while(k!=T){if(w=y.val&y.position,y.position>>=1,y.position==0)y.position=G,y.val=z(y.index++);A|=(w>0?1:0)*k,k<<=1}P=J(A);break;case 1:A=0,T=Math.pow(2,16),k=1;while(k!=T){if(w=y.val&y.position,y.position>>=1,y.position==0)y.position=G,y.val=z(y.index++);A|=(w>0?1:0)*k,k<<=1}P=J(A);break;case 2:return""}U[3]=P,_=P,V.push(P);while(!0){if(y.index>W)return"";A=0,T=Math.pow(2,O),k=1;while(k!=T){if(w=y.val&y.position,y.position>>=1,y.position==0)y.position=G,y.val=z(y.index++);A|=(w>0?1:0)*k,k<<=1}switch(P=A){case 0:A=0,T=Math.pow(2,8),k=1;while(k!=T){if(w=y.val&y.position,y.position>>=1,y.position==0)y.position=G,y.val=z(y.index++);A|=(w>0?1:0)*k,k<<=1}U[M++]=J(A),P=M-1,B--;break;case 1:A=0,T=Math.pow(2,16),k=1;while(k!=T){if(w=y.val&y.position,y.position>>=1,y.position==0)y.position=G,y.val=z(y.index++);A|=(w>0?1:0)*k,k<<=1}U[M++]=J(A),P=M-1,B--;break;case 2:return V.join("")}if(B==0)B=Math.pow(2,O),O++;if(U[P])R=U[P];else if(P===M)R=_+_.charAt(0);else return null;if(V.push(R),U[M++]=_+R.charAt(0),B--,_=R,B==0)B=Math.pow(2,O),O++}}};return $}();if(typeof define==="function"&&define.amd)define(function(){return zP});else if(typeof gO!=="undefined"&&gO!=null)gO.exports=zP;else if(typeof angular!=="undefined"&&angular!=null)angular.module("LZString",[]).factory("LZString",function(){return zP})});var eT=F0((DR0)=>{var J=v(o(),1);(function(){var Q=Symbol.for("react.element"),Z=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),Y=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),W=Symbol.for("react.provider"),G=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),O=Symbol.for("react.offscreen"),R=Symbol.iterator,V="@@iterator";function E(l){if(l===null||typeof l!=="object")return null;var R0=R&&l[R]||l[V];if(typeof R0==="function")return R0;return null}var _=J.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function A(l){{for(var R0=arguments.length,f0=new Array(R0>1?R0-1:0),m=1;m<R0;m++)f0[m-1]=arguments[m];w("error",l,f0)}}function w(l,R0,f0){{var m=_.ReactDebugCurrentFrame,G0=m.getStackAddendum();if(G0!=="")R0+="%s",f0=f0.concat([G0]);var M0=f0.map(function(w0){return String(w0)});M0.unshift("Warning: "+R0),Function.prototype.apply.call(console[l],console,M0)}}var T=!1,k=!1,P=!1,y=!1,p=!1,s;s=Symbol.for("react.module.reference");function c(l){if(typeof l==="string"||typeof l==="function")return!0;if(l===q||l===$||p||l===Y||l===U||l===F||y||l===O||T||k||P)return!0;if(typeof l==="object"&&l!==null){if(l.$$typeof===M||l.$$typeof===B||l.$$typeof===W||l.$$typeof===G||l.$$typeof===z||l.$$typeof===s||l.getModuleId!==void 0)return!0}return!1}function t(l,R0,f0){var m=l.displayName;if(m)return m;var G0=R0.displayName||R0.name||"";return G0!==""?f0+"("+G0+")":f0}function X0(l){return l.displayName||"Context"}function J0(l){if(l==null)return null;if(typeof l.tag==="number")A("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue.");if(typeof l==="function")return l.displayName||l.name||null;if(typeof l==="string")return l;switch(l){case q:return"Fragment";case Z:return"Portal";case $:return"Profiler";case Y:return"StrictMode";case U:return"Suspense";case F:return"SuspenseList"}if(typeof l==="object")switch(l.$$typeof){case G:var R0=l;return X0(R0)+".Consumer";case W:var f0=l;return X0(f0._context)+".Provider";case z:return t(l,l.render,"ForwardRef");case B:var m=l.displayName||null;if(m!==null)return m;return J0(l.type)||"Memo";case M:{var G0=l,M0=G0._payload,w0=G0._init;try{return J0(w0(M0))}catch(g0){return null}}}return null}var Q0=Object.assign,a=0,_0,T0,r0,C0,k0,b0,K6;function b6(){}b6.__reactDisabledLog=!0;function I8(){{if(a===0){_0=console.log,T0=console.info,r0=console.warn,C0=console.error,k0=console.group,b0=console.groupCollapsed,K6=console.groupEnd;var l={configurable:!0,enumerable:!0,value:b6,writable:!0};Object.defineProperties(console,{info:l,log:l,warn:l,error:l,group:l,groupCollapsed:l,groupEnd:l})}a++}}function _6(){{if(a--,a===0){var l={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:Q0({},l,{value:_0}),info:Q0({},l,{value:T0}),warn:Q0({},l,{value:r0}),error:Q0({},l,{value:C0}),group:Q0({},l,{value:k0}),groupCollapsed:Q0({},l,{value:b0}),groupEnd:Q0({},l,{value:K6})})}if(a<0)A("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var x6=_.ReactCurrentDispatcher,c6;function $8(l,R0,f0){{if(c6===void 0)try{throw Error()}catch(G0){var m=G0.stack.trim().match(/\n( *(at )?)/);c6=m&&m[1]||""}return"\n"+c6+l}}var G6=!1,i6;{var I6=typeof WeakMap==="function"?WeakMap:Map;i6=new I6}function J9(l,R0){if(!l||G6)return"";{var f0=i6.get(l);if(f0!==void 0)return f0}var m;G6=!0;var G0=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var M0;M0=x6.current,x6.current=null,I8();try{if(R0){var w0=function(){throw Error()};if(Object.defineProperty(w0.prototype,"props",{set:function(){throw Error()}}),typeof Reflect==="object"&&Reflect.construct){try{Reflect.construct(w0,[])}catch(T8){m=T8}Reflect.construct(l,[],w0)}else{try{w0.call()}catch(T8){m=T8}l.call(w0.prototype)}}else{try{throw Error()}catch(T8){m=T8}l()}}catch(T8){if(T8&&m&&typeof T8.stack==="string"){var g0=T8.stack.split("\n"),N6=m.stack.split("\n"),h0=g0.length-1,Z6=N6.length-1;while(h0>=1&&Z6>=0&&g0[h0]!==N6[Z6])Z6--;for(;h0>=1&&Z6>=0;h0--,Z6--)if(g0[h0]!==N6[Z6]){if(h0!==1||Z6!==1)do if(h0--,Z6--,Z6<0||g0[h0]!==N6[Z6]){var _8="\n"+g0[h0].replace(" at new "," at ");if(l.displayName&&_8.includes("<anonymous>"))_8=_8.replace("<anonymous>",l.displayName);if(typeof l==="function")i6.set(l,_8);return _8}while(h0>=1&&Z6>=0);break}}}finally{G6=!1,x6.current=M0,_6(),Error.prepareStackTrace=G0}var N8=l?l.displayName||l.name:"",E8=N8?$8(N8):"";if(typeof l==="function")i6.set(l,E8);return E8}function R8(l,R0,f0){return J9(l,!1)}function j8(l){var R0=l.prototype;return!!(R0&&R0.isReactComponent)}function W6(l,R0,f0){if(l==null)return"";if(typeof l==="function")return J9(l,j8(l));if(typeof l==="string")return $8(l);switch(l){case U:return $8("Suspense");case F:return $8("SuspenseList")}if(typeof l==="object")switch(l.$$typeof){case z:return R8(l.render);case B:return W6(l.type,R0,f0);case M:{var m=l,G0=m._payload,M0=m._init;try{return W6(M0(G0),R0,f0)}catch(w0){}}}return""}var S6=Object.prototype.hasOwnProperty,f8={},u8=_.ReactDebugCurrentFrame;function W9(l){if(l){var R0=l._owner,f0=W6(l.type,l._source,R0?R0.type:null);u8.setExtraStackFrame(f0)}else u8.setExtraStackFrame(null)}function j7(l,R0,f0,m,G0){{var M0=Function.call.bind(S6);for(var w0 in l)if(M0(l,w0)){var g0=void 0;try{if(typeof l[w0]!=="function"){var N6=Error((m||"React class")+": "+f0+" type `"+w0+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof l[w0]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw N6.name="Invariant Violation",N6}g0=l[w0](R0,w0,m,f0,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(h0){g0=h0}if(g0&&!(g0 instanceof Error))W9(G0),A("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",m||"React class",f0,w0,typeof g0),W9(null);if(g0 instanceof Error&&!(g0.message in f8))f8[g0.message]=!0,W9(G0),A("Failed %s type: %s",f0,g0.message),W9(null)}}}var Y5=Array.isArray;function kJ(l){return Y5(l)}function m5(l){{var R0=typeof Symbol==="function"&&Symbol.toStringTag,f0=R0&&l[Symbol.toStringTag]||l.constructor.name||"Object";return f0}}function _7(l){try{return h5(l),!1}catch(R0){return!0}}function h5(l){return""+l}function J7(l){if(_7(l))return A("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",m5(l)),h5(l)}var G9=_.ReactCurrentOwner,E7={key:!0,ref:!0,__self:!0,__source:!0},C7,f4,x0;x0={};function X6(l){if(S6.call(l,"ref")){var R0=Object.getOwnPropertyDescriptor(l,"ref").get;if(R0&&R0.isReactWarning)return!1}return l.ref!==void 0}function E6(l){if(S6.call(l,"key")){var R0=Object.getOwnPropertyDescriptor(l,"key").get;if(R0&&R0.isReactWarning)return!1}return l.key!==void 0}function W8(l,R0){if(typeof l.ref==="string"&&G9.current&&R0&&G9.current.stateNode!==R0){var f0=J0(G9.current.type);if(!x0[f0])A('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',J0(G9.current.type),l.ref),x0[f0]=!0}}function c8(l,R0){{var f0=function(){if(!C7)C7=!0,A("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",R0)};f0.isReactWarning=!0,Object.defineProperty(l,"key",{get:f0,configurable:!0})}}function K5(l,R0){{var f0=function(){if(!f4)f4=!0,A("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",R0)};f0.isReactWarning=!0,Object.defineProperty(l,"ref",{get:f0,configurable:!0})}}var w9=function(l,R0,f0,m,G0,M0,w0){var g0={$$typeof:Q,type:l,key:R0,ref:f0,props:w0,_owner:M0};if(g0._store={},Object.defineProperty(g0._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(g0,"_self",{configurable:!1,enumerable:!1,writable:!1,value:m}),Object.defineProperty(g0,"_source",{configurable:!1,enumerable:!1,writable:!1,value:G0}),Object.freeze)Object.freeze(g0.props),Object.freeze(g0);return g0};function wJ(l,R0,f0,m,G0){{var M0,w0={},g0=null,N6=null;if(f0!==void 0)J7(f0),g0=""+f0;if(E6(R0))J7(R0.key),g0=""+R0.key;if(X6(R0))N6=R0.ref,W8(R0,G0);for(M0 in R0)if(S6.call(R0,M0)&&!E7.hasOwnProperty(M0))w0[M0]=R0[M0];if(l&&l.defaultProps){var h0=l.defaultProps;for(M0 in h0)if(w0[M0]===void 0)w0[M0]=h0[M0]}if(g0||N6){var Z6=typeof l==="function"?l.displayName||l.name||"Unknown":l;if(g0)c8(w0,Z6);if(N6)K5(w0,Z6)}return w9(l,g0,N6,G0,m,G9.current,w0)}}var{ReactCurrentOwner:P8,ReactDebugCurrentFrame:u5}=_;function G8(l){if(l){var R0=l._owner,f0=W6(l.type,l._source,R0?R0.type:null);u5.setExtraStackFrame(f0)}else u5.setExtraStackFrame(null)}var s8=!1;function U1(l){return typeof l==="object"&&l!==null&&l.$$typeof===Q}function L1(){{if(P8.current){var l=J0(P8.current.type);if(l)return"\n\nCheck the render method of `"+l+"`."}return""}}function aQ(l){{if(l!==void 0){var R0=l.fileName.replace(/^.*[\\\/]/,""),f0=l.lineNumber;return"\n\nCheck your code at "+R0+":"+f0+"."}return""}}var oQ={};function cX(l){{var R0=L1();if(!R0){var f0=typeof l==="string"?l:l.displayName||l.name;if(f0)R0="\n\nCheck the top-level render call using <"+f0+">."}return R0}}function A7(l,R0){{if(!l._store||l._store.validated||l.key!=null)return;l._store.validated=!0;var f0=cX(R0);if(oQ[f0])return;oQ[f0]=!0;var m="";if(l&&l._owner&&l._owner!==P8.current)m=" It was passed a child from "+J0(l._owner.type)+".";G8(l),A('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',f0,m),G8(null)}}function g4(l,R0){{if(typeof l!=="object")return;if(kJ(l))for(var f0=0;f0<l.length;f0++){var m=l[f0];if(U1(m))A7(m,R0)}else if(U1(l)){if(l._store)l._store.validated=!0}else if(l){var G0=E(l);if(typeof G0==="function"){if(G0!==l.entries){var M0=G0.call(l),w0;while(!(w0=M0.next()).done)if(U1(w0.value))A7(w0.value,R0)}}}}}function Gq(l){{var R0=l.type;if(R0===null||R0===void 0||typeof R0==="string")return;var f0;if(typeof R0==="function")f0=R0.propTypes;else if(typeof R0==="object"&&(R0.$$typeof===z||R0.$$typeof===B))f0=R0.propTypes;else return;if(f0){var m=J0(R0);j7(f0,l.props,"prop",m,l)}else if(R0.PropTypes!==void 0&&!s8){s8=!0;var G0=J0(R0);A("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",G0||"Unknown")}if(typeof R0.getDefaultProps==="function"&&!R0.getDefaultProps.isReactClassApproved)A("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function Hq(l){{var R0=Object.keys(l.props);for(var f0=0;f0<R0.length;f0++){var m=R0[f0];if(m!=="children"&&m!=="key"){G8(l),A("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",m),G8(null);break}}if(l.ref!==null)G8(l),A("Invalid attribute `ref` supplied to `React.Fragment`."),G8(null)}}var F1={};function K4(l,R0,f0,m,G0,M0){{var w0=c(l);if(!w0){var g0="";if(l===void 0||typeof l==="object"&&l!==null&&Object.keys(l).length===0)g0+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.";var N6=aQ(G0);if(N6)g0+=N6;else g0+=L1();var h0;if(l===null)h0="null";else if(kJ(l))h0="array";else if(l!==void 0&&l.$$typeof===Q)h0="<"+(J0(l.type)||"Unknown")+" />",g0=" Did you accidentally export a JSX literal instead of a component?";else h0=typeof l;A("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",h0,g0)}var Z6=wJ(l,R0,f0,G0,M0);if(Z6==null)return Z6;if(w0){var _8=R0.children;if(_8!==void 0)if(m)if(kJ(_8)){for(var N8=0;N8<_8.length;N8++)g4(_8[N8],l);if(Object.freeze)Object.freeze(_8)}else A("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else g4(_8,l)}if(S6.call(R0,"key")){var E8=J0(l),T8=Object.keys(R0).filter(function($5){return $5!=="key"}),k7=T8.length>0?"{key: someKey, "+T8.join(": ..., ")+": ...}":"{key: someKey}";if(!F1[E8+k7]){var w7=T8.length>0?"{"+T8.join(": ..., ")+": ...}":"{}";A('A props object containing a "key" prop is being spread into JSX:\n  let props = %s;\n  <%s {...props} />\nReact keys must be passed directly to JSX without using spread:\n  let props = %s;\n  <%s key={someKey} {...props} />',k7,E8,w7,E8),F1[E8+k7]=!0}}if(l===q)Hq(Z6);else Gq(Z6);return Z6}}var $4=K4;DR0.Fragment=q,DR0.jsxDEV=$4})()});var dU=v(o(),1),G60=v(qE(),1);async function XE(J,Q){const{url:Z,style:q="normal",weight:Y="500",display:$,featureSettings:W,stretch:G,unicodeRange:z,variant:U,format:F}=Q,B={style:q,weight:Y,display:$,featureSettings:W,stretch:G,unicodeRange:z,variant:U},M=new FontFace(J,`url(${Z})`,B);return await M.load(),document.fonts.add(M),M.$$_url=Z,M.$$_fontface=`
@font-face {
	font-family: ${M.family};
	font-stretch: ${M.stretch};
	font-weight: ${M.weight};
	font-style: ${M.style};
	src: url("${Z}") format("${F}")
}`,M}var zf=function(J){return J&&typeof J==="object"&&"parents"in J},YB=function(J){for(let Q=0,Z=J.parents.length;Q<Z;Q++)if(J.parents[Q].__unsafe__getWithoutCapture(!0),J.parents[Q].lastChangedEpoch!==J.parentEpochs[Q])return!0;return!1},KB=function(J,Q){return J===Q||Object.is(J,Q)||Boolean(J&&Q&&typeof J.equals==="function"&&J.equals(Q))},S7=function(J,Q){const Z=Symbol.for(`com.tldraw.state/${J}`),q=globalThis;return q[Z]??=Q(),q[Z]},i$=(J,Q)=>{if(!J.children.remove(Q))return;if(J.children.isEmpty&&zf(J))for(let Z=0,q=J.parents.length;Z<q;Z++)i$(J.parents[Z],J)},cH=(J,Q)=>{if(!J.children.add(Q))return;if(zf(J))for(let Z=0,q=J.parents.length;Z<q;Z++)cH(J.parents[Z],J)},n5=S7("empty_array",()=>Object.freeze([]));class cq{arraySize=0;array=Array(8);set=null;get isEmpty(){if(this.array)return this.arraySize===0;if(this.set)return this.set.size===0;throw new Error("no set or array")}add(J){if(this.array){if(this.array.indexOf(J)!==-1)return!1;if(this.arraySize<8)return this.array[this.arraySize]=J,this.arraySize++,!0;else return this.set=new Set(this.array),this.array=null,this.set.add(J),!0}if(this.set){if(this.set.has(J))return!1;return this.set.add(J),!0}throw new Error("no set or array")}remove(J){if(this.array){const Q=this.array.indexOf(J);if(Q===-1)return!1;if(this.array[Q]=void 0,this.arraySize--,Q!==this.arraySize)this.array[Q]=this.array[this.arraySize],this.array[this.arraySize]=void 0;return!0}if(this.set){if(!this.set.has(J))return!1;return this.set.delete(J),!0}throw new Error("no set or array")}visit(J){if(this.array){for(let Q=0;Q<this.arraySize;Q++){const Z=this.array[Q];if(typeof Z!=="undefined")J(Z)}return}if(this.set){this.set.forEach(J);return}throw new Error("no set or array")}has(J){if(this.array)return this.array.indexOf(J)!==-1;else return this.set.has(J)}clear(){if(this.set)this.set.clear();else this.arraySize=0,this.array=[]}size(){if(this.set)return this.set.size;else return this.arraySize}}var r9=Symbol.for("com.tldraw.state/RESET_VALUE");class pH{constructor(J){this.capacity=J,this.buffer=new Array(J)}index=0;buffer;pushEntry(J,Q,Z){if(Z===void 0)return;if(Z===r9){this.clear();return}this.buffer[this.index]=[J,Q,Z],this.index=(this.index+1)%this.capacity}clear(){this.index=0,this.buffer.fill(void 0)}getChangesSince(J){const{index:Q,capacity:Z,buffer:q}=this;for(let Y=0;Y<Z;Y++){const $=(Q-1+Z-Y)%Z,W=q[$];if(!W)return r9;const[G,z]=W;if(Y===0&&J>=z)return[];if(G<=J&&J<z){const U=Y+1,F=new Array(U);for(let B=0;B<U;B++)F[B]=q[($+B)%Z][2];return F}}return r9}}var $B=function(J){a9.stack=new Uf(a9.stack,J),J.parentSet.clear()},WB=function(){const J=a9.stack;if(a9.stack=J.below,J.offset<J.child.parents.length){for(let Q=J.offset;Q<J.child.parents.length;Q++){const Z=J.child.parents[Q];if(!J.child.parentSet.has(Z))i$(Z,J.child)}J.child.parents.length=J.offset,J.child.parentEpochs.length=J.offset}if(J.maybeRemoved)for(let Q=0;Q<J.maybeRemoved.length;Q++){const Z=J.maybeRemoved[Q];if(!J.child.parentSet.has(Z))i$(Z,J.child)}},n$=function(J){if(a9.stack){if(a9.stack.child.parentSet.has(J))return;if(a9.stack.child.parentSet.add(J),a9.stack.child.isActivelyListening)cH(J,a9.stack.child);if(a9.stack.offset<a9.stack.child.parents.length){const Z=a9.stack.child.parents[a9.stack.offset];if(Z!==J)if(!a9.stack.maybeRemoved)a9.stack.maybeRemoved=[Z];else a9.stack.maybeRemoved.push(Z)}a9.stack.child.parents[a9.stack.offset]=J,a9.stack.child.parentEpochs[a9.stack.offset]=J.lastChangedEpoch,a9.stack.offset++}};class Uf{constructor(J,Q){this.below=J,this.child=Q}offset=0;maybeRemoved}var a9=S7("capture",()=>({stack:null}));var BQ=-1;var M4=function(J,Q,Z){const q=new s4(J,Q,Z);return q.attach(),q.scheduleEffect(),()=>{q.detach()}},YE=function(J,Q,Z){const q=new s4(J,Q,Z);return{scheduler:q,start:(Y)=>{const $=Y?.force??!1;if(q.attach(),$)q.scheduleEffect();else q.maybeScheduleEffect()},stop:()=>{q.detach()}}};class Lf{constructor(J,Q,Z){this.name=J,this.runEffect=Q,this._scheduleEffect=Z?.scheduleEffect}_isActivelyListening=!1;get isActivelyListening(){return this._isActivelyListening}lastTraversedEpoch=BQ;lastReactedEpoch=BQ;_scheduleCount=0;get scheduleCount(){return this._scheduleCount}parentSet=new cq;parentEpochs=[];parents=[];_scheduleEffect;maybeScheduleEffect(){if(!this._isActivelyListening)return;if(this.lastReactedEpoch===s5())return;if(this.parents.length&&!YB(this)){this.lastReactedEpoch=s5();return}this.scheduleEffect()}scheduleEffect(){if(this._scheduleCount++,this._scheduleEffect)this._scheduleEffect(this.maybeExecute);else this.execute()}maybeExecute=()=>{if(!this._isActivelyListening)return;this.execute()};attach(){this._isActivelyListening=!0;for(let J=0,Q=this.parents.length;J<Q;J++)cH(this.parents[J],this)}detach(){this._isActivelyListening=!1;for(let J=0,Q=this.parents.length;J<Q;J++)i$(this.parents[J],this)}execute(){try{$B(this);const J=this.runEffect(this.lastReactedEpoch);return this.lastReactedEpoch=s5(),J}finally{WB()}}}var s4=S7("EffectScheduler",()=>Lf);var s5=function(){return vJ.globalEpoch},Bf=function(J){if(vJ.globalIsReacting)throw new Error("cannot change atoms during reaction cycle");try{vJ.globalIsReacting=!0;const Q=new Set,Z=(q)=>{if(q.lastTraversedEpoch===vJ.globalEpoch)return;if(q.lastTraversedEpoch=vJ.globalEpoch,q instanceof s4)Q.add(q);else q.children.visit(Z)};for(let q of J)q.children.visit(Z);for(let q of Q)q.maybeScheduleEffect()}finally{vJ.globalIsReacting=!1}},Nf=function(J,Q){if(!vJ.currentTransaction)Bf([J]);else if(!vJ.currentTransaction.initialAtomValues.has(J))vJ.currentTransaction.initialAtomValues.set(J,Q)},Mf=function(){vJ.globalEpoch++},KE=function(J){const Q=new Ff(vJ.currentTransaction);vJ.currentTransaction=Q;try{let Z=!1;const q=J(()=>Z=!0);if(Z)Q.abort();else Q.commit();return q}catch(Z){throw Q.abort(),Z}finally{vJ.currentTransaction=vJ.currentTransaction.parent}},I5=function(J){if(vJ.currentTransaction)return J();return KE(J)};class Ff{constructor(J){this.parent=J}initialAtomValues=new Map;get isRoot(){return this.parent===null}commit(){if(this.isRoot){const J=this.initialAtomValues;this.initialAtomValues=new Map,Bf(J.keys())}else this.initialAtomValues.forEach((J,Q)=>{if(!this.parent.initialAtomValues.has(Q))this.parent.initialAtomValues.set(Q,J)})}abort(){vJ.globalEpoch++,this.initialAtomValues.forEach((J,Q)=>{Q.set(J),Q.historyBuffer?.clear()}),this.commit()}}var vJ=S7("transactions",()=>({globalEpoch:BQ+1,globalIsReacting:!1,currentTransaction:null}));var U9=function(J,Q,Z){return new Vf(J,Q,Z)};class Of{constructor(J,Q,Z){if(this.name=J,this.current=Q,this.isEqual=Z?.isEqual??null,!Z)return;if(Z.historyLength)this.historyBuffer=new pH(Z.historyLength);this.computeDiff=Z.computeDiff}isEqual;computeDiff;lastChangedEpoch=s5();children=new cq;historyBuffer;__unsafe__getWithoutCapture(J){return this.current}get(){return n$(this),this.current}set(J,Q){if(this.isEqual?.(this.current,J)??KB(this.current,J))return this.current;if(Mf(),this.historyBuffer)this.historyBuffer.pushEntry(this.lastChangedEpoch,s5(),Q??this.computeDiff?.(this.current,J,this.lastChangedEpoch,s5())??r9);this.lastChangedEpoch=s5();const Z=this.current;return this.current=J,Nf(this,Z),J}update(J){return this.set(J(this.current))}getDiffSince(J){if(n$(this),J>=this.lastChangedEpoch)return n5;return this.historyBuffer?.getChangesSince(J)??r9}}var Vf=S7("Atom",()=>Of);var Rf=function(){if(Df)return;Df=!0,console.warn(`Using \`@computed\` as a decorator for getters is deprecated and will be removed in the near future. Please refactor to use \`@computed\` as a decorator for methods.

// Before
@computed
get foo() {
	return 'foo'
}

// After
@computed
getFoo() {
	return 'foo'
}
`)},Df=!1;var pq=function(J,Q){return new $E(J,Q)},uZ0=function(J={},Q,Z,q){const Y=q.value,$=Symbol.for("__@tldraw/state__computed__"+Z);return q.value=function(){let W=this[$];if(!W)W=new GB(Z,Y.bind(this),J),Object.defineProperty(this,$,{enumerable:!1,configurable:!1,writable:!1,value:W});return W.get()},q.value[pZ0]=!0,q},jf=function(J={},Q,Z,q){if(q.get)return Rf(),cZ0(J,Q,Z,q);else return uZ0(J,Q,Z,q)},cZ0=function(J={},Q,Z,q){const Y=q.get,$=Symbol.for("__@tldraw/state__computed__"+Z);return q.get=function(){let W=this[$];if(!W)W=new GB(Z,Y.bind(this),J),Object.defineProperty(this,$,{enumerable:!1,configurable:!1,writable:!1,value:W});return W.get()},q};var z0=function(){if(arguments.length===1){const J=arguments[0];return(Q,Z,q)=>jf(J,Q,Z,q)}else if(typeof arguments[0]==="string")return new GB(arguments[0],arguments[1],arguments[2]);else return jf(void 0,arguments[0],arguments[1],arguments[2])};var dH=Symbol.for("com.tldraw.state/UNINITIALIZED"),O4=(J)=>{return J===dH},$E=S7("WithDiff",()=>class J{constructor(Q,Z){this.value=Q,this.diff=Z}});class _f{constructor(J,Q,Z){if(this.name=J,this.derive=Q,Z?.historyLength)this.historyBuffer=new pH(Z.historyLength);this.computeDiff=Z?.computeDiff,this.isEqual=Z?.isEqual??KB}lastChangedEpoch=BQ;lastTraversedEpoch=BQ;lastCheckedEpoch=BQ;parentSet=new cq;parents=[];parentEpochs=[];children=new cq;get isActivelyListening(){return!this.children.isEmpty}historyBuffer;state=dH;error=null;computeDiff;isEqual;__unsafe__getWithoutCapture(J){if(this.lastChangedEpoch!==BQ&&(this.lastCheckedEpoch===s5()||!YB(this)))if(this.lastCheckedEpoch=s5(),this.error)if(!J)throw this.error.thrownValue;else return this.state;else return this.state;try{$B(this);const Z=this.derive(this.state,this.lastCheckedEpoch),q=Z instanceof $E?Z.value:Z,Y=this.state===dH;if(Y||!this.isEqual(q,this.state)){if(this.historyBuffer&&!Y){const $=Z instanceof $E?Z.diff:void 0;this.historyBuffer.pushEntry(this.lastChangedEpoch,s5(),$??this.computeDiff?.(this.state,q,this.lastCheckedEpoch,s5())??r9)}this.lastChangedEpoch=s5(),this.state=q}return this.error=null,this.lastCheckedEpoch=s5(),this.state}catch(Z){if(this.state!==dH)this.state=dH,this.lastChangedEpoch=s5();if(this.lastCheckedEpoch=s5(),this.historyBuffer)this.historyBuffer.clear();if(this.error={thrownValue:Z},!J)throw Z;return this.state}finally{WB()}}get(){try{return this.__unsafe__getWithoutCapture()}finally{n$(this)}}getDiffSince(J){if(this.__unsafe__getWithoutCapture(!0),n$(this),J>=this.lastChangedEpoch)return n5;return this.historyBuffer?.getChangesSince(J)??r9}}var GB=S7("Computed",()=>_f),pZ0="@@__isComputedMethod__@@";var Ef=1,lZ0=S7("apiVersion",()=>Ef);if(lZ0!==Ef)throw new Error("You have multiple incompatible versions of @tldraw/state in your app. Please deduplicate the package.");var iH=v(o(),1);var lH=v(o(),1);var dq=function(J,Q){const Z=lH.default.useRef(Q);Z.current=Q;const[q,Y,$]=lH.default.useMemo(()=>{let W=null;const G=(F)=>{return W=F,()=>{W=null}},z=new s4(`useStateTracking(${J})`,()=>Z.current?.(),{scheduleEffect(){W?.()}});return[z,G,()=>z.scheduleCount]},[J]);return lH.default.useSyncExternalStore(Y,$,$),lH.default.useEffect(()=>{return q.attach(),q.maybeScheduleEffect(),()=>{q.detach()}},[q]),q.execute()};var D9=function(J){let Q=null;const Z=J.$$typeof;if(Z===iZ0)J=J.type,Q=J.compare;if(Z===nZ0)return iH.memo(iH.forwardRef(new Proxy(J.render,Cf)));return iH.memo(new Proxy(J,Cf),Q)},Cf={apply(J,Q,Z){return dq(J.displayName??J.name??"tracked(???)",()=>J.apply(Q,Z))}},iZ0=Symbol.for("react.memo"),nZ0=Symbol.for("react.forward_ref");var sZ0=v(o(),1);var Af=v(o(),1);var HB=function(){const J=arguments[0],Q=arguments[1],Z=arguments.length===3?void 0:arguments[2],q=arguments.length===3?arguments[2]:arguments[3];return Af.useMemo(()=>z0(`useComputed(${J})`,Q,Z),q)};var kf=v(o(),1);var W7=function(J,Q,Z=n5){kf.useEffect(()=>{const q=new s4(J,Q);return q.attach(),q.execute(),()=>{q.detach()}},Z)};var wf=v(o(),1);var RY=v(o(),1);var e=function(){const J=arguments,Q=J.length===3?J[2]:[J[0]],Z=J.length===3?J[0]:`useValue(${J[0].name})`,q=RY.useRef(!0);q.current=!0;const Y=RY.useMemo(()=>{if(J.length===1)return J[0];return z0(Z,()=>{if(q.current)return J[1]();else try{return J[1]()}catch{return{}}})},Q);try{const{subscribe:$,getSnapshot:W}=RY.useMemo(()=>{return{subscribe:(G)=>{return M4(`useValue(${Z})`,()=>{Y.get(),G()})},getSnapshot:()=>Y.get()}},[Y]);return RY.useSyncExternalStore($,W,W)}finally{q.current=!1}};class lq{constructor(J){this.previousValue=J}nextValue;diff;get(){const J=this.diff?.removed?.size??0,Q=this.diff?.added?.size??0;if(J===0&&Q===0)return;return{value:this.nextValue,diff:this.diff}}_add(J,Q){if(this.nextValue??=new Set(this.previousValue),this.nextValue.add(J),this.diff??={},Q)this.diff.removed?.delete(J);else this.diff.added??=new Set,this.diff.added.add(J)}add(J){const Q=this.previousValue.has(J);if(Q){if(!this.diff?.removed?.has(J))return;return this._add(J,Q)}if(this.nextValue?.has(J))return;this._add(J,Q)}_remove(J,Q){if(this.nextValue??=new Set(this.previousValue),this.nextValue.delete(J),this.diff??={},Q)this.diff.removed??=new Set,this.diff.removed.add(J);else this.diff.added?.delete(J)}remove(J){const Q=this.previousValue.has(J);if(!Q){if(!this.diff?.added?.has(J))return;return this._remove(J,Q)}if(this.diff?.removed?.has(J))return;this._remove(J,Q)}}var iq=function(J,Q){const Z=[];J:for(let q of J){for(let Y of Z)if(Q?Q(q,Y):q===Y)continue J;Z.push(q)}return Z},Y6=function(J){return J.filter((Q)=>Q!==void 0&&Q!==null)},P5=function(J){return J[J.length-1]},WE=function(J,Q){let Z,q=Infinity;for(let Y of J){const $=Q(Y);if($<q)Z=Y,q=$}return Z};var GE=function(J,Q){if(J===Q)return!0;if(J.length!==Q.length)return!1;for(let Z=0;Z<J.length;Z++)if(!Object.is(J[Z],Q[Z]))return!1;return!0};var nH=function(J,Q){let Z,q;return function(...Y){if(!Z)Z=!0,setTimeout(()=>Z=!1,Q),q=J(...Y);return q}},zB=function(J){const Q=(...Z)=>{try{return J(...Z)}catch(q){if(q instanceof Error&&Error.captureStackTrace)Error.captureStackTrace(q,Q);throw q}};return Q};var r5=function(J,Q){const Z=Q&&J&&typeof J==="object"&&Q in J?J[Q]:J;throw new Error(`Unknown switch case ${Z}`)};var jZ={ok(J){return{ok:!0,value:J}},err(J){return{ok:!1,error:J}}},r8=zB((J,Q)=>{if(!J)throw new Error(Q||"Assertion Error")}),r4=zB((J,Q)=>{if(J==null)throw new Error(Q??"value must be defined");return J});var sH=function(J,Q){let Z=void 0;const q=(...Y)=>{if(!Z)Z={},Z.promise=new Promise(($,W)=>{Z.resolve=$,Z.reject=W});return clearTimeout(Z.timeout),Z.latestArgs=Y,Z.timeout=setTimeout(()=>{const $=Z;Z=void 0;try{$.resolve(J(...$.latestArgs))}catch(W){$.reject(W)}},Q),Z.promise};return q.cancel=()=>{if(!Z)return;clearTimeout(Z.timeout)},q};var jY=function(J,Q){if(typeof J!=="object"||J===null)return;let Z=If.get(J);if(!Z)Z={tags:{},extras:{}},If.set(J,Z);if(Q.tags)Z.tags={...Z.tags,...Q.tags};if(Q.extras)Z.extras={...Z.extras,...Q.extras}};var If=new WeakMap;class V4{static async dataUrlToArrayBuffer(J){return fetch(J).then(function(Q){return Q.arrayBuffer()})}static async blobToDataUrl(J){return await new Promise((Q,Z)=>{if(J){const q=new FileReader;q.onload=()=>Q(q.result),q.onerror=(Y)=>Z(Y),q.onabort=(Y)=>Z(Y),q.readAsDataURL(J)}})}static async blobToText(J){return await new Promise((Q,Z)=>{if(J){const q=new FileReader;q.onload=()=>Q(q.result),q.onerror=(Y)=>Z(Y),q.onabort=(Y)=>Z(Y),q.readAsText(J)}})}}var s$=function(J){let Q=0;for(let Z=0;Z<J.length;Z++)Q=(Q<<5)-Q+J.charCodeAt(Z),Q|=0;return Q+""};var HE=function(J){const Q=new DataView(J);let Z=0;for(let q=0;q<Q.byteLength;q++)Z=(Z<<5)-Z+Q.getUint8(q),Z|=0;return Z+""};var zE=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918000,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];if(typeof Int32Array!=="undefined")zE=new Int32Array(zE);var aZ0=(J,Q)=>{let Z=Q===0?0:~~Q^-1;for(let q=0;q<J.length;q++)Z=zE[(Z^J[q])&255]^Z>>>8;return Z^-1},Pf=4,Tf=4;class D4{static isPng(J,Q){if(J.getUint8(Q+0)===137&&J.getUint8(Q+1)===80&&J.getUint8(Q+2)===78&&J.getUint8(Q+3)===71&&J.getUint8(Q+4)===13&&J.getUint8(Q+5)===10&&J.getUint8(Q+6)===26&&J.getUint8(Q+7)===10)return!0;return!1}static getChunkType(J,Q){return[String.fromCharCode(J.getUint8(Q)),String.fromCharCode(J.getUint8(Q+1)),String.fromCharCode(J.getUint8(Q+2)),String.fromCharCode(J.getUint8(Q+3))].join("")}static readChunks(J,Q=0){const Z={};if(!D4.isPng(J,Q))throw new Error("Not a PNG");Q+=8;while(Q<=J.buffer.byteLength){const q=Q,Y=J.getInt32(Q);Q+=4;const $=D4.getChunkType(J,Q);if($==="IDAT"&&Z[$]){Q+=Y+Pf+Tf;continue}if($==="IEND")break;Z[$]={start:q,dataOffset:Q+4,size:Y},Q+=Y+Pf+Tf}return Z}static parsePhys(J,Q){return{ppux:J.getUint32(Q),ppuy:J.getUint32(Q+4),unit:J.getUint8(Q+4)}}static findChunk(J,Q){return D4.readChunks(J)[Q]}static setPhysChunk(J,Q=1,Z){let q=46,Y=0;const $=D4.findChunk(J,"pHYs");if($)q=$.start,Y=$.size;const W=D4.findChunk(J,"IDAT");if(W)q=W.start,Y=0;const G=new ArrayBuffer(21),z=new DataView(G);z.setUint32(0,9),z.setUint8(4,"p".charCodeAt(0)),z.setUint8(5,"H".charCodeAt(0)),z.setUint8(6,"Y".charCodeAt(0)),z.setUint8(7,"s".charCodeAt(0));const U=2835.5;z.setInt32(8,U*Q),z.setInt32(12,U*Q),z.setInt8(16,1);const F=new Uint8Array(G.slice(4,17));z.setInt32(17,aZ0(F));const B=J.buffer.slice(0,q),M=J.buffer.slice(q+Y);return new Blob([B,G,M],Z)}}class a4{static loadVideo(J){return new Promise((Q,Z)=>{const q=document.createElement("video");q.onloadeddata=()=>Q(q),q.onerror=(Y)=>{console.error(Y),Z(new Error("Could not load video"))},q.crossOrigin="anonymous",q.src=J})}static loadImage(J){return new Promise((Q,Z)=>{const q=new Image;q.onload=()=>Q(q),q.onerror=(Y)=>{console.error(Y),Z(new Error("Could not load image"))},q.crossOrigin="anonymous",q.src=J})}static async getVideoSize(J){return a4.usingObjectURL(J,async(Q)=>{const Z=await a4.loadVideo(Q);return{w:Z.videoWidth,h:Z.videoHeight}})}static async getImageSize(J){const Q=await a4.usingObjectURL(J,a4.loadImage);try{if(J.type==="image/png"){const Z=new DataView(await J.arrayBuffer());if(D4.isPng(Z,0)){const q=D4.findChunk(Z,"pHYs");if(q){const Y=D4.parsePhys(Z,q.dataOffset);if(Y.unit===0&&Y.ppux===Y.ppuy){const $=Math.max(Y.ppux/2834.5,1);return{w:Math.round(Q.naturalWidth/$),h:Math.round(Q.naturalHeight/$)}}}}}}catch(Z){return console.error(Z),{w:Q.naturalWidth,h:Q.naturalHeight}}return{w:Q.naturalWidth,h:Q.naturalHeight}}static async usingObjectURL(J,Q){const Z=URL.createObjectURL(J);try{return await Q(Z)}finally{URL.revokeObjectURL(Z)}}}var f7=function(J=""){let Q=0,Z=0,q=0,Y=0;function $(){const W=Q^Q<<11;return Q=Z,Z=q,q=Y,Y^=(Y>>>19^W^W>>>8)>>>0,Y/4294967296*2}for(let W=0;W<J.length+64;W++)Q^=J.charCodeAt(W)|0,$();return $},nq=function(J,Q,Z,q=!1){const[Y,$]=Q,[W,G]=Z,z=W+(J-Y)/($-Y)*(G-W);return q?W<G?Math.max(Math.min(z,G),W):Math.max(Math.min(z,W),G):z};var R4=function(J,Q){return Object.prototype.hasOwnProperty.call(J,Q)},G7=function(J,Q){if(!R4(J,Q))return;return J[Q]},UB=function(J){return Object.keys(J)},L9=function(J){return Object.values(J)},z5=function(J){return Object.entries(J)},_Y=function(J){return Object.fromEntries(J)},rH=function(J,Q){const Z={};let q=!1;for(let[Y,$]of z5(J))if(Q(Y,$))Z[Y]=$;else q=!0;return q?Z:J},sq=function(J,Q){const Z={};for(let[q,Y]of z5(J)){const $=Q(q,Y);Z[q]=$}return Z},aH=function(J,Q){if(J===Q)return!0;const Z=new Set(Object.keys(J)),q=new Set(Object.keys(Q));if(Z.size!==q.size)return!1;for(let Y of Z){if(!q.has(Y))return!1;if(!Object.is(J[Y],Q[Y]))return!1}return!0};var vf=function(J){if(J>="a"&&J<="z")return J.charCodeAt(0)-"a".charCodeAt(0)+2;else if(J>="A"&&J<="Z")return"Z".charCodeAt(0)-J.charCodeAt(0)+2;else throw new Error("Invalid index key head: "+J)},Sf=function(J){if(J.length!==vf(J.charAt(0)))throw new Error("invalid integer part of index key: "+J)},bf=function(J){if(J===void 0)throw Error("n is undefined")},xf=function(J){Sf(J);const[Q,...Z]=J.split("");let q=!0;for(let Y=Z.length-1;q&&Y>=0;Y--){const $="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".indexOf(Z[Y])+1;if($==="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".length)Z[Y]="0";else Z[Y]="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".charAt($),q=!1}if(q){if(Q==="Z")return"a0";if(Q==="z")return;const Y=String.fromCharCode(Q.charCodeAt(0)+1);if(Y>"a")Z.push("0");else Z.pop();return Y+Z.join("")}else return Q+Z.join("")},oZ0=function(J){Sf(J);const[Q,...Z]=J.split("");let q=!0;for(let Y=Z.length-1;q&&Y>=0;Y--){const $="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".indexOf(Z[Y])-1;if($===-1)Z[Y]="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".slice(-1);else Z[Y]="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".charAt($),q=!1}if(q){if(Q==="a")return"Z"+"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".slice(-1);if(Q==="A")return;const Y=String.fromCharCode(Q.charCodeAt(0)-1);if(Y<"Z")Z.push("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".slice(-1));else Z.pop();return Y+Z.join("")}else return Q+Z.join("")},a$=function(J,Q){if(Q!==void 0&&J>=Q)throw new Error(J+" >= "+Q);if(J.slice(-1)==="0"||Q&&Q.slice(-1)==="0")throw new Error("trailing zero");if(Q){let Y=0;while((J.charAt(Y)||"0")===Q.charAt(Y))Y++;if(Y>0)return Q.slice(0,Y)+a$(J.slice(Y),Q.slice(Y))}const Z=J?"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".indexOf(J.charAt(0)):0,q=Q!==void 0?"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".indexOf(Q.charAt(0)):"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".length;if(q-Z>1){const Y=Math.round(0.5*(Z+q));return"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".charAt(Y)}else if(Q&&Q.length>1)return Q.slice(0,1);else return"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".charAt(Z)+a$(J.slice(1),void 0)},oH=function(J){const Q=vf(J.charAt(0));if(Q>J.length)throw new Error("invalid index: "+J);return J.slice(0,Q)},LB=function(J){if(J==="A00000000000000000000000000")throw new Error("invalid index: "+J);const Q=oH(J);if(J.slice(Q.length).slice(-1)==="0")throw new Error("invalid index: "+J)},r$=function(J,Q){if(J!==void 0)LB(J);if(Q!==void 0)LB(Q);if(J!==void 0&&Q!==void 0&&J>=Q)throw new Error(J+" >= "+Q);if(J===void 0&&Q===void 0)return"a0";if(J===void 0){if(Q===void 0)throw Error("b is undefined");const G=oH(Q),z=Q.slice(G.length);if(G==="A00000000000000000000000000")return G+a$("",z);if(G<Q)return G;const U=oZ0(G);return bf(U),U}if(Q===void 0){const G=oH(J),z=J.slice(G.length),U=xf(G);return U===void 0?G+a$(z,void 0):U}const Z=oH(J),q=J.slice(Z.length),Y=oH(Q),$=Q.slice(Y.length);if(Z===Y)return Z+a$(q,$);const W=xf(Z);return bf(W),W<Q?W:Z+a$(q,void 0)},_Z=function(J,Q,Z){if(Z===0)return[];if(Z===1)return[r$(J,Q)];if(Q===void 0){let $=r$(J,Q);const W=[$];for(let G=0;G<Z-1;G++)$=r$($,Q),W.push($);return W}if(J===void 0){let $=r$(J,Q);const W=[$];for(let G=0;G<Z-1;G++)$=r$(J,$),W.push($);return W.reverse(),W}const q=Math.floor(Z/2),Y=r$(J,Q);return[..._Z(J,Y,q),Y,..._Z(Y,Q,Z-q-1)]};var yf="a0";var LE=function(J){LB(J)},EZ=function(J,Q,Z){return _Z(J,Q,Z)},tH=function(J,Q){return _Z(J,void 0,Q)};var CZ=function(J,Q){return _Z(J,Q,1)[0]},g7=function(J){return _Z(J,void 0,1)[0]},FE=function(J){return _Z(void 0,J,1)[0]},NQ=function(J,Q="a1"){return[Q,..._Z(Q,void 0,J)]},P9=function(J,Q){if(J.index<Q.index)return-1;else if(J.index>Q.index)return 1;return 0},UE=yf;var BE=function(J,Q){return J.id>Q.id?1:-1};var EY=function(J){try{return localStorage.getItem(J)}catch{return null}},CY=function(J,Q){try{localStorage.setItem(J,Q)}catch{}};var NE=function(){try{localStorage.clear()}catch{}},eH=function(J){try{return sessionStorage.getItem(J)}catch{return null}},o$=function(J,Q){try{sessionStorage.setItem(J,Q)}catch{}},Jz=function(J){try{sessionStorage.removeItem(J)}catch{}},ME=function(){try{sessionStorage.clear()}catch{}};var gf=function(){if(Qz)return;const J=Date.now(),Q=J-VE;if(OE+Q<FB){Qz=requestAnimationFrame(()=>{Qz=void 0,gf()});return}Qz=requestAnimationFrame(()=>{Qz=void 0,VE=J,OE=Math.min(OE+Q-FB,FB*10),eZ0()})};var Zz=function(J){if(tZ0())return J(),()=>{};if(!t$.includes(J)){if(t$.push(J),!ff)ff=!0,VE=Date.now()-FB-1;gf()}return()=>{const Q=t$.indexOf(J);if(Q>-1)t$.splice(Q,1)}},tZ0=()=>typeof process!=="undefined"&&!1,t$=[];var FB=Math.ceil(16.666666666666668),Qz,OE=0,VE=0,eZ0=()=>{const J=t$.splice(0,t$.length);for(let Q of J)Q()},ff=!1;var DE=function(J){return J!==null};var Jq0=function(){if(typeof globalThis!=="undefined"&&globalThis.structuredClone)return[globalThis.structuredClone,!0];if(typeof global!=="undefined"&&global.structuredClone)return[global.structuredClone,!0];if(typeof window!=="undefined"&&window.structuredClone)return[window.structuredClone,!0];return[(J)=>J?JSON.parse(JSON.stringify(J)):J,!1]},mf=Jq0(),p6=mf[0],Qq0=mf[1],qz=Object.getPrototypeOf(p6({}));var rq=(J=21)=>crypto.getRandomValues(new Uint8Array(J)).reduce((Q,Z)=>{if(Z&=63,Z<36)Q+=Z.toString(36);else if(Z<62)Q+=(Z-26).toString(36).toUpperCase();else if(Z>62)Q+="-";else Q+="_";return Q},"");var T5=function(J,Q){return new BB(J,{createDefaultProperties:()=>({}),validator:Q.validator,scope:Q.scope})};class BB{constructor(J,Q){this.typeName=J,this.createDefaultProperties=Q.createDefaultProperties,this.validator=Q.validator??{validate:(Z)=>Z},this.scope=Q.scope??"document"}createDefaultProperties;validator;scope;create(J){const Q={...this.createDefaultProperties(),id:this.createId()};for(let[Z,q]of Object.entries(J))if(q!==void 0)Q[Z]=q;return Q.typeName=this.typeName,Q}clone(J){return{...p6(J),id:this.createId()}}createId(J){return this.typeName+":"+(J??rq())}createCustomId(J){return this.typeName+":"+J}parseId(J){if(!this.isId(J))throw new Error(`ID "${J}" is not a valid ID for type "${this.typeName}"`);return J.slice(this.typeName.length+1)}isInstance=(J)=>{return J?.typeName===this.typeName};isId(J){if(!J)return!1;for(let Q=0;Q<this.typeName.length;Q++)if(J[Q]!==this.typeName[Q])return!1;return J[this.typeName.length]===":"}withDefaultProperties(J){return new BB(this.typeName,{createDefaultProperties:J,validator:this.validator,scope:this.scope})}validate(J,Q){if(Q&&this.validator.validateUsingKnownGoodVersion)return this.validator.validateUsingKnownGoodVersion(Q,J);return this.validator.validate(J)}}class NB{items=new WeakMap;get(J,Q){if(!this.items.has(J))this.items.set(J,Q(J));return this.items.get(J)}}var Eg=v(Rg(),1);var jg=function(J){if(J.length===0)return new Set;const Q=J[0],Z=J.slice(1),q=new Set;for(let Y of Q)if(Z.every(($)=>$.has(Y)))q.add(Y);return q},_g=function(J,Q){const Z={};for(let q of Q)if(!J.has(q))Z.added??=new Set,Z.added.add(q);for(let q of J)if(!Q.has(q))Z.removed??=new Set,Z.removed.add(q);return Z.added||Z.removed?Z:void 0};var bE=function(J,Q){for(let[Z,q]of Object.entries(J)){const Y=q,$=Q[Z];if("eq"in Y&&$!==Y.eq)return!1;if("neq"in Y&&$===Y.neq)return!1;if("gt"in Y&&(typeof $!=="number"||$<=Y.gt))return!1}return!0},xE=function(J,Q,Z){const q=Object.fromEntries(Object.keys(Z).map((Y)=>[Y,new Set]));for(let[Y,$]of Object.entries(Z))if("eq"in $){const G=J.index(Q,Y).get().get($.eq);if(G)for(let z of G)q[Y].add(z)}else if("neq"in $){const W=J.index(Q,Y);for(let[G,z]of W.get())if(G!==$.neq)for(let U of z)q[Y].add(U)}else if("gt"in $){const W=J.index(Q,Y);for(let[G,z]of W.get())if(G>$.gt)for(let U of z)q[Y].add(U)}return jg(Object.values(q))};class yE{constructor(J,Q){this.atoms=J,this.history=Q}indexCache=new Map;historyCache=new Map;filterHistory(J){if(this.historyCache.has(J))return this.historyCache.get(J);const Q=z0("filterHistory:"+J,(Z,q)=>{if(O4(Z))return this.history.get();const Y=this.history.getDiffSince(q);if(Y===r9)return this.history.get();const $={added:{},removed:{},updated:{}};let W=0,G=0,z=0;for(let U of Y){for(let F of L9(U.added))if(F.typeName===J)if($.removed[F.id]){const B=$.removed[F.id];if(delete $.removed[F.id],G--,B!==F)$.updated[F.id]=[B,F],z++}else $.added[F.id]=F,W++;for(let[F,B]of L9(U.updated))if(B.typeName===J)if($.added[B.id])$.added[B.id]=B;else if($.updated[B.id])$.updated[B.id]=[$.updated[B.id][0],B];else $.updated[B.id]=[F,B],z++;for(let F of L9(U.removed))if(F.typeName===J)if($.added[F.id])delete $.added[F.id],W--;else if($.updated[F.id])$.removed[F.id]=$.updated[F.id][0],delete $.updated[F.id],z--,G++;else $.removed[F.id]=F,G++}if(W||G||z)return pq(this.history.get(),$);else return Z},{historyLength:100});return this.historyCache.set(J,Q),Q}index(J,Q){const Z=J+":"+Q;if(this.indexCache.has(Z))return this.indexCache.get(Z);const q=this.__uncached_createIndex(J,Q);return this.indexCache.set(Z,q),q}__uncached_createIndex(J,Q){const Z=this.filterHistory(J),q=()=>{Z.get();const Y=new Map;for(let $ of L9(this.atoms.get())){const W=$.get();if(W.typeName===J){const G=W[Q];if(!Y.has(G))Y.set(G,new Set);Y.get(G).add(W.id)}}return Y};return z0("index:"+J+":"+Q,(Y,$)=>{if(O4(Y))return q();const W=Z.getDiffSince($);if(W===r9)return q();const G=new Map,z=(M,O)=>{let R=G.get(M);if(!R)R=new lq(Y.get(M)??new Set);R.add(O),G.set(M,R)},U=(M,O)=>{let R=G.get(M);if(!R)R=new lq(Y.get(M)??new Set);R.remove(O),G.set(M,R)};for(let M of W){for(let O of L9(M.added))if(O.typeName===J){const R=O[Q];z(R,O.id)}for(let[O,R]of L9(M.updated))if(R.typeName===J){const V=O[Q],E=R[Q];if(V!==E)U(V,R.id),z(E,R.id)}for(let O of L9(M.removed))if(O.typeName===J){const R=O[Q];U(R,O.id)}}let F=void 0,B=void 0;for(let[M,O]of G){const R=O.get();if(!R)continue;if(!F)F=new Map(Y);if(!B)B=new Map;if(R.value.size===0)F.delete(M);else F.set(M,R.value);B.set(M,R.diff)}if(F&&B)return pq(F,B);return Y},{historyLength:100})}record(J,Q=()=>({}),Z="record:"+J+(Q?":"+Q.toString():"")){const q=this.ids(J,Q,Z);return z0(Z,()=>{for(let Y of q.get())return this.atoms.get()[Y]?.get();return})}records(J,Q=()=>({}),Z="records:"+J+(Q?":"+Q.toString():"")){const q=this.ids(J,Q,"ids:"+Z);return z0(Z,()=>{return[...q.get()].map((Y)=>{const $=this.atoms.get()[Y];if(!$)throw new Error("no atom found for record id: "+Y);return $.get()})})}ids(J,Q=()=>({}),Z="ids:"+J+(Q?":"+Q.toString():"")){const q=this.filterHistory(J),Y=()=>{q.get();const G=Q();if(Object.keys(G).length===0)return new Set(L9(this.atoms.get()).flatMap((z)=>{const U=z.get();if(U.typeName===J)return U.id;else return[]}));return xE(this,J,G)},$=(G)=>{const z=Y(),U=_g(G,z);if(U)return pq(z,U);else return G},W=z0("ids_query:"+Z,Q,{isEqual:Eg.default});return z0("query:"+Z,(G,z)=>{const U=W.get();if(O4(G))return Y();if(z<W.lastChangedEpoch)return $(G);const F=q.getDiffSince(z);if(F===r9)return $(G);const B=new lq(G);for(let O of F){for(let R of L9(O.added))if(R.typeName===J&&bE(U,R))B.add(R.id);for(let[R,V]of L9(O.updated))if(V.typeName===J)if(bE(U,V))B.add(V.id);else B.remove(V.id);for(let R of L9(O.removed))if(R.typeName===J)B.remove(R.id)}const M=B.get();if(!M)return G;return pq(M.value,M.diff)},{historyLength:50})}exec(J,Q){const Z=xE(this,J,Q);if(Z.size===0)return n5;const q=this.atoms.get();return[...Z].map((Y)=>q[Y].get())}}var wZ=function(J){const Q=Object.getPrototypeOf(J);if(Q&&!(Array.isArray(J)||Q===Object.prototype||Q===null||Q===qz))throw console.error("cannot include non-js data in a record",J),new Error("cannot include non-js data in a record");const Z=Object.getOwnPropertyNames(J);for(let q of Z){const Y=J[q];if(Y&&typeof Y==="object")wZ(Y)}return Object.freeze(J)};var PY=function(J){const Q={added:{},removed:{},updated:{}};for(let Z of J){for(let[q,Y]of z5(Z.added))if(Q.removed[q]){const $=Q.removed[q];if(delete Q.removed[q],$!==Y)Q.updated[q]=[$,Y]}else Q.added[q]=Y;for(let[q,[Y,$]]of z5(Z.updated)){if(Q.added[q]){Q.added[q]=$,delete Q.updated[q],delete Q.removed[q];continue}if(Q.updated[q]){Q.updated[q]=[Q.updated[q][0],$],delete Q.removed[q];continue}Q.updated[q]=Z.updated[q],delete Q.removed[q]}for(let[q,Y]of z5(Z.removed))if(Q.added[q])delete Q.added[q];else if(Q.updated[q])Q.removed[q]=Q.updated[q][0],delete Q.updated[q];else Q.removed[q]=Y}return Q},xX0=function(J){if(J.length===0)return[];const Q=[];let Z=[J[0]],q;for(let Y=1,$=J.length;Y<$;Y++){if(q=J[Y],Z[0].source!==q.source)Q.push(Z),Z=[];Z.push(q)}return Q.push(Z),wZ(Q.map((Y)=>({source:Y[0].source,changes:PY(Y.map(($)=>$.changes))})))};class ZW{id=rq();atoms=U9("store_atoms",{});history=U9("history",0,{historyLength:1000});query=new yE(this.atoms,this.history);listeners=new Set;historyAccumulator=new Cg;historyReactor;schema;props;scopedTypes;constructor(J){const{initialData:Q,schema:Z}=J;if(this.schema=Z,this.props=J.props,Q)this.atoms.set(_Y(z5(Q).map(([q,Y])=>[q,U9("atom:"+q,wZ(this.schema.validateRecord(this,Y,"initialize",null)))])));this.historyReactor=YE("Store.historyReactor",()=>{this.history.get(),this._flushHistory()},{scheduleEffect:(q)=>Zz(q)}),this.scopedTypes={document:new Set(L9(this.schema.types).filter((q)=>q.scope==="document").map((q)=>q.typeName)),session:new Set(L9(this.schema.types).filter((q)=>q.scope==="session").map((q)=>q.typeName)),presence:new Set(L9(this.schema.types).filter((q)=>q.scope==="presence").map((q)=>q.typeName))}}_flushHistory(){if(this.historyAccumulator.hasChanges()){const J=this.historyAccumulator.flush();for(let{changes:Q,source:Z}of J){let q=null,Y=null,$=null;for(let{onHistory:W,filters:G}of this.listeners){if(G.source!=="all"&&G.source!==Z)continue;if(G.scope!=="all")if(G.scope==="document"){if(Y??=this.filterChangesByScope(Q,"document"),!Y)continue;W({changes:Y,source:Z})}else if(G.scope==="session"){if(q??=this.filterChangesByScope(Q,"session"),!q)continue;W({changes:q,source:Z})}else{if($??=this.filterChangesByScope(Q,"presence"),!$)continue;W({changes:$,source:Z})}else W({changes:Q,source:Z})}}}}filterChangesByScope(J,Q){const Z={added:rH(J.added,(q,Y)=>this.scopedTypes[Q].has(Y.typeName)),updated:rH(J.updated,(q,Y)=>this.scopedTypes[Q].has(Y[1].typeName)),removed:rH(J.removed,(q,Y)=>this.scopedTypes[Q].has(Y.typeName))};if(Object.keys(Z.added).length===0&&Object.keys(Z.updated).length===0&&Object.keys(Z.removed).length===0)return null;return Z}updateHistory(J){if(this.historyAccumulator.add({changes:J,source:this.isMergingRemoteChanges?"remote":"user"}),this.listeners.size===0)this.historyAccumulator.clear();this.history.set(this.history.get()+1,J)}validate(J){this.allRecords().forEach((Q)=>this.schema.validateRecord(this,Q,J,null))}onBeforeCreate;onAfterCreate;onBeforeChange;onAfterChange;onBeforeDelete;onAfterDelete;_runCallbacks=!0;put=(J,Q)=>{I5(()=>{const Z={},q={},Y=this.atoms.__unsafe__getWithoutCapture();let $=null,W,G=!1;const z=this.onBeforeCreate&&this._runCallbacks?this.onBeforeCreate:null,U=this.onBeforeChange&&this._runCallbacks?this.onBeforeChange:null,F=this.isMergingRemoteChanges?"remote":"user";for(let B=0,M=J.length;B<M;B++){W=J[B];const O=($??Y)[W.id];if(O){const R=O.__unsafe__getWithoutCapture();if(U)W=U(R,W,F);if(this.schema.validateRecord(this,W,Q??"updateRecord",R)===R)continue;O.set(wZ(W)),G=!0,Z[W.id]=[R,O.__unsafe__getWithoutCapture()]}else{if(z)W=z(W,F);if(G=!0,W=this.schema.validateRecord(this,W,Q??"createRecord",null),q[W.id]=W,!$)$={...Y};$[W.id]=U9("atom:"+W.id,W)}}if($)this.atoms.set($);if(!G)return;if(this.updateHistory({added:q,updated:Z,removed:{}}),this._runCallbacks){const{onAfterCreate:B,onAfterChange:M}=this;if(B)Object.values(q).forEach((O)=>{B(O,F)});if(M)Object.values(Z).forEach(([O,R])=>{M(O,R,F)})}})};remove=(J)=>{I5(()=>{const Q=[],Z=this.isMergingRemoteChanges?"remote":"user";if(this.onBeforeDelete&&this._runCallbacks)for(let Y of J){const $=this.atoms.__unsafe__getWithoutCapture()[Y];if(!$)continue;if(this.onBeforeDelete($.get(),Z)===!1)Q.push(Y)}let q=void 0;if(this.atoms.update((Y)=>{let $=void 0;for(let W of J){if(Q.includes(W))continue;if(!(W in Y))continue;if(!$)$={...Y};if(!q)q={};delete $[W],q[W]=Y[W].get()}return $??Y}),!q)return;if(this.updateHistory({added:{},updated:{},removed:q}),this.onAfterDelete&&this._runCallbacks){let Y;for(let $=0,W=J.length;$<W;$++)if(Y=q[J[$]],Y)this.onAfterDelete(Y,Z)}})};get=(J)=>{return this.atoms.get()[J]?.get()};unsafeGetWithoutCapture=(J)=>{return this.atoms.get()[J]?.__unsafe__getWithoutCapture()};serialize=(J="document")=>{const Q={};for(let[Z,q]of z5(this.atoms.get())){const Y=q.get();if(J==="all"||this.scopedTypes[J].has(Y.typeName))Q[Z]=Y}return Q};getSnapshot(J="document"){return{store:this.serialize(J),schema:this.schema.serialize()}}migrateSnapshot(J){const Q=this.schema.migrateStoreSnapshot(J);if(Q.type==="error")throw new Error(`Failed to migrate snapshot: ${Q.reason}`);return{store:Q.value,schema:this.schema.serialize()}}loadSnapshot(J){const Q=this.schema.migrateStoreSnapshot(J);if(Q.type==="error")throw new Error(`Failed to migrate snapshot: ${Q.reason}`);const Z=this._runCallbacks;try{this._runCallbacks=!1,I5(()=>{this.clear(),this.put(Object.values(Q.value)),this.ensureStoreIsUsable()})}finally{this._runCallbacks=Z}}allRecords=()=>{return L9(this.atoms.get()).map((J)=>J.get())};clear=()=>{this.remove(UB(this.atoms.get()))};update=(J,Q)=>{const Z=this.atoms.get()[J];if(!Z){console.error(`Record ${J} not found. This is probably an error`);return}this.put([Q(Z.__unsafe__getWithoutCapture())])};has=(J)=>{return!!this.atoms.get()[J]};listen=(J,Q)=>{this._flushHistory();const Z={onHistory:J,filters:{source:Q?.source??"all",scope:Q?.scope??"all"}};if(this.listeners.add(Z),!this.historyReactor.scheduler.isActivelyListening)this.historyReactor.start();return()=>{if(this.listeners.delete(Z),this.listeners.size===0)this.historyReactor.stop()}};isMergingRemoteChanges=!1;mergeRemoteChanges=(J)=>{if(this.isMergingRemoteChanges)return J();try{this.isMergingRemoteChanges=!0,I5(J)}finally{this.isMergingRemoteChanges=!1}};extractingChanges(J){const Q=[],Z=this.historyAccumulator.intercepting((q)=>Q.push(q.changes));try{return I5(J),PY(Q)}finally{Z()}}applyDiff(J,Q=!0){const Z=this._runCallbacks;try{this._runCallbacks=Q,I5(()=>{const q=L9(J.added).concat(L9(J.updated).map(([$,W])=>W)),Y=UB(J.removed);if(q.length)this.put(q);if(Y.length)this.remove(Y)})}finally{this._runCallbacks=Z}}createComputedCache=(J,Q,Z)=>{const q=new NB;return{get:(Y)=>{const $=this.atoms.get()[Y];if(!$)return;return q.get($,()=>{const W=Z?z0($.name+":equals",()=>$.get(),{isEqual:Z}):$;return z0(J+":"+Y,()=>{return Q(W.get())})}).get()}}};createSelectedComputedCache=(J,Q,Z)=>{const q=new NB;return{get:(Y)=>{const $=this.atoms.get()[Y];if(!$)return;const W=z0(J+":"+Y+":selector",()=>Q($.get()));return q.get($,()=>z0(J+":"+Y,()=>Z(W.get()))).get()}}};getRecordType=(J)=>{const Q=this.schema.types[J.typeName];if(!Q)throw new Error(`Record type ${J.typeName} not found`);return Q};_integrityChecker;ensureStoreIsUsable(){this._integrityChecker??=this.schema.createIntegrityChecker(this),this._integrityChecker?.()}_isPossiblyCorrupted=!1;markAsPossiblyCorrupted(){this._isPossiblyCorrupted=!0}isPossiblyCorrupted(){return this._isPossiblyCorrupted}}class Cg{_history=[];_interceptors=new Set;intercepting(J){return this._interceptors.add(J),()=>{this._interceptors.delete(J)}}add(J){this._history.push(J);for(let Q of this._interceptors)Q(J)}flush(){const J=xX0(this._history);return this._history=[],J}clear(){this._history=[]}hasChanges(){return this._history.length>0}}var yX0=function(J){const Q=[];for(let Z=J.length-1;Z>=0;Z--){const q=J[Z];if(!("id"in q)){const Y=q.dependsOn,$=Q[0];if($)Q[0]={...$,dependsOn:Y.concat($.dependsOn??[])}}else Q.unshift(q)}return Q},tq=function({sequence:J,sequenceId:Q,retroactive:Z=!0}){const q={sequenceId:Q,retroactive:Z,sequence:yX0(J)};return vE(q),q},X9=function(J,Q){return Object.fromEntries(z5(Q).map(([Z,q])=>[Z,`${J}/${q}`]))},j9=function(J){const Q=J.sequenceId;return tq({sequenceId:Q,retroactive:J.retroactive??!0,sequence:J.sequence.map((Z)=>("id"in Z)?{...Z,scope:"record",filter:(q)=>q.typeName===J.recordType&&(Z.filter?.(q)??!0)&&(J.filter?.(q)??!0)}:Z)})},kg=function(J){const Q=new Map(J.map(($)=>[$.id,$])),Z=new Set,q=[];function Y($){r8(!Z.has($.id),`Circular dependency in migrations: ${$.id}`),Z.add($.id);const{version:W,sequenceId:G}=qW($.id),z=Q.get(`${G}/${W-1}`);if(z)Y(z);if($.dependsOn)for(let U of $.dependsOn){const F=Q.get(U);if(F)Y(F)}Q.delete($.id),q.push($)}for(let $ of Q.values())Y($);return q},qW=function(J){const[Q,Z]=J.split("/");return{sequenceId:Q,version:parseInt(Z)}},Ag=function(J,Q){if(Q)r8(J.startsWith(Q+"/"),`Every migration in sequence '${Q}' must have an id starting with '${Q}/'. Got invalid id: '${J}'`);r8(J.match(/^(.*?)\/(0|[1-9]\d*)$/),`Invalid migration id: '${J}'`)},vE=function(J){if(r8(!J.sequenceId.includes("/"),`sequenceId cannot contain a '/', got ${J.sequenceId}`),r8(J.sequenceId.length,"sequenceId must be a non-empty string"),J.sequence.length===0)return;Ag(J.sequence[0].id,J.sequenceId);let Q=qW(J.sequence[0].id).version;r8(Q===1,`Expected the first migrationId to be '${J.sequenceId}/1' but got '${J.sequence[0].id}'`);for(let Z=1;Z<J.sequence.length;Z++){const q=J.sequence[Z].id;Ag(q,J.sequenceId);const Y=qW(q).version;r8(Y===Q+1,`Migration id numbers must increase in increments of 1, expected ${J.sequenceId}/${Q+1} but got '${J.sequence[Z].id}'`),Q=Y}};var P1=((J)=>{return J.IncompatibleSubtype="incompatible-subtype",J.UnknownType="unknown-type",J.TargetVersionTooNew="target-version-too-new",J.TargetVersionTooOld="target-version-too-old",J.MigrationError="migration-error",J.UnrecognizedSubtype="unrecognized-subtype",J})(P1||{});var vX0=function(J){if(J.schemaVersion>2||J.schemaVersion<1)return jZ.err("Bad schema version");if(J.schemaVersion===2)return jZ.ok(J);const Q={schemaVersion:2,sequences:{}};for(let[Z,q]of Object.entries(J.recordVersions))if(Q.sequences[`com.tldraw.${Z}`]=q.version,"subTypeKey"in q)for(let[Y,$]of Object.entries(q.subTypeVersions))Q.sequences[`com.tldraw.${Z}.${Y}`]=$;return jZ.ok(Q)};class Wz{constructor(J,Q){this.types=J,this.options=Q;for(let q of Q.migrations??[])r8(!this.migrations[q.sequenceId],`Duplicate migration sequenceId ${q.sequenceId}`),vE(q),this.migrations[q.sequenceId]=q;const Z=Object.values(this.migrations).flatMap((q)=>q.sequence);this.sortedMigrations=kg(Z);for(let q of this.sortedMigrations){if(!q.dependsOn?.length)continue;for(let Y of q.dependsOn){const $=Z.find((W)=>W.id===Y);r8($,`Migration '${q.id}' depends on missing migration '${Y}'`)}}}static create(J,Q){return new Wz(J,Q??{})}migrations={};sortedMigrations;validateRecord(J,Q,Z,q){try{const Y=G7(this.types,Q.typeName);if(!Y)throw new Error(`Missing definition for record type ${Q.typeName}`);return Y.validate(Q,q??void 0)}catch(Y){if(this.options.onValidationFailure)return this.options.onValidationFailure({store:J,record:Q,phase:Z,recordBefore:q,error:Y});else throw Y}}getMigrationsSince(J){const Q=vX0(J);if(!Q.ok)return Q;const Z=Q.value,q=new Set(Object.keys(Z.sequences).filter(($)=>this.migrations[$]));for(let $ in this.migrations)if(Z.sequences[$]===void 0&&this.migrations[$].retroactive)q.add($);if(q.size===0)return jZ.ok([]);const Y=new Set;for(let $ of q){const W=Z.sequences[$];if(typeof W!=="number"&&this.migrations[$].retroactive||W===0){for(let U of this.migrations[$].sequence)Y.add(U.id);continue}const G=`${$}/${W}`,z=this.migrations[$].sequence.findIndex((U)=>U.id===G);if(z===-1)return jZ.err("Incompatible schema?");for(let U of this.migrations[$].sequence.slice(z+1))Y.add(U.id)}return jZ.ok(this.sortedMigrations.filter(({id:$})=>Y.has($)))}migratePersistedRecord(J,Q,Z="up"){const q=this.getMigrationsSince(Q);if(!q.ok)return console.error("Error migrating record",q.error),{type:"error",reason:P1.MigrationError};let Y=q.value;if(Y.length===0)return{type:"success",value:J};if(Y.some(($)=>$.scope==="store"))return{type:"error",reason:Z==="down"?P1.TargetVersionTooOld:P1.TargetVersionTooNew};if(Z==="down"){if(!Y.every(($)=>$.down))return{type:"error",reason:P1.TargetVersionTooOld};Y=Y.slice().reverse()}J=p6(J);try{for(let $ of Y){if($.scope==="store")throw new Error;if(!($.filter?$.filter(J):!0))continue;const G=$[Z](J);if(G)J=p6(G)}}catch($){return console.error("Error migrating record",$),{type:"error",reason:P1.MigrationError}}return{type:"success",value:J}}migrateStoreSnapshot(J){let{store:Q}=J;const Z=this.getMigrationsSince(J.schema);if(!Z.ok)return console.error("Error migrating store",Z.error),{type:"error",reason:P1.MigrationError};const q=Z.value;if(q.length===0)return{type:"success",value:Q};Q=p6(Q);try{for(let Y of q)if(Y.scope==="record")for(let[$,W]of Object.entries(Q)){if(!(Y.filter?Y.filter(W):!0))continue;const z=Y.up(W);if(z)Q[$]=p6(z)}else if(Y.scope==="store"){const $=Y.up(Q);if($)Q=p6($)}else r5(Y)}catch(Y){return console.error("Error migrating store",Y),{type:"error",reason:P1.MigrationError}}return{type:"success",value:Q}}createIntegrityChecker(J){return this.options.createIntegrityChecker?.(J)??void 0}serialize(){return{schemaVersion:2,sequences:Object.fromEntries(Object.values(this.migrations).map(({sequenceId:J,sequence:Q})=>[J,Q.length?qW(Q.at(-1).id).version:0]))}}serializeEarliestVersion(){return{schemaVersion:2,sequences:Object.fromEntries(Object.values(this.migrations).map(({sequenceId:J})=>[J,0]))}}}var f={};SZ0(f,{unknownObject:()=>{{return nX0}},unknown:()=>{{return fX0}},union:()=>{{return aX0}},string:()=>{{return Gz}},srcUrl:()=>{{return qY0}},setEnum:()=>{{return Ig}},positiveNumber:()=>{{return mX0}},positiveInteger:()=>{{return uX0}},optional:()=>{{return Pg}},object:()=>{{return sX0}},numberUnion:()=>{{return oX0}},number:()=>{{return bB}},nullable:()=>{{return Tg}},nonZeroNumber:()=>{{return hX0}},nonZeroInteger:()=>{{return cX0}},model:()=>{{return tX0}},literalEnum:()=>{{return eX0}},literal:()=>{{return lX0}},linkUrl:()=>{{return QY0}},jsonValue:()=>{{return TY}},jsonDict:()=>{{return rX0}},integer:()=>{{return mE}},indexKey:()=>{{return XY0}},dict:()=>{{return wg}},boolean:()=>{{return pX0}},bigint:()=>{{return dX0}},arrayOf:()=>{{return iX0}},array:()=>{{return SE}},any:()=>{{return gX0}},Validator:()=>{{return b5}},ValidationError:()=>{{return o6}},UnionValidator:()=>{{return YW}},ObjectValidator:()=>{{return XW}},DictValidator:()=>{{return PB}},ArrayOfValidator:()=>{{return IB}}});var SX0=function(J){if(!J.length)return null;let Q="";for(let Z of J)if(typeof Z==="number")Q+=`.${Z}`;else if(Z.startsWith("("))if(Q.endsWith(")"))Q=`${Q.slice(0,-1)}, ${Z.slice(1)}`;else Q+=Z;else Q+=`.${Z}`;if(Q=Q.replace(/id = [^,]+, /,"").replace(/id = [^)]+/,""),Q.startsWith("."))return Q.slice(1);return Q},m7=function(J,Q){try{return Q()}catch(Z){if(Z instanceof o6)throw new o6(Z.rawMessage,[J,...Z.path]);throw new o6(Z.toString(),[J])}},IZ=function(J){if(J===null)return"null";if(Array.isArray(J))return"an array";const Q=typeof J;switch(Q){case"bigint":case"boolean":case"function":case"number":case"string":case"symbol":return`a ${Q}`;case"object":return`an ${Q}`;case"undefined":return"undefined";default:r5(Q)}},TB=function(J){return new b5((Q)=>{if(typeof Q!==J)throw new o6(`Expected ${J}, got ${IZ(Q)}`);return Q})},lX0=function(J){return new b5((Q)=>{if(Q!==J)throw new o6(`Expected ${J}, got ${JSON.stringify(Q)}`);return J})},iX0=function(J){return new IB(J)},sX0=function(J){return new XW(J)},fE=function(J){return typeof J==="object"&&J!==null&&(Object.getPrototypeOf(J)===Object.prototype||Object.getPrototypeOf(J)===null||Object.getPrototypeOf(J)===qz)},gE=function(J){if(J===null||typeof J==="number"||typeof J==="string"||typeof J==="boolean")return!0;if(Array.isArray(J))return J.every(gE);if(fE(J))return Object.values(J).every(gE);return!1},rX0=function(){return wg(Gz,TY)},wg=function(J,Q){return new PB(J,Q)},aX0=function(J,Q){return new YW(J,Q,(Z,q)=>{throw new o6(`Expected one of ${Object.keys(Q).map((Y)=>JSON.stringify(Y)).join(" or ")}, got ${JSON.stringify(q)}`,[J])},!1)},oX0=function(J,Q){return new YW(J,Q,(Z,q)=>{throw new o6(`Expected one of ${Object.keys(Q).map((Y)=>JSON.stringify(Y)).join(" or ")}, got ${JSON.stringify(q)}`,[J])},!0)},tX0=function(J,Q){return new b5((Z)=>{return m7(J,()=>Q.validate(Z))},(Z,q)=>{return m7(J,()=>{if(Q.validateUsingKnownGoodVersion)return Q.validateUsingKnownGoodVersion(Z,q);else return Q.validate(q)})})},Ig=function(J){return new b5((Q)=>{if(!J.has(Q)){const Z=Array.from(J,(q)=>JSON.stringify(q)).join(" or ");throw new o6(`Expected ${Z}, got ${Q}`)}return Q})},Pg=function(J){return new b5((Q)=>{if(Q===void 0)return;return J.validate(Q)},(Q,Z)=>{if(Q===void 0&&Z===void 0)return;if(Z===void 0)return;if(J.validateUsingKnownGoodVersion&&Q!==void 0)return J.validateUsingKnownGoodVersion(Q,Z);return J.validate(Z)})},Tg=function(J){return new b5((Q)=>{if(Q===null)return null;return J.validate(Q)},(Q,Z)=>{if(Z===null)return null;if(J.validateUsingKnownGoodVersion&&Q!==null)return J.validateUsingKnownGoodVersion(Q,Z);return J.validate(Z)})},eX0=function(...J){return Ig(new Set(J))},bg=function(J){try{return new URL(J)}catch(Q){if(J.startsWith("/")||J.startsWith("./"))try{return new URL(J,"http://example.com")}catch(Z){throw new o6(`Expected a valid url, got ${JSON.stringify(J)}`)}throw new o6(`Expected a valid url, got ${JSON.stringify(J)}`)}};class o6 extends Error{constructor(J,Q=[]){const Z=SX0(Q),q=J.split("\n").map((Y,$)=>$===0?Y:`  ${Y}`).join("\n");super(Q?`At ${Z}: ${q}`:q);this.rawMessage=J,this.path=Q}name="ValidationError"}class b5{constructor(J,Q){this.validationFn=J,this.validateUsingKnownGoodVersionFn=Q}validate(J){const Q=this.validationFn(J);if(!Object.is(J,Q))throw new o6("Validator functions must return the same value they were passed");return Q}validateUsingKnownGoodVersion(J,Q){if(Object.is(J,Q))return J;if(this.validateUsingKnownGoodVersionFn)return this.validateUsingKnownGoodVersionFn(J,Q);return this.validate(Q)}isValid(J){try{return this.validate(J),!0}catch{return!1}}nullable(){return Tg(this)}optional(){return Pg(this)}refine(J){return new b5((Q)=>{return J(this.validate(Q))},(Q,Z)=>{const q=this.validateUsingKnownGoodVersion(Q,Z);if(Object.is(Q,q))return Q;return J(q)})}check(J,Q){if(typeof J==="string")return this.refine((Z)=>{return m7(`(check ${J})`,()=>Q(Z)),Z});else return this.refine((Z)=>{return J(Z),Z})}}class IB extends b5{constructor(J){super((Q)=>{const Z=SE.validate(Q);for(let q=0;q<Z.length;q++)m7(q,()=>J.validate(Z[q]));return Z},(Q,Z)=>{if(!J.validateUsingKnownGoodVersion)return this.validate(Z);const q=SE.validate(Z);let Y=Q.length!==q.length;for(let $=0;$<q.length;$++){const W=q[$];if($>=Q.length){Y=!0,m7($,()=>J.validate(W));continue}if(Object.is(Q[$],W))continue;const G=m7($,()=>J.validateUsingKnownGoodVersion(Q[$],W));if(!Object.is(G,Q[$]))Y=!0}return Y?Z:Q});this.itemValidator=J}nonEmpty(){return this.check((J)=>{if(J.length===0)throw new o6("Expected a non-empty array")})}lengthGreaterThan1(){return this.check((J)=>{if(J.length<=1)throw new o6("Expected an array with length greater than 1")})}}class XW extends b5{constructor(J,Q=!1){super((Z)=>{if(typeof Z!=="object"||Z===null)throw new o6(`Expected object, got ${IZ(Z)}`);for(let[q,Y]of Object.entries(J))m7(q,()=>{Y.validate(G7(Z,q))});if(!Q){for(let q of Object.keys(Z))if(!R4(J,q))throw new o6("Unexpected property",[q])}return Z},(Z,q)=>{if(typeof q!=="object"||q===null)throw new o6(`Expected object, got ${IZ(q)}`);let Y=!1;for(let[$,W]of Object.entries(J)){const G=G7(Z,$),z=G7(q,$);if(Object.is(G,z))continue;const U=m7($,()=>{const F=W;if(F.validateUsingKnownGoodVersion)return F.validateUsingKnownGoodVersion(G,z);else return F.validate(z)});if(!Object.is(U,G))Y=!0}if(!Q){for(let $ of Object.keys(q))if(!R4(J,$))throw new o6("Unexpected property",[$])}for(let $ of Object.keys(Z))if(!R4(q,$)){Y=!0;break}return Y?q:Z});this.config=J,this.shouldAllowUnknownProperties=Q}allowUnknownProperties(){return new XW(this.config,!0)}extend(J){return new XW({...this.config,...J})}}class YW extends b5{constructor(J,Q,Z,q){super((Y)=>{this.expectObject(Y);const{matchingSchema:$,variant:W}=this.getMatchingSchemaAndVariant(Y);if($===void 0)return this.unknownValueValidation(Y,W);return m7(`(${J} = ${W})`,()=>$.validate(Y))},(Y,$)=>{this.expectObject($),this.expectObject(Y);const{matchingSchema:W,variant:G}=this.getMatchingSchemaAndVariant($);if(W===void 0)return this.unknownValueValidation($,G);if(G7(Y,J)!==G7($,J))return m7(`(${J} = ${G})`,()=>W.validate($));return m7(`(${J} = ${G})`,()=>{if(W.validateUsingKnownGoodVersion)return W.validateUsingKnownGoodVersion(Y,$);else return W.validate($)})});this.key=J,this.config=Q,this.unknownValueValidation=Z,this.useNumberKeys=q}expectObject(J){if(typeof J!=="object"||J===null)throw new o6(`Expected an object, got ${IZ(J)}`,[])}getMatchingSchemaAndVariant(J){const Q=G7(J,this.key);if(!this.useNumberKeys&&typeof Q!=="string")throw new o6(`Expected a string for key "${this.key}", got ${IZ(Q)}`);else if(this.useNumberKeys&&!Number.isFinite(Number(Q)))throw new o6(`Expected a number for key "${this.key}", got "${Q}"`);return{matchingSchema:R4(this.config,Q)?this.config[Q]:void 0,variant:Q}}validateUnknownVariants(J){return new YW(this.key,this.config,J,this.useNumberKeys)}}class PB extends b5{constructor(J,Q){super((Z)=>{if(typeof Z!=="object"||Z===null)throw new o6(`Expected object, got ${IZ(Z)}`);for(let[q,Y]of Object.entries(Z))m7(q,()=>{J.validate(q),Q.validate(Y)});return Z},(Z,q)=>{if(typeof q!=="object"||q===null)throw new o6(`Expected object, got ${IZ(q)}`);let Y=!1;for(let[$,W]of Object.entries(q)){if(!R4(Z,$)){Y=!0,m7($,()=>{J.validate($),Q.validate(W)});continue}const G=G7(Z,$),z=W;if(Object.is(G,z))continue;const U=m7($,()=>{if(Q.validateUsingKnownGoodVersion)return Q.validateUsingKnownGoodVersion(G,z);else return Q.validate(z)});if(!Object.is(U,G))Y=!0}for(let $ of Object.keys(Z))if(!R4(q,$)){Y=!0;break}return Y?q:Z});this.keyValidator=J,this.valueValidator=Q}}var fX0=new b5((J)=>J),gX0=new b5((J)=>J),Gz=TB("string"),bB=TB("number").check((J)=>{if(Number.isNaN(J))throw new o6("Expected a number, got NaN");if(!Number.isFinite(J))throw new o6(`Expected a finite number, got ${J}`)}),mX0=bB.check((J)=>{if(J<0)throw new o6(`Expected a positive number, got ${J}`)}),hX0=bB.check((J)=>{if(J<=0)throw new o6(`Expected a non-zero positive number, got ${J}`)}),mE=bB.check((J)=>{if(!Number.isInteger(J))throw new o6(`Expected an integer, got ${J}`)}),uX0=mE.check((J)=>{if(J<0)throw new o6(`Expected a positive integer, got ${J}`)}),cX0=mE.check((J)=>{if(J<=0)throw new o6(`Expected a non-zero positive integer, got ${J}`)}),pX0=TB("boolean"),dX0=TB("bigint"),SE=new b5((J)=>{if(!Array.isArray(J))throw new o6(`Expected an array, got ${IZ(J)}`);return J}),nX0=new b5((J)=>{if(typeof J!=="object"||J===null)throw new o6(`Expected object, got ${IZ(J)}`);return J}),TY=new b5((J)=>{if(gE(J))return J;throw new o6(`Expected json serializable value, got ${typeof J}`)},(J,Q)=>{if(Array.isArray(J)&&Array.isArray(Q)){let Z=J.length!==Q.length;for(let q=0;q<Q.length;q++){if(q>=J.length){Z=!0,TY.validate(Q[q]);continue}const Y=J[q],$=Q[q];if(Object.is(Y,$))continue;const W=TY.validateUsingKnownGoodVersion(Y,$);if(!Object.is(W,Y))Z=!0}return Z?Q:J}else if(fE(J)&&fE(Q)){let Z=!1;for(let q of Object.keys(Q)){if(!R4(J,q)){Z=!0,TY.validate(Q[q]);continue}const Y=J[q],$=Q[q];if(Object.is(Y,$))continue;const W=TY.validateUsingKnownGoodVersion(Y,$);if(!Object.is(W,Y))Z=!0}for(let q of Object.keys(J))if(!R4(Q,q)){Z=!0;break}return Z?Q:J}else return TY.validate(Q)}),JY0=new Set(["http:","https:","mailto:"]),QY0=Gz.check((J)=>{if(J==="")return;const Q=bg(J);if(!JY0.has(Q.protocol.toLowerCase()))throw new o6(`Expected a valid url, got ${JSON.stringify(J)} (invalid protocol)`)}),ZY0=new Set(["http:","https:","data:"]),qY0=Gz.check((J)=>{if(J==="")return;const Q=bg(J);if(!ZY0.has(Q.protocol.toLowerCase()))throw new o6(`Expected a valid url, got ${JSON.stringify(J)} (invalid protocol)`)}),XY0=Gz.refine((J)=>{try{return LE(J),J}catch{throw new o6(`Expected an index key, got ${JSON.stringify(J)}`)}});var o9=function(J){return f.string.refine((Q)=>{if(!Q.startsWith(`${J}:`))throw new Error(`${J} ID must start with "${J}:"`);return Q})};var bY=function(J,Q){return f.object({id:eq,typeName:f.literal("asset"),type:f.literal(J),props:Q,meta:f.jsonValue})},eq=o9("asset");var YY0=f.model("camera",f.object({typeName:f.literal("camera"),id:o9("camera"),x:f.number,y:f.number,z:f.number,meta:f.jsonValue})),KY0=X9("com.tldraw.camera",{AddMeta:1}),xg=j9({sequenceId:"com.tldraw.camera",recordType:"camera",sequence:[{id:KY0.AddMeta,up:(J)=>{J.meta={}}}]}),t9=T5("camera",{validator:YY0,scope:"session"}).withDefaultProperties(()=>({x:0,y:0,z:1,meta:{}}));var OQ=f.object({x:f.number,y:f.number,z:f.number.optional()}),JX=f.object({x:f.number,y:f.number,w:f.number,h:f.number});var $Y0=new Set(["none","default","pointer","cross","grab","rotate","grabbing","resize-edge","resize-corner","text","move","ew-resize","ns-resize","nesw-resize","nwse-resize","nesw-rotate","nwse-rotate","swne-rotate","senw-rotate","zoom-in","zoom-out"]),hE=f.setEnum($Y0),yg=f.object({type:hE,rotation:f.number});var Hz=f.number.check((J)=>{if(J<0||J>1)throw new f.ValidationError("Opacity must be between 0 and 1")});var vg=new Set(["accent","white","black","selection-stroke","selection-fill","laser","muted-1"]),uE=f.setEnum(vg);var WY0=new Set(["starting","paused","active","stopping"]),zz=f.object({id:f.string,points:f.arrayOf(OQ),size:f.positiveNumber,color:uE,opacity:f.number,state:f.setEnum(WY0),delay:f.number,shrink:f.number,taper:f.boolean});var o5=function(J){return a5.isId(J)},PZ=o9("page"),GY0=f.model("page",f.object({typeName:f.literal("page"),id:PZ,name:f.string,index:f.indexKey,meta:f.jsonValue})),HY0=X9("com.tldraw.page",{AddMeta:1}),Sg=j9({sequenceId:"com.tldraw.page",recordType:"page",sequence:[{id:HY0.AddMeta,up:(J)=>{J.meta={}}}]}),a5=T5("page",{validator:GY0,scope:"document"}).withDefaultProperties(()=>({meta:{}}));var fg=function(J){const Q={};for(let[q,Y]of J)Q[q]=f.optional(Y);const Z=f.model("instance",f.object({typeName:f.literal("instance"),id:o9("instance"),currentPageId:PZ,followingUserId:f.string.nullable(),brush:JX.nullable(),opacityForNextShape:Hz,stylesForNextShape:f.object(Q),cursor:yg,scribbles:f.arrayOf(zz),isFocusMode:f.boolean,isDebugMode:f.boolean,isToolLocked:f.boolean,exportBackground:f.boolean,screenBounds:JX,insets:f.arrayOf(f.boolean),zoomBrush:JX.nullable(),isPenMode:f.boolean,isGridMode:f.boolean,chatMessage:f.string,isChatting:f.boolean,highlightedUserIds:f.arrayOf(f.string),canMoveCamera:f.boolean,isFocused:f.boolean,devicePixelRatio:f.number,isCoarsePointer:f.boolean,isHoveringCanvas:f.boolean.nullable(),openMenus:f.arrayOf(f.string),isChangingStyle:f.boolean,isReadonly:f.boolean,meta:f.jsonValue,duplicateProps:f.object({shapeIds:f.arrayOf(o9("shape")),offset:f.object({x:f.number,y:f.number})}).nullable()}));return T5("instance",{validator:Z,scope:"session"}).withDefaultProperties(()=>({followingUserId:null,opacityForNextShape:1,stylesForNextShape:{},brush:null,scribbles:[],cursor:{type:"default",rotation:0},isFocusMode:!1,exportBackground:!1,isDebugMode:!0,isToolLocked:!1,screenBounds:{x:0,y:0,w:1080,h:720},insets:[!1,!1,!1,!1],zoomBrush:null,isGridMode:!1,isPenMode:!1,chatMessage:"",isChatting:!1,highlightedUserIds:[],canMoveCamera:!0,isFocused:!1,devicePixelRatio:typeof window==="undefined"?1:window.devicePixelRatio,isCoarsePointer:!1,isHoveringCanvas:null,openMenus:[],isChangingStyle:!1,isReadonly:!1,meta:{},duplicateProps:null}))},cA0=o9("instance"),T9=X9("com.tldraw.instance",{AddTransparentExportBgs:1,RemoveDialog:2,AddToolLockMode:3,RemoveExtraPropsForNextShape:4,AddLabelColor:5,AddFollowingUserId:6,RemoveAlignJustify:7,AddZoom:8,AddVerticalAlign:9,AddScribbleDelay:10,RemoveUserId:11,AddIsPenModeAndIsGridMode:12,HoistOpacity:13,AddChat:14,AddHighlightedUserIds:15,ReplacePropsForNextShapeWithStylesForNextShape:16,AddMeta:17,RemoveCursorColor:18,AddLonelyProperties:19,ReadOnlyReadonly:20,AddHoveringCanvas:21,AddScribbles:22,AddInset:23,AddDuplicateProps:24}),gg=j9({sequenceId:"com.tldraw.instance",recordType:"instance",sequence:[{id:T9.AddTransparentExportBgs,up:(J)=>{return{...J,exportBackground:!0}}},{id:T9.RemoveDialog,up:({dialog:J,...Q})=>{return Q}},{id:T9.AddToolLockMode,up:(J)=>{return{...J,isToolLocked:!1}}},{id:T9.RemoveExtraPropsForNextShape,up:({propsForNextShape:J,...Q})=>{return{...Q,propsForNextShape:Object.fromEntries(Object.entries(J).filter(([Z])=>["color","labelColor","dash","fill","size","font","align","verticalAlign","icon","geo","arrowheadStart","arrowheadEnd","spline"].includes(Z)))}}},{id:T9.AddLabelColor,up:({propsForNextShape:J,...Q})=>{return{...Q,propsForNextShape:{...J,labelColor:"black"}}}},{id:T9.AddFollowingUserId,up:(J)=>{return{...J,followingUserId:null}}},{id:T9.RemoveAlignJustify,up:(J)=>{let Q=J.propsForNextShape.align;if(Q==="justify")Q="start";return{...J,propsForNextShape:{...J.propsForNextShape,align:Q}}}},{id:T9.AddZoom,up:(J)=>{return{...J,zoomBrush:null}}},{id:T9.AddVerticalAlign,up:(J)=>{return{...J,propsForNextShape:{...J.propsForNextShape,verticalAlign:"middle"}}}},{id:T9.AddScribbleDelay,up:(J)=>{if(J.scribble!==null)return{...J,scribble:{...J.scribble,delay:0}};return{...J}}},{id:T9.RemoveUserId,up:({userId:J,...Q})=>{return Q}},{id:T9.AddIsPenModeAndIsGridMode,up:(J)=>{return{...J,isPenMode:!1,isGridMode:!1}}},{id:T9.HoistOpacity,up:({propsForNextShape:{opacity:J,...Q},...Z})=>{return{...Z,opacityForNextShape:Number(J??"1"),propsForNextShape:Q}}},{id:T9.AddChat,up:(J)=>{return{...J,chatMessage:"",isChatting:!1}}},{id:T9.AddHighlightedUserIds,up:(J)=>{return{...J,highlightedUserIds:[]}}},{id:T9.ReplacePropsForNextShapeWithStylesForNextShape,up:({propsForNextShape:J,...Q})=>{return{...Q,stylesForNextShape:{}}}},{id:T9.AddMeta,up:(J)=>{return{...J,meta:{}}}},{id:T9.RemoveCursorColor,up:(J)=>{const{color:Q,...Z}=J.cursor;return{...J,cursor:Z}}},{id:T9.AddLonelyProperties,up:(J)=>{return{...J,canMoveCamera:!0,isFocused:!1,devicePixelRatio:1,isCoarsePointer:!1,openMenus:[],isChangingStyle:!1,isReadOnly:!1}}},{id:T9.ReadOnlyReadonly,up:({isReadOnly:J,...Q})=>{return{...Q,isReadonly:J}}},{id:T9.AddHoveringCanvas,up:(J)=>{return{...J,isHoveringCanvas:null}}},{id:T9.AddScribbles,up:({scribble:J,...Q})=>{return{...Q,scribbles:[]}}},{id:T9.AddInset,up:(J)=>{return{...J,insets:[!1,!1,!1,!1]}},down:({insets:J,...Q})=>{return{...Q}}},{id:T9.AddDuplicateProps,up:(J)=>{return{...J,duplicateProps:null}},down:({duplicateProps:J,...Q})=>{return{...Q}}}]}),x5="instance:instance";var cE=function(J,Q,Z){return f.object({id:H7,typeName:f.literal("shape"),x:f.number,y:f.number,rotation:f.number,index:f.indexKey,parentId:mg,type:f.literal(J),isLocked:f.boolean,opacity:Hz,props:Q?f.object(Q):f.jsonValue,meta:Z?f.object(Z):f.jsonValue})},mg=f.string.refine((J)=>{if(!J.startsWith("page:")&&!J.startsWith("shape:"))throw new Error('Parent ID must start with "page:" or "shape:"');return J}),H7=o9("shape");var zY0=f.model("instance_page_state",f.object({typeName:f.literal("instance_page_state"),id:o9("instance_page_state"),pageId:PZ,selectedShapeIds:f.arrayOf(H7),hintingShapeIds:f.arrayOf(H7),erasingShapeIds:f.arrayOf(H7),hoveredShapeId:H7.nullable(),editingShapeId:H7.nullable(),croppingShapeId:H7.nullable(),focusedGroupId:H7.nullable(),meta:f.jsonValue})),Uz=X9("com.tldraw.instance_page_state",{AddCroppingId:1,RemoveInstanceIdAndCameraId:2,AddMeta:3,RenameProperties:4,RenamePropertiesAgain:5}),hg=j9({sequenceId:"com.tldraw.instance_page_state",recordType:"instance_page_state",sequence:[{id:Uz.AddCroppingId,up(J){J.croppingShapeId=null}},{id:Uz.RemoveInstanceIdAndCameraId,up(J){delete J.instanceId,delete J.cameraId}},{id:Uz.AddMeta,up:(J)=>{J.meta={}}},{id:Uz.RenameProperties,up:(J)=>{},down:(J)=>{}},{id:Uz.RenamePropertiesAgain,up:(J)=>{J.selectedShapeIds=J.selectedIds,delete J.selectedIds,J.hintingShapeIds=J.hintingIds,delete J.hintingIds,J.erasingShapeIds=J.erasingIds,delete J.erasingIds,J.hoveredShapeId=J.hoveredId,delete J.hoveredId,J.editingShapeId=J.editingId,delete J.editingId,J.croppingShapeId=J.croppingShapeId??J.croppingId??null,delete J.croppingId,J.focusedGroupId=J.focusLayerId,delete J.focusLayerId},down:(J)=>{J.selectedIds=J.selectedShapeIds,delete J.selectedShapeIds,J.hintingIds=J.hintingShapeIds,delete J.hintingShapeIds,J.erasingIds=J.erasingShapeIds,delete J.erasingShapeIds,J.hoveredId=J.hoveredShapeId,delete J.hoveredShapeId,J.editingId=J.editingShapeId,delete J.editingShapeId,J.croppingId=J.croppingShapeId,delete J.croppingShapeId,J.focusLayerId=J.focusedGroupId,delete J.focusedGroupId}}]}),l9=T5("instance_page_state",{validator:zY0,scope:"session"}).withDefaultProperties(()=>({editingShapeId:null,croppingShapeId:null,selectedShapeIds:[],hoveredShapeId:null,erasingShapeIds:[],hintingShapeIds:[],focusedGroupId:null,meta:{}}));var UY0=f.model("pointer",f.object({typeName:f.literal("pointer"),id:o9("pointer"),x:f.number,y:f.number,lastActivityTimestamp:f.number,meta:f.jsonValue})),LY0=X9("com.tldraw.pointer",{AddMeta:1}),ug=j9({sequenceId:"com.tldraw.pointer",recordType:"pointer",sequence:[{id:LY0.AddMeta,up:(J)=>{J.meta={}}}]}),KW=T5("pointer",{validator:UY0,scope:"session"}).withDefaultProperties(()=>({x:0,y:0,lastActivityTimestamp:0,meta:{}})),QX=KW.createId("pointer");var FY0=f.model("instance_presence",f.object({typeName:f.literal("instance_presence"),id:o9("instance_presence"),userId:f.string,userName:f.string,lastActivityTimestamp:f.number,followingUserId:f.string.nullable(),cursor:f.object({x:f.number,y:f.number,type:hE,rotation:f.number}),color:f.string,camera:f.object({x:f.number,y:f.number,z:f.number}),screenBounds:JX,selectedShapeIds:f.arrayOf(o9("shape")),currentPageId:o9("page"),brush:JX.nullable(),scribbles:f.arrayOf(zz),chatMessage:f.string,meta:f.jsonValue})),Lz=X9("com.tldraw.instance_presence",{AddScribbleDelay:1,RemoveInstanceId:2,AddChatMessage:3,AddMeta:4,RenameSelectedShapeIds:5}),cg=j9({sequenceId:"com.tldraw.instance_presence",recordType:"instance_presence",sequence:[{id:Lz.AddScribbleDelay,up:(J)=>{if(J.scribble!==null)J.scribble.delay=0}},{id:Lz.RemoveInstanceId,up:(J)=>{delete J.instanceId}},{id:Lz.AddChatMessage,up:(J)=>{J.chatMessage=""}},{id:Lz.AddMeta,up:(J)=>{J.meta={}}},{id:Lz.RenameSelectedShapeIds,up:(J)=>{}}]}),xB=T5("instance_presence",{validator:FY0,scope:"presence"}).withDefaultProperties(()=>({lastActivityTimestamp:0,followingUserId:null,color:"#FF0000",camera:{x:0,y:0,z:1},cursor:{x:0,y:0,type:"default",rotation:0},screenBounds:{x:0,y:0,w:1,h:1},selectedShapeIds:[],brush:null,scribbles:[],chatMessage:"",meta:{}}));var BY0=f.model("document",f.object({typeName:f.literal("document"),id:f.literal("document:document"),gridSize:f.number,name:f.string,meta:f.jsonValue})),pg=X9("com.tldraw.document",{AddName:1,AddMeta:2}),dg=j9({sequenceId:"com.tldraw.document",recordType:"document",sequence:[{id:pg.AddName,up:(J)=>{J.name=""},down:(J)=>{delete J.name}},{id:pg.AddMeta,up:(J)=>{J.meta={}}}]}),$W=T5("document",{validator:BY0,scope:"document"}).withDefaultProperties(()=>({gridSize:10,name:"",meta:{}})),WW=$W.createId("document");var NY0=function(J,Q){if(J.index<Q.index)return-1;else if(J.index>Q.index)return 1;return 0},lg=function(J){if(J.typeName==="asset"){if("src"in J)J.src="<redacted>";if("src"in J.props)J.props.src="<redacted>"}},MY0=function(){return[a5.create({id:"page:page",name:"Page 1",index:"a1",meta:{}})]},ng=function(J){const Q=J.query.ids("page"),Z=()=>{if(!J.has(WW))return J.put([$W.create({id:WW,name:J.props.defaultName})]),Z();if(!J.has(QX))return J.put([KW.create({id:QX})]),Z();const q=Q.get();if(q.size===0)return J.put(MY0()),Z();const Y=()=>[...q].map((z)=>J.get(z)).sort(NY0)[0].id,$=J.get(x5);if(!$)return J.put([J.schema.types.instance.create({id:x5,currentPageId:Y(),exportBackground:!0})]),Z();else if(!q.has($.currentPageId))return J.put([{...$,currentPageId:Y()}]),Z();const W=new Set,G=new Set;for(let z of q){const U=l9.createId(z);if(!J.has(U))W.add(U);const F=t9.createId(z);if(!J.has(F))G.add(F)}if(W.size>0)J.put([...W].map((z)=>l9.create({id:z,pageId:l9.parseId(z)})));if(G.size>0)J.put([...G].map((z)=>t9.create({id:z})))};return Z},ig=({error:J,phase:Q,record:Z,recordBefore:q})=>{throw jY(J,{tags:{origin:"store.validateRecord",storePhase:Q,isExistingValidationIssue:Q==="initialize"},extras:{recordBefore:q?lg(p6(q)):void 0,recordAfter:lg(p6(Z))}}),J};var sg=bY("bookmark",f.object({title:f.string,description:f.string,image:f.string,src:f.srcUrl.nullable()})),OY0=X9("com.tldraw.asset.bookmark",{MakeUrlsValid:1}),rg=j9({sequenceId:"com.tldraw.asset.bookmark",recordType:"asset",filter:(J)=>J.type==="bookmark",sequence:[{id:OY0.MakeUrlsValid,up:(J)=>{if(!f.srcUrl.isValid(J.props.src))J.props.src=""},down:(J)=>{}}]});var ag=bY("image",f.object({w:f.number,h:f.number,name:f.string,isAnimated:f.boolean,mimeType:f.string.nullable(),src:f.srcUrl.nullable()})),pE=X9("com.tldraw.asset.image",{AddIsAnimated:1,RenameWidthHeight:2,MakeUrlsValid:3}),og=j9({sequenceId:"com.tldraw.asset.image",recordType:"asset",filter:(J)=>J.type==="image",sequence:[{id:pE.AddIsAnimated,up:(J)=>{J.props.isAnimated=!1},down:(J)=>{delete J.props.isAnimated}},{id:pE.RenameWidthHeight,up:(J)=>{J.props.w=J.props.width,J.props.h=J.props.height,delete J.props.width,delete J.props.height},down:(J)=>{J.props.width=J.props.w,J.props.height=J.props.h,delete J.props.w,delete J.props.h}},{id:pE.MakeUrlsValid,up:(J)=>{if(!f.srcUrl.isValid(J.props.src))J.props.src=""},down:(J)=>{}}]});var tg=bY("video",f.object({w:f.number,h:f.number,name:f.string,isAnimated:f.boolean,mimeType:f.string.nullable(),src:f.srcUrl.nullable()})),dE=X9("com.tldraw.asset.video",{AddIsAnimated:1,RenameWidthHeight:2,MakeUrlsValid:3}),eg=j9({sequenceId:"com.tldraw.asset.video",recordType:"asset",filter:(J)=>J.type==="video",sequence:[{id:dE.AddIsAnimated,up:(J)=>{J.props.isAnimated=!1},down:(J)=>{delete J.props.isAnimated}},{id:dE.RenameWidthHeight,up:(J)=>{J.props.w=J.props.width,J.props.h=J.props.height,delete J.props.width,delete J.props.height},down:(J)=>{J.props.width=J.props.w,J.props.height=J.props.h,delete J.props.w,delete J.props.h}},{id:dE.MakeUrlsValid,up:(J)=>{if(!f.srcUrl.isValid(J.props.src))J.props.src=""},down:(J)=>{}}]});var Jm=f.model("asset",f.union("type",{image:ag,video:tg,bookmark:sg})),VY0=X9("com.tldraw.asset",{AddMeta:1}),lE=j9({sequenceId:"com.tldraw.asset",recordType:"asset",sequence:[{id:VY0.AddMeta,up:(J)=>{J.meta={}}}]}),j4=T5("asset",{validator:Jm,scope:"document"}).withDefaultProperties(()=>({meta:{}}));class a8{constructor(J,Q,Z){this.id=J,this.defaultValue=Q,this.type=Z}static define(J,Q){const{defaultValue:Z,type:q=f.any}=Q;return new a8(J,Z,q)}static defineEnum(J,Q){const{defaultValue:Z,values:q}=Q;return new iE(J,Z,q)}validate(J){return this.type.validate(J)}validateUsingKnownGoodVersion(J,Q){if(this.type.validateUsingKnownGoodVersion)return this.type.validateUsingKnownGoodVersion(J,Q);else return this.validate(Q)}}class iE extends a8{constructor(J,Q,Z){super(J,Q,f.literalEnum(...Z));this.values=Z}}var TZ=function(J){if(!J)return!1;return J.typeName==="shape"},U5=function(J){if(!J)return!1;return J.startsWith("shape:")},v6=function(J){return`shape:${J??rq()}`},Fz=function(J){const Q=new Map;for(let[Z,q]of Object.entries(J))if(q instanceof a8){if(Q.has(q))throw new Error(`Duplicate style prop ${q.id}. Each style prop can only be used once within a shape.`);Q.set(q,Z)}return Q},Y9=function(J){return J},e9=function(J,Q){return sq(Q,(Z,q)=>`com.tldraw.shape.${J}/${q}`)},Qm=function(J){const Q=[];for(let[Z,{migrations:q}]of Object.entries(J)){const Y=`com.tldraw.shape.${Z}`;if(!q)Q.push(tq({sequenceId:Y,retroactive:!1,sequence:[]}));else if("sequenceId"in q)r8(Y===q.sequenceId,`sequenceId mismatch for ${Z} shape migrations. Expected '${Y}', got '${q.sequenceId}'`),Q.push(q);else if("sequence"in q)Q.push(tq({sequenceId:Y,retroactive:!1,sequence:q.sequence.map(($)=>("id"in $)?{id:$.id,scope:"record",filter:(W)=>W.typeName==="shape"&&W.type===Z,dependsOn:$.dependsOn,up:(W)=>{const G=$.up(W.props);if(G)W.props=G},down:typeof $.down==="function"?(W)=>{const G=$.down(W.props);if(G)W.props=G}:void 0}:$)}));else Q.push(tq({sequenceId:Y,retroactive:!1,sequence:Object.keys(q.migrators).map(($)=>Number($)).sort(($,W)=>$-W).map(($)=>({id:`${Y}/${$}`,scope:"record",filter:(W)=>W.typeName==="shape"&&W.type===Z,up:(W)=>{const G=q.migrators[$].up(W);if(G)return G},down:(W)=>{const G=q.migrators[$].down(W);if(G)return G}}))}))}return Q},Zm=function(J){return T5("shape",{scope:"document",validator:f.model("shape",f.union("type",sq(J,(Q,{props:Z,meta:q})=>cE(Q,Z,q))))}).withDefaultProperties(()=>({x:0,y:0,rotation:0,isLocked:!1,opacity:1,meta:{}}))},yB=X9("com.tldraw.shape",{AddIsLocked:1,HoistOpacity:2,AddMeta:3,AddWhite:4}),nE=j9({sequenceId:"com.tldraw.shape",recordType:"shape",sequence:[{id:yB.AddIsLocked,up:(J)=>{J.isLocked=!1},down:(J)=>{delete J.isLocked}},{id:yB.HoistOpacity,up:(J)=>{J.opacity=Number(J.props.opacity??"1"),delete J.props.opacity},down:(J)=>{const Q=J.opacity;delete J.opacity,J.props.opacity=Q<0.175?"0.1":Q<0.375?"0.25":Q<0.625?"0.5":Q<0.875?"0.75":"1"}},{id:yB.AddMeta,up:(J)=>{J.meta={}}},{id:yB.AddWhite,up:(J)=>{},down:(J)=>{if(J.props.color==="white")J.props.color="black"}}]});var A8="retired";var y5=function(J){return J.isDarkMode?GW.darkMode:GW.lightMode},qm=["black","grey","light-violet","violet","blue","light-blue","yellow","orange","green","light-green","light-red","red","white"],GW={lightMode:{id:"light",text:"#000000",background:"rgb(249, 250, 251)",solid:"#fcfffe",black:{solid:"#1d1d1d",note:{fill:"#FCE19C",text:"#000000"},semi:"#e8e8e8",pattern:"#494949",highlight:{srgb:"#fddd00",p3:"color(display-p3 0.972 0.8705 0.05)"}},blue:{solid:"#4465e9",note:{fill:"#8AA3FF",text:"#000000"},semi:"#dce1f8",pattern:"#6681ee",highlight:{srgb:"#10acff",p3:"color(display-p3 0.308 0.6632 0.9996)"}},green:{solid:"#099268",note:{fill:"#6FC896",text:"#000000"},semi:"#d3e9e3",pattern:"#39a785",highlight:{srgb:"#00ffc8",p3:"color(display-p3 0.2536 0.984 0.7981)"}},grey:{solid:"#9fa8b2",note:{fill:"#C0CAD3",text:"#000000"},semi:"#eceef0",pattern:"#bcc3c9",highlight:{srgb:"#cbe7f1",p3:"color(display-p3 0.8163 0.9023 0.9416)"}},"light-blue":{solid:"#4ba1f1",note:{fill:"#9BC4FD",text:"#000000"},semi:"#ddedfa",pattern:"#6fbbf8",highlight:{srgb:"#00f4ff",p3:"color(display-p3 0.1512 0.9414 0.9996)"}},"light-green":{solid:"#4cb05e",note:{fill:"#98D08A",text:"#000000"},semi:"#dbf0e0",pattern:"#65cb78",highlight:{srgb:"#65f641",p3:"color(display-p3 0.563 0.9495 0.3857)"}},"light-red":{solid:"#f87777",note:{fill:"#F7A5A1",text:"#000000"},semi:"#f4dadb",pattern:"#fe9e9e",highlight:{srgb:"#ff7fa3",p3:"color(display-p3 0.9988 0.5301 0.6397)"}},"light-violet":{solid:"#e085f4",note:{fill:"#DFB0F9",text:"#000000"},semi:"#f5eafa",pattern:"#e9acf8",highlight:{srgb:"#ff88ff",p3:"color(display-p3 0.9676 0.5652 0.9999)"}},orange:{solid:"#e16919",note:{fill:"#FAA475",text:"#000000"},semi:"#f8e2d4",pattern:"#f78438",highlight:{srgb:"#ffa500",p3:"color(display-p3 0.9988 0.6905 0.266)"}},red:{solid:"#e03131",note:{fill:"#FC8282",text:"#000000"},semi:"#f4dadb",pattern:"#e55959",highlight:{srgb:"#ff636e",p3:"color(display-p3 0.9992 0.4376 0.45)"}},violet:{solid:"#ae3ec9",note:{fill:"#DB91FD",text:"#000000"},semi:"#ecdcf2",pattern:"#bd63d3",highlight:{srgb:"#c77cff",p3:"color(display-p3 0.7469 0.5089 0.9995)"}},yellow:{solid:"#f1ac4b",note:{fill:"#FED49A",text:"#000000"},semi:"#f9f0e6",pattern:"#fecb92",highlight:{srgb:"#fddd00",p3:"color(display-p3 0.972 0.8705 0.05)"}},white:{solid:"#FFFFFF",semi:"#f5f5f5",pattern:"#f9f9f9",note:{fill:"#FFFFFF",text:"#000000"},highlight:{srgb:"#ffffff",p3:"color(display-p3 1 1 1)"}}},darkMode:{id:"dark",text:"hsl(210, 17%, 98%)",background:"hsl(240, 5%, 6.5%)",solid:"#010403",black:{solid:"#f2f2f2",note:{fill:"#2c2c2c",text:"#f2f2f2"},semi:"#2c3036",pattern:"#989898",highlight:{srgb:"#d2b700",p3:"color(display-p3 0.8078 0.7225 0.0312)"}},blue:{solid:"#4f72fc",note:{fill:"#2A3F98",text:"#f2f2f2"},semi:"#262d40",pattern:"#3a4b9e",highlight:{srgb:"#0079d2",p3:"color(display-p3 0.0032 0.4655 0.7991)"}},green:{solid:"#099268",note:{fill:"#014429",text:"#f2f2f2"},semi:"#253231",pattern:"#366a53",highlight:{srgb:"#009774",p3:"color(display-p3 0.0085 0.582 0.4604)"}},grey:{solid:"#9398b0",note:{fill:"#56595F",text:"#f2f2f2"},semi:"#33373c",pattern:"#7c8187",highlight:{srgb:"#9cb4cb",p3:"color(display-p3 0.6299 0.7012 0.7856)"}},"light-blue":{solid:"#4dabf7",note:{fill:"#1F5495",text:"#f2f2f2"},semi:"#2a3642",pattern:"#4d7aa9",highlight:{srgb:"#00bdc8",p3:"color(display-p3 0.0023 0.7259 0.7735)"}},"light-green":{solid:"#40c057",note:{fill:"#21581D",text:"#f2f2f2"},semi:"#2a3830",pattern:"#4e874e",highlight:{srgb:"#00a000",p3:"color(display-p3 0.2711 0.6172 0.0195)"}},"light-red":{solid:"#ff8787",note:{fill:"#923632",text:"#f2f2f2"},semi:"#3b3235",pattern:"#a56767",highlight:{srgb:"#db005b",p3:"color(display-p3 0.7849 0.0585 0.3589)"}},"light-violet":{solid:"#e599f7",note:{fill:"#762F8E",text:"#f2f2f2"},semi:"#383442",pattern:"#9770a9",highlight:{srgb:"#c400c7",p3:"color(display-p3 0.7024 0.0403 0.753)"}},orange:{solid:"#f76707",note:{fill:"#843906",text:"#f2f2f2"},semi:"#3a2e2a",pattern:"#9f552d",highlight:{srgb:"#d07a00",p3:"color(display-p3 0.7699 0.4937 0.0085)"}},red:{solid:"#e03131",note:{fill:"#89231A",text:"#f2f2f2"},semi:"#36292b",pattern:"#8f3734",highlight:{srgb:"#de002c",p3:"color(display-p3 0.7978 0.0509 0.2035)"}},violet:{solid:"#ae3ec9",note:{fill:"#681683",text:"#f2f2f2"},semi:"#31293c",pattern:"#763a8b",highlight:{srgb:"#9e00ee",p3:"color(display-p3 0.5651 0.0079 0.8986)"}},yellow:{solid:"#ffc034",note:{fill:"#98571B",text:"#f2f2f2"},semi:"#3c3934",pattern:"#fecb92",highlight:{srgb:"#d2b700",p3:"color(display-p3 0.8078 0.7225 0.0312)"}},white:{solid:"#f3f3f3",semi:"#f5f5f5",pattern:"#f9f9f9",note:{fill:"#eaeaea",text:"#1d1d1d"},highlight:{srgb:"#ffffff",p3:"color(display-p3 1 1 1)"}}}},F9=a8.defineEnum("tldraw:color",{defaultValue:"black",values:qm}),vB=a8.defineEnum("tldraw:labelColor",{defaultValue:"black",values:qm});var h7=a8.defineEnum("tldraw:dash",{defaultValue:"draw",values:["draw","solid","dashed","dotted"]});var o4=a8.defineEnum("tldraw:fill",{defaultValue:"none",values:["none","semi","solid","pattern"]});var MJ=a8.defineEnum("tldraw:font",{defaultValue:"draw",values:["draw","sans","serif","mono"]}),Bz={draw:"'tldraw_draw', sans-serif",sans:"'tldraw_sans', sans-serif",serif:"'tldraw_serif', serif",mono:"'tldraw_mono', monospace"};var L5=a8.defineEnum("tldraw:size",{defaultValue:"m",values:["s","m","l","xl"]});var Ym=["arrow","triangle","square","dot","pipe","diamond","inverted","bar","none"],HW=a8.defineEnum("tldraw:arrowheadStart",{defaultValue:"none",values:Ym}),zW=a8.defineEnum("tldraw:arrowheadEnd",{defaultValue:"arrow",values:Ym}),Xm=f.union("type",{binding:f.object({type:f.literal("binding"),boundShapeId:H7,normalizedAnchor:OQ,isExact:f.boolean,isPrecise:f.boolean}),point:f.object({type:f.literal("point"),x:f.number,y:f.number})}),Nz={labelColor:vB,color:F9,fill:o4,dash:h7,size:L5,arrowheadStart:HW,arrowheadEnd:zW,font:MJ,start:Xm,end:Xm,bend:f.number,text:f.string,labelPosition:f.number},sE=e9("arrow",{AddLabelColor:1,AddIsPrecise:2,AddLabelPosition:3}),Mz=Y9({sequence:[{id:sE.AddLabelColor,up:(J)=>{J.labelColor="black"},down:A8},{id:sE.AddIsPrecise,up:({start:J,end:Q})=>{if(J.type==="binding")J.isPrecise=!(J.normalizedAnchor.x===0.5&&J.normalizedAnchor.y===0.5);if(Q.type==="binding")Q.isPrecise=!(Q.normalizedAnchor.x===0.5&&Q.normalizedAnchor.y===0.5)},down:({start:J,end:Q})=>{if(J.type==="binding"){if(!J.isPrecise)J.normalizedAnchor={x:0.5,y:0.5};delete J.isPrecise}if(Q.type==="binding"){if(!Q.isPrecise)Q.normalizedAnchor={x:0.5,y:0.5};delete Q.isPrecise}}},{id:sE.AddLabelPosition,up:(J)=>{J.labelPosition=0.5},down:(J)=>{delete J.labelPosition}}]});var Oz={w:f.nonZeroNumber,h:f.nonZeroNumber,assetId:eq.nullable(),url:f.linkUrl},Km=e9("bookmark",{NullAssetId:1,MakeUrlsValid:2}),Vz=Y9({sequence:[{id:Km.NullAssetId,up:(J)=>{if(J.assetId===void 0)J.assetId=null},down:A8},{id:Km.MakeUrlsValid,up:(J)=>{if(!f.linkUrl.isValid(J.url))J.url=""},down:(J)=>{}}]});var rE=f.object({type:f.literalEnum("free","straight"),points:f.arrayOf(OQ)}),Dz={color:F9,fill:o4,dash:h7,size:L5,segments:f.arrayOf(rE),isComplete:f.boolean,isClosed:f.boolean,isPen:f.boolean},DY0=e9("draw",{AddInPen:1}),Rz=Y9({sequence:[{id:DY0.AddInPen,up:(J)=>{const{points:Q}=J.segments[0];if(Q.length===0){J.isPen=!1;return}let Z=!(Q[0].z===0||Q[0].z===0.5);if(Q[1])Z=Z&&!(Q[1].z===0||Q[1].z===0.5);J.isPen=Z},down:A8}]});var $m=/(^\/r\/[^/]+\/?$)/,o8=(J)=>{try{return new URL(J)}catch(Q){return}},bZ=[{type:"tldraw",title:"tldraw",hostnames:["beta.tldraw.com","tldraw.com","localhost:3000"],minWidth:300,minHeight:300,width:720,height:500,doesResize:!0,overridePermissions:{"allow-top-navigation":!0},toEmbedUrl:(J)=>{const Q=o8(J);if(Q&&Q.pathname.match($m))return J;return},fromEmbedUrl:(J)=>{const Q=o8(J);if(Q&&Q.pathname.match($m))return J;return}},{type:"figma",title:"Figma",hostnames:["figma.com"],width:720,height:500,doesResize:!0,toEmbedUrl:(J)=>{if(!!J.match(/https:\/\/([\w\.-]+\.)?figma.com\/(file|proto)\/([0-9a-zA-Z]{22,128})(?:\/.*)?$/)&&!J.includes("figma.com/embed"))return`https://www.figma.com/embed?embed_host=share&url=${J}`;return},fromEmbedUrl:(J)=>{const Q=o8(J);if(Q&&Q.pathname.match(/^\/embed\/?$/)){const Z=Q.searchParams.get("url");if(Z)return Z}return}},{type:"google_maps",title:"Google Maps",hostnames:["google.*"],width:720,height:500,doesResize:!0,toEmbedUrl:(J)=>{if(J.includes("/maps/")){const Q=J.match(/@(.*),(.*),(.*)z/);let Z;if(Q){const[,q,Y,$]=Q;Z=`https://${new URL(J).host.replace("www.","")}/maps/embed/v1/view?key=${process.env.NEXT_PUBLIC_GC_API_KEY}&center=${q},${Y}&zoom=${$}`}else Z="";return Z}return},fromEmbedUrl:(J)=>{const Q=o8(J);if(!Q)return;if(Q.pathname.match(/^\/maps\/embed\/v1\/view\/?$/)&&Q.searchParams.has("center")&&Q.searchParams.get("zoom")){const q=Q.searchParams.get("zoom"),[Y,$]=Q.searchParams.get("center").split(",");return`https://www.google.com/maps/@${Y},${$},${q}z`}return}},{type:"val_town",title:"Val Town",hostnames:["val.town"],minWidth:260,minHeight:100,width:720,height:500,doesResize:!0,toEmbedUrl:(J)=>{const Q=o8(J),Z=Q&&Q.pathname.match(/\/v\/([^/]+)\/?/);if(Z)return`https://www.val.town/embed/${Z[1]}`;return},fromEmbedUrl:(J)=>{const Q=o8(J),Z=Q&&Q.pathname.match(/\/embed\/([^/]+)\/?/);if(Z)return`https://www.val.town/v/${Z[1]}`;return}},{type:"codesandbox",title:"CodeSandbox",hostnames:["codesandbox.io"],minWidth:300,minHeight:300,width:720,height:500,doesResize:!0,toEmbedUrl:(J)=>{const Q=o8(J),Z=Q&&Q.pathname.match(/\/s\/([^/]+)\/?/);if(Z)return`https://codesandbox.io/embed/${Z[1]}`;return},fromEmbedUrl:(J)=>{const Q=o8(J),Z=Q&&Q.pathname.match(/\/embed\/([^/]+)\/?/);if(Z)return`https://codesandbox.io/s/${Z[1]}`;return}},{type:"codepen",title:"Codepen",hostnames:["codepen.io"],minWidth:300,minHeight:300,width:520,height:400,doesResize:!0,toEmbedUrl:(J)=>{const Q=/https:\/\/codepen.io\/([^/]+)\/pen\/([^/]+)/,Z=J.match(Q);if(Z){const[q,Y,$]=Z;return`https://codepen.io/${Y}/embed/${$}`}return},fromEmbedUrl:(J)=>{const Q=/https:\/\/codepen.io\/([^/]+)\/embed\/([^/]+)/,Z=J.match(Q);if(Z){const[q,Y,$]=Z;return`https://codepen.io/${Y}/pen/${$}`}return}},{type:"scratch",title:"Scratch",hostnames:["scratch.mit.edu"],width:520,height:400,doesResize:!1,toEmbedUrl:(J)=>{const Q=/https?:\/\/scratch.mit.edu\/projects\/([^/]+)/,Z=J.match(Q);if(Z){const[q,Y]=Z;return`https://scratch.mit.edu/projects/embed/${Y}`}return},fromEmbedUrl:(J)=>{const Q=/https:\/\/scratch.mit.edu\/projects\/embed\/([^/]+)/,Z=J.match(Q);if(Z){const[q,Y]=Z;return`https://scratch.mit.edu/projects/${Y}`}return}},{type:"youtube",title:"YouTube",hostnames:["*.youtube.com","youtube.com","youtu.be"],width:800,height:450,doesResize:!0,overridePermissions:{"allow-presentation":!0},isAspectRatioLocked:!0,toEmbedUrl:(J)=>{const Q=o8(J);if(!Q)return;const Z=Q.hostname.replace(/^www./,"");if(Z==="youtu.be")return`https://www.youtube.com/embed/${Q.pathname.split("/").filter(Boolean)[0]}`;else if((Z==="youtube.com"||Z==="m.youtube.com")&&Q.pathname.match(/^\/watch/))return`https://www.youtube.com/embed/${Q.searchParams.get("v")}`;return},fromEmbedUrl:(J)=>{const Q=o8(J);if(!Q)return;if(Q.hostname.replace(/^www./,"")==="youtube.com"){const q=Q.pathname.match(/^\/embed\/([^/]+)\/?/);if(q)return`https://www.youtube.com/watch?v=${q[1]}`}return}},{type:"google_calendar",title:"Google Calendar",hostnames:["calendar.google.*"],width:720,height:500,minWidth:460,minHeight:360,doesResize:!0,instructionLink:"https://support.google.com/calendar/answer/41207?hl=en",toEmbedUrl:(J)=>{const Q=o8(J),Z=Q?.searchParams.get("cid");if(Q?.pathname.match(/\/calendar\/u\/0/)&&Z){Q.pathname="/calendar/embed";const q=Array.from(Q.searchParams.keys());for(let Y of q)Q.searchParams.delete(Y);return Q.searchParams.set("src",Z),Q.href}return},fromEmbedUrl:(J)=>{const Q=o8(J),Z=Q?.searchParams.get("src");if(Q?.pathname.match(/\/calendar\/embed/)&&Z){Q.pathname="/calendar/u/0";const q=Array.from(Q.searchParams.keys());for(let Y of q)Q.searchParams.delete(Y);return Q.searchParams.set("cid",Z),Q.href}return}},{type:"google_slides",title:"Google Slides",hostnames:["docs.google.*"],width:720,height:500,minWidth:460,minHeight:360,doesResize:!0,toEmbedUrl:(J)=>{const Q=o8(J);if(Q?.pathname.match(/^\/presentation/)&&Q?.pathname.match(/\/pub\/?$/)){Q.pathname=Q.pathname.replace(/\/pub$/,"/embed");const Z=Array.from(Q.searchParams.keys());for(let q of Z)Q.searchParams.delete(q);return Q.href}return},fromEmbedUrl:(J)=>{const Q=o8(J);if(Q?.pathname.match(/^\/presentation/)&&Q?.pathname.match(/\/embed\/?$/)){Q.pathname=Q.pathname.replace(/\/embed$/,"/pub");const Z=Array.from(Q.searchParams.keys());for(let q of Z)Q.searchParams.delete(q);return Q.href}return}},{type:"github_gist",title:"GitHub Gist",hostnames:["gist.github.com"],width:720,height:500,doesResize:!0,toEmbedUrl:(J)=>{const Q=o8(J);if(Q&&Q.pathname.match(/\/([^/]+)\/([^/]+)/)){if(!J.split("/").pop())return;return J}return},fromEmbedUrl:(J)=>{const Q=o8(J);if(Q&&Q.pathname.match(/\/([^/]+)\/([^/]+)/)){if(!J.split("/").pop())return;return J}return}},{type:"replit",title:"Replit",hostnames:["replit.com"],width:720,height:500,doesResize:!0,toEmbedUrl:(J)=>{const Q=o8(J);if(Q&&Q.pathname.match(/\/@([^/]+)\/([^/]+)/))return`${J}?embed=true`;return},fromEmbedUrl:(J)=>{const Q=o8(J);if(Q&&Q.pathname.match(/\/@([^/]+)\/([^/]+)/)&&Q.searchParams.has("embed"))return Q.searchParams.delete("embed"),Q.href;return}},{type:"felt",title:"Felt",hostnames:["felt.com"],width:720,height:500,doesResize:!0,toEmbedUrl:(J)=>{const Q=o8(J);if(Q&&Q.pathname.match(/^\/map\//))return Q.origin+"/embed"+Q.pathname;return},fromEmbedUrl:(J)=>{const Q=o8(J);if(Q&&Q.pathname.match(/^\/embed\/map\//))return Q.pathname=Q.pathname.replace(/^\/embed/,""),Q.href;return}},{type:"spotify",title:"Spotify",hostnames:["open.spotify.com"],width:720,height:500,minHeight:500,overrideOutlineRadius:12,doesResize:!0,toEmbedUrl:(J)=>{const Q=o8(J);if(Q&&Q.pathname.match(/^\/(artist|album)\//))return Q.origin+"/embed"+Q.pathname;return},fromEmbedUrl:(J)=>{const Q=o8(J);if(Q&&Q.pathname.match(/^\/embed\/(artist|album)\//))return Q.origin+Q.pathname.replace(/^\/embed/,"");return}},{type:"vimeo",title:"Vimeo",hostnames:["vimeo.com","player.vimeo.com"],width:640,height:360,doesResize:!0,isAspectRatioLocked:!0,toEmbedUrl:(J)=>{const Q=o8(J);if(Q&&Q.hostname==="vimeo.com"){if(Q.pathname.match(/^\/[0-9]+/))return"https://player.vimeo.com/video/"+Q.pathname.split("/")[1]+"?title=0&byline=0"}return},fromEmbedUrl:(J)=>{const Q=o8(J);if(Q&&Q.hostname==="player.vimeo.com"){const Z=Q.pathname.match(/^\/video\/([^/]+)\/?$/);if(Z)return"https://vimeo.com/"+Z[1]}return}},{type:"excalidraw",title:"Excalidraw",hostnames:["excalidraw.com"],width:720,height:500,doesResize:!0,isAspectRatioLocked:!0,toEmbedUrl:(J)=>{const Q=o8(J);if(Q&&Q.hash.match(/#room=/))return J;return},fromEmbedUrl:(J)=>{const Q=o8(J);if(Q&&Q.hash.match(/#room=/))return J;return}},{type:"observable",title:"Observable",hostnames:["observablehq.com"],width:720,height:500,doesResize:!0,isAspectRatioLocked:!1,backgroundColor:"#fff",toEmbedUrl:(J)=>{const Q=o8(J);if(Q&&Q.pathname.match(/^\/@([^/]+)\/([^/]+)\/?$/))return`${Q.origin}/embed${Q.pathname}?cell=*`;if(Q&&Q.pathname.match(/^\/d\/([^/]+)\/?$/)){const Z=Q.pathname.replace(/^\/d/,"");return`${Q.origin}/embed${Z}?cell=*`}return},fromEmbedUrl:(J)=>{const Q=o8(J);if(Q&&Q.pathname.match(/^\/embed\/@([^/]+)\/([^/]+)\/?$/))return`${Q.origin}${Q.pathname.replace("/embed","")}#cell-*`;if(Q&&Q.pathname.match(/^\/embed\/([^/]+)\/?$/))return`${Q.origin}${Q.pathname.replace("/embed","/d")}#cell-*`;return}}],aE={"allow-downloads-without-user-activation":!1,"allow-downloads":!1,"allow-modals":!1,"allow-orientation-lock":!1,"allow-pointer-lock":!1,"allow-popups":!0,"allow-popups-to-escape-sandbox":!1,"allow-presentation":!1,"allow-storage-access-by-user-activation":!1,"allow-top-navigation":!1,"allow-top-navigation-by-user-activation":!1,"allow-scripts":!0,"allow-same-origin":!0,"allow-forms":!0},jz={w:f.nonZeroNumber,h:f.nonZeroNumber,url:f.string},SB=e9("embed",{GenOriginalUrlInEmbed:1,RemoveDoesResize:2,RemoveTmpOldUrl:3,RemovePermissionOverrides:4}),_z=Y9({sequence:[{id:SB.GenOriginalUrlInEmbed,up:(J)=>{try{const Q=J.url,Z=new URL(Q).host.replace("www.","");let q;for(let Y of bZ)if(Y.hostnames.includes(Z))try{q=Y.fromEmbedUrl(Q)}catch($){console.warn($)}J.tmpOldUrl=J.url,J.url=q??""}catch(Q){J.url="",J.tmpOldUrl=J.url}},down:A8},{id:SB.RemoveDoesResize,up:(J)=>{delete J.doesResize},down:A8},{id:SB.RemoveTmpOldUrl,up:(J)=>{delete J.tmpOldUrl},down:A8},{id:SB.RemovePermissionOverrides,up:(J)=>{delete J.overridePermissions},down:A8}]});var Ez={w:f.nonZeroNumber,h:f.nonZeroNumber,name:f.string},Cz=Y9({sequence:[]});var VQ=a8.defineEnum("tldraw:horizontalAlign",{defaultValue:"middle",values:["start","middle","end","start-legacy","end-legacy","middle-legacy"]});var ZX=a8.defineEnum("tldraw:verticalAlign",{defaultValue:"middle",values:["start","middle","end"]});var z7=a8.defineEnum("tldraw:geo",{defaultValue:"rectangle",values:["cloud","rectangle","ellipse","triangle","diamond","pentagon","hexagon","octagon","star","rhombus","rhombus-2","oval","trapezoid","arrow-right","arrow-left","arrow-up","arrow-down","x-box","check-box"]}),Az={geo:z7,labelColor:vB,color:F9,fill:o4,dash:h7,size:L5,font:MJ,align:VQ,verticalAlign:ZX,url:f.linkUrl,w:f.nonZeroNumber,h:f.nonZeroNumber,growY:f.positiveNumber,text:f.string},qX=e9("geo",{AddUrlProp:1,AddLabelColor:2,RemoveJustify:3,AddCheckBox:4,AddVerticalAlign:5,MigrateLegacyAlign:6,AddCloud:7,MakeUrlsValid:8}),kz=Y9({sequence:[{id:qX.AddUrlProp,up:(J)=>{J.url=""},down:A8},{id:qX.AddLabelColor,up:(J)=>{J.labelColor="black"},down:A8},{id:qX.RemoveJustify,up:(J)=>{if(J.align==="justify")J.align="start"},down:A8},{id:qX.AddCheckBox,up:(J)=>{},down:A8},{id:qX.AddVerticalAlign,up:(J)=>{J.verticalAlign="middle"},down:A8},{id:qX.MigrateLegacyAlign,up:(J)=>{let Q;switch(J.align){case"start":Q="start-legacy";break;case"end":Q="end-legacy";break;default:Q="middle-legacy";break}J.align=Q},down:A8},{id:qX.AddCloud,up:(J)=>{},down:A8},{id:qX.MakeUrlsValid,up:(J)=>{if(!f.linkUrl.isValid(J.url))J.url=""},down:(J)=>{}}]});var wz={},Iz=Y9({sequence:[]});var Pz={color:F9,size:L5,segments:f.arrayOf(rE),isComplete:f.boolean,isPen:f.boolean},Tz=Y9({sequence:[]});var RY0=f.object({topLeft:OQ,bottomRight:OQ}),bz={w:f.nonZeroNumber,h:f.nonZeroNumber,playing:f.boolean,url:f.linkUrl,assetId:eq.nullable(),crop:RY0.nullable()},oE=e9("image",{AddUrlProp:1,AddCropProp:2,MakeUrlsValid:3}),xz=Y9({sequence:[{id:oE.AddUrlProp,up:(J)=>{J.url=""},down:A8},{id:oE.AddCropProp,up:(J)=>{J.crop=null},down:(J)=>{delete J.crop}},{id:oE.MakeUrlsValid,up:(J)=>{if(!f.linkUrl.isValid(J.url))J.url=""},down:(J)=>{}}]});var UW=a8.defineEnum("tldraw:spline",{defaultValue:"line",values:["cubic","line"]}),jY0=f.object({id:f.string,index:f.indexKey,x:f.number,y:f.number}),yz={color:F9,dash:h7,size:L5,spline:UW,points:f.dict(f.string,jY0)},fB=e9("line",{AddSnapHandles:1,RemoveExtraHandleProps:2,HandlesToPoints:3,PointIndexIds:4}),vz=Y9({sequence:[{id:fB.AddSnapHandles,up:(J)=>{for(let Q of Object.values(J.handles))Q.canSnap=!0},down:A8},{id:fB.RemoveExtraHandleProps,up:(J)=>{J.handles=_Y(Object.values(J.handles).map((Q)=>[Q.index,{x:Q.x,y:Q.y}]))},down:(J)=>{const Q=Object.entries(J.handles).map(([Z,q])=>({index:Z,...q})).sort(P9);J.handles=Object.fromEntries(Q.map((Z,q)=>{const Y=q===0?"start":q===Q.length-1?"end":`handle:${Z.index}`;return[Y,{id:Y,type:"vertex",canBind:!1,canSnap:!0,index:Z.index,x:Z.x,y:Z.y}]}))}},{id:fB.HandlesToPoints,up:(J)=>{const Q=Object.entries(J.handles).map(([Z,{x:q,y:Y}])=>({x:q,y:Y,index:Z})).sort(P9);J.points=Q.map(({x:Z,y:q})=>({x:Z,y:q})),delete J.handles},down:(J)=>{const Q=NQ(J.points.length);J.handles=Object.fromEntries(J.points.map((Z,q)=>{return[Q[q],{x:Z.x,y:Z.y}]})),delete J.points}},{id:fB.PointIndexIds,up:(J)=>{const Q=NQ(J.points.length);J.points=Object.fromEntries(J.points.map((Z,q)=>{const Y=Q[q];return[Y,{id:Y,index:Y,x:Z.x,y:Z.y}]}))},down:(J)=>{const Q=Object.values(J.points).sort(P9);J.points=Q.map(({x:Z,y:q})=>({x:Z,y:q}))}}]});var Sz={color:F9,size:L5,font:MJ,fontSizeAdjustment:f.positiveNumber,align:VQ,verticalAlign:ZX,growY:f.positiveNumber,url:f.linkUrl,text:f.string},LW=e9("note",{AddUrlProp:1,RemoveJustify:2,MigrateLegacyAlign:3,AddVerticalAlign:4,MakeUrlsValid:5,AddFontSizeAdjustment:6}),fz=Y9({sequence:[{id:LW.AddUrlProp,up:(J)=>{J.url=""},down:A8},{id:LW.RemoveJustify,up:(J)=>{if(J.align==="justify")J.align="start"},down:A8},{id:LW.MigrateLegacyAlign,up:(J)=>{switch(J.align){case"start":J.align="start-legacy";return;case"end":J.align="end-legacy";return;default:J.align="middle-legacy";return}},down:A8},{id:LW.AddVerticalAlign,up:(J)=>{J.verticalAlign="middle"},down:A8},{id:LW.MakeUrlsValid,up:(J)=>{if(!f.linkUrl.isValid(J.url))J.url=""},down:(J)=>{}},{id:LW.AddFontSizeAdjustment,up:(J)=>{J.fontSizeAdjustment=0},down:(J)=>{delete J.fontSizeAdjustment}}]});var gz={color:F9,size:L5,font:MJ,align:VQ,w:f.nonZeroNumber,text:f.string,scale:f.nonZeroNumber,autoSize:f.boolean},_Y0=e9("text",{RemoveJustify:1}),mz=Y9({sequence:[{id:_Y0.RemoveJustify,up:(J)=>{if(J.align==="justify")J.align="start"},down:A8}]});var hz={w:f.nonZeroNumber,h:f.nonZeroNumber,time:f.number,playing:f.boolean,url:f.linkUrl,assetId:eq.nullable()},Wm=e9("video",{AddUrlProp:1,MakeUrlsValid:2}),uz=Y9({sequence:[{id:Wm.AddUrlProp,up:(J)=>{J.url=""},down:A8},{id:Wm.MakeUrlsValid,up:(J)=>{if(!f.linkUrl.isValid(J.url))J.url=""},down:(J)=>{}}]});var gB=X9("com.tldraw.store",{RemoveCodeAndIconShapeTypes:1,AddInstancePresenceType:2,RemoveTLUserAndPresenceAndAddPointer:3,RemoveUserDocument:4}),Gm=tq({sequenceId:"com.tldraw.store",retroactive:!1,sequence:[{id:gB.RemoveCodeAndIconShapeTypes,scope:"store",up:(J)=>{for(let[Q,Z]of z5(J))if(Z.typeName==="shape"&&(Z.type==="icon"||Z.type==="code"))delete J[Q]}},{id:gB.AddInstancePresenceType,scope:"store",up(J){}},{id:gB.RemoveTLUserAndPresenceAndAddPointer,scope:"store",up:(J)=>{for(let[Q,Z]of z5(J))if(Z.typeName.match(/^(user|user_presence)$/))delete J[Q]}},{id:gB.RemoveUserDocument,scope:"store",up:(J)=>{for(let[Q,Z]of z5(J))if(Z.typeName.match("user_document"))delete J[Q]}}]});var tE=function({shapes:J=Hm,migrations:Q}={}){const Z=new Map;for(let $ of L9(J))for(let W of Fz($.props??{}).keys()){if(Z.has(W.id)&&Z.get(W.id)!==W)throw new Error(`Multiple StyleProp instances with the same id: ${W.id}`);Z.set(W.id,W)}const q=Zm(J),Y=fg(Z);return Wz.create({asset:j4,camera:t9,document:$W,instance:Y,instance_page_state:l9,page:a5,instance_presence:xB,pointer:KW,shape:q},{migrations:[Gm,lE,xg,dg,gg,hg,Sg,cg,ug,nE,rg,og,eg,...Qm(J),...Q??[]],onValidationFailure:ig,createIntegrityChecker:ng})},Hm={arrow:{migrations:Mz,props:Nz},bookmark:{migrations:Vz,props:Oz},draw:{migrations:Rz,props:Dz},embed:{migrations:_z,props:jz},frame:{migrations:Cz,props:Ez},geo:{migrations:kz,props:Az},group:{migrations:Iz,props:wz},highlight:{migrations:Tz,props:Pz},image:{migrations:xz,props:bz},line:{migrations:vz,props:yz},note:{migrations:fz,props:Sz},text:{migrations:mz,props:gz},video:{migrations:uz,props:hz}};var DQ=[{locale:"ca",label:"Catal\xE0"},{locale:"cs",label:"\u010Ce\u0161tina"},{locale:"da",label:"Danish"},{locale:"de",label:"Deutsch"},{locale:"en",label:"English"},{locale:"es",label:"Espa\xF1ol"},{locale:"fr",label:"Fran\xE7ais"},{locale:"gl",label:"Galego"},{locale:"hr",label:"Hrvatski"},{locale:"it",label:"Italiano"},{locale:"hu",label:"Magyar"},{locale:"no",label:"Norwegian"},{locale:"pl",label:"Polski"},{locale:"pt-br",label:"Portugu\xEAs - Brasil"},{locale:"pt-pt",label:"Portugu\xEAs - Europeu"},{locale:"ro",label:"Rom\xE2n\u0103"},{locale:"ru",label:"Russian"},{locale:"sl",label:"Sloven\u0161\u010Dina"},{locale:"fi",label:"Suomi"},{locale:"sv",label:"Svenska"},{locale:"vi",label:"Ti\u1EBFng Vi\u1EC7t"},{locale:"tr",label:"T\xFCrk\xE7e"},{locale:"uk",label:"Ukrainian"},{locale:"he",label:"\u05E2\u05D1\u05E8\u05D9\u05EA"},{locale:"ar",label:"\u0639\u0631\u0628\u064A"},{locale:"fa",label:"\u0641\u0627\u0631\u0633\u06CC"},{locale:"ku",label:"\u06A9\u0648\u0631\u062F\u06CC"},{locale:"ne",label:"\u0928\u0947\u092A\u093E\u0932\u0940"},{locale:"hi-in",label:"\u0939\u093F\u0928\u094D\u0926\u0940"},{locale:"te",label:"\u0C24\u0C46\u0C32\u0C41\u0C17\u0C41"},{locale:"th",label:"\u0E20\u0E32\u0E29\u0E32\u0E44\u0E17\u0E22"},{locale:"my",label:"\u1019\u103C\u1014\u103A\u1019\u102C\u1005\u102C"},{locale:"ko-kr",label:"\uD55C\uAD6D\uC5B4"},{locale:"ja",label:"\u65E5\u672C\u8A9E"},{locale:"zh-cn",label:"\u7B80\u4F53\u4E2D\u6587"},{locale:"zh-tw",label:"\u7E41\u9AD4\u4E2D\u6587 (\u53F0\u7063)"}];var eE=function(){const J=typeof window!=="undefined"?window.navigator.languages??["en"]:["en"];return EY0(J)},EY0=function(J){for(let Q of J){const Z=CY0(Q);if(Z)return Z}return"en"},CY0=function(J){const Q=DQ.find((Y)=>Y.locale===J.toLowerCase());if(Q)return Q.locale;const[Z,q]=J.split(/[-_]/).map((Y)=>Y.toLowerCase());if(q){const Y=DQ.find(($)=>$.locale===Z);if(Y)return Y.locale}if(Z in zm)return zm[Z];return null},zm={zh:"zh-cn",pt:"pt-br",ko:"ko-kr",hi:"hi-in"};var Z5=v(W0(),1);var DJ=v(o(),1),Vc=v(p8(),1);var FW=v(W0(),1),Um=v(o(),1),xZ=function({children:J,fallback:Q,...Z}){if(Q===null)return FW.jsx(FW.Fragment,{children:J});return FW.jsx(cz,{fallback:Q,...Z,children:J})},kY0={error:null};class cz extends Um.Component{static getDerivedStateFromError(J){return{error:J}}state=kY0;componentDidCatch(J){this.props.onError?.(J)}render(){const{error:J}=this.state;if(J!==null){const{fallback:Q}=this.props;return FW.jsx(Q,{error:J})}return this.props.children}}var Y8=v(W0(),1);var aC=v(p8(),1),S1=v(o(),1);var JC=v(o(),1),h=function(){return JC.default.useContext(XX)},XX=JC.default.createContext({});var qu=v(W0(),1),IW=v(o(),1);var Lm=v(W0(),1),QC=function(){return Lm.jsx("div",{className:"tl-background"})};var yY=v(W0(),1),Nm=v(o(),1);var Fm=v(o(),1),_4=function(J,Q,Z,q,Y,$){Fm.useLayoutEffect(()=>{const W=J.current;if(!W)return;if(Q===void 0)return;let G=`translate(${Q}px, ${Z}px)`;if(q!==void 0)G+=` scale(${q})`;if(Y!==void 0)G+=` rotate(${Y}rad)`;if($)G+=` translate(${$.x}px, ${$.y}px)`;W.style.transform=G})};var _9={linear:(J)=>J,easeInQuad:(J)=>J*J,easeOutQuad:(J)=>J*(2-J),easeInOutQuad:(J)=>J<0.5?2*J*J:-1+(4-2*J)*J,easeInCubic:(J)=>J*J*J,easeOutCubic:(J)=>--J*J*J+1,easeInOutCubic:(J)=>J<0.5?4*J*J*J:(J-1)*(2*J-2)*(2*J-2)+1,easeInQuart:(J)=>J*J*J*J,easeOutQuart:(J)=>1- --J*J*J*J,easeInOutQuart:(J)=>J<0.5?8*J*J*J*J:1-8*--J*J*J*J,easeInQuint:(J)=>J*J*J*J*J,easeOutQuint:(J)=>1+--J*J*J*J*J,easeInOutQuint:(J)=>J<0.5?16*J*J*J*J*J:1+16*--J*J*J*J*J,easeInSine:(J)=>1-Math.cos(J*Math.PI/2),easeOutSine:(J)=>Math.sin(J*Math.PI/2),easeInOutSine:(J)=>-(Math.cos(Math.PI*J)-1)/2,easeInExpo:(J)=>J<=0?0:Math.pow(2,10*J-10),easeOutExpo:(J)=>J>=1?1:1-Math.pow(2,-10*J),easeInOutExpo:(J)=>J<=0?0:J>=1?1:J<0.5?Math.pow(2,20*J-10)/2:(2-Math.pow(2,-20*J+10))/2};class j{constructor(J=0,Q=0,Z=1){this.x=J,this.y=Q,this.z=Z}get pressure(){return this.z}set(J=this.x,Q=this.y,Z=this.z){return this.x=J,this.y=Q,this.z=Z,this}setTo({x:J=0,y:Q=0,z:Z=1}){return this.x=J,this.y=Q,this.z=Z,this}rot(J){if(J===0)return this;const{x:Q,y:Z}=this,q=Math.sin(J),Y=Math.cos(J);return this.x=Q*Y-Z*q,this.y=Q*q+Z*Y,this}rotWith(J,Q){if(Q===0)return this;const Z=this.x-J.x,q=this.y-J.y,Y=Math.sin(Q),$=Math.cos(Q);return this.x=J.x+(Z*$-q*Y),this.y=J.y+(Z*Y+q*$),this}clone(){const{x:J,y:Q,z:Z}=this;return new j(J,Q,Z)}sub(J){return this.x-=J.x,this.y-=J.y,this}subXY(J,Q){return this.x-=J,this.y-=Q,this}subScalar(J){return this.x-=J,this.y-=J,this}add(J){return this.x+=J.x,this.y+=J.y,this}addXY(J,Q){return this.x+=J,this.y+=Q,this}addScalar(J){return this.x+=J,this.y+=J,this}clamp(J,Q){if(this.x=Math.max(this.x,J),this.y=Math.max(this.y,J),Q!==void 0)this.x=Math.min(this.x,Q),this.y=Math.min(this.y,Q);return this}div(J){return this.x/=J,this.y/=J,this}divV(J){return this.x/=J.x,this.y/=J.y,this}mul(J){return this.x*=J,this.y*=J,this}mulV(J){return this.x*=J.x,this.y*=J.y,this}abs(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this}nudge(J,Q){const Z=j.Tan(J,this);return this.add(Z.mul(Q))}neg(){return this.x*=-1,this.y*=-1,this}cross(J){return this.x=this.y*J.z-this.z*J.y,this.y=this.z*J.x-this.x*J.z,this}dpr(J){return j.Dpr(this,J)}cpr(J){return j.Cpr(this,J)}len2(){return j.Len2(this)}len(){return j.Len(this)}pry(J){return j.Pry(this,J)}per(){const{x:J,y:Q}=this;return this.x=Q,this.y=-J,this}uni(){return j.Uni(this)}tan(J){return j.Tan(this,J)}dist(J){return j.Dist(this,J)}distanceToLineSegment(J,Q){return j.DistanceToLineSegment(J,Q,this)}slope(J){return j.Slope(this,J)}snapToGrid(J){return this.x=Math.round(this.x/J)*J,this.y=Math.round(this.y/J)*J,this}angle(J){return j.Angle(this,J)}toAngle(){return j.ToAngle(this)}lrp(J,Q){return this.x=this.x+(J.x-this.x)*Q,this.y=this.y+(J.y-this.y)*Q,this}equals(J){return j.Equals(this,J)}equalsXY(J,Q){return j.EqualsXY(this,J,Q)}norm(){const J=this.len();return this.x=J===0?0:this.x/J,this.y=J===0?0:this.y/J,this}toFixed(){return j.ToFixed(this)}toString(){return j.ToString(j.ToFixed(this))}toJson(){return j.ToJson(this)}toArray(){return j.ToArray(this)}static Add(J,Q){return new j(J.x+Q.x,J.y+Q.y)}static AddXY(J,Q,Z){return new j(J.x+Q,J.y+Z)}static Sub(J,Q){return new j(J.x-Q.x,J.y-Q.y)}static SubXY(J,Q,Z){return new j(J.x-Q,J.y-Z)}static AddScalar(J,Q){return new j(J.x+Q,J.y+Q)}static SubScalar(J,Q){return new j(J.x-Q,J.y-Q)}static Div(J,Q){return new j(J.x/Q,J.y/Q)}static Mul(J,Q){return new j(J.x*Q,J.y*Q)}static DivV(J,Q){return new j(J.x/Q.x,J.y/Q.y)}static MulV(J,Q){return new j(J.x*Q.x,J.y*Q.y)}static Neg(J){return new j(-J.x,-J.y)}static Per(J){return new j(J.y,-J.x)}static Abs(J){return new j(Math.abs(J.x),Math.abs(J.y))}static Dist(J,Q){return((J.y-Q.y)**2+(J.x-Q.x)**2)**0.5}static DistMin(J,Q,Z){return(J.x-Q.x)*(J.x-Q.x)+(J.y-Q.y)*(J.y-Q.y)<Z**2}static Dist2(J,Q){return(J.x-Q.x)*(J.x-Q.x)+(J.y-Q.y)*(J.y-Q.y)}static Dpr(J,Q){return J.x*Q.x+J.y*Q.y}static Cross(J,Q){return new j(J.y*Q.z-J.z*Q.y,J.z*Q.x-J.x*Q.z)}static Cpr(J,Q){return J.x*Q.y-Q.x*J.y}static Len2(J){return J.x*J.x+J.y*J.y}static Len(J){return(J.x*J.x+J.y*J.y)**0.5}static Pry(J,Q){return j.Dpr(J,Q)/j.Len(Q)}static Uni(J){return j.Div(J,j.Len(J))}static Tan(J,Q){return j.Uni(j.Sub(J,Q))}static Min(J,Q){return new j(Math.min(J.x,Q.x),Math.min(J.y,Q.y))}static Max(J,Q){return new j(Math.max(J.x,Q.x),Math.max(J.y,Q.y))}static From({x:J,y:Q,z:Z=1}){return new j(J,Q,Z)}static FromArray(J){return new j(J[0],J[1])}static Rot(J,Q=0){const Z=Math.sin(Q),q=Math.cos(Q);return new j(J.x*q-J.y*Z,J.x*Z+J.y*q)}static RotWith(J,Q,Z){const q=J.x-Q.x,Y=J.y-Q.y,$=Math.sin(Z),W=Math.cos(Z);return new j(Q.x+(q*W-Y*$),Q.y+(q*$+Y*W))}static NearestPointOnLineThroughPoint(J,Q,Z){return j.Mul(Q,j.Sub(Z,J).pry(Q)).add(J)}static NearestPointOnLineSegment(J,Q,Z,q=!0){if(j.Equals(J,Z))return j.From(Z);if(j.Equals(Q,Z))return j.From(Z);const Y=j.Tan(Q,J),$=j.Add(J,j.Mul(Y,j.Sub(Z,J).pry(Y)));if(q){if($.x<Math.min(J.x,Q.x))return j.Cast(J.x<Q.x?J:Q);if($.x>Math.max(J.x,Q.x))return j.Cast(J.x>Q.x?J:Q);if($.y<Math.min(J.y,Q.y))return j.Cast(J.y<Q.y?J:Q);if($.y>Math.max(J.y,Q.y))return j.Cast(J.y>Q.y?J:Q)}return $}static DistanceToLineThroughPoint(J,Q,Z){return j.Dist(Z,j.NearestPointOnLineThroughPoint(J,Q,Z))}static DistanceToLineSegment(J,Q,Z,q=!0){return j.Dist(Z,j.NearestPointOnLineSegment(J,Q,Z,q))}static Snap(J,Q=1){return new j(Math.round(J.x/Q)*Q,Math.round(J.y/Q)*Q)}static Cast(J){if(J instanceof j)return J;return j.From(J)}static Slope(J,Q){if(J.x===Q.y)return NaN;return(J.y-Q.y)/(J.x-Q.x)}static IsNaN(J){return isNaN(J.x)||isNaN(J.y)}static Angle(J,Q){return Math.atan2(Q.y-J.y,Q.x-J.x)}static Lrp(J,Q,Z){return j.Sub(Q,J).mul(Z).add(J)}static Med(J,Q){return new j((J.x+Q.x)/2,(J.y+Q.y)/2)}static Equals(J,Q){return Math.abs(J.x-Q.x)<0.0001&&Math.abs(J.y-Q.y)<0.0001}static EqualsXY(J,Q,Z){return J.x===Q&&J.y===Z}static Clockwise(J,Q,Z){return(Z.x-J.x)*(Q.y-J.y)-(Q.x-J.x)*(Z.y-J.y)<0}static Rescale(J,Q){const Z=j.Len(J);return new j(Q*J.x/Z,Q*J.y/Z)}static ScaleWithOrigin(J,Q,Z){return j.Sub(J,Z).mul(Q).add(Z)}static ToFixed(J,Q=2){return new j(+J.x.toFixed(Q),+J.y.toFixed(Q),+J.z.toFixed(Q))}static Nudge(J,Q,Z){return j.Add(J,j.Tan(Q,J).mul(Z))}static ToString(J){return`${J.x}, ${J.y}`}static ToAngle(J){let Q=Math.atan2(J.y,J.x);if(Q<0)Q+=Math.PI*2;return Q}static FromAngle(J,Q=1){return new j(Math.cos(J)*Q,Math.sin(J)*Q)}static ToArray(J){return[J.x,J.y,J.z]}static ToJson(J){const{x:Q,y:Z,z:q}=J;return{x:Q,y:Z,z:q}}static Average(J){const Q=J.length,Z=new j(0,0);if(Q===0)return Z;for(let q=0;q<Q;q++)Z.add(J[q]);return Z.div(Q)}static Clamp(J,Q,Z){if(Z===void 0)return new j(Math.min(Math.max(J.x,Q)),Math.min(Math.max(J.y,Q)));return new j(Math.min(Math.max(J.x,Q),Z),Math.min(Math.max(J.y,Q),Z))}static PointsBetween(J,Q,Z=6){const q=[];for(let Y=0;Y<Z;Y++){const $=_9.easeInQuad(Y/(Z-1)),W=j.Lrp(J,Q,$);W.z=Math.min(1,0.5+Math.abs(0.5-wY0($))*0.65),q.push(W)}return q}static SnapToGrid(J,Q=8){return new j(Math.round(J.x/Q)*Q,Math.round(J.y/Q)*Q)}}var wY0=(J)=>J<0.5?2*J*J:-1+(4-2*J)*J;var J5=function(J){return`${u(J.x)},${u(J.y)} `},t5=function(J,Q){return`${u((J.x+Q.x)/2)},${u((J.y+Q.y)/2)} `},u7=function(J,Q,Z){return Math.max(Q,typeof Z!=="undefined"?Math.min(J,Z):J)},NW=function(J,Q=10000000000){if(!J)return 0;return Math.round(J*Q)/Q},YX=function(J,Q,Z=0.000001){return Math.abs(J-Q)<=Z},KX=function(J,Q){const Z=Math.pow(J-Q,2)/Math.pow(J+Q,2);return T6*(J+Q)*(1+3*Z/(10+Math.sqrt(4-3*Z)))},E4=function(J){if(J=J%d6,J<0)J=J+d6;else if(J===0)J=0;return J},$X=function(J,Q){if(J=E4(J),Q=E4(Q),J>Q)Q+=d6;return Q-J},hB=function(J,Q){return d6-$X(J,Q)},BW=function(J,Q){const Z=(Q-J)%d6;return 2*Z%d6-Z},pz=function(J){return(d6+J)%d6},WX=function(J,Q){const Z=d6/Q;let q=Math.floor((pz(J)+Z/2)/Z)*Z%d6;if(q<T6)q+=d6;if(q>T6)q-=d6;return q},dz=function(J,Q){return J===Q||YX(J%(Math.PI/2)-Q%(Math.PI/2),0)},qC=function(J){return J*T6/180},XC=function(J){return J*180/T6},t4=function(J,Q,Z){return new j(J.x,J.y).add(j.FromAngle(Z,Q))},lz=function(J,Q,Z){const q=J/2,Y=Q/2,$=[];let W=Infinity,G=(-Infinity),z=Infinity,U=(-Infinity);for(let R=0;R<Z;R++){const V=d6/Z,E=-t6+R*V,_=q+q*Math.cos(E),A=Y+Y*Math.sin(E);if(_<W)W=_;if(A<z)z=A;if(_>G)G=_;if(A>U)U=A;$.push(new j(_,A))}const F=G-W,B=U-z,M=J-F,O=Q-B;if(M!==0||O!==0)for(let R=0;R<$.length;R++){const V=$[R];V.x=(V.x-W)/F*J,V.y=(V.y-z)/B*Q}return $},MW=function(J,Q,Z,q){return J<q&&Z<Q},c7=function(J,Q,Z,q){const Y=Math.max(J,Z),$=Math.min(Q,q);if(Y<=$)return[Y,$];return null},Bm=function(J,Q,Z){return(Q.x-J.x)*(Z.y-J.y)-(Z.x-J.x)*(Q.y-J.y)},i9=function(J,Q){let Z=0,q,Y;for(let $=0;$<Q.length;$++){if(q=Q[$],q.x===J.x&&q.y===J.y)return!0;if(Y=Q[($+1)%Q.length],j.Dist(J,q)+j.Dist(J,Y)===j.Dist(q,Y))return!0;if(q.y<=J.y){if(Y.y>J.y&&Bm(q,Y,J)>0)Z+=1}else if(Y.y<=J.y&&Bm(q,Y,J)<0)Z-=1}return Z!==0},u=function(J){return Math.round(J*1e4)/1e4},xY=function(J){return Math.round(J*100)/100},RQ=function(J,Q,Z){return Z<0?$X(J,Q):hB(J,Q)},OW=function(J,Q,Z,q){let Y;if(Math.abs(J)>T6){Y=BW(Q,q);const $=BW(q,Z);if(Math.abs(Y)<Math.abs($))return Y/J;else return(J-$)/J}else{Y=BW(Q,q);const $=Y/J;if(Math.sign(Y)!==Math.sign(J))return Math.abs($)>0.5?1:0;return $}},YC=function(J,Q,Z,q){const Y=2*((Q-J)%d6)%d6-(Q-J)%d6;if(!q)return Y;return(d6-Math.abs(Y))*(Z?1:-1)},T6=Math.PI,t6=T6/2,d6=T6*2,ZC=Math.sin,uB=(J)=>{return Math.abs(J)<Number.MAX_SAFE_INTEGER};var VW=({brush:J,color:Q,opacity:Z,className:q})=>{const Y=Nm.useRef(null);_4(Y,J.x,J.y);const $=u(Math.max(1,J.w)),W=u(Math.max(1,J.h));return yY.jsx("svg",{className:"tl-overlays__item",ref:Y,children:Q?yY.jsxs("g",{className:"tl-brush",opacity:Z,children:[yY.jsx("rect",{width:$,height:W,fill:Q,opacity:0.75}),yY.jsx("rect",{width:$,height:W,fill:"none",stroke:Q,opacity:0.1})]}):yY.jsx("rect",{className:`tl-brush tl-brush__default ${q}`,width:$,height:W})})};var v0=v(W0(),1);var SC=v(p8(),1),k4=v(o(),1);var e4=2000,GX=40;var SJ=320,HX=[0.1,0.25,0.5,1,2,4,8],vY=0.1,T1=8,Mm=0.5,Om=0.1,Vm=0.2,Dm=0.005,Rm=0.05,KC=450,$C=200,iz=36,vZ=16,WC=32,yZ={};for(let J=1;J<=Math.ceil(T1);J++)yZ[J+"_dark"]=`hash_pattern_zoom_${J}_dark`,yZ[J+"_light"]=`hash_pattern_zoom_${J}_light`;var GC={duration:0,easing:_9.easeInOutCubic},SY=0.09,cB=[{min:-1,mid:0.15,step:64},{min:0.05,mid:0.375,step:16},{min:0.15,mid:1,step:4},{min:0.7,mid:2.5,step:1}],jm=60000,pB=3000,_m=1200,HC={CAMERA_MOVE:-10},Em=64,e5=8,Cm=20,Am=8,km=12,dB=20,lB=12,zC=["top","right","bottom","left"],wm=500,UC=0.35;var Im=v(o(),1);var C4=function(J,{defaults:Q,shouldStoreForSession:Z=!0}){return IY0({name:J,defaults:Q,shouldStoreForSession:Z})},IY0=function(J){const Q=TY0(J),Z=J.shouldStoreForSession?PY0(J.name):null,q=U9(`debug:${J.name}`,Z??Q);if(typeof window!=="undefined"){if(J.shouldStoreForSession)M4(`debug:${J.name}`,()=>{const Y=q.get();if(Y===Q)Jz(`tldraw_debug:${J.name}`);else o$(`tldraw_debug:${J.name}`,JSON.stringify(Y))});Object.defineProperty(window,`tldraw${J.name.replace(/^[a-z]/,(Y)=>Y.toUpperCase())}`,{get(){return q.get()},set(Y){q.set(Y)},configurable:!0})}return Object.assign(q,J)},PY0=function(J){try{return JSON.parse(eH(`tldraw_debug:${J}`)??"null")}catch(Q){return null}},LC=function(J){try{return J()}catch{return null}},TY0=function(J){switch(LC(()=>process.env.TLDRAW_ENV)??LC(()=>process.env.VERCEL_PUBLIC_TLDRAW_ENV)??LC(()=>process.env.NEXT_PUBLIC_TLDRAW_ENV)??"production"){case"production":return J.defaults.production??J.defaults.all;case"preview":case"staging":return J.defaults.staging??J.defaults.all;default:return J.defaults.development??J.defaults.all}},FC={},BC=C4("pointerCaptureTrackingObject",{defaults:{all:new Map},shouldStoreForSession:!1}),t8={logPreventDefaults:C4("logPreventDefaults",{defaults:{all:!1}}),logPointerCaptures:C4("logPointerCaptures",{defaults:{all:!1}}),logElementRemoves:C4("logElementRemoves",{defaults:{all:!1}}),debugSvg:C4("debugSvg",{defaults:{all:!1}}),showFps:C4("showFps",{defaults:{all:!1}}),throwToBlob:C4("throwToBlob",{defaults:{all:!1}}),reconnectOnPing:C4("reconnectOnPing",{defaults:{all:!1}}),debugCursors:C4("debugCursors",{defaults:{all:!1}}),forceSrgb:C4("forceSrgbColors",{defaults:{all:!1}}),debugGeometry:C4("debugGeometry",{defaults:{all:!1}}),hideShapes:C4("hideShapes",{defaults:{all:!1}}),editOnType:C4("editOnType",{defaults:{all:!1}})};if(typeof Element!=="undefined"){const J=Element.prototype.removeChild;M4("element removal logging",()=>{if(t8.logElementRemoves.get())Element.prototype.removeChild=function(Q){return console.warn("[tldraw] removing child:",Q),J.call(this,Q)};else Element.prototype.removeChild=J})}var fY=function(J){if(J instanceof HTMLElement)return J;if(J.parentElement)return fY(J.parentElement);else throw Error("Could not find a parent element of an HTML type!")},A6=function(J){if(J.preventDefault(),t8.logPreventDefaults.get())console.warn("preventDefault called on event:",J)},b1=function(J,Q){if(J.setPointerCapture(Q.pointerId),t8.logPointerCaptures.get()){const Z=BC.get();Z.set(J,(Z.get(J)??0)+1),console.warn("setPointerCapture called on element:",J,Q)}},x1=function(J,Q){if(!J.hasPointerCapture(Q.pointerId))return;if(J.releasePointerCapture(Q.pointerId),t8.logPointerCaptures.get()){const Z=BC.get();if(Z.get(J)===1)Z.delete(J);else if(Z.has(J))Z.set(J,Z.get(J)-1);else console.warn("Release without capture");console.warn("releasePointerCapture called on element:",J,Q)}},d8=(J)=>J.stopPropagation(),JJ=(J,Q,Z)=>{if(!J)return;J.style.setProperty(Q,Z)};var Q5=function(J){return J.isKilled=!0,{point:{x:J.clientX,y:J.clientY,z:J.pressure},shiftKey:J.shiftKey,altKey:J.altKey,ctrlKey:J.metaKey||J.ctrlKey,pointerId:J.pointerId,button:J.button,isPen:J.pointerType==="pen"}};var Pm=function(){const J=h();return Im.useMemo(function Z(){let q,Y;function $(V){if(V.isKilled)return;if(V.button===2){J.dispatch({type:"pointer",target:"canvas",name:"right_click",...Q5(V)});return}if(V.button!==0&&V.button!==1&&V.button!==5)return;if(b1(V.currentTarget,V),J.dispatch({type:"pointer",target:"canvas",name:"pointer_down",...Q5(V)}),J.getOpenMenus().length>0)J.updateInstanceState({openMenus:[]}),document.body.click(),J.getContainer().focus()}function W(V){if(V.isKilled)return;if(V.clientX===q&&V.clientY===Y)return;q=V.clientX,Y=V.clientY,J.dispatch({type:"pointer",target:"canvas",name:"pointer_move",...Q5(V)})}function G(V){if(V.isKilled)return;if(V.button!==0&&V.button!==1&&V.button!==2&&V.button!==5)return;q=V.clientX,Y=V.clientY,x1(V.currentTarget,V),J.dispatch({type:"pointer",target:"canvas",name:"pointer_up",...Q5(V)})}function z(V){if(V.isKilled)return;if(J.getInstanceState().isPenMode&&V.pointerType!=="pen")return;const E=V.pointerType==="mouse"||V.pointerType==="pen";J.updateInstanceState({isHoveringCanvas:E?!0:null})}function U(V){if(V.isKilled)return;if(J.getInstanceState().isPenMode&&V.pointerType!=="pen")return;const E=V.pointerType==="mouse"||V.pointerType==="pen";J.updateInstanceState({isHoveringCanvas:E?!1:null})}function F(V){V.isKilled=!0,document.body.click(),A6(V)}function B(V){if(V.isKilled=!0,V.target.tagName!=="A"&&V.target.tagName!=="TEXTAREA"&&!(J.getEditingShape()&&V.target.className.includes("tl-text-content")))A6(V)}function M(V){A6(V)}async function O(V){if(A6(V),!V.dataTransfer?.files?.length)return;const E=Array.from(V.dataTransfer.files);await J.putExternalContent({type:"files",files:E,point:J.screenToPage({x:V.clientX,y:V.clientY}),ignoreParent:!1})}function R(V){d8(V)}return{onPointerDown:$,onPointerMove:W,onPointerUp:G,onPointerEnter:z,onPointerLeave:U,onDragOver:M,onDrop:O,onTouchStart:F,onTouchEnd:B,onClick:R}},[J])};var Tm=v(o(),1);var bm=function(){const J=h();Tm.useEffect(()=>{if(J.environment.isFirefox&&!J.environment.isAndroid&&!J.environment.isIos){J.updateInstanceState({isCoarsePointer:!1});return}if(window.matchMedia){const Q=window.matchMedia("(pointer: coarse)"),Z=()=>{J.updateInstanceState({isCoarsePointer:!!Q.matches})};if(Z(),Q)return Q.addEventListener("change",Z),()=>Q.removeEventListener("change",Z)}},[J])};var xm=v(W0(),1);var iB=v(o(),1),NC=function({container:J,children:Q}){return xm.jsx(ym.Provider,{value:J,children:Q})},y8=function(){return r4(iB.useContext(ym),"useContainer used outside of <Tldraw />")},ym=iB.createContext(null);var MC=v(o(),1);var vm=function(){const J=h(),Q=y8(),Z=e("isFocused",()=>J.getInstanceState().isFocused,[J]);MC.useEffect(()=>{if(typeof matchMedia===void 0)return;let q=null;const Y=()=>{if(q!=null)q();const $=`(resolution: ${window.devicePixelRatio}dppx)`,W=matchMedia($),G=(z)=>{if(z.type==="change")Y()};if(W.addEventListener)W.addEventListener("change",Y);else if(W.addListener)W.addListener(G);q=()=>{if(W.removeEventListener)W.removeEventListener("change",Y);else if(W.removeListener)W.removeListener(G)},J.updateInstanceState({devicePixelRatio:window.devicePixelRatio})};return Y(),()=>{q?.()}},[J]),MC.useEffect(()=>{if(!Z)return;const q=(G)=>{if(G.altKey&&(J.isIn("zoom")||!J.getPath().endsWith(".idle"))&&!nB())A6(G);if(G.isKilled)return;switch(G.isKilled=!0,G.key){case"=":case"-":case"0":{if(G.metaKey||G.ctrlKey){A6(G);return}break}case"Tab":{if(nB()||J.getIsMenuOpen())return;break}case",":return;case"Escape":{if(J.getEditingShape()||J.getSelectedShapeIds().length>0)G.preventDefault();if(J.getOpenMenus().length>0)return;if(!J.inputs.keys.has("Escape"))J.inputs.keys.add("Escape"),J.cancel(),Q.focus();return}default:if(nB()||J.getIsMenuOpen())return}const z={type:"keyboard",name:G.repeat?"key_repeat":"key_down",key:G.key,code:G.code,shiftKey:G.shiftKey,altKey:G.altKey,ctrlKey:G.metaKey||G.ctrlKey};J.dispatch(z)},Y=(G)=>{if(G.isKilled)return;if(G.isKilled=!0,nB()||J.getIsMenuOpen())return;if(G.key===",")return;const z={type:"keyboard",name:"key_up",key:G.key,code:G.code,shiftKey:G.shiftKey,altKey:G.altKey,ctrlKey:G.metaKey||G.ctrlKey};J.dispatch(z)};function $(G){if(Q.contains(G.target)){const z=G.touches[0].pageX,U=G.touches[0].radiusX||0;if(z-U<10||z+U>J.getViewportScreenBounds().width-10){if(G.target?.tagName==="BUTTON")G.target?.click();A6(G)}}}const W=(G)=>{if(Q.contains(G.target)&&(G.ctrlKey||G.metaKey))A6(G)};return Q.addEventListener("touchstart",$,{passive:!1}),Q.addEventListener("wheel",W,{passive:!1}),document.addEventListener("gesturestart",A6),document.addEventListener("gesturechange",A6),document.addEventListener("gestureend",A6),Q.addEventListener("keydown",q),Q.addEventListener("keyup",Y),()=>{Q.removeEventListener("touchstart",$),Q.removeEventListener("wheel",W),document.removeEventListener("gesturestart",A6),document.removeEventListener("gesturechange",A6),document.removeEventListener("gestureend",A6),Q.removeEventListener("keydown",q),Q.removeEventListener("keyup",Y)}},[J,Q,Z])},nB=function(){const{activeElement:J}=document;if(J&&(J.getAttribute("contenteditable")||bY0.indexOf(J.tagName.toLowerCase())>-1))return!0;return!1},bY0=["input","select","button","textarea"];var Sm=v(o(),1);var fm=function(J){const Q=h();Sm.useEffect(()=>{const Z=J.current;if(!Z)return;const q=(Y)=>{if(Y instanceof PointerEvent&&Y.pointerType==="pen"){Y.isKilled=!0;const{target:$}=Y;if(xY0.includes($.tagName?.toLocaleLowerCase())||Q.isIn("select.editing_shape"))return;A6(Y)}};return Z.addEventListener("touchstart",q),Z.addEventListener("touchend",q),()=>{Z.removeEventListener("touchstart",q),Z.removeEventListener("touchend",q)}},[Q,J])},xY0=["textarea","input"];var yY0=function(J,Q,Z){return Math.max(Q,Math.min(J,Z))},gm=function(J,Q,Z){if(Q===0||Math.abs(Q)===Infinity)return Math.pow(J,Z*5);return J*Q*Z/(Q+Z*J)},mm=function(J,Q,Z,q=0.15){if(q===0)return yY0(J,Q,Z);if(J<Q)return-gm(Q-J,Z-Q,q)+Q;if(J>Z)return+gm(J-Z,Z-Q,q)+Z;return J},hm=function(J,[Q,Z],[q,Y]){const[[$,W],[G,z]]=J;return[mm(Q,$,W,q),mm(Z,G,z,Y)]},QJ={toVector(J,Q){if(J===void 0)J=Q;return Array.isArray(J)?J:[J,J]},add(J,Q){return[J[0]+Q[0],J[1]+Q[1]]},sub(J,Q){return[J[0]-Q[0],J[1]-Q[1]]},addTo(J,Q){J[0]+=Q[0],J[1]+=Q[1]},subTo(J,Q){J[0]-=Q[0],J[1]-=Q[1]}};var vY0=function(J,Q){if(typeof J!=="object"||J===null)return J;var Z=J[Symbol.toPrimitive];if(Z!==void 0){var q=Z.call(J,Q||"default");if(typeof q!=="object")return q;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Q==="string"?String:Number)(J)},SY0=function(J){var Q=vY0(J,"string");return typeof Q==="symbol"?Q:String(Q)},OJ=function(J,Q,Z){if(Q=SY0(Q),Q in J)Object.defineProperty(J,Q,{value:Z,enumerable:!0,configurable:!0,writable:!0});else J[Q]=Z;return J},um=function(J,Q){var Z=Object.keys(J);if(Object.getOwnPropertySymbols){var q=Object.getOwnPropertySymbols(J);Q&&(q=q.filter(function(Y){return Object.getOwnPropertyDescriptor(J,Y).enumerable})),Z.push.apply(Z,q)}return Z},b9=function(J){for(var Q=1;Q<arguments.length;Q++){var Z=arguments[Q]!=null?arguments[Q]:{};Q%2?um(Object(Z),!0).forEach(function(q){OJ(J,q,Z[q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(J,Object.getOwnPropertyDescriptors(Z)):um(Object(Z)).forEach(function(q){Object.defineProperty(J,q,Object.getOwnPropertyDescriptor(Z,q))})}return J},cm=function(J){if(!J)return"";return J[0].toUpperCase()+J.slice(1)},gY0=function(J=!1,Q){return J&&!fY0.includes(Q)},om=function(J,Q="",Z=!1){const q=am[J],Y=q?q[Q]||Q:Q;return"on"+cm(J)+cm(Y)+(gY0(Z,Y)?"Capture":"")},tm=function(J){let Q=J.substring(2).toLowerCase();const Z=!!~Q.indexOf("passive");if(Z)Q=Q.replace("passive","");const q=mY0.includes(Q)?"capturecapture":"capture",Y=!!~Q.indexOf(q);if(Y)Q=Q.replace("capture","");return{device:Q,capture:Y,passive:Z}},em=function(J,Q=""){const Z=am[J],q=Z?Z[Q]||Q:Q;return J+q},VC=function(J){return"touches"in J},hY0=function(J){if(VC(J))return"touch";if("pointerType"in J)return J.pointerType;return"mouse"},uY0=function(J){return Array.from(J.touches).filter((Q)=>{var Z,q;return Q.target===J.currentTarget||((Z=J.currentTarget)===null||Z===void 0||(q=Z.contains)===null||q===void 0?void 0:q.call(Z,Q.target))})};var OC=function(J,Q){try{const Z=Q.clientX-J.clientX,q=Q.clientY-J.clientY,Y=(Q.clientX+J.clientX)/2,$=(Q.clientY+J.clientY)/2,W=Math.hypot(Z,q);return{angle:-(Math.atan2(Z,q)*180)/Math.PI,distance:W,origin:[Y,$]}}catch(Z){}return null},Jh=function(J){return uY0(J).map((Q)=>Q.identifier)},pm=function(J,Q){const[Z,q]=Array.from(J.touches).filter((Y)=>Q.includes(Y.identifier));return OC(Z,q)};var Qh=function(J){let{deltaX:Q,deltaY:Z,deltaMode:q}=J;if(q===1)Q*=dm,Z*=dm;else if(q===2)Q*=lm,Z*=lm;return[Q,Z]};var cY0=function(J){const Q={};if("buttons"in J)Q.buttons=J.buttons;if("shiftKey"in J){const{shiftKey:Z,altKey:q,metaKey:Y,ctrlKey:$}=J;Object.assign(Q,{shiftKey:Z,altKey:q,metaKey:Y,ctrlKey:$})}return Q},sB=function(J,...Q){if(typeof J==="function")return J(...Q);else return J},pY0=function(){},Zh=function(...J){if(J.length===0)return pY0;if(J.length===1)return J[0];return function(){let Q;for(let Z of J)Q=Z.apply(this,arguments)||Q;return Q}},im=function(J,Q){return Object.assign({},Q,J||{})},lY0=function([J,Q],Z){const q=Math.abs(J),Y=Math.abs(Q);if(q>Y&&q>Z)return"x";if(Y>q&&Y>Z)return"y";return};var Xh=function(){return sz&&"ontouchstart"in window},nY0=function(){return Xh()||sz&&window.navigator.maxTouchPoints>1},sY0=function(){return sz&&"onpointerdown"in window},rY0=function(){return sz&&"exitPointerLock"in window.document},aY0=function(){try{return"constructor"in GestureEvent}catch(J){return!1}},Yh=function(J){const[Q,Z]=J.overflow,[q,Y]=J._delta,[$,W]=J._direction;if(Q<0&&q>0&&$<0||Q>0&&q<0&&$>0)J._movement[0]=J._movementBound[0];if(Z<0&&Y>0&&W<0||Z>0&&Y<0&&W>0)J._movement[1]=J._movementBound[1]},jC=function(J){rz.set(J.key,J.engine),az.set(J.key,J.resolver)},am={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}},fY0=["enter","leave"],mY0=["gotpointercapture","lostpointercapture"],dm=40,lm=800,dY0=32;class DC{constructor(J,Q,Z){if(this.ctrl=J,this.args=Q,this.key=Z,!this.state){if(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init)this.init();this.reset()}}get state(){return this.ctrl.state[this.key]}set state(J){this.ctrl.state[this.key]=J}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:J,shared:Q,ingKey:Z,args:q}=this;Q[Z]=J._active=J.active=J._blocked=J._force=!1,J._step=[!1,!1],J.intentional=!1,J._movement=[0,0],J._distance=[0,0],J._direction=[0,0],J._delta=[0,0],J._bounds=[[(-Infinity),Infinity],[(-Infinity),Infinity]],J.args=q,J.axis=void 0,J.memo=void 0,J.elapsedTime=J.timeDelta=0,J.direction=[0,0],J.distance=[0,0],J.overflow=[0,0],J._movementBound=[!1,!1],J.velocity=[0,0],J.movement=[0,0],J.delta=[0,0],J.timeStamp=0}start(J){const Q=this.state,Z=this.config;if(!Q._active)this.reset(),this.computeInitial(),Q._active=!0,Q.target=J.target,Q.currentTarget=J.currentTarget,Q.lastOffset=Z.from?sB(Z.from,Q):Q.offset,Q.offset=Q.lastOffset,Q.startTime=Q.timeStamp=J.timeStamp}computeValues(J){const Q=this.state;Q._values=J,Q.values=this.config.transform(J)}computeInitial(){const J=this.state;J._initial=J._values,J.initial=J.values}compute(J){const{state:Q,config:Z,shared:q}=this;Q.args=this.args;let Y=0;if(J){if(Q.event=J,Z.preventDefault&&J.cancelable)Q.event.preventDefault();Q.type=J.type,q.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,q.locked=!!document.pointerLockElement,Object.assign(q,cY0(J)),q.down=q.pressed=q.buttons%2===1||q.touches>0,Y=J.timeStamp-Q.timeStamp,Q.timeStamp=J.timeStamp,Q.elapsedTime=Q.timeStamp-Q.startTime}if(Q._active){const k=Q._delta.map(Math.abs);QJ.addTo(Q._distance,k)}if(this.axisIntent)this.axisIntent(J);const[$,W]=Q._movement,[G,z]=Z.threshold,{_step:U,values:F}=Q;if(Z.hasCustomTransform){if(U[0]===!1)U[0]=Math.abs($)>=G&&F[0];if(U[1]===!1)U[1]=Math.abs(W)>=z&&F[1]}else{if(U[0]===!1)U[0]=Math.abs($)>=G&&Math.sign($)*G;if(U[1]===!1)U[1]=Math.abs(W)>=z&&Math.sign(W)*z}if(Q.intentional=U[0]!==!1||U[1]!==!1,!Q.intentional)return;const B=[0,0];if(Z.hasCustomTransform){const[k,P]=F;B[0]=U[0]!==!1?k-U[0]:0,B[1]=U[1]!==!1?P-U[1]:0}else B[0]=U[0]!==!1?$-U[0]:0,B[1]=U[1]!==!1?W-U[1]:0;if(this.restrictToAxis&&!Q._blocked)this.restrictToAxis(B);const M=Q.offset,O=Q._active&&!Q._blocked||Q.active;if(O){if(Q.first=Q._active&&!Q.active,Q.last=!Q._active&&Q.active,Q.active=q[this.ingKey]=Q._active,J){if(Q.first){if("bounds"in Z)Q._bounds=sB(Z.bounds,Q);if(this.setup)this.setup()}Q.movement=B,this.computeOffset()}}const[R,V]=Q.offset,[[E,_],[A,w]]=Q._bounds;Q.overflow=[R<E?-1:R>_?1:0,V<A?-1:V>w?1:0],Q._movementBound[0]=Q.overflow[0]?Q._movementBound[0]===!1?Q._movement[0]:Q._movementBound[0]:!1,Q._movementBound[1]=Q.overflow[1]?Q._movementBound[1]===!1?Q._movement[1]:Q._movementBound[1]:!1;const T=Q._active?Z.rubberband||[0,0]:[0,0];if(Q.offset=hm(Q._bounds,Q.offset,T),Q.delta=QJ.sub(Q.offset,M),this.computeMovement(),O&&(!Q.last||Y>dY0)){Q.delta=QJ.sub(Q.offset,M);const k=Q.delta.map(Math.abs);if(QJ.addTo(Q.distance,k),Q.direction=Q.delta.map(Math.sign),Q._direction=Q._delta.map(Math.sign),!Q.first&&Y>0)Q.velocity=[k[0]/Y,k[1]/Y],Q.timeDelta=Y}}emit(){const J=this.state,Q=this.shared,Z=this.config;if(!J._active)this.clean();if((J._blocked||!J.intentional)&&!J._force&&!Z.triggerAllEvents)return;const q=this.handler(b9(b9(b9({},Q),J),{},{[this.aliasKey]:J.values}));if(q!==void 0)J.memo=q}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}class qh extends DC{constructor(...J){super(...J);OJ(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=QJ.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=QJ.sub(this.state.offset,this.state.lastOffset)}axisIntent(J){const Q=this.state,Z=this.config;if(!Q.axis&&J){const q=typeof Z.axisThreshold==="object"?Z.axisThreshold[hY0(J)]:Z.axisThreshold;Q.axis=lY0(Q._movement,q)}Q._blocked=(Z.lockDirection||!!Z.axis)&&!Q.axis||!!Z.axis&&Z.axis!==Q.axis}restrictToAxis(J){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":J[1]=0;break;case"y":J[0]=0;break}}}var nm=(J)=>J,sm=0.15,RC={enabled(J=!0){return J},eventOptions(J,Q,Z){return b9(b9({},Z.shared.eventOptions),J)},preventDefault(J=!1){return J},triggerAllEvents(J=!1){return J},rubberband(J=0){switch(J){case!0:return[sm,sm];case!1:return[0,0];default:return QJ.toVector(J)}},from(J){if(typeof J==="function")return J;if(J!=null)return QJ.toVector(J)},transform(J,Q,Z){const q=J||Z.shared.transform;this.hasCustomTransform=!!q;{const Y=q||nm;return($)=>{const W=Y($);if(!isFinite(W[0])||!isFinite(W[1]))console.warn(`[@use-gesture]: config.transform() must produce a valid result, but it was: [${W[0]},${[1]}]`);return W}}return q||nm},threshold(J){return QJ.toVector(J,0)}};Object.assign(RC,{domTarget(J){if(J!==void 0)throw Error("[@use-gesture]: \`domTarget\` option has been renamed to \`target\`.");return NaN},lockDirection(J){if(J!==void 0)throw Error("[@use-gesture]: \`lockDirection\` option has been merged with \`axis\`. Use it as in \`{ axis: 'lock' }\`");return NaN},initial(J){if(J!==void 0)throw Error("[@use-gesture]: \`initial\` option has been renamed to \`from\`.");return NaN}});var iY0=0,nz=b9(b9({},RC),{},{axis(J,Q,{axis:Z}){if(this.lockDirection=Z==="lock",!this.lockDirection)return Z},axisThreshold(J=iY0){return J},bounds(J={}){if(typeof J==="function")return($)=>nz.bounds(J($));if("current"in J)return()=>J.current;if(typeof HTMLElement==="function"&&J instanceof HTMLElement)return J;const{left:Q=(-Infinity),right:Z=Infinity,top:q=(-Infinity),bottom:Y=Infinity}=J;return[[Q,Z],[q,Y]]}});var sz=typeof window!=="undefined"&&window.document&&window.document.createElement,A4={isBrowser:sz,gesture:aY0(),touch:Xh(),touchscreen:nY0(),pointer:sY0(),pointerLock:rY0()},oY0=250,tY0=180,eY0=0.5,JK0=50,QK0=250,ZK0=10,rm={mouse:0,touch:0,pen:8},qK0=b9(b9({},nz),{},{device(J,Q,{pointer:{touch:Z=!1,lock:q=!1,mouse:Y=!1}={}}){if(this.pointerLock=q&&A4.pointerLock,A4.touch&&Z)return"touch";if(this.pointerLock)return"mouse";if(A4.pointer&&!Y)return"pointer";if(A4.touch)return"touch";return"mouse"},preventScrollAxis(J,Q,{preventScroll:Z}){if(this.preventScrollDelay=typeof Z==="number"?Z:Z||Z===void 0&&J?oY0:void 0,!A4.touchscreen||Z===!1)return;return J?J:Z!==void 0?"y":void 0},pointerCapture(J,Q,{pointer:{capture:Z=!0,buttons:q=1,keys:Y=!0}={}}){return this.pointerButtons=q,this.keys=Y,!this.pointerLock&&this.device==="pointer"&&Z},threshold(J,Q,{filterTaps:Z=!1,tapsThreshold:q=3,axis:Y=void 0}){const $=QJ.toVector(J,Z?q:Y?1:0);return this.filterTaps=Z,this.tapsThreshold=q,$},swipe({velocity:J=eY0,distance:Q=JK0,duration:Z=QK0}={}){return{velocity:this.transform(QJ.toVector(J)),distance:this.transform(QJ.toVector(Q)),duration:Z}},delay(J=0){switch(J){case!0:return tY0;case!1:return 0;default:return J}},axisThreshold(J){if(!J)return rm;return b9(b9({},rm),J)},keyboardDisplacement(J=ZK0){return J}});Object.assign(qK0,{useTouch(J){if(J!==void 0)throw Error("[@use-gesture]: \`useTouch\` option has been renamed to \`pointer.touch\`. Use it as in \`{ pointer: { touch: true } }\`.");return NaN},experimental_preventWindowScrollY(J){if(J!==void 0)throw Error("[@use-gesture]: \`experimental_preventWindowScrollY\` option has been renamed to \`preventScroll\`.");return NaN},swipeVelocity(J){if(J!==void 0)throw Error("[@use-gesture]: \`swipeVelocity\` option has been renamed to \`swipe.velocity\`. Use it as in \`{ swipe: { velocity: 0.5 } }\`.");return NaN},swipeDistance(J){if(J!==void 0)throw Error("[@use-gesture]: \`swipeDistance\` option has been renamed to \`swipe.distance\`. Use it as in \`{ swipe: { distance: 50 } }\`.");return NaN},swipeDuration(J){if(J!==void 0)throw Error("[@use-gesture]: \`swipeDuration\` option has been renamed to \`swipe.duration\`. Use it as in \`{ swipe: { duration: 250 } }\`.");return NaN}});var XK0=30,YK0=100;class Kh extends DC{constructor(...J){super(...J);OJ(this,"ingKey","pinching"),OJ(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const J=this.state;J._touchIds=[],J.canceled=!1,J.cancel=this.cancel.bind(this),J.turns=0}computeOffset(){const{type:J,movement:Q,lastOffset:Z}=this.state;if(J==="wheel")this.state.offset=QJ.add(Q,Z);else this.state.offset=[(1+Q[0])*Z[0],Q[1]+Z[1]]}computeMovement(){const{offset:J,lastOffset:Q}=this.state;this.state.movement=[J[0]/Q[0],J[1]-Q[1]]}axisIntent(){const J=this.state,[Q,Z]=J._movement;if(!J.axis){const q=Math.abs(Q)*XK0-Math.abs(Z);if(q<0)J.axis="angle";else if(q>0)J.axis="scale"}}restrictToAxis(J){if(this.config.lockDirection){if(this.state.axis==="scale")J[1]=0;else if(this.state.axis==="angle")J[0]=0}}cancel(){const J=this.state;if(J.canceled)return;setTimeout(()=>{J.canceled=!0,J._active=!1,this.compute(),this.emit()},0)}touchStart(J){this.ctrl.setEventIds(J);const Q=this.state,Z=this.ctrl.touchIds;if(Q._active){if(Q._touchIds.every((Y)=>Z.has(Y)))return}if(Z.size<2)return;this.start(J),Q._touchIds=Array.from(Z).slice(0,2);const q=pm(J,Q._touchIds);if(!q)return;this.pinchStart(J,q)}pointerStart(J){if(J.buttons!=null&&J.buttons%2!==1)return;this.ctrl.setEventIds(J),J.target.setPointerCapture(J.pointerId);const Q=this.state,Z=Q._pointerEvents,q=this.ctrl.pointerIds;if(Q._active){if(Array.from(Z.keys()).every(($)=>q.has($)))return}if(Z.size<2)Z.set(J.pointerId,J);if(Q._pointerEvents.size<2)return;this.start(J);const Y=OC(...Array.from(Z.values()));if(!Y)return;this.pinchStart(J,Y)}pinchStart(J,Q){const Z=this.state;Z.origin=Q.origin,this.computeValues([Q.distance,Q.angle]),this.computeInitial(),this.compute(J),this.emit()}touchMove(J){if(!this.state._active)return;const Q=pm(J,this.state._touchIds);if(!Q)return;this.pinchMove(J,Q)}pointerMove(J){const Q=this.state._pointerEvents;if(Q.has(J.pointerId))Q.set(J.pointerId,J);if(!this.state._active)return;const Z=OC(...Array.from(Q.values()));if(!Z)return;this.pinchMove(J,Z)}pinchMove(J,Q){const Z=this.state,q=Z._values[1],Y=Q.angle-q;let $=0;if(Math.abs(Y)>270)$+=Math.sign(Y);this.computeValues([Q.distance,Q.angle-360*$]),Z.origin=Q.origin,Z.turns=$,Z._movement=[Z._values[0]/Z._initial[0]-1,Z._values[1]-Z._initial[1]],this.compute(J),this.emit()}touchEnd(J){if(this.ctrl.setEventIds(J),!this.state._active)return;if(this.state._touchIds.some((Q)=>!this.ctrl.touchIds.has(Q)))this.state._active=!1,this.compute(J),this.emit()}pointerEnd(J){const Q=this.state;this.ctrl.setEventIds(J);try{J.target.releasePointerCapture(J.pointerId)}catch(Z){}if(Q._pointerEvents.has(J.pointerId))Q._pointerEvents.delete(J.pointerId);if(!Q._active)return;if(Q._pointerEvents.size<2)Q._active=!1,this.compute(J),this.emit()}gestureStart(J){if(J.cancelable)J.preventDefault();const Q=this.state;if(Q._active)return;this.start(J),this.computeValues([J.scale,J.rotation]),Q.origin=[J.clientX,J.clientY],this.compute(J),this.emit()}gestureMove(J){if(J.cancelable)J.preventDefault();if(!this.state._active)return;const Q=this.state;this.computeValues([J.scale,J.rotation]),Q.origin=[J.clientX,J.clientY];const Z=Q._movement;Q._movement=[J.scale-1,J.rotation],Q._delta=QJ.sub(Q._movement,Z),this.compute(J),this.emit()}gestureEnd(J){if(!this.state._active)return;this.state._active=!1,this.compute(J),this.emit()}wheel(J){const Q=this.config.modifierKey;if(Q&&(Array.isArray(Q)?!Q.find((Z)=>J[Z]):!J[Q]))return;if(!this.state._active)this.wheelStart(J);else this.wheelChange(J);this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelStart(J){this.start(J),this.wheelChange(J)}wheelChange(J){if(!("uv"in J)){if(J.cancelable)J.preventDefault();if(!J.defaultPrevented)console.warn("[@use-gesture]: To properly support zoom on trackpads, try using the \`target\` option.\n\nThis message will only appear in development mode.")}const Z=this.state;Z._delta=[-Qh(J)[1]/YK0*Z.offset[0],0],QJ.addTo(Z._movement,Z._delta),Yh(Z),this.state.origin=[J.clientX,J.clientY],this.compute(J),this.emit()}wheelEnd(){if(!this.state._active)return;this.state._active=!1,this.compute(),this.emit()}bind(J){const Q=this.config.device;if(Q)J(Q,"start",this[Q+"Start"].bind(this)),J(Q,"change",this[Q+"Move"].bind(this)),J(Q,"end",this[Q+"End"].bind(this)),J(Q,"cancel",this[Q+"End"].bind(this)),J("lostPointerCapture","",this[Q+"End"].bind(this));if(this.config.pinchOnWheel)J("wheel","",this.wheel.bind(this),{passive:!1})}}var KK0=b9(b9({},RC),{},{device(J,Q,{shared:Z,pointer:{touch:q=!1}={}}){if(Z.target&&!A4.touch&&A4.gesture)return"gesture";if(A4.touch&&q)return"touch";if(A4.touchscreen){if(A4.pointer)return"pointer";if(A4.touch)return"touch"}},bounds(J,Q,{scaleBounds:Z={},angleBounds:q={}}){const Y=(W)=>{const G=im(sB(Z,W),{min:(-Infinity),max:Infinity});return[G.min,G.max]},$=(W)=>{const G=im(sB(q,W),{min:(-Infinity),max:Infinity});return[G.min,G.max]};if(typeof Z!=="function"&&typeof q!=="function")return[Y(),$()];return(W)=>[Y(W),$(W)]},threshold(J,Q,Z){return this.lockDirection=Z.axis==="lock",QJ.toVector(J,this.lockDirection?[0.1,3]:0)},modifierKey(J){if(J===void 0)return"ctrlKey";return J},pinchOnWheel(J=!0){return J}});var Zb0=b9(b9({},nz),{},{mouseOnly:(J=!0)=>J});class $h extends qh{constructor(...J){super(...J);OJ(this,"ingKey","wheeling")}wheel(J){if(!this.state._active)this.start(J);this.wheelChange(J),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(J){const Q=this.state;Q._delta=Qh(J),QJ.addTo(Q._movement,Q._delta),Yh(Q),this.compute(J),this.emit()}wheelEnd(){if(!this.state._active)return;this.state._active=!1,this.compute(),this.emit()}bind(J){J("wheel","",this.wheel.bind(this))}}var $K0=nz;var qb0=b9(b9({},nz),{},{mouseOnly:(J=!0)=>J}),rz=new Map,az=new Map;var rB={key:"pinch",engine:Kh,resolver:KK0};var aB={key:"wheel",engine:$h,resolver:$K0};var tB=v(o(),1);var UK0=function(J,Q){if(J==null)return{};var Z={},q=Object.keys(J),Y,$;for($=0;$<q.length;$++){if(Y=q[$],Q.indexOf(Y)>=0)continue;Z[Y]=J[Y]}return Z},LK0=function(J,Q){if(J==null)return{};var Z=UK0(J,Q),q,Y;if(Object.getOwnPropertySymbols){var $=Object.getOwnPropertySymbols(J);for(Y=0;Y<$.length;Y++){if(q=$[Y],Q.indexOf(q)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(J,q))continue;Z[q]=J[q]}}return Z},oB=function(J={},Q){const Z={};for(let[q,Y]of Object.entries(Q))switch(typeof Y){case"function":{const $=Y.call(Z,J[q],q,J);if(!Number.isNaN($))Z[q]=$}break;case"object":Z[q]=oB(J[q],Y);break;case"boolean":if(Y)Z[q]=J[q];break}return Z},NK0=function(J,Q,Z={}){const q=J,{target:Y,eventOptions:$,window:W,enabled:G,transform:z}=q,U=LK0(q,BK0);if(Z.shared=oB({target:Y,eventOptions:$,window:W,enabled:G,transform:z},FK0),Q){const F=az.get(Q);Z[Q]=oB(b9({shared:Z.shared},U),F)}else for(let F in U){const B=az.get(F);if(B)Z[F]=oB(b9({shared:Z.shared},U[F]),B);else if(!["drag","pinch","scroll","wheel","move","hover"].includes(F)){if(F==="domTarget")throw Error("[@use-gesture]: \`domTarget\` option has been renamed to \`target\`.");console.warn(`[@use-gesture]: Unknown config key \`${F}\` was used. Please read the documentation for further information.`)}}return Z},DW=function(J,Q){J.gestures.add(Q),J.gestureEventStores[Q]=new _C(J,Q),J.gestureTimeoutStores[Q]=new Gh},MK0=function(J,Q){if(Q.drag)DW(J,"drag");if(Q.wheel)DW(J,"wheel");if(Q.scroll)DW(J,"scroll");if(Q.move)DW(J,"move");if(Q.pinch)DW(J,"pinch");if(Q.hover)DW(J,"hover")},VK0=function(J){const Q={},Z={},q=new Set;for(let Y in J)if(OK0.test(Y))q.add(RegExp.lastMatch),Z[Y]=J[Y];else Q[Y]=J[Y];return[Z,Q,q]},RW=function(J,Q,Z,q,Y,$){if(!J.has(Z))return;if(!rz.has(q)){console.warn(`[@use-gesture]: You've created a custom handler that that uses the \`${q}\` gesture but isn't properly configured.\n\nPlease add \`${q}Action\` when creating your handler.`);return}const W=Z+"Start",G=Z+"End",z=(U)=>{let F=void 0;if(U.first&&W in Q)Q[W](U);if(Z in Q)F=Q[Z](U);if(U.last&&G in Q)Q[G](U);return F};Y[q]=z,$[q]=$[q]||{}},Hh=function(J,Q){const[Z,q,Y]=VK0(J),$={};return RW(Y,Z,"onDrag","drag",$,Q),RW(Y,Z,"onWheel","wheel",$,Q),RW(Y,Z,"onScroll","scroll",$,Q),RW(Y,Z,"onPinch","pinch",$,Q),RW(Y,Z,"onMove","move",$,Q),RW(Y,Z,"onHover","hover",$,Q),{handlers:$,config:Q,nativeHandlers:q}},FK0={target(J){if(J)return()=>("current"in J)?J.current:J;return},enabled(J=!0){return J},window(J=A4.isBrowser?window:void 0){return J},eventOptions({passive:J=!0,capture:Q=!1}={}){return{passive:J,capture:Q}},transform(J){return J}},BK0=["target","eventOptions","window","enabled","transform"];class _C{constructor(J,Q){OJ(this,"_listeners",new Set),this._ctrl=J,this._gestureKey=Q}add(J,Q,Z,q,Y){const $=this._listeners,W=em(Q,Z),G=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},z=b9(b9({},G),Y);J.addEventListener(W,q,z);const U=()=>{J.removeEventListener(W,q,z),$.delete(U)};return $.add(U),U}clean(){this._listeners.forEach((J)=>J()),this._listeners.clear()}}class Gh{constructor(){OJ(this,"_timeouts",new Map)}add(J,Q,Z=140,...q){this.remove(J),this._timeouts.set(J,window.setTimeout(Q,Z,...q))}remove(J){const Q=this._timeouts.get(J);if(Q)window.clearTimeout(Q)}clean(){this._timeouts.forEach((J)=>void window.clearTimeout(J)),this._timeouts.clear()}}class EC{constructor(J){OJ(this,"gestures",new Set),OJ(this,"_targetEventStore",new _C(this)),OJ(this,"gestureEventStores",{}),OJ(this,"gestureTimeoutStores",{}),OJ(this,"handlers",{}),OJ(this,"config",{}),OJ(this,"pointerIds",new Set),OJ(this,"touchIds",new Set),OJ(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),MK0(this,J)}setEventIds(J){if(VC(J))return this.touchIds=new Set(Jh(J)),this.touchIds;else if("pointerId"in J){if(J.type==="pointerup"||J.type==="pointercancel")this.pointerIds.delete(J.pointerId);else if(J.type==="pointerdown")this.pointerIds.add(J.pointerId);return this.pointerIds}}applyHandlers(J,Q){this.handlers=J,this.nativeHandlers=Q}applyConfig(J,Q){this.config=NK0(J,Q,this.config)}clean(){this._targetEventStore.clean();for(let J of this.gestures)this.gestureEventStores[J].clean(),this.gestureTimeoutStores[J].clean()}effect(){if(this.config.shared.target)this.bind();return()=>this._targetEventStore.clean()}bind(...J){const Q=this.config.shared,Z={};let q;if(Q.target){if(q=Q.target(),!q)return}if(Q.enabled){for(let $ of this.gestures){const W=this.config[$],G=Wh(Z,W.eventOptions,!!q);if(W.enabled)new(rz.get($))(this,J,$).bind(G)}const Y=Wh(Z,Q.eventOptions,!!q);for(let $ in this.nativeHandlers)Y($,"",(W)=>this.nativeHandlers[$](b9(b9({},this.state.shared),{},{event:W,args:J})),void 0,!0)}for(let Y in Z)Z[Y]=Zh(...Z[Y]);if(!q)return Z;for(let Y in Z){const{device:$,capture:W,passive:G}=tm(Y);this._targetEventStore.add(q,$,"",Z[Y],{capture:W,passive:G})}}}var Wh=(J,Q,Z)=>(q,Y,$,W={},G=!1)=>{var z,U;const F=(z=W.capture)!==null&&z!==void 0?z:Q.capture,B=(U=W.passive)!==null&&U!==void 0?U:Q.passive;let M=G?q:om(q,Y,F);if(Z&&B)M+="Passive";J[M]=J[M]||[],J[M].push($)},OK0=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;var DK0=function(J,Q={},Z,q){const Y=tB.default.useMemo(()=>new EC(J),[]);if(Y.applyHandlers(J,q),Y.applyConfig(Q,Z),tB.default.useEffect(Y.effect.bind(Y)),tB.default.useEffect(()=>{return Y.clean.bind(Y)},[]),Q.target===void 0)return Y.bind.bind(Y);return};var zh=function(J){return J.forEach(jC),function Q(Z,q){const{handlers:Y,nativeHandlers:$,config:W}=Hh(Z,q||{});return DK0(Y,W,void 0,$)}};var Uh=v(o(),1);var oz=function(J){let{deltaY:Q,deltaX:Z}=J,q=0;if(J.ctrlKey||J.altKey||J.metaKey){const Y=Math.sign(J.deltaY),$=Math.abs(J.deltaY);let W=Q;if($>10)W=10*Y;q=W/100}else if(J.shiftKey&&!RK0)Z=Q,Q=0;return{x:-Z,y:-Q,z:-q}};var RK0=/Mac|iPod|iPhone|iPad/.test(typeof window==="undefined"?"node":window.navigator.platform);var Lh=function(J){const Q=h(),Z=Uh.useMemo(()=>{let q="not sure";const Y=({event:V})=>{if(!Q.getInstanceState().isFocused)return;if(q="not sure",_K0(Date.now()))return;const E=Q.getEditingShapeId();if(E){const w=Q.getShape(E);if(w){if(Q.getShapeUtil(w).canScroll(w)){if(Q.getShapePageBounds(E)?.containsPoint(Q.inputs.currentPagePoint))return}}}A6(V),d8(V);const _=oz(V);if(_.x===0&&_.y===0)return;const A={type:"wheel",name:"wheel",delta:_,point:new j(V.clientX,V.clientY),shiftKey:V.shiftKey,altKey:V.altKey,ctrlKey:V.metaKey||V.ctrlKey};Q.dispatch(A)};let $=1,W=1,G=1,z=0;const U=new j,F=new j,B=(V)=>{const E=J.current;q="not sure";const{event:_,origin:A,da:w}=V;if(_ instanceof WheelEvent)return;if(!(_.target===E||E?.contains(_.target)))return;F.x=A[0],F.y=A[1],U.x=A[0],U.y=A[1],$=w[0],W=Q.getZoomLevel(),Q.dispatch({type:"pinch",name:"pinch_start",point:{x:A[0],y:A[1],z:Q.getZoomLevel()},delta:{x:0,y:0},shiftKey:_.shiftKey,altKey:_.altKey,ctrlKey:_.metaKey||_.ctrlKey})},M=(V)=>{if(V)q="zooming";if(q==="zooming")return;const E=Math.abs(z-$),_=j.Dist(U,F);switch(q){case"not sure":{if(E>24)q="zooming";else if(_>16)q="panning";break}case"panning":{if(E>64)q="zooming";break}}};return{onWheel:Y,onPinchStart:B,onPinchEnd:(V)=>{const E=J.current,{event:_,origin:A,offset:w}=V;if(_ instanceof WheelEvent)return;if(!(_.target===E||E?.contains(_.target)))return;const T=w[0];q="not sure",requestAnimationFrame(()=>{Q.dispatch({type:"pinch",name:"pinch_end",point:{x:A[0],y:A[1],z:T},delta:{x:A[0],y:A[1]},shiftKey:_.shiftKey,altKey:_.altKey,ctrlKey:_.metaKey||_.ctrlKey})})},onPinch:(V)=>{const E=J.current,{event:_,origin:A,offset:w,da:T}=V;if(_ instanceof WheelEvent)return;if(!(_.target===E||E?.contains(_.target)))return;const k=V.type==="gesturechange"||V.type==="gestureend";z=T[0];const P=A[0]-F.x,y=A[1]-F.y;switch(F.x=A[0],F.y=A[1],M(k),q){case"zooming":{G=w[0],Q.dispatch({type:"pinch",name:"pinch",point:{x:A[0],y:A[1],z:G},delta:{x:P,y},shiftKey:_.shiftKey,altKey:_.altKey,ctrlKey:_.metaKey||_.ctrlKey});break}case"panning":{Q.dispatch({type:"pinch",name:"pinch",point:{x:A[0],y:A[1],z:W},delta:{x:P,y},shiftKey:_.shiftKey,altKey:_.altKey,ctrlKey:_.metaKey||_.ctrlKey});break}}}}},[Q,J]);jK0(Z,{target:J,eventOptions:{passive:!1},pinch:{from:()=>[Q.getZoomLevel(),0],scaleBounds:()=>{return{from:Q.getZoomLevel(),max:8,min:0.05}}}})},jK0=zh([aB,rB]),jW=void 0,_K0=(J)=>{if(jW===void 0)return jW=J,!1;if(J-jW>120&&J-jW<160)return jW=J,!0;return jW=J,!1};var Fh=v(o(),1);var CC=function(J,Q,Z){const q=J.getShape(Q),Y=J.getShapeHandles(q);return{shape:q,handle:Y.find(($)=>$.id===Z)}},Bh=function(J,Q){const Z=h();return Fh.useMemo(()=>{const q=(z)=>{if(z.isKilled)return;const U=fY(z.currentTarget);b1(U,z);const{shape:F,handle:B}=CC(Z,J,Q);if(!B)return;Z.dispatch({type:"pointer",target:"handle",handle:B,shape:F,name:"pointer_down",...Q5(z)})};let Y,$;return{onPointerDown:q,onPointerMove:(z)=>{if(z.isKilled)return;if(z.clientX===Y&&z.clientY===$)return;Y=z.clientX,$=z.clientY;const{shape:U,handle:F}=CC(Z,J,Q);if(!F)return;Z.dispatch({type:"pointer",target:"handle",handle:F,shape:U,name:"pointer_move",...Q5(z)})},onPointerUp:(z)=>{if(z.isKilled)return;const U=fY(z.currentTarget);x1(U,z);const{shape:F,handle:B}=CC(Z,J,Q);if(!B)return;Z.dispatch({type:"pointer",target:"handle",handle:B,shape:F,name:"pointer_up",...Q5(z)})}}},[Z,J,Q])};var Eh=v(Dh(),1),Ch=v(o(),1);var Rh=function(J){switch(J){case"top":return"bottom";case"bottom":return"top";case"top_left":return"bottom_left";case"top_right":return"bottom_right";case"bottom_left":return"top_left";case"bottom_right":return"top_right";default:return J}},jh=function(J){switch(J){case"left":return"right";case"right":return"left";case"top_left":return"top_right";case"top_right":return"top_left";case"bottom_left":return"bottom_right";case"bottom_right":return"bottom_left";default:return J}};var _h=function(J){return J==="top_left"||J==="top_right"||J==="bottom_right"||J==="bottom_left"};class V0{constructor(J=0,Q=0,Z=0,q=0){this.x=J,this.y=Q,this.w=Z,this.h=q}x=0;y=0;w=0;h=0;get point(){return new j(this.x,this.y)}set point(J){this.x=J.x,this.y=J.y}get minX(){return this.x}set minX(J){this.x=J}get midX(){return this.x+this.w/2}get maxX(){return this.x+this.w}get minY(){return this.y}set minY(J){this.y=J}get midY(){return this.y+this.h/2}get maxY(){return this.y+this.h}get width(){return this.w}set width(J){this.w=J}get height(){return this.h}set height(J){this.h=J}get aspectRatio(){return this.width/this.height}get center(){return new j(this.midX,this.midY)}set center(J){this.minX=J.x-this.width/2,this.minY=J.y-this.height/2}get corners(){return[new j(this.minX,this.minY),new j(this.maxX,this.minY),new j(this.maxX,this.maxY),new j(this.minX,this.maxY)]}get cornersAndCenter(){return[new j(this.minX,this.minY),new j(this.maxX,this.minY),new j(this.maxX,this.maxY),new j(this.minX,this.maxY),this.center]}get sides(){const{corners:J}=this;return[[J[0],J[1]],[J[1],J[2]],[J[2],J[3]],[J[3],J[0]]]}get size(){return new j(this.w,this.h)}toFixed(){return this.x=NW(this.x),this.y=NW(this.y),this.w=NW(this.w),this.h=NW(this.h),this}setTo(J){return this.x=J.x,this.y=J.y,this.w=J.w,this.h=J.h,this}set(J=0,Q=0,Z=0,q=0){return this.x=J,this.y=Q,this.w=Z,this.h=q,this}expand(J){const Q=Math.min(this.minX,J.minX),Z=Math.min(this.minY,J.minY),q=Math.max(this.maxX,J.maxX),Y=Math.max(this.maxY,J.maxY);return this.x=Q,this.y=Z,this.w=q-Q,this.h=Y-Z,this}expandBy(J){return this.x-=J,this.y-=J,this.w+=J*2,this.h+=J*2,this}scale(J){return this.x/=J,this.y/=J,this.w/=J,this.h/=J,this}clone(){const{x:J,y:Q,w:Z,h:q}=this;return new V0(J,Q,Z,q)}translate(J){return this.x+=J.x,this.y+=J.y,this}snapToGrid(J){const Q=Math.round(this.minX/J)*J,Z=Math.round(this.minY/J)*J,q=Math.round(this.maxX/J)*J,Y=Math.round(this.maxY/J)*J;this.minX=Q,this.minY=Z,this.width=Math.max(1,q-Q),this.height=Math.max(1,Y-Z)}collides(J){return V0.Collides(this,J)}contains(J){return V0.Contains(this,J)}includes(J){return V0.Includes(this,J)}containsPoint(J,Q=0){return V0.ContainsPoint(this,J,Q)}getHandlePoint(J){switch(J){case"top_left":return new j(this.minX,this.minY);case"top_right":return new j(this.maxX,this.minY);case"bottom_left":return new j(this.minX,this.maxY);case"bottom_right":return new j(this.maxX,this.maxY);case"top":return new j(this.midX,this.minY);case"right":return new j(this.maxX,this.midY);case"bottom":return new j(this.midX,this.maxY);case"left":return new j(this.minX,this.midY)}}toJson(){return{x:this.minX,y:this.minY,w:this.w,h:this.h}}resize(J,Q,Z){const{minX:q,minY:Y,maxX:$,maxY:W}=this;let{minX:G,minY:z,maxX:U,maxY:F}=this;switch(J){case"left":case"top_left":case"bottom_left":{G+=Q;break}case"right":case"top_right":case"bottom_right":{U+=Q;break}}switch(J){case"top":case"top_left":case"top_right":{z+=Z;break}case"bottom":case"bottom_left":case"bottom_right":{F+=Z;break}}const B=(U-G)/($-q),M=(F-z)/(W-Y),O=B<0,R=M<0;if(O){const V=U;U=G,G=V}if(R){const V=F;F=z,z=V}this.minX=G,this.minY=z,this.width=Math.abs(U-G),this.height=Math.abs(F-z)}union(J){const Q=Math.min(this.minX,J.x),Z=Math.min(this.minY,J.y),q=Math.max(this.maxX,J.w+J.x),Y=Math.max(this.maxY,J.h+J.y);return this.x=Q,this.y=Z,this.width=q-Q,this.height=Y-Z,this}static From(J){return new V0(J.x,J.y,J.w,J.h)}static FromCenter(J,Q){return new V0(J.x-Q.x/2,J.y-Q.y/2,Q.x,Q.y)}static FromPoints(J){if(J.length===0)return new V0;let Q=Infinity,Z=Infinity,q=(-Infinity),Y=(-Infinity),$;for(let W=0,G=J.length;W<G;W++)$=J[W],Q=Math.min($.x,Q),Z=Math.min($.y,Z),q=Math.max($.x,q),Y=Math.max($.y,Y);return new V0(Q,Z,q-Q,Y-Z)}static Expand(J,Q){const Z=Math.min(Q.minX,J.minX),q=Math.min(Q.minY,J.minY),Y=Math.max(Q.maxX,J.maxX),$=Math.max(Q.maxY,J.maxY);return new V0(Z,q,Y-Z,$-q)}static ExpandBy(J,Q){return new V0(J.minX-Q,J.minY-Q,J.width+Q*2,J.height+Q*2)}static Collides=(J,Q)=>{return!(J.maxX<Q.minX||J.minX>Q.maxX||J.maxY<Q.minY||J.minY>Q.maxY)};static Contains=(J,Q)=>{return J.minX<Q.minX&&J.minY<Q.minY&&J.maxY>Q.maxY&&J.maxX>Q.maxX};static Includes=(J,Q)=>{return V0.Collides(J,Q)||V0.Contains(J,Q)};static ContainsPoint=(J,Q,Z=0)=>{return!(Q.x<J.minX-Z||Q.y<J.minY-Z||Q.x>J.maxX+Z||Q.y>J.maxY+Z)};static Common=(J)=>{let Q=Infinity,Z=Infinity,q=(-Infinity),Y=(-Infinity);for(let $=0;$<J.length;$++){const W=J[$];Q=Math.min(Q,W.minX),Z=Math.min(Z,W.minY),q=Math.max(q,W.maxX),Y=Math.max(Y,W.maxY)}return new V0(Q,Z,q-Q,Y-Z)};static Sides=(J,Q=0)=>{const{corners:Z}=J;return[[Z[0],Z[1]],[Z[1],Z[2]],[Z[2],Z[3]],[Z[3],Z[0]]]};static Resize(J,Q,Z,q,Y=!1){const{minX:$,minY:W,maxX:G,maxY:z}=J;let{minX:U,minY:F,maxX:B,maxY:M}=J;switch(Q){case"left":case"top_left":case"bottom_left":{U+=Z;break}case"right":case"top_right":case"bottom_right":{B+=Z;break}}switch(Q){case"top":case"top_left":case"top_right":{F+=q;break}case"bottom":case"bottom_left":case"bottom_right":{M+=q;break}}const O=(B-U)/(G-$),R=(M-F)/(z-W),V=O<0,E=R<0;if(Y){const A=(G-$)/(z-W),w=Math.abs(B-U),T=Math.abs(M-F),k=w*(R<0?1:-1)*(1/A),P=T*(O<0?1:-1)*A,y=A<w/T;switch(Q){case"top_left":{if(y)F=M+k;else U=B+P;break}case"top_right":{if(y)F=M+k;else B=U-P;break}case"bottom_right":{if(y)M=F-k;else B=U-P;break}case"bottom_left":{if(y)M=F-k;else U=B+P;break}case"bottom":case"top":{const p=(U+B)/2,s=T*A;U=p-s/2,B=p+s/2;break}case"left":case"right":{const p=(F+M)/2,s=w/A;F=p-s/2,M=p+s/2;break}}}if(V){const A=B;B=U,U=A}if(E){const A=M;M=F,F=A}const _=new V0(U,F,Math.abs(B-U),Math.abs(M-F));return{box:_,scaleX:+(_.width/J.width*(O>0?1:-1)).toFixed(5),scaleY:+(_.height/J.height*(R>0?1:-1)).toFixed(5)}}equals(J){return V0.Equals(this,J)}static Equals(J,Q){return Q.x===J.x&&Q.y===J.y&&Q.w===J.w&&Q.h===J.h}zeroFix(){return this.w=Math.max(1,this.w),this.h=Math.max(1,this.h),this}static ZeroFix(J){return new V0(J.x,J.y,Math.max(1,J.w),Math.max(1,J.h))}}var Ah=function(J){const Q=h();Ch.useLayoutEffect(()=>{let Z=new V0;function q(){const U=J.current;if(!U)return null;const F=U.getBoundingClientRect(),B=new V0(F.left||F.x,F.top||F.y,Math.max(F.width,1),Math.max(F.height,1));if(Z.equals(B))return;Q.updateViewportScreenBounds(B),Z=B}q();const Y=Eh.default(q,200,{trailing:!0}),$=setInterval(Y,1000);window.addEventListener("resize",Y);const W=new ResizeObserver((U)=>{if(!U[0].contentRect)return;Y()}),G=J.current;let z=null;if(G)W.observe(G),z=uK0(G),z.addEventListener("scroll",Y);return()=>{clearInterval($),window.removeEventListener("resize",Y),W.disconnect(),z?.removeEventListener("scroll",Y)}},[Q,J])};/*!
 * Author: excalidraw
 * MIT License: https://github.com/excalidraw/excalidraw/blob/master/LICENSE
 * https://github.com/excalidraw/excalidraw/blob/48c3465b19f10ec755b3eb84e21a01a468e96e43/packages/excalidraw/utils.ts#L600
 */var uK0=(J)=>{let Q=J.parentElement;while(Q){if(Q===document.body)return document;const{overflowY:Z}=window.getComputedStyle(Q);if(Q.scrollHeight>Q.clientHeight&&(Z==="auto"||Z==="scroll"||Z==="overlay"))return Q;Q=Q.parentElement}return document};class j0{constructor(J,Q,Z,q,Y,$){this.a=J,this.b=Q,this.c=Z,this.d=q,this.e=Y,this.f=$}a=1;b=0;c=0;d=1;e=0;f=0;equals(J){return this===J||this.a===J.a&&this.b===J.b&&this.c===J.c&&this.d===J.d&&this.e===J.e&&this.f===J.f}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0,this}multiply(J){const Q=J,{a:Z,b:q,c:Y,d:$,e:W,f:G}=this;return this.a=Z*Q.a+Y*Q.b,this.c=Z*Q.c+Y*Q.d,this.e=Z*Q.e+Y*Q.f+W,this.b=q*Q.a+$*Q.b,this.d=q*Q.c+$*Q.d,this.f=q*Q.e+$*Q.f+G,this}rotate(J,Q,Z){if(J===0)return this;if(Q===void 0)return this.multiply(j0.Rotate(J));return this.translate(Q,Z).multiply(j0.Rotate(J)).translate(-Q,-Z)}translate(J,Q){return this.multiply(j0.Translate(J,Q))}scale(J,Q){return this.multiply(j0.Scale(J,Q))}invert(){const{a:J,b:Q,c:Z,d:q,e:Y,f:$}=this,W=J*q-Q*Z;return this.a=q/W,this.b=Q/-W,this.c=Z/-W,this.d=J/W,this.e=(q*Y-Z*$)/-W,this.f=(Q*Y-J*$)/W,this}applyToPoint(J){return j0.applyToPoint(this,J)}applyToPoints(J){return j0.applyToPoints(this,J)}rotation(){return j0.Rotation(this)}point(){return j0.Point(this)}decomposed(){return j0.Decompose(this)}toCssString(){return j0.toCssString(this)}setTo(J){return Object.assign(this,J),this}decompose(){return j0.Decompose(this)}clone(){return new j0(this.a,this.b,this.c,this.d,this.e,this.f)}static Identity(){return new j0(1,0,0,1,0,0)}static Translate(J,Q){return new j0(1,0,0,1,J,Q)}static Rotate(J,Q,Z){if(J===0)return j0.Identity();const q=Math.cos(J),Y=Math.sin(J),$=new j0(q,Y,-Y,q,0,0);if(Q===void 0)return $;return j0.Compose(j0.Translate(Q,Z),$,j0.Translate(-Q,-Z))}static Scale=(J,Q,Z,q)=>{const Y=new j0(J,0,0,Q,0,0);if(Z===void 0)return Y;return j0.Compose(j0.Translate(Z,q),Y,j0.Translate(-Z,-q))};static Multiply(J,Q){return{a:J.a*Q.a+J.c*Q.b,c:J.a*Q.c+J.c*Q.d,e:J.a*Q.e+J.c*Q.f+J.e,b:J.b*Q.a+J.d*Q.b,d:J.b*Q.c+J.d*Q.d,f:J.b*Q.e+J.d*Q.f+J.f}}static Inverse(J){const Q=J.a*J.d-J.b*J.c;return{a:J.d/Q,b:J.b/-Q,c:J.c/-Q,d:J.a/Q,e:(J.d*J.e-J.c*J.f)/-Q,f:(J.b*J.e-J.a*J.f)/Q}}static Absolute(J){const Q=J.a*J.d-J.b*J.c;return{a:J.d/Q,b:J.b/-Q,c:J.c/-Q,d:J.a/Q,e:(J.d*J.e-J.c*J.f)/Q,f:(J.b*J.e-J.a*J.f)/-Q}}static Compose(...J){const Q=j0.Identity();for(let Z=0,q=J.length;Z<q;Z++)Q.multiply(J[Z]);return Q}static Point(J){return new j(J.e,J.f)}static Rotation(J){let Q;if(J.a!==0||J.c!==0){const Z=(J.a*J.a+J.c*J.c)**0.5;Q=Math.acos(J.a/Z)*(J.c>0?-1:1)}else if(J.b!==0||J.d!==0){const Z=(J.b*J.b+J.d*J.d)**0.5;Q=t6+Math.acos(J.b/Z)*(J.d>0?-1:1)}else Q=0;return pz(Q)}static Decompose(J){let Q,Z,q;if(J.a!==0||J.c!==0){const Y=(J.a*J.a+J.c*J.c)**0.5;Q=Y,Z=(J.a*J.d-J.b*J.c)/Y,q=Math.acos(J.a/Y)*(J.c>0?-1:1)}else if(J.b!==0||J.d!==0){const Y=(J.b*J.b+J.d*J.d)**0.5;Q=(J.a*J.d-J.b*J.c)/Y,Z=Y,q=t6+Math.acos(J.b/Y)*(J.d>0?-1:1)}else Q=0,Z=0,q=0;return{x:J.e,y:J.f,scaleX:Q,scaleY:Z,rotation:pz(q)}}static Smooth(J,Q=10000000000){return J.a=Math.round(J.a*Q)/Q,J.b=Math.round(J.b*Q)/Q,J.c=Math.round(J.c*Q)/Q,J.d=Math.round(J.d*Q)/Q,J.e=Math.round(J.e*Q)/Q,J.f=Math.round(J.f*Q)/Q,J}static toCssString(J){return`matrix(${u(J.a)}, ${u(J.b)}, ${u(J.c)}, ${u(J.d)}, ${u(J.e)}, ${u(J.f)})`}static applyToPoint(J,Q){return new j(J.a*Q.x+J.c*Q.y+J.e,J.b*Q.x+J.d*Q.y+J.f,Q.z)}static applyToXY(J,Q,Z){return[J.a*Q+J.c*Z+J.e,J.b*Q+J.d*Z+J.f]}static applyToPoints(J,Q){return Q.map((Z)=>new j(J.a*Z.x+J.c*Z.y+J.e,J.b*Z.x+J.d*Z.y+J.f,Z.z))}static applyToBounds(J,Q){return new V0(J.e+Q.minX,J.f+Q.minY,Q.width,Q.height)}static From(J){return new j0(J.a,J.b,J.c,J.d,J.e,J.f)}static Cast(J){return J instanceof j0?J:j0.From(J)}}var kh=function(J,Q){return Q===0?J:kh(Q,J%Q)},kC=function(J){const Q=J.toString().split(".")[1];if(!Q)return 1;const Z=Math.pow(10,Q.length),q=parseInt(Q,10);return Z/kh(q,Z)};var J1=v(W0(),1);var JN=v(o(),1);class VJ{isFilled=!1;isClosed=!0;isLabel=!1;debugColor;ignore;constructor(J){this.isFilled=J.isFilled,this.isClosed=J.isClosed,this.isLabel=J.isLabel??!1,this.debugColor=J.debugColor,this.ignore=J.ignore}hitTestPoint(J,Q=0,Z=!1){if(this.isClosed&&(this.isFilled||Z)&&i9(J,this.vertices))return!0;return j.Dist2(J,this.nearestPoint(J))<=Q*Q}distanceToPoint(J,Q=!1){return J.dist(this.nearestPoint(J))*(this.isClosed&&(this.isFilled||Q)&&i9(J,this.vertices)?-1:1)}distanceToLineSegment(J,Q){if(J.equals(Q))return this.distanceToPoint(J);const{vertices:Z}=this;let q,Y=Infinity,$,W,G;for(let z=0;z<Z.length;z++)if(W=Z[z],G=j.NearestPointOnLineSegment(J,Q,W,!0),$=j.Dist2(W,G),$<Y)Y=$,q=G;if(!q)throw Error("nearest point not found");return this.isClosed&&this.isFilled&&i9(q,this.vertices)?-Y:Y}hitTestLineSegment(J,Q,Z=0){return this.distanceToLineSegment(J,Q)<=Z}nearestPointOnLineSegment(J,Q){const{vertices:Z}=this;let q,Y=Infinity,$,W,G;for(let z=0;z<Z.length;z++)if(W=Z[z],G=j.NearestPointOnLineSegment(J,Q,W,!0),$=j.Dist2(W,G),$<Y)Y=$,q=G;if(!q)throw Error("nearest point not found");return q}isPointInBounds(J,Q=0){const{bounds:Z}=this;return!(J.x<Z.minX-Q||J.y<Z.minY-Q||J.x>Z.maxX+Q||J.y>Z.maxY+Q)}_vertices;get vertices(){if(!this._vertices)this._vertices=this.getVertices();return this._vertices}getBounds(){return V0.FromPoints(this.vertices)}_bounds;get bounds(){if(!this._bounds)this._bounds=this.getBounds();return this._bounds}get center(){return this.bounds.center}_area;get area(){if(!this._area)this._area=this.getArea();return this._area}getArea(){if(!this.isClosed)return 0;const{vertices:J}=this;let Q=0;for(let Z=0,q=J.length;Z<q;Z++){const Y=J[Z],$=J[(Z+1)%q];Q+=Y.x*$.y-$.x*Y.y}return Q/2}toSimpleSvgPath(){let J="";const{vertices:Q}=this,Z=Q.length;if(Z===0)return J;J+=`M${Q[0].x},${Q[0].y}`;for(let q=1;q<Z;q++)J+=`L${Q[q].x},${Q[q].y}`;if(this.isClosed)J+="Z";return J}}class g9 extends VJ{children=[];ignoredChildren=[];constructor(J){super({...J,isClosed:!0,isFilled:!1});for(let Q of J.children)if(Q.ignore)this.ignoredChildren.push(Q);else this.children.push(Q);if(this.children.length===0)throw Error("Group2d must have at least one child")}getVertices(){return this.children.filter((J)=>!J.isLabel).flatMap((J)=>J.vertices)}nearestPoint(J){let Q=Infinity,Z;const{children:q}=this;if(q.length===0)throw Error("no children");let Y,$;for(let W of q)if(Y=W.nearestPoint(J),$=j.Dist2(Y,J),$<Q)Q=$,Z=Y;if(!Z)throw Error("nearest point not found");return Z}distanceToPoint(J,Q=!1){return Math.min(...this.children.map((Z,q)=>Z.distanceToPoint(J,Q||q>0)))}hitTestPoint(J,Q,Z){return!!this.children.filter((q)=>!q.isLabel).find((q)=>q.hitTestPoint(J,Q,Z))}hitTestLineSegment(J,Q,Z){return!!this.children.filter((q)=>!q.isLabel).find((q)=>q.hitTestLineSegment(J,Q,Z))}getArea(){return this.children[0].area}toSimpleSvgPath(){let J="";for(let Z of this.children)J+=Z.toSimpleSvgPath();const Q=V0.FromPoints(this.vertices).corners;for(let Z=0,q=Q.length;Z<q;Z++){const Y=Q[Z],$=Q[(Z-1+q)%q],W=Y.dist($),G=Q[(Z+1)%q],z=Y.dist(G),U=Y.clone().lrp($,4/W),F=Y,B=Y.clone().lrp(G,4/z);J+=`M${U.x},${U.y} L${F.x},${F.y} L${B.x},${B.y} `}return J}}var cK0=function(J=!0){const[Q,Z]=JN.useState(0),q=h();JN.useEffect(()=>{if(!J)return;const Y=()=>Z(($)=>$+1);return q.on("tick",Y),()=>{q.off("tick",Y)}},[q,J])},Ih=function({geometry:J}){if(J instanceof g9)return J1.jsx(J1.Fragment,{children:[...J.children,...J.ignoredChildren].map((Q,Z)=>J1.jsx(Ih,{geometry:Q},Z))});return J1.jsx("path",{stroke:J.debugColor??"red",strokeWidth:"2",fill:"none",opacity:"1",d:J.toSimpleSvgPath()})},wh=D9(function J({showStroke:Q=!0,showVertices:Z=!0,showClosestPointOnOutline:q=!0}){const Y=h();cK0(q);const $=Y.getZoomLevel(),W=Y.getRenderingShapes(),{inputs:{currentPagePoint:G}}=Y;return J1.jsx("svg",{style:{position:"absolute",pointerEvents:"none",zIndex:999999999,top:0,left:0,overflow:"visible"},children:W.map((z)=>{const U=Y.getShape(z.id);if(U.type==="group")return null;const F=Y.getShapeGeometry(U),B=Y.getShapePageTransform(U),M=Y.getPointInShapeSpace(U,G),O=F.nearestPoint(M),R=F.distanceToPoint(M,!0),V=Math.abs(R)*$,E=R<0,{vertices:_}=F;return J1.jsxs("g",{transform:B.toCssString(),strokeLinecap:"round",strokeLinejoin:"round",children:[Q&&J1.jsx(Ih,{geometry:F}),Z&&_.map((A,w)=>J1.jsx("circle",{cx:A.x,cy:A.y,r:"2",fill:`hsl(${nq(w,[0,_.length-1],[120,200])}, 100%, 50%)`,stroke:"black",strokeWidth:"1"},`v${w}`)),q&&V<150&&J1.jsx("line",{x1:O.x,y1:O.y,x2:M.x,y2:M.y,opacity:1-V/150,stroke:E?"goldenrod":"dodgerblue",strokeWidth:"2"})]},z.id+"_outline")})})});var fJ=v(W0(),1);var CW=v(o(),1);var fh=v(Sh(),1),ez=function(J){return fh.default(J)};var yC=function(){const J=h(),Q=HB("userIds",()=>ez(J.getCollaborators().map((Z)=>Z.userId)).sort(),{isEqual:(Z,q)=>Z.join(",")===q.join?.(",")},[J]);return e(Q)};var J3=function(J){const Q=h();return e(`latestPresence:${J}`,()=>{return Q.getCollaborators().find((q)=>q.userId===J)},[Q])??null};var gh=function(J){return J>jm?"inactive":J>pB?"idle":"active"},h$0=function(J){const Q=CW.useRef(J?.lastActivityTimestamp??-1),[Z,q]=CW.useState(()=>gh(Date.now()-Q.current));if(CW.useEffect(()=>{const Y=setInterval(()=>{q(gh(Date.now()-Q.current))},_m);return()=>clearInterval(Y)},[]),J)Q.current=J.lastActivityTimestamp;return Z},mh=D9(function J(){const Q=yC();return fJ.jsx(fJ.Fragment,{children:Q.map((Z)=>fJ.jsx(g$0,{collaboratorId:Z},Z))})}),g$0=D9(function J({collaboratorId:Q}){const Z=h(),q=J3(Q),Y=h$0(q);if(!(q&&q.currentPageId===Z.getCurrentPageId()))return null;switch(Y){case"inactive":{const{followingUserId:$,highlightedUserIds:W}=Z.getInstanceState();if(!($===q.userId||W.includes(q.userId)))return null;break}case"idle":{const{highlightedUserIds:$}=Z.getInstanceState();if(q.followingUserId===Z.user.getId()&&!(q.chatMessage||$.includes(q.userId)))return null;break}case"active":break}return fJ.jsx(m$0,{latestPresence:q})}),m$0=D9(function J({latestPresence:Q}){const Z=h(),{CollaboratorBrush:q,CollaboratorScribble:Y,CollaboratorCursor:$,CollaboratorHint:W,CollaboratorShapeIndicator:G}=k8(),z=Z.getZoomLevel(),U=Z.getViewportPageBounds(),{userId:F,chatMessage:B,brush:M,scribbles:O,selectedShapeIds:R,userName:V,cursor:E,color:_}=Q,A=!(E.x<U.minX-12/z||E.y<U.minY-16/z||E.x>U.maxX-12/z||E.y>U.maxY-16/z);return fJ.jsxs(fJ.Fragment,{children:[M&&q?fJ.jsx(q,{className:"tl-collaborator__brush",brush:M,color:_,opacity:0.1},F+"_brush"):null,A&&$?fJ.jsx($,{className:"tl-collaborator__cursor",point:E,color:_,zoom:z,name:V!=="New User"?V:null,chatMessage:B},F+"_cursor"):W?fJ.jsx(W,{className:"tl-collaborator__cursor-hint",point:E,color:_,zoom:z,viewport:U},F+"_cursor_hint"):null,Y&&O.length?fJ.jsx(fJ.Fragment,{children:O.map((w)=>fJ.jsx(Y,{className:"tl-collaborator__scribble",scribble:w,color:_,zoom:z,opacity:w.color==="laser"?0.5:0.1},F+"_scribble_"+w.id))}):null,G&&R.map((w)=>fJ.jsx(G,{className:"tl-collaborator__shape-indicator",shapeId:w,color:_,opacity:0.5},F+"_"+w))]})});var y1=v(W0(),1);var jQ=v(o(),1);var vC=jQ.memo(function J({id:Q,shape:Z,util:q,index:Y,backgroundIndex:$,opacity:W,dprMultiple:G}){const z=h(),{ShapeErrorFallback:U}=k8(),F=jQ.useRef(null),B=jQ.useRef(null),M=jQ.useRef({transform:"",clipPath:"none",width:0,height:0,x:0,y:0,isCulled:!1});W7("set shape stuff",()=>{const V=z.getShape(Q);if(!V)return;const E=M.current,_=z.getShapeClipPath(Q)??"none";if(_!==E.clipPath)JJ(F.current,"clip-path",_),JJ(B.current,"clip-path",_),E.clipPath=_;const A=z.getShapePageTransform(Q),w=j0.toCssString(A),T=z.getShapeGeometry(V).bounds;if(w!==E.transform)JJ(F.current,"transform",w),JJ(B.current,"transform",w),E.transform=w;const k=T.w%G,P=T.h%G,y=k===0?T.w:T.w+(G-k),p=P===0?T.h:T.h+(G-P);if(y!==E.width||p!==E.height)JJ(F.current,"width",Math.max(y,G)+"px"),JJ(F.current,"height",Math.max(p,G)+"px"),JJ(B.current,"width",Math.max(y,G)+"px"),JJ(B.current,"height",Math.max(p,G)+"px"),E.width=y,E.height=p},[z]),W7("set opacity and z-index",()=>{const V=F.current,E=B.current;JJ(V,"opacity",W),JJ(E,"opacity",W),JJ(V,"z-index",Y),JJ(E,"z-index",$)},[W,Y,$]),W7("set display",()=>{if(!z.getShape(Q))return;const _=z.getCulledShapes().has(Q);if(_!==M.current.isCulled)JJ(F.current,"display",_?"none":"block"),JJ(B.current,"display",_?"none":"block"),M.current.isCulled=_},[z]);const O=jQ.useCallback((V)=>z.annotateError(V,{origin:"shape",willCrashApp:!1}),[z]);if(!Z)return null;const R="fill"in Z.props&&Z.props.fill!=="none";return y1.jsxs(y1.Fragment,{children:[q.backgroundComponent&&y1.jsx("div",{ref:B,className:"tl-shape tl-shape-background","data-shape-type":Z.type,draggable:!1,children:y1.jsx(xZ,{fallback:U,onError:O,children:y1.jsx(c$0,{shape:Z,util:q})})}),y1.jsx("div",{ref:F,className:"tl-shape","data-shape-type":Z.type,"data-shape-is-filled":R,draggable:!1,children:y1.jsx(xZ,{fallback:U,onError:O,children:y1.jsx(u$0,{shape:Z,util:q})})})]})}),u$0=jQ.memo(function J({shape:Q,util:Z}){return dq("InnerShape:"+Q.type,()=>Z.component(Q))},(J,Q)=>J.shape.props===Q.shape.props&&J.shape.meta===Q.shape.meta),c$0=jQ.memo(function J({shape:Q,util:Z}){return dq("InnerShape:"+Q.type,()=>Z.backgroundComponent?.(Q))},(J,Q)=>J.shape.props===Q.shape.props&&J.shape.meta===Q.shape.meta);var fC=function({className:J}){const Q=h(),{Background:Z,SvgDefs:q}=k8(),Y=k4.useRef(null),$=k4.useRef(null),W=k4.useRef(null),G=y8();Ah(Y),vm(),bm(),Lh(Y),fm(Y);const z=k4.useRef({lodDisableTextOutline:!1,allowTextOutline:!0});W7("position layers",function E(){const{x:_,y:A,z:w}=Q.getCamera();if(z.current.allowTextOutline&&Q.environment.isSafari)G.style.setProperty("--tl-text-outline","none"),z.current.allowTextOutline=!1;if(z.current.allowTextOutline&&w<UC!==z.current.lodDisableTextOutline){const P=w<UC;G.style.setProperty("--tl-text-outline",P?"none":`0 var(--b) 0 var(--color-background), 0 var(--a) 0 var(--color-background),
				var(--b) var(--b) 0 var(--color-background), var(--a) var(--b) 0 var(--color-background),
				var(--a) var(--a) 0 var(--color-background), var(--b) var(--a) 0 var(--color-background)`),z.current.lodDisableTextOutline=P}const T=w>=1?nq(w,[1,8],[0.125,0.5],!0):nq(w,[0.1,1],[-2,0.125],!0),k=`scale(${u(w)}) translate(${u(_+T)}px,${u(A+T)}px)`;JJ($.current,"transform",k),JJ(W.current,"transform",k)},[Q,G]);const U=Pm(),F=e("shapeSvgDefs",()=>{const E=new Map;for(let _ of L9(Q.shapeUtils)){if(!_)return;const A=_.getCanvasSvgDefs();for(let{key:w,component:T}of A){if(E.has(w))continue;E.set(w,v0.jsx(T,{},w))}}return[...E.values()]},[Q]),B=e("debug_shapes",()=>t8.hideShapes.get(),[t8]),M=e("debug_svg",()=>t8.debugSvg.get(),[t8]),O=e("debug_geometry",()=>t8.debugGeometry.get(),[t8]),R=e("isEditingAnything",()=>Q.getEditingShapeId()!==null,[Q]),V=e("isSelectingAnything",()=>!!Q.getSelectedShapeIds().length,[Q]);return v0.jsxs("div",{ref:Y,draggable:!1,"data-iseditinganything":R,"data-isselectinganything":V,className:SC.default("tl-canvas",J),"data-testid":"canvas",...U,children:[v0.jsx("svg",{className:"tl-svg-context",children:v0.jsxs("defs",{children:[F,v0.jsx(ZW0,{}),v0.jsx(qW0,{}),q&&v0.jsx(q,{})]})}),Z&&v0.jsx("div",{className:"tl-background__wrapper",children:v0.jsx(Z,{})}),v0.jsx(p$0,{}),v0.jsxs("div",{ref:$,className:"tl-html-layer tl-shapes",draggable:!1,children:[v0.jsx($W0,{}),v0.jsx(KW0,{}),B?null:M?v0.jsx(o$0,{}):v0.jsx(e$0,{})]}),v0.jsxs("div",{className:"tl-overlays",children:[v0.jsxs("div",{ref:W,className:"tl-html-layer",children:[O?v0.jsx(wh,{}):null,v0.jsx(s$0,{}),v0.jsx(l$0,{}),v0.jsx(d$0,{}),v0.jsx(i$0,{}),v0.jsx(JW0,{}),v0.jsx(QW0,{}),v0.jsx(n$0,{}),v0.jsx(YW0,{}),v0.jsx(mh,{})]}),v0.jsx(WW0,{})]}),v0.jsx(GW0,{})]})},p$0=function(){const J=h(),Q=e("gridSize",()=>J.getDocumentSettings().gridSize,[J]),{x:Z,y:q,z:Y}=e("camera",()=>J.getCamera(),[J]),$=e("isGridMode",()=>J.getInstanceState().isGridMode,[J]),{Grid:W}=k8();if(!(W&&$))return null;return v0.jsx(W,{x:Z,y:q,z:Y,size:Q})},d$0=function(){const J=h(),Q=e("scribbles",()=>J.getInstanceState().scribbles,[J]),Z=e("zoomLevel",()=>J.getZoomLevel(),[J]),{Scribble:q}=k8();if(!(q&&Q.length))return null;return v0.jsx(v0.Fragment,{children:Q.map((Y)=>v0.jsx(q,{className:"tl-user-scribble",scribble:Y,zoom:Z},Y.id))})},l$0=function(){const J=h(),Q=e("brush",()=>J.getInstanceState().brush,[J]),{Brush:Z}=k8();if(!(Z&&Q))return null;return v0.jsx(Z,{className:"tl-user-brush",brush:Q})},i$0=function(){const J=h(),Q=e("zoomBrush",()=>J.getInstanceState().zoomBrush,[J]),{ZoomBrush:Z}=k8();if(!(Z&&Q))return null;return v0.jsx(Z,{className:"tl-user-brush tl-zoom-brush",brush:Q})},n$0=function(){const J=h(),Q=e("snapLines",()=>J.snaps.getIndicators(),[J]),Z=e("zoomLevel",()=>J.getZoomLevel(),[J]),{SnapIndicator:q}=k8();if(!(q&&Q.length>0))return null;return v0.jsx(v0.Fragment,{children:Q.map((Y)=>v0.jsx(q,{className:"tl-user-snapline",line:Y,zoom:Z},Y.id))})},s$0=function(){const J=h(),Q=e("handles shapeIdWithHandles",()=>{const{isReadonly:Z,isChangingStyle:q}=J.getInstanceState();if(Z||q)return!1;const Y=J.getOnlySelectedShape();if(!Y)return!1;if(!J.getShapeHandles(Y))return!1;return Y.id},[J]);if(!Q)return null;return v0.jsx(r$0,{shapeId:Q})},r$0=function({shapeId:J}){const Q=h(),{Handles:Z}=k8(),q=e("zoomLevel",()=>Q.getZoomLevel(),[Q]),Y=e("coarse pointer",()=>Q.getInstanceState().isCoarsePointer,[Q]),$=e("handles transform",()=>Q.getShapePageTransform(J),[Q,J]),W=e("handles",()=>{const G=Q.getShapeHandles(J);if(!G)return null;const z=(Y?dB:lB)/q*2;return G.filter((U)=>U.type!=="virtual"||!G.some((F)=>F!==U&&F.type==="vertex"&&j.Dist(U,F)<z)).sort((U)=>U.type==="vertex"?1:-1)},[Q,q,Y,J]);if(!Z||!W||!$)return null;return v0.jsx(Z,{children:v0.jsx("g",{transform:j0.toCssString($),children:W.map((G)=>{return v0.jsx(a$0,{shapeId:J,handle:G,zoom:q,isCoarse:Y},G.id)})})})},a$0=function({shapeId:J,handle:Q,zoom:Z,isCoarse:q}){const Y=Bh(J,Q.id),{Handle:$}=k8();if(!$)return null;return v0.jsx("g",{"aria-label":"handle",transform:`translate(${Q.x}, ${Q.y})`,...Y,children:v0.jsx($,{shapeId:J,handle:Q,zoom:Z,isCoarse:q})})},o$0=function(){const J=h(),Q=e("rendering shapes",()=>J.getRenderingShapes(),[J]),Z=e("dpr multiple",()=>kC(Math.floor(J.getInstanceState().devicePixelRatio*100)/100),[J]);return v0.jsx(v0.Fragment,{children:Q.map((q)=>v0.jsxs(k4.Fragment,{children:[v0.jsx(vC,{...q,dprMultiple:Z}),v0.jsx(XW0,{id:q.id})]},q.id+"_fragment"))})},t$0=function(){const J=h(),Q=k4.useRef(new Set);return W7("reflow for culled shapes",()=>{const Z=J.getCulledShapes();if(Q.current.size===Z.size&&[...Z].every(($)=>Q.current.has($)))return;Q.current=Z;const q=document.getElementsByClassName("tl-canvas");if(q.length===0)return;const Y=q[0].offsetHeight},[J]),null},e$0=function(){const J=h(),Q=e("rendering shapes",()=>J.getRenderingShapes(),[J]),Z=e("dpr multiple",()=>kC(Math.floor(J.getInstanceState().devicePixelRatio*100)/100),[J]);return v0.jsxs(v0.Fragment,{children:[Q.map((q)=>v0.jsx(vC,{...q,dprMultiple:Z},q.id+"_shape")),J.environment.isSafari&&v0.jsx(t$0,{})]})},JW0=function(){const J=h(),Q=e("rendering shapes",()=>J.getRenderingShapes(),[J]),Z=k4.useRef(new Set),q=e("should display selected ids",()=>{const $=Z.current,W=new Set;if(J.isInAny("select.idle","select.brushing","select.scribble_brushing","select.editing_shape","select.pointing_shape","select.pointing_selection","select.pointing_handle")&&!J.getInstanceState().isChangingStyle){const G=J.getSelectedShapeIds();for(let z of G)W.add(z);if(J.isInAny("select.idle","select.editing_shape")){const z=J.getInstanceState();if(z.isHoveringCanvas&&!z.isCoarsePointer){const U=J.getHoveredShapeId();if(U)W.add(U)}}}if($.size!==W.size)return Z.current=W,W;for(let G of W)if(!$.has(G))return Z.current=W,W;return $},[J]),{ShapeIndicator:Y}=k8();if(!Y)return null;return v0.jsx(v0.Fragment,{children:Q.map(({id:$})=>v0.jsx(Y,{shapeId:$,hidden:!q.has($)},$+"_indicator"))})},QW0=function(){const J=h(),{ShapeIndicator:Q}=k8(),Z=e("hinting shape ids",()=>iq(J.getHintingShapeIds()),[J]);if(!Z.length)return null;if(!Q)return null;return v0.jsx(v0.Fragment,{children:Z.map((q)=>v0.jsx(Q,{className:"tl-user-indicator__hint",shapeId:q},q+"_hinting"))})},ZW0=function(){return v0.jsxs("g",{id:"cursor",children:[v0.jsxs("g",{fill:"rgba(0,0,0,.2)",transform:"translate(-11,-11)",children:[v0.jsx("path",{d:"m12 24.4219v-16.015l11.591 11.619h-6.781l-.411.124z"}),v0.jsx("path",{d:"m21.0845 25.0962-3.605 1.535-4.682-11.089 3.686-1.553z"})]}),v0.jsxs("g",{fill:"white",transform:"translate(-12,-12)",children:[v0.jsx("path",{d:"m12 24.4219v-16.015l11.591 11.619h-6.781l-.411.124z"}),v0.jsx("path",{d:"m21.0845 25.0962-3.605 1.535-4.682-11.089 3.686-1.553z"})]}),v0.jsxs("g",{fill:"currentColor",transform:"translate(-12,-12)",children:[v0.jsx("path",{d:"m19.751 24.4155-1.844.774-3.1-7.374 1.841-.775z"}),v0.jsx("path",{d:"m13 10.814v11.188l2.969-2.866.428-.139h4.768z"})]})]})},qW0=function(){return v0.jsx("path",{id:"cursor_hint",fill:"currentColor",d:"M -2,-5 2,0 -2,5 Z"})},XW0=function({id:J}){const Q=h(),[Z,q]=k4.useState(null),Y=e("is in root",()=>{return Q.getShape(J)?.parentId===Q.getCurrentPageId()},[Q,J]);if(k4.useEffect(()=>{if(!Y)return;let $=null;const W=M4("shape to svg",async()=>{const G=Math.random();$=G;const U=Q.isShapeOfType(J,"frame")?0:10;let F=Q.getShapePageBounds(J);if(!F)return;F=F.clone().expandBy(U);const B=await Q.getSvgString([J],{padding:U,background:Q.getInstanceState().exportBackground});if($!==G||!B)return;const M=`data:image/svg+xml;utf8,${encodeURIComponent(B.svg)}`;q({src:M,bounds:F})});return()=>{$=null,W()}},[Q,J,Y]),!Y||!Z)return null;return v0.jsx("img",{src:Z.src,width:Z.bounds.width,height:Z.bounds.height,style:{position:"absolute",top:0,left:0,transform:`translate(${Z.bounds.x}px, ${Z.bounds.maxY+12}px)`,outline:"1px solid black",maxWidth:"none"}})},YW0=function(){const J=h(),Q=e("selection rotation",()=>J.getSelectionRotation(),[J]),Z=e("selection bounds",()=>J.getSelectionRotatedPageBounds(),[J]),{SelectionForeground:q}=k8();if(!Z||!q)return null;return v0.jsx(q,{bounds:Z,rotation:Q})},KW0=function(){const J=h(),Q=e("selection rotation",()=>J.getSelectionRotation(),[J]),Z=e("selection bounds",()=>J.getSelectionRotatedPageBounds(),[J]),{SelectionBackground:q}=k8();if(!Z||!q)return null;return v0.jsx(q,{bounds:Z,rotation:Q})},$W0=function(){const{OnTheCanvas:J}=k8();if(!J)return null;return v0.jsx(J,{})},WW0=function(){const{InFrontOfTheCanvas:J}=k8();if(!J)return null;return v0.jsx(J,{})},GW0=function(){const J=h(),Q=e("camera state",()=>J.getCameraState(),[J]);return v0.jsx("div",{className:SC.default("tl-hit-test-blocker",{"tl-hit-test-blocker__hidden":Q==="idle"})})};var Q3=v(W0(),1),hh=v(p8(),1),uh=v(o(),1);var gC=function({className:J,zoom:Q,point:Z,color:q,viewport:Y,opacity:$=1}){const W=uh.useRef(null);return _4(W,u7(Z.x,Y.minX+5/Q,Y.maxX-5/Q),u7(Z.y,Y.minY+5/Q,Y.maxY-5/Q),1/Q,j.Angle(Y.center,Z)),Q3.jsxs("svg",{ref:W,className:hh.default("tl-overlays__item",J),children:[Q3.jsx("use",{href:"#cursor_hint",color:q,strokeWidth:3,stroke:"var(--color-background)"}),Q3.jsx("use",{href:"#cursor_hint",color:q,opacity:$})]})};var v1=v(W0(),1),ch=v(p8(),1),XN=v(o(),1);var YN=XN.memo(function J({className:Q,zoom:Z,point:q,color:Y,name:$,chatMessage:W}){const G=XN.useRef(null);if(_4(G,q?.x,q?.y,1/Z),!q)return null;return v1.jsxs("div",{ref:G,className:ch.default("tl-overlays__item",Q),children:[v1.jsx("svg",{className:"tl-cursor",children:v1.jsx("use",{href:"#cursor",color:Y})}),W?v1.jsxs(v1.Fragment,{children:[$&&v1.jsx("div",{className:"tl-nametag-title",style:{color:Y},children:$}),v1.jsx("div",{className:"tl-nametag-chat",style:{backgroundColor:Y},children:W})]}):$&&v1.jsx("div",{className:"tl-nametag",style:{backgroundColor:Y},children:$})]})});var mY=v(W0(),1);var mC=function({x:J,y:Q,z:Z,size:q}){return mY.jsxs("svg",{className:"tl-grid",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:[mY.jsx("defs",{children:cB.map(({min:Y,mid:$,step:W},G)=>{const z=W*q*Z,U=0.5+J*Z,F=0.5+Q*Z,B=U>0?U%z:z+U%z,M=F>0?F%z:z+F%z,O=Z<$?nq(Z,[Y,$],[0,1]):1;return mY.jsx("pattern",{id:`grid-${W}`,width:z,height:z,patternUnits:"userSpaceOnUse",children:mY.jsx("circle",{className:"tl-grid-dot",cx:B,cy:M,r:1,opacity:O})},`grid-pattern-${G}`)})}),cB.map(({step:Y},$)=>mY.jsx("rect",{width:"100%",height:"100%",fill:`url(#grid-${Y})`},`grid-rect-${$}`))]})};var zX=v(W0(),1),hC=v(p8(),1);var uC=function({handle:J,isCoarse:Q,className:Z,zoom:q}){const Y=(Q?dB:lB)/q;if(J.type==="clone"){const W=3/Math.max(q,0.35),G=`M0,${-W} A${W},${W} 0 0,1 0,${W}`,z=zC.indexOf(J.id);return zX.jsxs("g",{className:hC.default(`tl-handle tl-handle__${J.type}`,Z),children:[zX.jsx("circle",{className:"tl-handle__bg",r:Y}),zX.jsx("path",{className:"tl-handle__fg",d:G,transform:`rotate(${-90+90*z})`})]})}const $=(J.type==="create"&&Q?3:4)/Math.max(q,0.35);return zX.jsxs("g",{className:hC.default(`tl-handle tl-handle__${J.type}`,Z),children:[zX.jsx("circle",{className:"tl-handle__bg",r:Y}),zX.jsx("circle",{className:"tl-handle__fg",r:$})]})};var ph=v(W0(),1),cC=({children:J})=>{return ph.jsx("svg",{className:"tl-user-handles tl-overlays__item",children:J})};var pC=v(W0(),1),dh=v(p8(),1);var hY=function(J,Q=!0){const Z=J.length;if(Z<2)return"";let q=J[0],Y=J[1];if(Z===2)return`M${J5(q)}L${J5(Y)}`;let $="";for(let W=2,G=Z-1;W<G;W++)q=J[W],Y=J[W+1],$+=t5(q,Y);if(Q)return`M${t5(J[0],J[1])}Q${J5(J[1])}${t5(J[1],J[2])}T${$}${t5(J[Z-1],J[0])}${t5(J[0],J[1])}Z`;else return`M${J5(J[0])}Q${J5(J[1])}${t5(J[1],J[2])}${J.length>3?"T":""}${$}L${J5(J[Z-1])}`};var KN=function({scribble:J,zoom:Q,color:Z,opacity:q,className:Y}){if(!J.points.length)return null;return pC.jsx("svg",{className:Y?dh.default("tl-overlays__item",Y):Y,children:pC.jsx("path",{className:"tl-scribble",d:hY(J.points,!1),stroke:Z??`var(--color-${J.color})`,fill:"none",strokeWidth:8/Q,opacity:q??J.opacity})})};var lh=v(W0(),1),$N=v(o(),1);var Z3=function({bounds:J,rotation:Q}){const Z=$N.useRef(null);return _4(Z,J.x,J.y,1,Q),$N.useLayoutEffect(()=>{const q=Z.current;if(!q)return;q.style.width=u(Math.max(1,J.width))+"px",q.style.height=u(Math.max(1,J.height))+"px"},[J.width,J.height]),lh.jsx("div",{ref:Z,className:"tl-selection__bg",draggable:!1})};var dC=v(W0(),1);var ih=v(p8(),1),nh=v(o(),1);var lC=function({bounds:J,rotation:Q}){const Z=h(),q=nh.useRef(null),Y=e("only selected shape",()=>Z.getOnlySelectedShape(),[Z]),$=Y?Z.getShapeUtil(Y).expandSelectionOutlinePx(Y):0;return _4(q,J?.x,J?.y,1,Q,{x:-$,y:-$}),J=J.clone().expandBy($).zeroFix(),dC.jsx("svg",{ref:q,className:"tl-overlays__item tl-selection__fg","data-testid":"selection-foreground",children:dC.jsx("rect",{className:ih.default("tl-selection__fg__outline"),width:u(J.width),height:u(J.height)})})};var sh=v(W0(),1),rh=()=>{return sh.jsx("div",{className:"tl-shape-error-boundary"})};var AW=v(W0(),1);var ah=v(p8(),1),kW=v(o(),1);var HW0=({shape:J,util:Q})=>{return dq("Indicator: "+J.type,()=>Q.indicator(J))},zW0=({editor:J,id:Q})=>{const Z=e("shape for indicator",()=>J.store.get(Q),[J,Q]),{ShapeIndicatorErrorFallback:q}=k8();if(!Z||Z.isLocked)return null;return AW.jsx(xZ,{fallback:q,onError:(Y)=>J.annotateError(Y,{origin:"react.shapeIndicator",willCrashApp:!1}),children:AW.jsx(HW0,{shape:Z,util:J.getShapeUtil(Z)},Z.id)})},WN=kW.memo(function J({shapeId:Q,className:Z,color:q,hidden:Y,opacity:$}){const W=h(),G=kW.useRef(null);return W7("indicator transform",()=>{const z=G.current;if(!z)return;const U=W.getShapePageTransform(Q);if(!U)return;z.style.setProperty("transform",U.toCssString())},[W,Q]),kW.useLayoutEffect(()=>{const z=G.current;if(!z)return;z.style.setProperty("display",Y?"none":"block")},[Y]),AW.jsx("svg",{ref:G,className:ah.default("tl-overlays__item",Z),children:AW.jsx("g",{className:"tl-shape-indicator",stroke:q??"var(--color-selected)",opacity:$,children:AW.jsx(zW0,{editor:W,id:Q})})})});var oh=v(W0(),1),th=()=>{return oh.jsx("circle",{cx:4,cy:4,r:8,strokeWidth:"1",stroke:"red"})};var x9=v(W0(),1),eh=v(p8(),1),Ju=v(o(),1);var UW0=function({points:J,zoom:Q}){const Z=2.5/Q,q=J.reduce((M,O)=>Math.min(M,O.x),Infinity),Y=J.reduce((M,O)=>Math.max(M,O.x),(-Infinity)),$=J.reduce((M,O)=>Math.min(M,O.y),Infinity),W=J.reduce((M,O)=>Math.max(M,O.y),(-Infinity)),G=J.some((M)=>M.x===q&&M.y===$);let z,U,F,B;if(G)z=q,U=$,F=Y,B=W;else z=q,U=W,F=Y,B=$;return x9.jsxs("g",{className:"tl-snap-indicator",stroke:"lime",children:[x9.jsx("line",{x1:z,y1:U,x2:F,y2:B}),J.map((M,O)=>x9.jsx("g",{transform:`translate(${M.x},${M.y})`,children:x9.jsx("path",{className:"tl-snap-point",d:`M ${-Z},${-Z} L ${Z},${Z} M ${-Z},${Z} L ${Z},${-Z}`})},O))]})},LW0=function({gaps:J,direction:Q,zoom:Z}){const q=3.5/Z;let Y=[(-Infinity),Infinity],$=null;const W=Q==="horizontal";for(let z of J){if($=c7(Y[0],Y[1],W?z.startEdge[0].y:z.startEdge[0].x,W?z.startEdge[1].y:z.startEdge[1].x),$)Y=$;else continue;if($=c7(Y[0],Y[1],W?z.endEdge[0].y:z.endEdge[0].x,W?z.endEdge[1].y:z.endEdge[1].x),$)Y=$;else continue}if(Y===null)return null;const G=(Y[0]+Y[1])/2;return x9.jsx("g",{className:"tl-snap-indicator",stroke:"cyan",children:J.map(({startEdge:z,endEdge:U},F)=>x9.jsx(Ju.Fragment,{children:W?x9.jsxs(x9.Fragment,{children:[x9.jsx("line",{x1:z[0].x,y1:G-2*q,x2:z[1].x,y2:G+2*q}),x9.jsx("line",{x1:U[0].x,y1:G-2*q,x2:U[1].x,y2:G+2*q}),x9.jsx("line",{x1:z[0].x,y1:G,x2:U[0].x,y2:G}),x9.jsx("line",{x1:(z[0].x+U[0].x)/2,y1:G-q,x2:(z[0].x+U[0].x)/2,y2:G+q})]}):x9.jsxs(x9.Fragment,{children:[x9.jsx("line",{x1:G-2*q,y1:z[0].y,x2:G+2*q,y2:z[1].y}),x9.jsx("line",{x1:G-2*q,y1:U[0].y,x2:G+2*q,y2:U[1].y}),x9.jsx("line",{x1:G,y1:z[0].y,x2:G,y2:U[0].y}),x9.jsx("line",{x1:G-q,y1:(z[0].y+U[0].y)/2,x2:G+q,y2:(z[0].y+U[0].y)/2})]})},F))})},iC=function({className:J,line:Q,zoom:Z}){return x9.jsx("svg",{className:eh.default("tl-overlays__item",J),children:Q.type==="points"?x9.jsx(UW0,{...Q,zoom:Z}):Q.type==="gaps"?x9.jsx(LW0,{...Q,zoom:Z}):null})};var uY=v(W0(),1),nC=function(){return uY.jsx("svg",{width:16,height:16,viewBox:"0 0 16 16",children:uY.jsxs("g",{strokeWidth:2,fill:"none",fillRule:"evenodd",children:[uY.jsx("circle",{strokeOpacity:0.25,cx:8,cy:8,r:7,stroke:"var(--color-text-1)"}),uY.jsx("path",{strokeLinecap:"round",d:"M15 8c0-4.5-4.5-7-7-7",stroke:"var(--color-text-1)",children:uY.jsx("animateTransform",{attributeName:"transform",type:"rotate",from:"0 8 8",to:"360 8 8",dur:"1s",repeatCount:"indefinite"})})]})})};var sC=()=>{return null};var Qu=v(o(),1),Zu=function(J,Q){const Z=Qu.useRef(J);if(Q(J,Z.current))return Z.current;return Z.current=J,J},wW=function(J){return Zu(J,GE)},cY=function(J){return Zu(J,aH)};var Yu=function({overrides:J={},children:Q}){const Z=cY(J);return qu.jsx(Xu.Provider,{value:IW.useMemo(()=>({Background:QC,SvgDefs:sC,Brush:VW,ZoomBrush:VW,ScreenshotBrush:VW,CollaboratorBrush:VW,Cursor:YN,CollaboratorCursor:YN,CollaboratorHint:gC,CollaboratorShapeIndicator:WN,Grid:mC,Scribble:KN,SnapIndicator:iC,Handles:cC,Handle:uC,CollaboratorScribble:KN,ErrorFallback:q3,ShapeErrorFallback:rh,ShapeIndicatorErrorFallback:th,Spinner:nC,SelectionBackground:Z3,SelectionForeground:lC,ShapeIndicator:WN,OnTheCanvas:null,InFrontOfTheCanvas:null,Canvas:fC,...Z}),[Z]),children:Q})},k8=function(){return IW.useContext(Xu)},Xu=IW.createContext({});var pY={openWindow:(J,Q)=>window.open(J,Q,"noopener noreferrer"),refreshPage:()=>window.location.reload(),hardReset:async()=>await window.__tldraw__hardReset?.()};var X3=function(){pY.hardReset()};var rC=function(){pY.refreshPage()};var BW0=function(){},FW0="https://github.com/tldraw/tldraw/issues/new",q3=({error:J,editor:Q})=>{const Z=S1.useRef(null),[q,Y]=S1.useState(!0),[$,W]=S1.useState(!1),[G,z]=S1.useState(!1),{Canvas:U}=k8(),F=J instanceof Error?J.message:String(J),B=J instanceof Error?J.stack:null,M=e("isDarkMode",()=>{try{if(Q)return Q.user.getIsDarkMode()}catch{}return null},[Q]),[O,R]=S1.useState(null);S1.useLayoutEffect(()=>{if(M!==null)R(M);let w=Z.current?.parentElement,T=!1;while(w){if(w.classList.contains("tl-theme__dark")||w.classList.contains("tl-theme__light")){T=!0;break}w=w.parentElement}if(T){R(null);return}R(window.matchMedia("(prefers-color-scheme: dark)").matches)},[M]),S1.useEffect(()=>{if($){const w=setTimeout(()=>{W(!1)},2000);return()=>clearTimeout(w)}},[$]);const V=()=>{const w=document.createElement("textarea");w.value=B??F,document.body.appendChild(w),w.select(),document.execCommand("copy"),w.remove(),W(!0)},E=()=>{rC()},_=async()=>{X3()},A=new URL(FW0);return A.searchParams.set("title",F),A.searchParams.set("labels","bug"),A.searchParams.set("body",`Hey, I ran into an error while using tldraw:

\`\`\`js
${B??F}
\`\`\`

My browser: ${navigator.userAgent}`),Y8.jsxs("div",{ref:Z,className:aC.default("tl-container tl-error-boundary",O===null?"":O?"tl-theme__dark":"tl-theme__light"),children:[Y8.jsx("div",{className:"tl-error-boundary__overlay"}),Q&&Y8.jsx(cz,{onError:BW0,fallback:()=>null,children:Y8.jsx(XX.Provider,{value:Q,children:Y8.jsx("div",{className:"tl-overlay tl-error-boundary__canvas",children:U?Y8.jsx(U,{}):null})})}),Y8.jsx("div",{className:aC.default("tl-modal","tl-error-boundary__content",{"tl-error-boundary__content__expanded":q&&!G}),children:G?Y8.jsxs(Y8.Fragment,{children:[Y8.jsx("h2",{children:"Are you sure?"}),Y8.jsx("p",{children:"Resetting your data will delete your drawing and cannot be undone."}),Y8.jsxs("div",{className:"tl-error-boundary__content__actions",children:[Y8.jsx("button",{onClick:()=>z(!1),children:"Cancel"}),Y8.jsx("button",{className:"tl-error-boundary__reset",onClick:_,children:"Reset data"})]})]}):Y8.jsxs(Y8.Fragment,{children:[Y8.jsx("h2",{children:"Something's gone wrong."}),Y8.jsxs("p",{children:["Sorry, we encountered an error. Please refresh the page to continue. If you keep seeing this error, you can ",Y8.jsx("a",{href:A.toString(),children:"create a GitHub issue"})," or"," ",Y8.jsx("a",{href:"https://discord.gg/Cq6cPsTfNy",children:"ask for help on Discord"}),"."]}),q&&Y8.jsxs(Y8.Fragment,{children:["Message:",Y8.jsx("h4",{children:Y8.jsx("code",{children:F})}),"Stack trace:",Y8.jsxs("div",{className:"tl-error-boundary__content__error",children:[Y8.jsx("pre",{children:Y8.jsx("code",{children:B??F})}),Y8.jsx("button",{onClick:V,children:$?"Copied!":"Copy"})]})]}),Y8.jsxs("div",{className:"tl-error-boundary__content__actions",children:[Y8.jsx("button",{onClick:()=>Y(!q),children:q?"Hide details":"Show details"}),Y8.jsxs("div",{className:"tl-error-boundary__content__actions__group",children:[Y8.jsx("button",{className:"tl-error-boundary__reset",onClick:()=>z(!0),children:"Reset data"}),Y8.jsx("button",{className:"tl-error-boundary__refresh",onClick:E,children:"Refresh Page"})]})]})]})})]})};var u6=function(){return rq()};var NW0=function(J){if(J.version<PW.AddAnimationSpeed)J.user.animationSpeed=1;if(J.version<PW.AddIsSnapMode)J.user.isSnapMode=!1;if(J.version<PW.MakeFieldsNullable);if(J.version<PW.AddEdgeScrollSpeed)J.user.edgeScrollSpeed=1;if(J.version<PW.AddExcalidrawSelectMode)J.user.isWrapMode=!1;J.version=eC},MW0=function(){return tC[Math.floor(Math.random()*tC.length)]},Wu=function(){if(typeof window==="undefined")return!1;return window.matchMedia?.("(prefers-color-scheme: dark)")?.matches??!1},OW0=function(){if(typeof window==="undefined")return!1;return window.matchMedia?.("(prefers-reduced-motion: reduce)")?.matches??!1},GN=function(){return{id:u6()}},Gu=function(J){if(J===null||typeof J!=="object")return GN();if(!("version"in J)||!("user"in J)||typeof J.version!=="number")return GN();const Q=p6(J);NW0(Q);try{return $u.validate(Q.user)}catch(Z){return GN()}},VW0=function(){const J=JSON.parse(EY(Ku)||"null")??null;return Gu(J)},DW0=function(){CY(Ku,JSON.stringify({version:eC,user:Y3.get()}))},JA=function(J){$u.validate(J),Y3.set(J),DW0(),jW0()},zu=function(){if(oC===null)oC=u6();return oC},jW0=function(){Hu?.postMessage({type:Uu,origin:zu(),data:{user:HN(),version:eC}})},HN=function(){let J=Y3.get();if(!J)J=VW0(),Y3.set(J);return J},Ku="TLDRAW_USER_DATA_v3",$u=f.object({id:f.string,name:f.string.nullable().optional(),locale:f.string.nullable().optional(),color:f.string.nullable().optional(),isDarkMode:f.boolean.nullable().optional(),animationSpeed:f.number.nullable().optional(),edgeScrollSpeed:f.number.nullable().optional(),isSnapMode:f.boolean.nullable().optional(),isWrapMode:f.boolean.nullable().optional()}),PW={AddAnimationSpeed:1,AddIsSnapMode:2,MakeFieldsNullable:3,AddEdgeScrollSpeed:4,AddExcalidrawSelectMode:5},eC=Math.max(...Object.values(PW)),tC=["#FF802B","#EC5E41","#F2555A","#F04F88","#E34BA9","#BD54C6","#9D5BD2","#7B66DC","#02B1CC","#11B3A3","#39B178","#55B467"],SZ=Object.freeze({name:"New User",locale:eE(),color:MW0(),isDarkMode:!1,edgeScrollSpeed:1,animationSpeed:OW0()?0:1,isSnapMode:!1,isWrapMode:!1}),Y3=U9("globalUserData",null),RW0=typeof process!=="undefined"&&!1,Hu=typeof BroadcastChannel!=="undefined"&&!RW0?new BroadcastChannel("tldraw-user-sync"):null;Hu?.addEventListener("message",(J)=>{const Q=J.data;if(Q?.type===Uu&&Q?.origin!==zu())Y3.set(Gu(Q.data))});var oC=null,Uu="tldraw-user-preferences-change";var K3=function(J={}){return{derivePresenceState:J.derivePresenceState??(()=>z0("presence",()=>null)),userPreferences:J.userPreferences??z0("userPreferences",()=>HN()),setUserPreferences:J.setUserPreferences??JA}};var Su=v(Fu(),1),fu=v(uq(),1),gu=v(qE(),1);var NN=v(W0(),1);var Bu=v(W0(),1),Nu=v(p8(),1),mJ=function({children:J,className:Q="",...Z}){return Bu.jsx("svg",{...Z,className:Nu.default("tl-svg-container",Q),children:J})};var LN=function(J,Q,Z,q){const Y=J.x-Z.x,$=J.y-Z.y,W=q.x-Z.x,G=q.y-Z.y,z=Q.x-J.x,U=Q.y-J.y,F=W*$-G*Y,B=z*$-U*Y,M=G*z-W*U;if(F===0||B===0)return null;if(M===0)return null;if(M!==0){const O=F/M,R=B/M;if(0<=O&&O<=1&&0<=R&&R<=1)return j.AddXY(J,O*z,O*U)}return null},dY=function(J,Q,Z,q){const Y=(Q.x-J.x)*(Q.x-J.x)+(Q.y-J.y)*(Q.y-J.y),$=2*((Q.x-J.x)*(J.x-Z.x)+(Q.y-J.y)*(J.y-Z.y)),W=Z.x*Z.x+Z.y*Z.y+J.x*J.x+J.y*J.y-2*(Z.x*J.x+Z.y*J.y)-q*q,G=$*$-4*Y*W;if(G<0)return null;if(G===0)return null;const z=Math.sqrt(G),U=(-$+z)/(2*Y),F=(-$-z)/(2*Y);if((U<0||U>1)&&(F<0||F>1))return null;const B=[];if(0<=U&&U<=1)B.push(j.Lrp(J,Q,U));if(0<=F&&F<=1)B.push(j.Lrp(J,Q,F));if(B.length===0)return null;return B},qA=function(J,Q,Z){const q=[];let Y;for(let $=0,W=Z.length-1;$<W;$++)if(Y=LN(J,Q,Z[$],Z[$+1]),Y)q.push(Y);if(q.length===0)return null;return q},lY=function(J,Q,Z){const q=[];let Y;for(let $=1,W=Z.length;$<W+1;$++)if(Y=LN(J,Q,Z[$-1],Z[$%Z.length]),Y)q.push(Y);if(q.length===0)return null;return q},XA=function(J,Q,Z,q){let Y=Z.x-J.x,$=Z.y-J.y;const W=Math.sqrt(Y*Y+$*$),G=(W*W-q*q+Q*Q)/(2*W),z=Math.sqrt(Q*Q-G*G);return Y/=W,$/=W,[new j(J.x+Y*G-$*z,J.y+$*G+Y*z),new j(J.x+Y*G+$*z,J.y+$*G-Y*z)]},TW=function(J,Q,Z){const q=[];let Y,$,W;for(let G=0,z=Z.length;G<z;G++)if(Y=Z[G],$=Z[(G+1)%Z.length],W=dY(Y,$,J,Q),W)q.push(...W);if(q.length===0)return null;return q},FN=function(J,Q,Z){const q=[];let Y,$,W;for(let G=1,z=Z.length;G<z;G++)if(Y=Z[G-1],$=Z[G],W=dY(Y,$,J,Q),W)q.push(...W);if(q.length===0)return null;return q};var UN=function(J,Q,Z){return(Z.y-J.y)*(Q.x-J.x)>(Q.y-J.y)*(Z.x-J.x)},W3=function(J,Q,Z,q){return UN(J,Z,q)!==UN(Q,Z,q)&&UN(J,Q,Z)!==UN(J,Q,q)},BN=function(J,Q){const Z=new Map;let q,Y,$,W;for(let G=0,z=J.length;G<z;G++)if(q=J[G],i9(q,Q)){const U=ZA(q);if(!Z.has(U))Z.set(U,q)}for(let G=0,z=Q.length;G<z;G++)if(q=Q[G],i9(q,J)){const U=ZA(q);if(!Z.has(U))Z.set(U,q)}for(let G=0,z=J.length;G<z;G++){q=J[G],Y=J[(G+1)%J.length];for(let U=0,F=Q.length;U<F;U++){$=Q[U],W=Q[(U+1)%Q.length];const B=LN(q,Y,$,W);if(B!==null){const M=ZA(B);if(!Z.has(M))Z.set(M,B)}}}if(Z.size===0)return null;return CW0([...Z.values()])},ZA=function(J){return`${J.x},${J.y}`},CW0=function(J){const Q=j.Average(J);return J.sort((Z,q)=>j.Angle(Q,Z)-j.Angle(Q,q))},G3=function(J,Q){let Z,q,Y,$;for(let W=0,G=J.length;W<G;W++){Z=J[W],q=J[(W+1)%G];for(let z=0,U=Q.length;z<U;z++)if(Y=Q[z],$=Q[(z+1)%U],W3(Z,q,Y,$))return!0}return!1},YA=function(J,Q){let Z,q,Y,$;for(let W=0,G=J.length;W<G;W++){Z=J[W],q=J[(W+1)%G];for(let z=1,U=Q.length;z<U;z++)if(Y=Q[z-1],$=Q[z],W3(Z,q,Y,$))return!0}return!1};class f1 extends VJ{start;end;d;u;ul;constructor(J){super({...J,isClosed:!1,isFilled:!1});const{start:Q,end:Z}=J;this.start=Q,this.end=Z,this.d=Q.clone().sub(Z),this.u=this.d.clone().uni(),this.ul=this.u.len()}_length;get length(){if(!this._length)return this.d.len();return this._length}midPoint(){return this.start.lrp(this.end,0.5)}getVertices(){return[this.start,this.end]}nearestPoint(J){const{start:Q,end:Z,u:q,ul:Y}=this;if(Y===0)return Q;const $=j.Sub(J,Q).dpr(q)/Y,W=Q.x+q.x*$;if(W<Math.min(Q.x,Z.x))return Q.x<Z.x?Q:Z;if(W>Math.max(Q.x,Z.x))return Q.x>Z.x?Q:Z;const G=Q.y+q.y*$;if(G<Math.min(Q.y,Z.y))return Q.y<Z.y?Q:Z;if(G>Math.max(Q.y,Z.y))return Q.y>Z.y?Q:Z;return new j(W,G)}hitTestLineSegment(J,Q,Z=0){return W3(J,Q,this.start,this.end)||this.distanceToLineSegment(J,Q)<=Z}}class hJ extends VJ{points;constructor(J){super({isClosed:!1,isFilled:!1,...J});const{points:Q}=J;this.points=Q}_segments;get segments(){if(!this._segments){this._segments=[];const{vertices:J}=this;for(let Q=0,Z=J.length-1;Q<Z;Q++){const q=J[Q],Y=J[Q+1];this._segments.push(new f1({start:q,end:Y}))}if(this.isClosed)this._segments.push(new f1({start:J[J.length-1],end:J[0]}))}return this._segments}_length;get length(){if(!this._length)this._length=this.segments.reduce((J,Q)=>J+Q.length,0);return this._length}getVertices(){return this.points}nearestPoint(J){const{segments:Q}=this;let Z=this.points[0],q=Infinity,Y,$;for(let W=0;W<Q.length;W++)if(Y=Q[W].nearestPoint(J),$=j.Dist2(Y,J),$<q)Z=Y,q=$;if(!Z)throw Error("nearest point not found");return Z}hitTestLineSegment(J,Q,Z=0){const{segments:q}=this;for(let Y=0,$=q.length;Y<$;Y++)if(q[Y].hitTestLineSegment(J,Q,Z))return!0;return!1}}class e8 extends hJ{constructor(J){super({...J});this.isClosed=!0}}class ZJ extends e8{x;y;w;h;constructor(J){const{x:Q=0,y:Z=0,width:q,height:Y}=J;super({...J,points:[new j(Q,Z),new j(Q+q,Z),new j(Q+q,Z+Y),new j(Q,Z+Y)]});this.x=Q,this.y=Z,this.w=q,this.h=Y}getBounds(){return new V0(this.x,this.y,this.w,this.h)}}class qJ{constructor(J){this.editor=J}static props;static migrations;static type;canSnap=()=>!0;canScroll=()=>!1;canBind=(J,Q)=>!0;canEdit=()=>!1;canResize=()=>!0;canEditInReadOnly=()=>!1;canCrop=()=>!1;providesBackgroundForChildren(J){return!1}hideResizeHandles=()=>!1;hideRotateHandle=()=>!1;hideSelectionBoundsBg=()=>!1;hideSelectionBoundsFg=()=>!1;isAspectRatioLocked=()=>!1;canReceiveNewChildrenOfType(J,Q){return!1}canDropShapes(J,Q){return!1}expandSelectionOutlinePx(J){return 0}getCanvasSvgDefs(){return[]}getBoundsSnapGeometry(J){return{}}getHandleSnapGeometry(J){return{}}onBeforeCreate;onBeforeUpdate;onDragShapesOver;onDragShapesOut;onDropShapesOver;onResizeStart;onResize;onResizeEnd;onTranslateStart;onTranslate;onTranslateEnd;onHandleDrag;onRotateStart;onRotate;onRotateEnd;onBindingChange;onChildrenChange;onDoubleClickHandle;onDoubleClickEdge;onDoubleClick;onClick;onEditEnd}var KA=v(W0(),1);var Mu=function(J,Q,Z={}){const{closed:q=!1,snap:Y=1,start:$="outset",end:W="outset",lengthRatio:G=2,style:z="dashed"}=Z;let U=0,F=0,B=1,M=0,O=0;switch(z){case"dashed":{B=1,U=Math.min(Q*G,J/4);break}case"dotted":{B=100,U=Q/B;break}default:return{strokeDasharray:"none",strokeDashoffset:"none"}}if(!q){if($==="outset")J+=U/2,O+=U/2;else if($==="skip")J-=U,O-=U;if(W==="outset")J+=U/2;else if(W==="skip")J-=U}if(F=Math.floor(J/U/(2*B)),F-=F%Y,F<3&&z==="dashed")if(J/Q<5)U=J,F=1,M=0;else U=J*0.333,M=J*0.333;else if(F=Math.max(F,3),U=J/F/(2*B),q)O=U/2,M=(J-F*U)/F;else M=(J-F*U)/Math.max(1,F-1);return{strokeDasharray:[U,M].join(" "),strokeDashoffset:O.toString()}};var $A=function({bounds:J,className:Q}){const Z=h(),q=e("zoom level",()=>Z.getZoomLevel(),[Z]);return KA.jsx("g",{className:Q,pointerEvents:"none",strokeLinecap:"round",strokeLinejoin:"round",children:J.sides.map((Y,$)=>{const{strokeDasharray:W,strokeDashoffset:G}=Mu(Y[0].dist(Y[1]),1/q,{style:"dashed",lengthRatio:4});return KA.jsx("line",{x1:Y[0].x,y1:Y[0].y,x2:Y[1].x,y2:Y[1].y,strokeDasharray:W,strokeDashoffset:G},$)})})};class MN extends qJ{static type="group";static props=wz;static migrations=Iz;hideSelectionBoundsFg=()=>!0;canBind=()=>!1;getDefaultProps(){return{}}getGeometry(J){const Q=this.editor.getSortedChildIdsForParent(J.id);if(Q.length===0)return new ZJ({width:1,height:1,isFilled:!1});return new g9({children:Q.map((Z)=>{const q=this.editor.getShape(Z),Y=this.editor.getShapeGeometry(Z),$=this.editor.getShapeLocalTransform(q).applyToPoints(Y.vertices);if(Y.isClosed)return new e8({points:$,isFilled:!0});return new hJ({points:$})})})}component(J){const Q=this.editor.getErasingShapeIds().includes(J.id),{hintingShapeIds:Z}=this.editor.getCurrentPageState(),q=Z.length>0&&Z.some((W)=>W!==J.id&&this.editor.isShapeOfType(this.editor.getShape(W),"group")),Y=this.editor.getCurrentPageState().focusedGroupId!==J.id;if(!Q&&(Y||q))return null;const $=this.editor.getShapeGeometry(J).bounds;return NN.jsx(mJ,{id:J.id,children:NN.jsx($A,{className:"tl-group",bounds:$})})}indicator(J){const Q=this.editor.getShapeGeometry(J).bounds;return NN.jsx($A,{className:"",bounds:Q})}onChildrenChange=(J)=>{const Q=this.editor.getSortedChildIdsForParent(J.id);if(Q.length===0){if(this.editor.getCurrentPageState().focusedGroupId===J.id)this.editor.popFocusedGroupId();this.editor.deleteShapes([J.id]);return}else if(Q.length===1){if(this.editor.getCurrentPageState().focusedGroupId===J.id)this.editor.popFocusedGroupId();this.editor.reparentShapes(Q,J.parentId),this.editor.deleteShapes([J.id]);return}}}var ON=function(J){const Q=[...WA],Z=new Set;for(let q of J){if(AW0.has(q.type))throw new Error(`Shape type "${q.type}" is a core shapes type and cannot be overridden`);if(Z.has(q.type))throw new Error(`Shape type "${q.type}" is defined more than once`);Q.push(q),Z.add(q.type)}return Q},WA=[MN],AW0=new Set(WA.map((J)=>J.type));var Ou=function(J,Q){if(!Q)return!1;switch(J.type){case"mixed":return Q.type==="mixed";case"shared":return Q.type==="shared"&&J.value===Q.value;default:throw r5(J)}};class GA{map;constructor(J){this.map=new Map(J)}get(J){return this.map.get(J)}getAsKnownValue(J){const Q=this.get(J);if(!Q)return;if(Q.type==="mixed")return;return Q.value}get size(){return this.map.size}equals(J){if(this.size!==J.size)return!1;const Q=new Set;for(let[Z,q]of this){if(!Ou(q,J.get(Z)))return!1;Q.add(Z)}for(let[Z,q]of J){if(Q.has(Z))continue;if(!Ou(q,this.get(Z)))return!1}return!0}keys(){return this.map.keys()}values(){return this.map.values()}entries(){return this.map.entries()}[Symbol.iterator](){return this.map[Symbol.iterator]()}}class iY extends GA{set(J,Q){this.map.set(J,Q)}applyValue(J,Q){const Z=this.get(J);if(!Z){this.set(J,{type:"shared",value:Q});return}switch(Z.type){case"mixed":return;case"shared":if(Z.value!==Q)this.set(J,{type:"mixed"});return;default:r5(Z,"type")}}}class _Q{items=new WeakMap;get(J,Q){if(!this.items.has(J))this.items.set(J,Q(J));return this.items.get(J)}access(J){return this.items.get(J)}set(J,Q){this.items.set(J,Q)}has(J){return this.items.has(J)}invalidate(J){this.items.delete(J)}bust(){this.items=new WeakMap}}var HA=function(J,Q,Z){return fetch(J).then(function(q){return q.arrayBuffer()}).then(function(q){return new File([q],Q,{type:Z})})};var zA=function(J,Q){let Z=J;const q=new Set(Q);while(q.has(Z))Z=/^.*(\d+)$/.exec(Z)?.[1]?Z.replace(/(\d+)(?=\D?)$/,(Y)=>{return(+Y+1).toString()}):`${Z} 1`;return Z};var H3=function(J,Q,Z){if(Z.length===0)return[];const q=new Map;for(let $ of Y6(Z.map((W)=>J.getShape(W)))){const{parentId:W}=$;if(!q.has(W))q.set(W,{children:Y6(J.getSortedChildIdsForParent(W).map((G)=>J.getShape(G))),moving:new Set});q.get(W).moving.add($)}const Y=[];switch(Q){case"toBack":{q.forEach(({moving:$,children:W})=>kW0($,W,Y));break}case"toFront":{q.forEach(({moving:$,children:W})=>wW0($,W,Y));break}case"forward":{q.forEach(({moving:$,children:W})=>IW0($,W,Y));break}case"backward":{q.forEach(({moving:$,children:W})=>PW0($,W,Y));break}}return Y},kW0=function(J,Q,Z){const q=Q.length;if(J.size===q)return;let Y,$;for(let W=0;W<q;W++){const G=Q[W];if(J.has(G))Y=G.index,J.delete(G);else{$=G.index;break}}if(J.size===0)return;else{const W=EZ(Y,$,J.size);Z.push(...Array.from(J.values()).sort(P9).map((G,z)=>({...G,index:W[z]})))}},wW0=function(J,Q,Z){const q=Q.length;if(J.size===q)return;let Y,$;for(let W=q-1;W>-1;W--){const G=Q[W];if(J.has(G))$=G.index,J.delete(G);else{Y=G.index;break}}if(J.size===0)return;else{const W=EZ(Y,$,J.size);Z.push(...Array.from(J.values()).sort(P9).map((G,z)=>({...G,index:W[z]})))}},IW0=function(J,Q,Z){const q=Q.length;if(J.size===q)return;let Y={name:"skipping"};for(let $=0;$<q;$++){const W=J.has(Q[$]);switch(Y.name){case"skipping":{if(!W)continue;Y={name:"selecting",selectIndex:$};break}case"selecting":{if(W)continue;const{selectIndex:G}=Y;EZ(Q[$].index,Q[$+1]?.index,$-G).forEach((z,U)=>Z.push({...Q[G+U],index:z})),Y={name:"skipping"};break}}}},PW0=function(J,Q,Z){const q=Q.length;if(J.size===q)return;let Y={name:"skipping"};for(let $=q-1;$>-1;$--){const W=J.has(Q[$]);switch(Y.name){case"skipping":{if(!W)continue;Y={name:"selecting",selectIndex:$};break}case"selecting":{if(W)continue;EZ(Q[$-1]?.index,Q[$].index,Y.selectIndex-$).forEach((G,z)=>{Z.push({...Q[$+z+1],index:G})}),Y={name:"skipping"};break}}}};var z3=function({editor:J}){const Q=J.getSelectedShapes(),Z=J.getSelectionRotation(),q=J.getSelectionRotatedPageBounds(),{inputs:{originPagePoint:Y}}=J;if(!q)return null;const $=q.center.clone().rotWith(q.point,Z);return{selectionPageCenter:$,initialCursorAngle:$.angle(Y),initialSelectionRotation:Z,shapeSnapshots:Q.map((W)=>({shape:p6(W),initialPagePoint:J.getShapePageTransform(W.id).point()}))}},nY=function({delta:J,editor:Q,snapshot:Z,stage:q}){const{selectionPageCenter:Y,shapeSnapshots:$}=Z;Q.updateShapes($.map(({shape:G,initialPagePoint:z})=>{const U=U5(G.parentId)?Q.getShapePageTransform(G.parentId):j0.Identity(),F=j.RotWith(z,Y,J),B=j0.applyToPoint(j0.Inverse(U),F),M=E4(G.rotation+J);return{id:G.id,type:G.type,x:B.x,y:B.y,rotation:M}}));const W=[];if($.forEach(({shape:G})=>{const z=Q.getShape(G.id);if(!z)return;const U=Q.getShapeUtil(G);if(q==="start"||q==="one-off"){const B=U.onRotateStart?.(G);if(B)W.push(B)}const F=U.onRotate?.(G,z);if(F)W.push(F);if(q==="end"||q==="one-off"){const B=U.onRotateEnd?.(G,z);if(B)W.push(B)}}),W.length>0)Q.updateShapes(W)};var Vu=(J)=>{const{store:Q}=J,Z=Q.query.filterHistory("shape"),q=Q.query.records("shape",()=>({type:{eq:"arrow"}}));function Y(){const $=q.get(),W={};for(let G of $){const{start:z,end:U}=G.props;if(z.type==="binding"){const F=W[z.boundShapeId];if(F)F.push({arrowId:G.id,handleId:"start"});else W[z.boundShapeId]=[{arrowId:G.id,handleId:"start"}]}if(U.type==="binding"){const F=W[U.boundShapeId];if(F)F.push({arrowId:G.id,handleId:"end"});else W[U.boundShapeId]=[{arrowId:G.id,handleId:"end"}]}}return W}return z0("arrowBindingsIndex",($,W)=>{if(O4($))return Y();const G=$,z=Z.getDiffSince(W);if(z===r9)return Y();let U=void 0;function F(O){if(!U)U={...G};if(!U[O])U[O]=[];else if(U[O]===G[O])U[O]=[...U[O]]}function B(O,R,V){if(F(O),U[O]=U[O].filter((E)=>E.arrowId!==R||E.handleId!==V),U[O].length===0)delete U[O]}function M(O,R,V){F(O),U[O].push({arrowId:R,handleId:V})}for(let O of z){for(let R of Object.values(O.added))if(J.isShapeOfType(R,"arrow")){const{start:V,end:E}=R.props;if(V.type==="binding")M(V.boundShapeId,R.id,"start");if(E.type==="binding")M(E.boundShapeId,R.id,"end")}for(let[R,V]of Object.values(O.updated)){if(!J.isShapeOfType(R,"arrow")||!J.isShapeOfType(V,"arrow"))continue;for(let E of["start","end"]){const _=R.props[E],A=V.props[E];if(_.type==="binding"&&A.type==="point")B(_.boundShapeId,R.id,E);else if(_.type==="point"&&A.type==="binding")M(A.boundShapeId,V.id,E);else if(_.type==="binding"&&A.type==="binding"&&_.boundShapeId!==A.boundShapeId)B(_.boundShapeId,R.id,E),M(A.boundShapeId,V.id,E)}}for(let R of Object.values(O.removed))if(J.isShapeOfType(R,"arrow")){const{start:V,end:E}=R.props;if(V.type==="binding")B(V.boundShapeId,R.id,"start");if(E.type==="binding")B(E.boundShapeId,R.id,"end")}}return U??G})};var TW0=function(J,Q,Z){const q=J.getShapeMaskedPageBounds(Q);if(q===void 0)return!0;return!Z.includes(q)},Du=(J)=>{const Q=Number.isFinite(J.renderingBoundsMargin);function Z(q){const Y=q.getCurrentPageShapeIds(),$=q.getViewportPageBounds(),W=new Set;return Y.forEach((G)=>{if(TW0(q,G,$))W.add(G)}),W}return z0("getCulledShapes",(q)=>{if(!Q)return new Set;if(O4(q))return Z(J);const Y=Z(J);if(q.size!==Y.size)return Y;for(let $ of q)if(!Y.has($))return Y;return q})};var Ru=(J)=>{const Q=J.query.ids("shape"),Z=J.query.filterHistory("shape");function q(){const Y={},$=Q.get(),W=Array($.size);return $.forEach((G)=>W.push(J.get(G))),W.sort(P9),W.forEach((G)=>{if(!Y[G.parentId])Y[G.parentId]=[];Y[G.parentId].push(G.id)}),Y}return z0("parentsToChildrenWithIndexes",(Y,$)=>{if(O4(Y))return q();const W=Z.getDiffSince($);if(W===r9)return q();if(W.length===0)return Y;let G=null;const z=(B)=>{if(!G)G={...Y};if(!G[B])G[B]=[];else if(G[B]===Y[B])G[B]=[...G[B]]},U=new Set;let F;for(let B=0,M=W.length;B<M;B++){F=W[B];for(let O of Object.values(F.added)){if(!TZ(O))continue;z(O.parentId),G[O.parentId].push(O.id),U.add(G[O.parentId])}for(let[O,R]of Object.values(F.updated)){if(!TZ(R))continue;if(!TZ(O))continue;if(O.parentId!==R.parentId)z(O.parentId),z(R.parentId),G[O.parentId].splice(G[O.parentId].indexOf(R.id),1),G[R.parentId].push(R.id),U.add(G[R.parentId]);else if(O.index!==R.index){z(R.parentId);const V=G[R.parentId].indexOf(R.id);G[R.parentId][V]=R.id,U.add(G[R.parentId])}}for(let O of Object.values(F.removed)){if(!TZ(O))continue;z(O.parentId),G[O.parentId].splice(G[O.parentId].indexOf(O.id),1)}}for(let B of U){const M=Y6(B.map((O)=>J.get(O)));M.sort(P9),B.splice(0,B.length,...M.map((O)=>O.id))}return G??Y})};var UA=(J,Q,Z)=>{while(!o5(Z.parentId)){const q=J.get(Z.parentId);if(!q)return!1;Z=q}return Z.parentId===Q},ju=(J,Q)=>{const Z=J.query.ids("shape");let q=null;function Y(){const $=Q();return q=$,new Set([...Z.get()].filter((W)=>UA(J,$,J.get(W))))}return z0("_shapeIdsInCurrentPage",($,W)=>{if(O4($))return Y();const G=Q();if(G!==q)return Y();const z=J.history.getDiffSince(W);if(z===r9)return Y();const U=new lq($);for(let B of z){for(let M of Object.values(B.added))if(TZ(M)&&UA(J,G,M))U.add(M.id);for(let[M,O]of Object.values(B.updated))if(TZ(O))if(UA(J,G,O))U.add(O.id);else U.remove(O.id);for(let M of Object.keys(B.removed))if(U5(M))U.remove(M)}const F=U.get();if(!F)return $;return pq(F.value,F.diff)})};var w4=v(W0(),1);var Cu=v(o(),1);var LA=v(W0(),1),VN=v(o(),1);var Eu=function({context:J,editor:Q,children:Z}){return LA.jsx(XX.Provider,{value:Q,children:LA.jsx(_u.Provider,{value:J,children:Z})})},U3=function(){const J=VN.useContext(_u);if(!J)return null;return{isDarkMode:J.isDarkMode}},_u=VN.createContext(null);async function Au(J,Q,Z={}){const q=typeof Q[0]==="string"?Q:Q.map((k)=>k.id);if(q.length===0)return;if(!window.document)throw Error("No document");const{scale:Y=1,background:$=!1,padding:W=WC,preserveAspectRatio:G=!1}=Z,z=Z.darkMode??J.user.getIsDarkMode(),U=y5({isDarkMode:z}),F=J.getShapeAndDescendantIds(q),B=J.getUnorderedRenderingShapes(!1).filter(({id:k})=>F.has(k));let M=null;if(Z.bounds)M=Z.bounds;else for(let{id:k}of B){const P=J.getShapeMaskedPageBounds(k);if(!P)continue;if(M)M.union(P);else M=P.clone()}if(!M)return;const O=q.length===1&&J.isShapeOfType(J.getShape(q[0]),"frame")?q[0]:null;if(!O)M.expandBy(W);const R=M.width*Y,V=M.height*Y;try{document.body.focus?.()}catch(k){}const E=[],_=new Map,A={isDarkMode:z,addExportDef:(k)=>{if(_.has(k.key))return;const P=(async()=>{const y=await k.getElement();if(!y)return;E.push(w4.jsx(Cu.Fragment,{children:y},E.length))})();_.set(k.key,P)}},w=(await Promise.all(B.map(async({id:k,opacity:P,index:y,backgroundIndex:p})=>{if(k===O)return[];const s=J.getShape(k);if(J.isShapeOfType(s,"group"))return[];const c=J.getShapeUtil(s);let t=await c.toSvg?.(s,A),X0=await c.toBackgroundSvg?.(s,A);if(!t&&!X0){const _0=J.getShapePageBounds(s);t=w4.jsx("rect",{width:_0.w,height:_0.h,fill:U.solid,stroke:U.grey.pattern,strokeWidth:1})}let J0=J.getShapePageTransform(s).toCssString();if("scale"in s.props){if(s.props.scale!==1)J0=`${J0} scale(${s.props.scale}, ${s.props.scale})`}if(t)t=w4.jsx("g",{transform:J0,opacity:P,children:t},s.id);if(X0)X0=w4.jsx("g",{transform:J0,opacity:P,children:X0},`bg_${s.id}`);const Q0=J.getShapeMask(s.id);if(Q0){const _0=`mask_${s.id.replace(":","_")}`;if(E.push(w4.jsx("clipPath",{id:_0,children:w4.jsx("path",{d:`M${Q0.map(({x:T0,y:r0})=>`${T0},${r0}`).join("L")}Z`})},E.length)),t)t=w4.jsx("g",{clipPath:`url(#${_0})`,children:t},s.id);if(X0)X0=w4.jsx("g",{clipPath:`url(#${_0})`,children:X0},`bg_${s.id}`)}const a=[];if(t)a.push({zIndex:y,element:t});if(X0)a.push({zIndex:p,element:X0});return a}))).flat();return await Promise.all(_.values()),{jsx:w4.jsx(Eu,{editor:J,context:A,children:w4.jsxs("svg",{preserveAspectRatio:G?G:void 0,direction:"ltr",width:R,height:V,viewBox:`${M.minX} ${M.minY} ${M.width} ${M.height}`,strokeLinecap:"round",strokeLinejoin:"round",style:{backgroundColor:$?O?U.solid:U.background:"transparent"},children:[w4.jsx("defs",{children:E}),w.sort((k,P)=>k.zIndex-P.zIndex).map(({element:k})=>k)]})}),width:R,height:V}}var bW0=40;class FA{constructor(J){this.editor=J}_clickId="";_clickTimeout;_clickScreenPoint;_previousScreenPoint;_getClickTimeout=(J,Q=u6())=>{this._clickId=Q,clearTimeout(this._clickTimeout),this._clickTimeout=setTimeout(()=>{if(this._clickState===J&&this._clickId===Q){switch(this._clickState){case"pendingTriple":{this.editor.dispatch({...this.lastPointerInfo,type:"click",name:"double_click",phase:"settle"});break}case"pendingQuadruple":{this.editor.dispatch({...this.lastPointerInfo,type:"click",name:"triple_click",phase:"settle"});break}case"pendingOverflow":{this.editor.dispatch({...this.lastPointerInfo,type:"click",name:"quadruple_click",phase:"settle"});break}default:}this._clickState="idle"}},J==="idle"||J==="pendingDouble"?KC:$C)};_clickState="idle";get clickState(){return this._clickState}lastPointerInfo={};transformPointerDownEvent=(J)=>{if(!this._clickState)return J;if(this._clickScreenPoint=j.From(J.point),this._previousScreenPoint&&this._previousScreenPoint.dist(this._clickScreenPoint)>bW0)this._clickState="idle";switch(this._previousScreenPoint=this._clickScreenPoint,this.lastPointerInfo=J,this._clickState){case"idle":return this._clickState="pendingDouble",this._clickTimeout=this._getClickTimeout(this._clickState),J;case"pendingDouble":return this._clickState="pendingTriple",this._clickTimeout=this._getClickTimeout(this._clickState),{...J,type:"click",name:"double_click",phase:"down"};case"pendingTriple":return this._clickState="pendingQuadruple",this._clickTimeout=this._getClickTimeout(this._clickState),{...J,type:"click",name:"triple_click",phase:"down"};case"pendingQuadruple":return this._clickState="pendingOverflow",this._clickTimeout=this._getClickTimeout(this._clickState),{...J,type:"click",name:"quadruple_click",phase:"down"};case"pendingOverflow":return this._clickState="overflow",this._clickTimeout=this._getClickTimeout(this._clickState),J;default:return this._clickTimeout=this._getClickTimeout(this._clickState),J}};transformPointerUpEvent=(J)=>{if(!this._clickState)return J;switch(this._clickScreenPoint=j.From(J.point),this._clickState){case"pendingTriple":return{...this.lastPointerInfo,type:"click",name:"double_click",phase:"up"};case"pendingQuadruple":return{...this.lastPointerInfo,type:"click",name:"triple_click",phase:"up"};case"pendingOverflow":return{...this.lastPointerInfo,type:"click",name:"quadruple_click",phase:"up"};default:return J}};cancelDoubleClickTimeout=()=>{this._clickTimeout=clearTimeout(this._clickTimeout),this._clickState="idle"};handleMove=()=>{if(this._clickState!=="idle"&&this._clickScreenPoint&&j.Dist2(this._clickScreenPoint,this.editor.inputs.currentScreenPoint)>(this.editor.getInstanceState().isCoarsePointer?iz:vZ))this.cancelDoubleClickTimeout()}}class BA{constructor(J){if(this.editor=J,typeof window!=="undefined"&&"navigator"in window)this.isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),this.isIos=!!navigator.userAgent.match(/iPad/i)||!!navigator.userAgent.match(/iPhone/i),this.isChromeForIos=/crios.*safari/i.test(navigator.userAgent),this.isFirefox=/firefox/i.test(navigator.userAgent),this.isAndroid=/android/i.test(navigator.userAgent);else this.isSafari=!1,this.isIos=!1,this.isChromeForIos=!1,this.isFirefox=!1,this.isAndroid=!1}isSafari;isIos;isChromeForIos;isFirefox;isAndroid}var UX=function(J){if(J){let Q=ku;while(J.length)Q=Q.push(J.pop());return Q}return ku};class wu{length=0;head=null;tail=this;push(J){return new NA(J,this)}toArray(){return n5}[Symbol.iterator](){return{next(){return{value:void 0,done:!0}}}}}var ku=new wu;class NA{constructor(J,Q){this.head=J,this.tail=Q,this.length=Q.length+1}length;push(J){return new NA(J,this)}toArray(){return Array.from(this)}[Symbol.iterator](){let J=this;return{next(){if(J.length){const Q=J.head;return J=J.tail,{value:Q,done:!1}}else return{value:void 0,done:!0}}}}}class MA{constructor(J,Q){this.ctx=J,this.annotateError=Q}_undos=U9("HistoryManager.undos",UX());_redos=U9("HistoryManager.redos",UX());_batchDepth=0;onBatchComplete=()=>{return};_commands={};getNumUndos(){return this._undos.get().length}getNumRedos(){return this._redos.get().length}createCommand=(J,Q,Z)=>{if(this._commands[J])throw new Error(`Duplicate command: ${J}`);this._commands[J]=Z;const q=(...Y)=>{if(!this._batchDepth)return this.batch(()=>q(...Y)),this.ctx;const $=Q(...Y);if(!$)return this.ctx;const{data:W,ephemeral:G,squashing:z,preservesRedoStack:U}=$;if(this.ignoringUpdates((F,B)=>{return Z.do(W),{undos:F,redos:B}}),!G){const F=this._undos.get().head;if(z&&F&&F.type==="command"&&F.name===J&&F.preservesRedoStack===U)this._undos.update((B)=>B.tail.push({...F,data:wZ(Z.squash(F.data,W))}));else this._undos.update((B)=>B.push({type:"command",name:J,data:wZ(W),preservesRedoStack:U}));if(!$.preservesRedoStack)this._redos.set(UX());this.ctx.emit("change-history",{reason:"push"})}return this.ctx};return q};batch=(J)=>{try{if(this._batchDepth++,this._batchDepth===1)I5(()=>{const Q=this._undos.get().head;if(J(),Q!==this._undos.get().head)this.onBatchComplete()});else J()}catch(Q){throw this.annotateError(Q),Q}finally{this._batchDepth--}return this};ignoringUpdates=(J)=>{let Q=this._undos.get(),Z=this._redos.get();this._undos.set(UX()),this._redos.set(UX());try{({undos:Q,redos:Z}=I5(()=>J(Q,Z)))}finally{this._undos.set(Q),this._redos.set(Z)}};_undo=({pushToRedoStack:J,toMark:Q=void 0})=>{return this.ignoringUpdates((Z,q)=>{if(Z.length===0)return{undos:Z,redos:q};while(Z.head?.type==="STOP"){const Y=Z.head;if(Z=Z.tail,J)q=q.push(Y);if(Y.id===Q)return this.ctx.emit("change-history",J?{reason:"undo"}:{reason:"bail",markId:Q}),{undos:Z,redos:q}}if(Z.length===0)return this.ctx.emit("change-history",J?{reason:"undo"}:{reason:"bail",markId:Q}),{undos:Z,redos:q};while(Z.head){const Y=Z.head;if(Z=Z.tail,J)q=q.push(Y);if(Y.type==="STOP"){if(Y.onUndo&&(!Q||Y.id===Q))return this.ctx.emit("change-history",J?{reason:"undo"}:{reason:"bail",markId:Q}),{undos:Z,redos:q}}else this._commands[Y.name].undo(Y.data)}return this.ctx.emit("change-history",J?{reason:"undo"}:{reason:"bail",markId:Q}),{undos:Z,redos:q}}),this};undo=()=>{return this._undo({pushToRedoStack:!0}),this};redo=()=>{return this.ignoringUpdates((J,Q)=>{if(Q.length===0)return{undos:J,redos:Q};while(Q.head?.type==="STOP")J=J.push(Q.head),Q=Q.tail;if(Q.length===0)return this.ctx.emit("change-history",{reason:"redo"}),{undos:J,redos:Q};while(Q.head){const Z=Q.head;if(J=J.push(Q.head),Q=Q.tail,Z.type==="STOP"){if(Z.onRedo)break}else{const q=this._commands[Z.name];if(q.redo)q.redo(Z.data);else q.do(Z.data)}}return this.ctx.emit("change-history",{reason:"redo"}),{undos:J,redos:Q}}),this};bail=()=>{return this._undo({pushToRedoStack:!1}),this};bailToMark=(J)=>{return this._undo({pushToRedoStack:!1,toMark:J}),this};mark=(J=u6(),Q=!0,Z=!0)=>{const q=this._undos.get().head;if(q&&q.type==="STOP"){if(q.id===J&&q.onUndo===Q&&q.onRedo===Z)return q.id}return this._undos.update((Y)=>Y.push({type:"STOP",id:J,onUndo:Q,onRedo:Z})),this.ctx.emit("mark-history",{id:J}),J};clear(){this._undos.set(UX()),this._redos.set(UX())}}class OA{constructor(J){this.editor=J}scribbleItems=new Map;state="paused";addScribble=(J,Q=u6())=>{const Z={id:Q,scribble:{id:Q,size:20,color:"accent",opacity:0.8,delay:0,points:[],shrink:0.1,taper:!0,...J,state:"starting"},timeoutMs:0,delayRemaining:J.delay??0,prev:null,next:null};return this.scribbleItems.set(Q,Z),Z};reset(){this.editor.updateInstanceState({scribbles:[]}),this.scribbleItems.clear()}stop=(J)=>{const Q=this.scribbleItems.get(J);if(!Q)throw Error(`Scribble with id ${J} not found`);return Q.delayRemaining=Math.min(Q.delayRemaining,200),Q.scribble.state="stopping",Q};addPoint=(J,Q,Z)=>{const q=this.scribbleItems.get(J);if(!q)throw Error(`Scribble with id ${J} not found`);const{prev:Y}=q,$={x:Q,y:Z,z:0.5};if(!Y||j.Dist(Y,$)>=1)q.next=$;return q};tick=(J)=>{if(this.scribbleItems.size===0)return;this.editor.batch(()=>{this.scribbleItems.forEach((Q)=>{if(Q.scribble.state==="starting"){const{next:G,prev:z}=Q;if(G&&G!==z)Q.prev=G,Q.scribble.points.push(G);if(Q.scribble.points.length>8)Q.scribble.state="active";return}if(Q.delayRemaining>0)Q.delayRemaining=Math.max(0,Q.delayRemaining-J);if(Q.timeoutMs+=J,Q.timeoutMs>=16)Q.timeoutMs=0;const{delayRemaining:Z,timeoutMs:q,prev:Y,next:$,scribble:W}=Q;switch(W.state){case"active":{if($&&$!==Y){if(Q.prev=$,W.points.push($),Z===0){if(W.points.length>8)W.points.shift()}}else if(q===0)if(W.points.length>1)W.points.shift();else Q.delayRemaining=W.delay;break}case"stopping":{if(Q.delayRemaining===0){if(q===0){if(W.points.length===1){this.scribbleItems.delete(Q.id);return}if(W.shrink)W.size=Math.max(1,W.size*(1-W.shrink));W.points.shift()}}break}case"paused":break}}),this.editor.updateInstanceState({scribbles:Array.from(this.scribbleItems.values()).map(({scribble:Q})=>({...Q,points:[...Q.points]})).slice(-5)})})}}var sY=function(J,Q){const Z=J.indexOf(Q);if(Z>=0)J.splice(Z,1)};class VA{constructor(J){this.editor=J,J.store.onBeforeCreate=(Z,q)=>{const Y=this._beforeCreateHandlers[Z.typeName];if(Y){let $=Z;for(let W of Y)$=W($,q);return $}return Z},J.store.onAfterCreate=(Z,q)=>{const Y=this._afterCreateHandlers[Z.typeName];if(Y)for(let $ of Y)$(Z,q)},J.store.onBeforeChange=(Z,q,Y)=>{const $=this._beforeChangeHandlers[q.typeName];if($){let W=q;for(let G of $)W=G(Z,W,Y);return W}return q};let Q=0;J.store.onAfterChange=(Z,q,Y)=>{if(Q++,Q>1000)console.error("[CleanupManager.onAfterChange] Maximum update depth exceeded, bailing out.");else{const $=this._afterChangeHandlers[q.typeName];if($)for(let W of $)W(Z,q,Y)}Q--},J.store.onBeforeDelete=(Z,q)=>{const Y=this._beforeDeleteHandlers[Z.typeName];if(Y){for(let $ of Y)if($(Z,q)===!1)return!1}},J.store.onAfterDelete=(Z,q)=>{const Y=this._afterDeleteHandlers[Z.typeName];if(Y)for(let $ of Y)$(Z,q)},J.history.onBatchComplete=()=>{this._batchCompleteHandlers.forEach((Z)=>Z())}}_beforeCreateHandlers={};_afterCreateHandlers={};_beforeChangeHandlers={};_afterChangeHandlers={};_beforeDeleteHandlers={};_afterDeleteHandlers={};_batchCompleteHandlers=[];registerBeforeCreateHandler(J,Q){if(!this._beforeCreateHandlers[J])this._beforeCreateHandlers[J]=[];return this._beforeCreateHandlers[J].push(Q),()=>sY(this._beforeCreateHandlers[J],Q)}registerAfterCreateHandler(J,Q){if(!this._afterCreateHandlers[J])this._afterCreateHandlers[J]=[];return this._afterCreateHandlers[J].push(Q),()=>sY(this._afterCreateHandlers[J],Q)}registerBeforeChangeHandler(J,Q){if(!this._beforeChangeHandlers[J])this._beforeChangeHandlers[J]=[];return this._beforeChangeHandlers[J].push(Q),()=>sY(this._beforeChangeHandlers[J],Q)}registerAfterChangeHandler(J,Q){if(!this._afterChangeHandlers[J])this._afterChangeHandlers[J]=[];return this._afterChangeHandlers[J].push(Q),()=>sY(this._afterChangeHandlers[J],Q)}registerBeforeDeleteHandler(J,Q){if(!this._beforeDeleteHandlers[J])this._beforeDeleteHandlers[J]=[];return this._beforeDeleteHandlers[J].push(Q),()=>sY(this._beforeDeleteHandlers[J],Q)}registerAfterDeleteHandler(J,Q){if(!this._afterDeleteHandlers[J])this._afterDeleteHandlers[J]=[];return this._afterDeleteHandlers[J].push(Q),()=>sY(this._afterDeleteHandlers[J],Q)}registerBatchCompleteHandler(J){return this._batchCompleteHandlers.push(J),()=>sY(this._batchCompleteHandlers,J)}}var fZ=function(J,Q,Z,q,Y){const $=J.filter((G)=>(q==="forward"?G.startNode.id===Q:G.endNode.id===Q)&&B6(G.length)===B6(Z)&&c7(G.breadthIntersection[0],G.breadthIntersection[1],Y[0],Y[1]));if($.length===0)return[];const W=new Set;return $.forEach((G)=>{const z=q==="forward"?G.endNode.id:G.startNode.id;if(!W.has(z)){W.add(z);const U=fZ(J,z,Z,q,c7(G.breadthIntersection[0],G.breadthIntersection[1],Y[0],Y[1]));$.push(...U)}}),$},vW0=function(J){J.sort((Q,Z)=>Z.gaps.length-Q.gaps.length);for(let Q=J.length-1;Q>0;Q--){const Z=J[Q];for(let q=Q-1;q>=0;q--){const Y=J[q];if(Y.direction===Z.direction&&Z.gaps.every(($)=>Y.gaps.some((W)=>B6($.startEdge[0].x)===B6(W.startEdge[0].x)&&B6($.startEdge[0].y)===B6(W.startEdge[0].y)&&B6($.startEdge[1].x)===B6(W.startEdge[1].x)&&B6($.startEdge[1].y)===B6(W.startEdge[1].y))&&Y.gaps.some((W)=>B6($.endEdge[0].x)===B6(W.endEdge[0].x)&&B6($.endEdge[0].y)===B6(W.endEdge[0].y)&&B6($.endEdge[1].x)===B6(W.endEdge[1].x)&&B6($.endEdge[1].y)===B6(W.endEdge[1].y)))){J.splice(Q,1);break}}}},Iu=function(J,Q){const{minX:Z,maxX:q,minY:Y,maxY:$}=Q,W=[];switch(J){case"top":case"left":case"top_left":case"any":W.push({id:"top_left",handle:"top_left",x:Z,y:Y})}switch(J){case"top":case"right":case"top_right":case"any":W.push({id:"top_right",handle:"top_right",x:q,y:Y})}switch(J){case"bottom":case"right":case"bottom_right":case"any":W.push({id:"bottom_right",handle:"bottom_right",x:q,y:$})}switch(J){case"bottom":case"left":case"bottom_left":case"any":W.push({id:"bottom_left",handle:"bottom_left",x:Z,y:$})}return W},xW0=Object.defineProperty,yW0=Object.getOwnPropertyDescriptor,DN=(J,Q,Z,q)=>{var Y=q>1?void 0:q?yW0(Q,Z):Q;for(var $=J.length-1,W;$>=0;$--)if(W=J[$])Y=(q?W(Q,Z,Y):W(Y))||Y;if(q&&Y)xW0(Q,Z,Y);return Y},B6=(J)=>{return Math.round(J*1e8)/1e8};class rY{constructor(J){this.manager=J,this.editor=J.editor}editor;getSnapPointsCache(){const{editor:J}=this;return J.store.createComputedCache("snapPoints",(Q)=>{const Z=J.getShapePageTransform(Q.id);if(!Z)return;const Y=J.getShapeUtil(Q).getBoundsSnapGeometry(Q).points??J.getShapeGeometry(Q).bounds.cornersAndCenter;if(!Z||!Y)return;return Y.map(($,W)=>{const{x:G,y:z}=j0.applyToPoint(Z,$);return{x:G,y:z,id:`${Q.id}:${W}`}})})}getSnapPoints(J){return this.getSnapPointsCache().get(J)??[]}getSnappablePoints(){const J=this.getSnapPointsCache(),Q=this.manager.getSnappableShapes(),Z=[];for(let q of Q){const Y=J.get(q);if(Y)Z.push(...Y)}return Z}getSnappableGapNodes(){return Array.from(this.manager.getSnappableShapes(),(J)=>({id:J,pageBounds:r4(this.editor.getShapePageBounds(J))}))}getVisibleGaps(){const J=[],Q=[];let Z,q;const Y=this.getSnappableGapNodes().sort((W,G)=>{return W.pageBounds.minX-G.pageBounds.minX});for(let W=0;W<Y.length;W++){Z=Y[W];for(let G=W+1;G<Y.length;G++)if(q=Y[G],Z.pageBounds.maxX<q.pageBounds.minX&&MW(Z.pageBounds.minY,Z.pageBounds.maxY,q.pageBounds.minY,q.pageBounds.maxY))J.push({startNode:Z,endNode:q,startEdge:[new j(Z.pageBounds.maxX,Z.pageBounds.minY),new j(Z.pageBounds.maxX,Z.pageBounds.maxY)],endEdge:[new j(q.pageBounds.minX,q.pageBounds.minY),new j(q.pageBounds.minX,q.pageBounds.maxY)],length:q.pageBounds.minX-Z.pageBounds.maxX,breadthIntersection:c7(Z.pageBounds.minY,Z.pageBounds.maxY,q.pageBounds.minY,q.pageBounds.maxY)})}const $=Y.sort((W,G)=>{return W.pageBounds.minY-G.pageBounds.minY});for(let W=0;W<$.length;W++){Z=$[W];for(let G=W+1;G<$.length;G++)if(q=$[G],Z.pageBounds.maxY<q.pageBounds.minY&&MW(Z.pageBounds.minX,Z.pageBounds.maxX,q.pageBounds.minX,q.pageBounds.maxX))Q.push({startNode:Z,endNode:q,startEdge:[new j(Z.pageBounds.minX,Z.pageBounds.maxY),new j(Z.pageBounds.maxX,Z.pageBounds.maxY)],endEdge:[new j(q.pageBounds.minX,q.pageBounds.minY),new j(q.pageBounds.maxX,q.pageBounds.minY)],length:q.pageBounds.minY-Z.pageBounds.maxY,breadthIntersection:c7(Z.pageBounds.minX,Z.pageBounds.maxX,q.pageBounds.minX,q.pageBounds.maxX)})}return{horizontal:J,vertical:Q}}snapTranslateShapes({lockedAxis:J,initialSelectionPageBounds:Q,initialSelectionSnapPoints:Z,dragDelta:q}){const Y=this.manager.getSnapThreshold(),$=this.getSnappablePoints(),W=Q.clone().translate(q),G=Z.map(({x:V,y:E},_)=>({id:"selection:"+_,x:V+q.x,y:E+q.y})),z=$,U=[],F=[],B=new j(Y,Y);this.collectPointSnaps({minOffset:B,nearestSnapsX:U,nearestSnapsY:F,otherNodeSnapPoints:z,selectionSnapPoints:G}),this.collectGapSnaps({selectionPageBounds:W,nearestSnapsX:U,nearestSnapsY:F,minOffset:B});const M=new j(J==="x"?0:U[0]?.nudge??0,J==="y"?0:F[0]?.nudge??0);B.x=0,B.y=0,U.length=0,F.length=0,G.forEach((V)=>{V.x+=M.x,V.y+=M.y}),W.translate(M),this.collectPointSnaps({minOffset:B,nearestSnapsX:U,nearestSnapsY:F,otherNodeSnapPoints:z,selectionSnapPoints:G}),this.collectGapSnaps({selectionPageBounds:W,nearestSnapsX:U,nearestSnapsY:F,minOffset:B});const O=this.getPointSnapLines({nearestSnapsX:U,nearestSnapsY:F}),R=this.getGapSnapLines({selectionPageBounds:W,nearestSnapsX:U,nearestSnapsY:F});return this.manager.setIndicators([...R,...O]),{nudge:M}}snapResizeShapes({initialSelectionPageBounds:J,dragDelta:Q,handle:Z,isAspectRatioLocked:q,isResizingFromCenter:Y}){const $=this.manager.getSnapThreshold(),{box:W,scaleX:G,scaleY:z}=V0.Resize(J,Z,Y?Q.x*2:Q.x,Y?Q.y*2:Q.y,q);let U=Z;if(G<0)U=jh(U);if(z<0)U=Rh(U);if(Y)W.center=J.center;const F=U==="top"||U==="bottom",B=U==="left"||U==="right",M=Iu(U,W),O=this.getSnappablePoints(),R=[],V=[],E=new j($,$);this.collectPointSnaps({minOffset:E,nearestSnapsX:R,nearestSnapsY:V,otherNodeSnapPoints:O,selectionSnapPoints:M});const _=new j(F?0:R[0]?.nudge??0,B?0:V[0]?.nudge??0);if(q&&_h(U)&&_.len()!==0){const P=R.length&&V.length?Math.abs(_.x)<Math.abs(_.y)?"x":"y":R.length?"x":"y",y=J.aspectRatio;if(P==="x"){if(V.length=0,_.y=_.x/y,U==="bottom_left"||U==="top_right")_.y=-_.y}else if(R.length=0,_.x=_.y*y,U==="bottom_left"||U==="top_right")_.x=-_.x}const A=j.Add(Q,_),{box:w}=V0.Resize(J,Z,Y?A.x*2:A.x,Y?A.y*2:A.y,q);if(Y)w.center=J.center;const T=Iu("any",w);R.length=0,V.length=0,E.x=0,E.y=0,this.collectPointSnaps({minOffset:E,nearestSnapsX:R,nearestSnapsY:V,otherNodeSnapPoints:O,selectionSnapPoints:T});const k=this.getPointSnapLines({nearestSnapsX:R,nearestSnapsY:V});return this.manager.setIndicators([...k]),{nudge:_}}collectPointSnaps({selectionSnapPoints:J,otherNodeSnapPoints:Q,minOffset:Z,nearestSnapsX:q,nearestSnapsY:Y}){for(let $ of J)for(let W of Q){const G=j.Sub($,W),z=Math.abs(G.x),U=Math.abs(G.y);if(B6(z)<=B6(Z.x)){if(B6(z)<B6(Z.x))q.length=0;q.push({type:"points",points:{thisPoint:$,otherPoint:W},nudge:W.x-$.x}),Z.x=z}if(B6(U)<=B6(Z.y)){if(B6(U)<B6(Z.y))Y.length=0;Y.push({type:"points",points:{thisPoint:$,otherPoint:W},nudge:W.y-$.y}),Z.y=U}}}collectGapSnaps({selectionPageBounds:J,minOffset:Q,nearestSnapsX:Z,nearestSnapsY:q}){const{horizontal:Y,vertical:$}=this.getVisibleGaps();for(let W of Y){if(!MW(W.breadthIntersection[0],W.breadthIntersection[1],J.minY,J.maxY))continue;const z=W.startEdge[0].x+W.length/2-J.center.x;if(W.length>J.width&&B6(Math.abs(z))<=B6(Q.x)){if(B6(Math.abs(z))<B6(Q.x))Z.length=0;Q.x=Math.abs(z);const E={type:"gap_center",gap:W,nudge:z},_=Z.find(({type:w})=>w==="gap_center"),A=_&&c7(W.breadthIntersection[0],W.breadthIntersection[1],_.gap.breadthIntersection[0],_.gap.breadthIntersection[1]);if(_&&_.gap.length>W.length&&A)Z[Z.indexOf(_)]=E;else if(!_||!A)Z.push(E)}const F=W.startNode.pageBounds.minX-W.length,B=J.maxX,M=F-B;if(B6(Math.abs(M))<=B6(Q.x)){if(B6(Math.abs(M))<B6(Q.x))Z.length=0;Q.x=Math.abs(M),Z.push({type:"gap_duplicate",gap:W,protrusionDirection:"left",nudge:M})}const O=W.endNode.pageBounds.maxX+W.length,R=J.minX,V=O-R;if(B6(Math.abs(V))<=B6(Q.x)){if(B6(Math.abs(V))<B6(Q.x))Z.length=0;Q.x=Math.abs(V),Z.push({type:"gap_duplicate",gap:W,protrusionDirection:"right",nudge:V})}}for(let W of $){if(!MW(W.breadthIntersection[0],W.breadthIntersection[1],J.minX,J.maxX))continue;const z=W.startEdge[0].y+W.length/2-J.center.y;if(W.length>J.height&&B6(Math.abs(z))<=B6(Q.y)){if(B6(Math.abs(z))<B6(Q.y))q.length=0;Q.y=Math.abs(z);const E={type:"gap_center",gap:W,nudge:z},_=q.find(({type:w})=>w==="gap_center"),A=_&&MW(_.gap.breadthIntersection[0],_.gap.breadthIntersection[1],W.breadthIntersection[0],W.breadthIntersection[1]);if(_&&_.gap.length>W.length&&A)q[q.indexOf(_)]=E;else if(!_||!A)q.push(E);continue}const F=W.startNode.pageBounds.minY-W.length,B=J.maxY,M=F-B;if(B6(Math.abs(M))<=B6(Q.y)){if(B6(Math.abs(M))<B6(Q.y))q.length=0;Q.y=Math.abs(M),q.push({type:"gap_duplicate",gap:W,protrusionDirection:"top",nudge:M})}const O=W.endNode.pageBounds.maxY+W.length,R=J.minY,V=O-R;if(B6(Math.abs(V))<=B6(Q.y)){if(B6(Math.abs(V))<B6(Q.y))q.length=0;Q.y=Math.abs(V),q.push({type:"gap_duplicate",gap:W,protrusionDirection:"bottom",nudge:V})}}}getPointSnapLines({nearestSnapsX:J,nearestSnapsY:Q}){const Z={},q={};if(J.length>0){for(let Y of J)if(Y.type==="points"){const $=B6(Y.points.otherPoint.x);if(!Z[$])Z[$]=[];Z[$].push(Y.points)}}if(Q.length>0){for(let Y of Q)if(Y.type==="points"){const $=B6(Y.points.otherPoint.y);if(!q[$])q[$]=[];q[$].push(Y.points)}}return Object.values(Z).concat(Object.values(q)).map((Y)=>({id:u6(),type:"points",points:iq(Y.map(($)=>j.From($.otherPoint)).concat(Y.map(($)=>j.From($.thisPoint))),($,W)=>$.equals(W))}))}getGapSnapLines({selectionPageBounds:J,nearestSnapsX:Q,nearestSnapsY:Z}){const{vertical:q,horizontal:Y}=this.getVisibleGaps(),$={top:J.sides[0],right:J.sides[1],bottom:[J.corners[3],J.corners[2]],left:[J.corners[0],J.corners[3]]},W=[];if(Q.length>0)for(let G of Q){if(G.type==="points")continue;const{gap:{breadthIntersection:z,startEdge:U,startNode:F,endNode:B,length:M,endEdge:O}}=G;switch(G.type){case"gap_center":{const R=(M-J.width)/2,V=c7(z[0],z[1],J.minY,J.maxY);W.push({type:"gaps",direction:"horizontal",id:u6(),gaps:[...fZ(Y,F.id,R,"backward",V),{startEdge:U,endEdge:$.left},{startEdge:$.right,endEdge:O},...fZ(Y,B.id,R,"forward",V)]});break}case"gap_duplicate":{const R=c7(z[0],z[1],J.minY,J.maxY);W.push({type:"gaps",direction:"horizontal",id:u6(),gaps:G.protrusionDirection==="left"?[{startEdge:$.right,endEdge:U.map((V)=>V.clone().addXY(-F.pageBounds.width,0))},{startEdge:U,endEdge:O},...fZ(Y,B.id,M,"forward",R)]:[...fZ(Y,F.id,M,"backward",R),{startEdge:U,endEdge:O},{startEdge:O.map((V)=>V.clone().addXY(G.gap.endNode.pageBounds.width,0)),endEdge:$.left}]});break}}}if(Z.length>0)for(let G of Z){if(G.type==="points")continue;const{gap:{breadthIntersection:z,startEdge:U,startNode:F,endNode:B,length:M,endEdge:O}}=G;switch(G.type){case"gap_center":{const R=(M-J.height)/2,V=c7(z[0],z[1],J.minX,J.maxX);W.push({type:"gaps",direction:"vertical",id:u6(),gaps:[...fZ(q,F.id,R,"backward",V),{startEdge:U,endEdge:$.top},{startEdge:$.bottom,endEdge:O},...fZ(q,G.gap.endNode.id,R,"forward",V)]});break}case"gap_duplicate":{const R=c7(z[0],z[1],J.minX,J.maxX);W.push({type:"gaps",direction:"vertical",id:u6(),gaps:G.protrusionDirection==="top"?[{startEdge:$.bottom,endEdge:U.map((V)=>V.clone().addXY(0,-F.pageBounds.height))},{startEdge:U,endEdge:O},...fZ(q,B.id,M,"forward",R)]:[...fZ(q,F.id,M,"backward",R),{startEdge:U,endEdge:O},{startEdge:O.map((V)=>V.clone().addXY(0,B.pageBounds.height)),endEdge:$.top}]})}break}}return vW0(W),W}}DN([z0],rY.prototype,"getSnapPointsCache",1);DN([z0],rY.prototype,"getSnappablePoints",1);DN([z0],rY.prototype,"getSnappableGapNodes",1);DN([z0],rY.prototype,"getVisibleGaps",1);var{defineProperty:SW0,getOwnPropertyDescriptor:fW0}=Object,gW0=(J,Q,Z,q)=>{var Y=q>1?void 0:q?fW0(Q,Z):Q;for(var $=J.length-1,W;$>=0;$--)if(W=J[$])Y=(q?W(Q,Z,Y):W(Y))||Y;if(q&&Y)SW0(Q,Z,Y);return Y},mW0=()=>null,hW0=()=>[];class RN{constructor(J){this.manager=J,this.editor=J.editor}editor;getSnapGeometryCache(){const{editor:J}=this;return J.store.createComputedCache("handle snap geometry",(Q)=>{const Z=J.getShapeUtil(Q).getHandleSnapGeometry(Q);return{outline:Z.outline===void 0?J.getShapeGeometry(Q):Z.outline,points:Z.points??[],getSelfSnapOutline:Z.getSelfSnapOutline??mW0,getSelfSnapPoints:Z.getSelfSnapPoints??hW0}})}*iterateSnapPointsInPageSpace(J,Q){const Z=this.getSnapGeometryCache().get(J)?.getSelfSnapPoints(Q);if(Z&&Z.length){const q=r4(this.editor.getShapePageTransform(J));for(let Y of Z)yield q.applyToPoint(Y)}for(let q of this.manager.getSnappableShapes()){if(q===J)continue;const Y=this.getSnapGeometryCache().get(q)?.points;if(!Y||!Y.length)continue;const $=r4(this.editor.getShapePageTransform(q));for(let W of Y)yield $.applyToPoint(W)}}*iterateSnapOutlines(J,Q){const Z=this.getSnapGeometryCache().get(J)?.getSelfSnapOutline(Q);if(Z)yield{shapeId:J,outline:Z};for(let q of this.manager.getSnappableShapes()){if(q===J)continue;const Y=this.getSnapGeometryCache().get(q)?.outline;if(!Y)continue;yield{shapeId:q,outline:Y}}}getHandleSnapPosition({currentShapeId:J,handle:Q,handleInPageSpace:Z}){const q=this.manager.getSnapThreshold();let Y=q,$=null;for(let z of this.iterateSnapPointsInPageSpace(J,Q))if(j.DistMin(Z,z,Y))Y=j.Dist(Z,z),$=z;if($)return $;let W=q,G=null;for(let{shapeId:z,outline:U}of this.iterateSnapOutlines(J,Q)){const F=r4(this.editor.getShapePageTransform(z)),B=this.editor.getPointInShapeSpace(z,Z),M=U.nearestPoint(B),O=F.applyToPoint(M);if(j.DistMin(Z,O,W))W=j.Dist(Z,O),G=O}if(G)return G;return null}snapHandle({currentShapeId:J,handle:Q}){const q=r4(this.editor.getShapePageTransform(J)).applyToPoint(Q),Y=this.getHandleSnapPosition({currentShapeId:J,handle:Q,handleInPageSpace:q});if(Y)return this.manager.setIndicators([{id:u6(),type:"points",points:[Y]}]),{nudge:j.Sub(Y,q)};return null}}gW0([z0],RN.prototype,"getSnapGeometryCache",1);var{defineProperty:uW0,getOwnPropertyDescriptor:cW0}=Object,DA=(J,Q,Z,q)=>{var Y=q>1?void 0:q?cW0(Q,Z):Q;for(var $=J.length-1,W;$>=0;$--)if(W=J[$])Y=(q?W(Q,Z,Y):W(Y))||Y;if(q&&Y)uW0(Q,Z,Y);return Y};class aY{constructor(J){this.editor=J,this.shapeBounds=new rY(this),this.handles=new RN(this)}shapeBounds;handles;_snapIndicators=U9("snapLines",void 0);getIndicators(){return this._snapIndicators.get()??n5}clearIndicators(){if(this.getIndicators().length)this._snapIndicators.set(void 0)}setIndicators(J){this._snapIndicators.set(J)}getSnapThreshold(){return 8/this.editor.getZoomLevel()}getSnappableShapes(){const{editor:J}=this,Q=J.getRenderingBounds(),Z=J.getSelectedShapeIds(),q=new Set,Y=($)=>{if(U5($)){const G=J.getShape($);if(G&&J.isShapeOfType(G,"frame"))q.add($)}const W=J.getSortedChildIdsForParent($);for(let G of W){if(Z.includes(G))continue;const z=J.getShape(G);if(!z)continue;if(!J.getShapeUtil(z).canSnap(z))continue;const F=J.getShapePageBounds(G);if(!(F&&Q.includes(F)))continue;if(J.isShapeOfType(z,"group")){Y(G);continue}q.add(G)}};return Y(this.getCurrentCommonAncestor()??J.getCurrentPageId()),q}getCurrentCommonAncestor(){return this.editor.findCommonAncestor(this.editor.getSelectedShapes())}}DA([z0],aY.prototype,"getSnapThreshold",1);DA([z0],aY.prototype,"getSnappableShapes",1);DA([z0],aY.prototype,"getCurrentCommonAncestor",1);var Pu=function(J){return J.replace(pW0,"\n").split("\n").map((Q)=>Q||" ").join("\n")},pW0=/\r?\n|\r/g,dW0={start:"left","start-legacy":"left",middle:"center","middle-legacy":"center",end:"right","end-legacy":"right"},lW0=/\s/;class RA{constructor(J){this.editor=J;const Q=this.editor.getContainer();Q.querySelector("#tldraw_text_measure")?.remove();const Z=document.createElement("div");Z.id="tldraw_text_measure",Z.classList.add("tl-text"),Z.classList.add("tl-text-measure"),Z.tabIndex=-1,Q.appendChild(Z),this.baseElm=Z}baseElm;measureText=(J,Q)=>{const Z=this.baseElm?.cloneNode();this.baseElm.insertAdjacentElement("afterend",Z),Z.setAttribute("dir","ltr"),Z.style.setProperty("font-family",Q.fontFamily),Z.style.setProperty("font-style",Q.fontStyle),Z.style.setProperty("font-weight",Q.fontWeight),Z.style.setProperty("font-size",Q.fontSize+"px"),Z.style.setProperty("line-height",Q.lineHeight*Q.fontSize+"px"),Z.style.setProperty("max-width",Q.maxWidth===null?null:Q.maxWidth+"px"),Z.style.setProperty("min-width",Q.minWidth===null?null:Q.minWidth+"px"),Z.style.setProperty("padding",Q.padding),Z.style.setProperty("overflow-wrap",Q.disableOverflowWrapBreaking?"normal":"break-word"),Z.textContent=Pu(J);const q=Z.scrollWidth,Y=Z.getBoundingClientRect();return Z.remove(),{x:0,y:0,w:Y.width,h:Y.height,scrollWidth:q}};measureElementTextNodeSpans(J,{shouldTruncateToFirstLine:Q=!1}={}){const Z=[],q=J.getBoundingClientRect(),Y=-q.left,$=-q.top,W=new Range,G=J.childNodes[0];let z=0,U=null,F=null,B=0,M=!1;for(let O of J.childNodes){if(O.nodeType!==Node.TEXT_NODE)continue;for(let R of O.textContent??""){W.setStart(G,z),W.setEnd(G,z+R.length);const V=W.getClientRects(),E=V[V.length-1],_=E.top+$,A=E.left+Y,w=E.right+Y,T=lW0.test(R);if(T!==F||_!==B||!U){if(U){if(Q&&_!==B){M=!0;break}Z.push(U)}U={box:{x:A,y:_,w:E.width,h:E.height},text:R}}else U.box.w=w-U.box.x,U.text+=R;F=T,B=_,z+=R.length}}if(U)Z.push(U);return{spans:Z,didTruncate:M}}measureTextSpans(J,Q){if(J==="")return[];const Z=this.baseElm?.cloneNode();this.baseElm.insertAdjacentElement("afterend",Z);const q=Math.ceil(Q.width-Q.padding*2);Z.style.setProperty("width",`${q}px`),Z.style.setProperty("height","min-content"),Z.style.setProperty("dir","ltr"),Z.style.setProperty("font-size",`${Q.fontSize}px`),Z.style.setProperty("font-family",Q.fontFamily),Z.style.setProperty("font-weight",Q.fontWeight),Z.style.setProperty("line-height",`${Q.lineHeight*Q.fontSize}px`),Z.style.setProperty("text-align",dW0[Q.textAlign]);const Y=Q.overflow==="truncate-ellipsis"||Q.overflow==="truncate-clip";if(Y)Z.style.setProperty("overflow-wrap","anywhere"),Z.style.setProperty("word-break","break-all");const $=Pu(J);Z.textContent=$;const{spans:W,didTruncate:G}=this.measureElementTextNodeSpans(Z,{shouldTruncateToFirstLine:Y});if(Q.overflow==="truncate-ellipsis"&&G){Z.textContent="\u2026";const z=Math.ceil(this.measureElementTextNodeSpans(Z).spans[0].box.w);Z.style.setProperty("width",`${q-z}px`),Z.textContent=$;const U=this.measureElementTextNodeSpans(Z,{shouldTruncateToFirstLine:!0}).spans,F=U[U.length-1];return U.push({text:"\u2026",box:{x:Math.min(F.box.x+F.box.w,Q.width-Q.padding-z),y:F.box.y,w:z,h:F.box.h}}),U}return Z.remove(),W}}var Tu=Zz;class jA{constructor(J){this.editor=J,this.editor.disposables.add(this.dispose),this.start()}cancelRaf;isPaused=!0;now=0;start=()=>{this.isPaused=!1,this.cancelRaf?.(),this.cancelRaf=Tu(this.tick),this.now=Date.now()};tick=()=>{if(this.isPaused)return;const J=Date.now(),Q=J-this.now;this.now=J,this.updatePointerVelocity(Q),this.editor.emit("frame",Q),this.editor.emit("tick",Q),this.cancelRaf=Tu(this.tick)};dispose=()=>{this.isPaused=!0,this.cancelRaf?.()};prevPoint=new j;updatePointerVelocity=(J)=>{const{prevPoint:Q,editor:{inputs:{currentScreenPoint:Z,pointerVelocity:q}}}=this;if(J===0)return;const Y=j.Sub(Z,Q);this.prevPoint=Z.clone();const $=Y.len(),W=$?Y.div($):new j(0,0),G=q.clone().lrp(W.mul($/J),0.5);if(Math.abs(G.x)<0.01)G.x=0;if(Math.abs(G.y)<0.01)G.y=0;if(!q.equals(G))this.editor.inputs.pointerVelocity=G}}var{defineProperty:iW0,getOwnPropertyDescriptor:nW0}=Object,EQ=(J,Q,Z,q)=>{var Y=q>1?void 0:q?nW0(Q,Z):Q;for(var $=J.length-1,W;$>=0;$--)if(W=J[$])Y=(q?W(Q,Z,Y):W(Y))||Y;if(q&&Y)iW0(Q,Z,Y);return Y};class I4{constructor(J,Q){this.user=J,this.inferDarkMode=Q}updateUserPreferences=(J)=>{this.user.setUserPreferences({...this.user.userPreferences.get(),...J})};getUserPreferences(){return{id:this.getId(),name:this.getName(),locale:this.getLocale(),color:this.getColor(),animationSpeed:this.getAnimationSpeed(),isSnapMode:this.getIsSnapMode(),isDarkMode:this.getIsDarkMode(),isWrapMode:this.getIsWrapMode()}}getIsDarkMode(){return this.user.userPreferences.get().isDarkMode??(this.inferDarkMode?Wu():!1)}getEdgeScrollSpeed(){return this.user.userPreferences.get().edgeScrollSpeed??SZ.edgeScrollSpeed}getAnimationSpeed(){return this.user.userPreferences.get().animationSpeed??SZ.animationSpeed}getId(){return this.user.userPreferences.get().id}getName(){return this.user.userPreferences.get().name??SZ.name}getLocale(){return this.user.userPreferences.get().locale??SZ.locale}getColor(){return this.user.userPreferences.get().color??SZ.color}getIsSnapMode(){return this.user.userPreferences.get().isSnapMode??SZ.isSnapMode}getIsWrapMode(){return this.user.userPreferences.get().isWrapMode??SZ.isWrapMode}}EQ([z0],I4.prototype,"getUserPreferences",1);EQ([z0],I4.prototype,"getIsDarkMode",1);EQ([z0],I4.prototype,"getEdgeScrollSpeed",1);EQ([z0],I4.prototype,"getAnimationSpeed",1);EQ([z0],I4.prototype,"getId",1);EQ([z0],I4.prototype,"getName",1);EQ([z0],I4.prototype,"getLocale",1);EQ([z0],I4.prototype,"getColor",1);EQ([z0],I4.prototype,"getIsSnapMode",1);EQ([z0],I4.prototype,"getIsWrapMode",1);var bW=function(J){return Math.abs(J.props.bend)<8},xW=function(J,Q){if(Q.type==="point")return;const Z=J.getShape(Q.boundShapeId),q=J.getShapePageTransform(Z),Y=J.getShapeGeometry(Z),$=Y instanceof g9?Y.children[0].vertices:Y.vertices;return{shape:Z,transform:q,isClosed:Y.isClosed,isExact:Q.isExact,didIntersect:!1,outline:$}},bu=function(J,Q,Z,q){if(Z.type==="point")return j.From(Z);const Y=J.getShape(Z.boundShapeId);if(!Y)return new j(0,0);else{const{point:$,size:W}=J.getShapeGeometry(Y).bounds,G=j.Add($,j.MulV(Z.isPrecise||q?Z.normalizedAnchor:{x:0.5,y:0.5},W)),z=j0.applyToPoint(J.getShapePageTransform(Y),G);return j0.applyToPoint(j0.Inverse(Q),z)}},uJ=function(J,Q){const Z=J.getShapePageTransform(Q);let q,Y;if(Q.props.start.type==="binding"&&Q.props.end.type==="binding")q=Q.props.start.boundShapeId,Y=Q.props.end.boundShapeId;const $=L3(J,q,Y),W=bu(J,Z,Q.props.start,$==="double-bound"||$==="start-contains-end"),G=bu(J,Z,Q.props.end,$==="double-bound"||$==="end-contains-start");return{start:W,end:G}},L3=function(J,Q,Z){if(!Q||!Z)return"safe";if(Q===Z)return"double-bound";const q=J.getShapePageBounds(Q),Y=J.getShapePageBounds(Z);if(q&&Y){if(q.contains(Y))return"start-contains-end";if(Y.contains(q))return"end-contains-start"}return"safe"},LX=10,yW=10,xu=10,CQ={s:2,m:3.5,l:5,xl:10};var oY=function(J,Q){const{start:Z,end:q,arrowheadStart:Y,arrowheadEnd:$}=Q.props,W=uJ(J,Q),G=W.start.clone(),z=W.end.clone(),U=j.Med(G,z);if(j.Equals(G,z))return{isStraight:!0,start:{handle:G,point:G,arrowhead:Q.props.arrowheadStart},end:{handle:z,point:z,arrowhead:Q.props.arrowheadEnd},middle:U,isValid:!1,length:0};const F=j.Sub(z,G).uni(),B=xW(J,Z),M=xW(J,q),O=J.getShapePageTransform(Q);yu(z,W.start,O,M),yu(G,W.end,O,B);let R=0,V=0,E=0,_=0,A=LX;const w=B&&M&&B.shape===M.shape,T=B&&M?L3(J,B.shape.id,M.shape.id):"safe";if(T==="safe"&&B&&M&&!w&&!B.isExact&&!M.isExact){if(M.didIntersect&&!B.didIntersect){if(B.isClosed)G.setTo(z.clone().add(F.clone().mul(LX)))}else if(!M.didIntersect){if(M.isClosed)z.setTo(G.clone().sub(F.clone().mul(LX)))}}const k=j.Sub(z,G),P=j.Len(k)?k.uni():j.From(k),y=!j.Equals(P,F);if(!w){if(T!=="start-contains-end"&&B&&Y!=="none"&&!B.isExact)E=CQ[Q.props.size]/2+("size"in B.shape.props?CQ[B.shape.props.size]/2:0),R=yW+E,A+=E;if(T!=="end-contains-start"&&M&&$!=="none"&&!M.isExact)_=CQ[Q.props.size]/2+("size"in M.shape.props?CQ[M.shape.props.size]/2:0),V=yW+_,A+=_}const p=G.clone().add(P.clone().mul(R*(y?-1:1))),s=z.clone().sub(P.clone().mul(V*(y?-1:1)));if(j.DistMin(p,s,A)){if(R!==0&&V!==0)R*=-1.5,V*=-1.5;else if(R!==0)R*=-1;else if(V!==0)V*=-1}if(G.add(P.clone().mul(R*(y?-1:1))),z.sub(P.clone().mul(V*(y?-1:1))),y){if(B&&M)z.setTo(j.Add(G,P.clone().mul(-LX)));U.setTo(j.Med(W.start,W.end))}else U.setTo(j.Med(G,z));const c=j.Dist(G,z);return{isStraight:!0,start:{handle:W.start,point:G,arrowhead:Q.props.arrowheadStart},end:{handle:W.end,point:z,arrowhead:Q.props.arrowheadEnd},middle:U,isValid:c>0,length:c}},yu=function(J,Q,Z,q){if(q===void 0)return;if(q.isExact)return;const Y=j0.applyToPoint(Z,Q),$=j0.applyToPoint(Z,J),W=j0.applyToPoint(j0.Inverse(q.transform),Y),G=j0.applyToPoint(j0.Inverse(q.transform),$),z=q.isClosed,F=(z?lY:qA)(W,G,q.outline);let B;if(F!==null)B=F.sort((R,V)=>j.Dist2(R,W)-j.Dist2(V,W))[0]??(z?void 0:G);if(B===void 0)return;const M=j0.applyToPoint(q.transform,B),O=j0.applyToPoint(j0.Inverse(Z),M);J.setTo(O),q.didIntersect=!0};var jN=function(J,Q,Z=0){const{arrowheadEnd:q,arrowheadStart:Y}=Q.props,$=Q.props.bend+Z;if(Math.abs($)>Math.abs(Q.props.bend*xu))return oY(J,Q);const W=uJ(J,Q),G=j.Med(W.start,W.end),z=j.Sub(W.end,W.start),U=j.Len(z)?z.uni():j.From(z),F=j.Add(G,U.per().mul(-$)),B=xW(J,Q.props.start),M=xW(J,Q.props.end),O=W.start.clone(),R=W.end.clone(),V=F.clone();if(j.Equals(O,R))return{isStraight:!0,start:{handle:O,point:O,arrowhead:Q.props.arrowheadStart},end:{handle:R,point:R,arrowhead:Q.props.arrowheadEnd},middle:V,isValid:!1,length:0};const E=Q.props.bend<0,_=E?$X:hB,A=vu(O,R,V),w=j.Angle(A.center,O),T=j.Angle(A.center,R),k=_(w,T);if(A.length===0||A.size===0||!uB(A.length)||!uB(A.size))return oY(J,Q);const P=O.clone(),y=R.clone(),p=V.clone(),s=J.getShapePageTransform(Q);let c=0,t=0,X0=LX;if(B&&!B.isExact){const k0=j0.applyToPoint(s,P),b0=j0.applyToPoint(s,A.center),K6=j0.applyToPoint(s,y),b6=j0.Inverse(B.transform),I8=j0.applyToPoint(b6,k0),_6=j0.applyToPoint(b6,b0),x6=j0.applyToPoint(b6,K6),{isClosed:c6}=B,$8=c6?TW:FN;let G6,i6=$8(_6,A.radius,B.outline);if(i6){const I6=_6.angle(I8),J9=_6.angle(x6),R8=_(I6,J9);i6=i6.filter((W6)=>_(I6,_6.angle(W6))<=R8);const j8=R8*0.25;i6.sort(c6?(W6,S6)=>Math.abs(_(I6,_6.angle(W6))-j8)<Math.abs(_(I6,_6.angle(S6))-j8)?-1:1:(W6,S6)=>_(I6,_6.angle(W6))<_(I6,_6.angle(S6))?-1:1),G6=i6[0]??(c6?void 0:I8)}else G6=c6?void 0:I8;if(G6){if(P.setTo(J.getPointInShapeSpace(Q,j0.applyToPoint(B.transform,G6))),B.didIntersect=!0,Y!=="none"){const I6=CQ[Q.props.size]/2+("size"in B.shape.props?CQ[B.shape.props.size]/2:0);c=yW+I6,X0+=I6}}}if(M&&!M.isExact){const k0=j0.applyToPoint(s,P),b0=j0.applyToPoint(s,y),K6=j0.applyToPoint(s,A.center),b6=j0.Inverse(M.transform),I8=j0.applyToPoint(b6,k0),_6=j0.applyToPoint(b6,K6),x6=j0.applyToPoint(b6,b0),c6=M.isClosed,$8=c6?TW:FN;let G6,i6=$8(_6,A.radius,M.outline);if(i6){const I6=_6.angle(I8),J9=_6.angle(x6),R8=_(I6,J9),j8=R8*0.75;if(i6=i6.filter((W6)=>_(I6,_6.angle(W6))<=R8),i6.sort(c6?(W6,S6)=>Math.abs(_(I6,_6.angle(W6))-j8)<Math.abs(_(I6,_6.angle(S6))-j8)?-1:1:(W6,S6)=>_(I6,_6.angle(W6))<_(I6,_6.angle(S6))?-1:1),i6[0])G6=i6[0];else G6=c6?void 0:x6}else G6=c6?void 0:x6;if(G6){if(y.setTo(J.getPointInShapeSpace(Q,j0.applyToPoint(M.transform,G6))),M.didIntersect=!0,q!=="none"){const I6=CQ[Q.props.size]/2+("size"in M.shape.props?CQ[M.shape.props.size]/2:0);t=yW+I6,X0+=I6}}}let J0=j.Angle(A.center,P),Q0=j.Angle(A.center,y),a=_(J0,Q0),_0=a*A.radius;const T0=P.clone(),r0=y.clone();if(c!==0){const k0=c/_0*(E?1:-1),b0=j.FromAngle(J0+a*k0);T0.setTo(A.center).add(b0.mul(A.radius))}if(t!==0){const k0=t/_0*(E?-1:1),b0=j.FromAngle(Q0+a*k0);r0.setTo(A.center).add(b0.mul(A.radius))}if(j.DistMin(T0,r0,X0)){if(c!==0&&t!==0)c*=-1.5,t*=-1.5;else if(c!==0)c*=-2;else if(t!==0)t*=-2}if(c!==0){const k0=c/_0*(E?1:-1),b0=j.FromAngle(J0+a*k0);P.setTo(A.center).add(b0.mul(A.radius))}if(t!==0){const k0=t/_0*(E?-1:1),b0=j.FromAngle(Q0+a*k0);y.setTo(A.center).add(b0.mul(A.radius))}if(B&&M&&!B.isExact&&!M.isExact){J0=j.Angle(A.center,P),Q0=j.Angle(A.center,y),a=_(J0,Q0),_0=a*A.radius;const k0=L3(J,B.shape.id,M.shape.id);if(k0==="double-bound"&&_0<30)P.setTo(O),y.setTo(R),p.setTo(V);else if(k0==="safe"){if(B&&!B.didIntersect)P.setTo(O);if(M&&!M.didIntersect||_(w,J0)>_(w,Q0)){const b0=Math.min(0.9,LX/_0)*(E?1:-1),K6=j.FromAngle(J0+a*b0);y.setTo(A.center).add(K6.mul(A.radius))}}}if(sW0(A.center,A.radius,P,y,p,k,E),P.equals(y))P.setTo(p.clone().addXY(1,1)),y.setTo(p.clone().subXY(1,1));O.setTo(P),R.setTo(y),V.setTo(p);const C0=vu(O,R,V);return{isStraight:!1,start:{point:O,handle:W.start,arrowhead:Q.props.arrowheadStart},end:{point:R,handle:W.end,arrowhead:Q.props.arrowheadEnd},middle:V,handleArc:A,bodyArc:C0,isValid:C0.length!==0&&isFinite(C0.center.x)&&isFinite(C0.center.y)}},vu=function(J,Q,Z){const q=-2*(J.x*(Q.y-Z.y)-J.y*(Q.x-Z.x)+Q.x*Z.y-Z.x*Q.y),Y={x:((J.x*J.x+J.y*J.y)*(Z.y-Q.y)+(Q.x*Q.x+Q.y*Q.y)*(J.y-Z.y)+(Z.x*Z.x+Z.y*Z.y)*(Q.y-J.y))/q,y:((J.x*J.x+J.y*J.y)*(Q.x-Z.x)+(Q.x*Q.x+Q.y*Q.y)*(Z.x-J.x)+(Z.x*Z.x+Z.y*Z.y)*(J.x-Q.x))/q},$=j.Dist(Y,J),W=+j.Clockwise(J,Z,Q),G=((J.y-Q.y)**2+(J.x-Q.x)**2)**0.5,z=((Q.y-Z.y)**2+(Q.x-Z.x)**2)**0.5,U=((Z.y-J.y)**2+(Z.x-J.x)**2)**0.5,F=Math.acos((z*z+U*U-G*G)/(2*z*U))*2,B=+(T6>F),M=(d6-F)*(W?1:-1),O=M*$;return{center:Y,radius:$,size:M,length:O,largeArcFlag:B,sweepFlag:W}},sW0=function(J,Q,Z,q,Y,$,W){const G=j.Angle(J,Z),z=j.Angle(J,q);let U=$X(G,z);if(!W)U=d6-U;const F=0.5*(W?1:-1),B=j.FromAngle(G+U*F);if(Y.setTo(J).add(B.mul(Q)),U>$){Y.rotWith(J,T6);const M=q.clone();q.setTo(Z),Z.setTo(M)}};var _A={wheel:"onWheel",pointer_down:"onPointerDown",pointer_move:"onPointerMove",long_press:"onLongPress",pointer_up:"onPointerUp",right_click:"onRightClick",middle_click:"onMiddleClick",key_down:"onKeyDown",key_up:"onKeyUp",key_repeat:"onKeyRepeat",cancel:"onCancel",complete:"onComplete",interrupt:"onInterrupt",double_click:"onDoubleClick",triple_click:"onTripleClick",quadruple_click:"onQuadrupleClick",tick:"onTick"};class B0{constructor(J,Q){this.editor=J;const{id:Z,children:q,initial:Y}=this.constructor;if(this.id=Z,this._isActive=U9("toolIsActive"+this.id,!1),this._current=U9("toolState"+this.id,void 0),this._path=z0("toolPath"+this.id,()=>{const $=this.getCurrent();return this.id+($?`.${$.getPath()}`:"")}),this.parent=Q??{},this.parent)if(q&&Y)this.type="branch",this.initial=Y,this.children=Object.fromEntries(q().map(($)=>[$.id,new $(this.editor,this)])),this._current.set(this.children[this.initial]);else this.type="leaf";else if(this.type="root",q&&Y)this.initial=Y,this.children=Object.fromEntries(q().map(($)=>[$.id,new $(this.editor,this)])),this._current.set(this.children[this.initial])}static id;static initial;static children;id;type;shapeType;initial;children;parent;getPath(){return this._path.get()}_path;getCurrent(){return this._current.get()}_current;getIsActive(){return this._isActive.get()}_isActive;transition=(J,Q={})=>{const Z=J.split(".");let q=this;for(let Y=0;Y<Z.length;Y++){const $=Z[Y],W=q.getCurrent(),G=q.children?.[$];if(!G)throw Error(`${q.id} - no child state exists with the id ${$}.`);if(W?.id!==G.id){if(W?.exit(Q,$),q._current.set(G),G.enter(Q,W?.id||"initial"),!G.getIsActive())break}q=G}return this};handleEvent=(J)=>{const Q=_A[J.name],Z=this._current.__unsafe__getWithoutCapture();if(this[Q]?.(J),this._isActive.__unsafe__getWithoutCapture()&&Z&&Z===this._current.__unsafe__getWithoutCapture())Z.handleEvent(J)};enter=(J,Q)=>{if(this._isActive.set(!0),this.onEnter?.(J,Q),this.children&&this.initial&&this.getIsActive()){const Z=this.children[this.initial];this._current.set(Z),Z.enter(J,Q)}};exit=(J,Q)=>{if(this._isActive.set(!1),this.onExit?.(J,Q),!this.getIsActive())this.getCurrent()?.exit(J,Q)};_currentToolIdMask=U9("curent tool id mask",void 0);getCurrentToolIdMask(){return this._currentToolIdMask.get()}setCurrentToolIdMask(J){this._currentToolIdMask.set(J)}onWheel;onPointerDown;onPointerMove;onLongPress;onPointerUp;onDoubleClick;onTripleClick;onQuadrupleClick;onRightClick;onMiddleClick;onKeyDown;onKeyUp;onKeyRepeat;onCancel;onComplete;onInterrupt;onTick;onEnter;onExit}class EA extends B0{static id="root";static initial="";static children=()=>[];onKeyDown=(J)=>{switch(J.code){case"KeyZ":{if(!(J.shiftKey||J.ctrlKey)){const Q=this.getCurrent();if(Q&&Q.getCurrent()?.id==="idle"&&this.children.zoom)this.editor.setCurrentTool("zoom",{...J,onInteractionEnd:Q.id})}break}}}}var _N=function(J,Q=J.getCurrentPageId()){const Z=J.getPage(Q).name;J.emit("max-shapes",{name:Z,pageId:Q,count:e4})},F3=function(J,Q){if(!Q)return J;let Z=null;const q=Object.entries(Q);for(let Y=0,$=q.length;Y<$;Y++){const[W,G]=q[Y];if(G===void 0)continue;if(W==="id"||W==="type"||W==="typeName")continue;if(G===J[W])continue;if(!Z)Z={...J};if(W==="props"||W==="meta"){Z[W]={...J[W]};for(let[z,U]of Object.entries(G))if(U!==void 0)Z[W][z]=U;continue}Z[W]=G}if(!Z)return J;return Z},mu=function(J,Q,Z){const q=J.getShape(Q);if(!q)return;Z.push(q);const Y=J.getSortedChildIdsForParent(Q);for(let $=0,W=Y.length;$<W;$++)mu(J,Y[$],Z)},rW0=Object.defineProperty,aW0=Object.getOwnPropertyDescriptor,t0=(J,Q,Z,q)=>{var Y=q>1?void 0:q?aW0(Q,Z):Q;for(var $=J.length-1,W;$>=0;$--)if(W=J[$])Y=(q?W(Q,Z,Y):W(Y))||Y;if(q&&Y)rW0(Q,Z,Y);return Y};class n0 extends Su.EventEmitter{constructor({store:J,user:Q,shapeUtils:Z,tools:q,getContainer:Y,initialState:$,inferDarkMode:W}){super();this.store=J,this.snaps=new aY(this),this.user=new I4(Q??K3(),W??!1),this.getContainer=Y??(()=>document.body),this.textMeasure=new RA(this),this._tickManager=new jA(this);class G extends EA{static initial=$??""}this.root=new G(this),this.root.children={};const z=ON(Z),U={},F={},B=new Map;for(let _ of z){const A=new _(this);U[_.type]=A;const w=Fz(_.props??{});F[_.type]=w;for(let T of w.keys())if(!B.has(T.id))B.set(T.id,T);else if(B.get(T.id)!==T)throw Error(`Multiple style props with id "${T.id}" in use. Style prop IDs must be unique.`)}this.shapeUtils=U,this.styleProps=F;for(let _ of[...q]){if(R4(this.root.children,_.id))throw Error(`Can't override tool with id "${_.id}"`);this.root.children[_.id]=new _(this,this.root)}this.environment=new BA(this),this.scribbles=new OA(this);const M=new Set,O=(_)=>{const A=this.getShape(_);if(!A)return;const{start:w,end:T}=A.props,k=w.type==="binding"?this.getShape(w.boundShapeId):void 0,P=T.type==="binding"?this.getShape(T.boundShapeId):void 0,y=this.getAncestorPageId(A);if(!y)return;let p;if(k&&P)p=this.findCommonAncestor([k,P])??y;else if(k||P){const a=(k||P)?.parentId;if(a&&a===A.parentId)p=A.parentId;else p=y}else return;if(p&&p!==A.parentId)this.reparentShapes([_],p);const s=this.getShape(_);if(!s)throw Error("no reparented arrow");const c=this.getShapeNearestSibling(s,k),t=this.getShapeNearestSibling(s,P);let X0;if(c&&t)X0=c.index>t.index?c:t;else if(c&&!t)X0=c;else if(t&&!c)X0=t;else return;let J0;const Q0=this.getSortedChildIdsForParent(X0.parentId).map((a)=>this.getShape(a)).filter((a)=>a.index>X0.index);if(Q0.length){const a=Q0.find((_0)=>_0.type!=="arrow");if(s.index>X0.index&&(!a||s.index<a.index))return;J0=CZ(X0.index,Q0[0].index)}else J0=g7(X0.index);if(J0!==s.index)this.updateShapes([{id:_,type:"arrow",index:J0}])},R=(_,A)=>{const{x:w,y:T}=uJ(this,_)[A];this.store.put([{..._,props:{..._.props,[A]:{type:"point",x:w,y:T}}}])},V=(_)=>{for(let A of["start","end"]){const w=_.props[A];if(w.type!=="binding")continue;const T=this.getShape(w.boundShapeId),k=this.getAncestorPageId(_)===this.getAncestorPageId(T);if(!T||!k)R(_,A)}O(_.id)},E=(_,A)=>{let w=null;const T=_.selectedShapeIds.filter((y)=>!A.has(y));if(T.length!==_.selectedShapeIds.length){if(!w)w={..._};w.selectedShapeIds=T}const k=_.erasingShapeIds.filter((y)=>!A.has(y));if(k.length!==_.erasingShapeIds.length){if(!w)w={..._};w.erasingShapeIds=k}if(_.hoveredShapeId&&A.has(_.hoveredShapeId)){if(!w)w={..._};w.hoveredShapeId=null}if(_.editingShapeId&&A.has(_.editingShapeId)){if(!w)w={..._};w.editingShapeId=null}const P=_.hintingShapeIds.filter((y)=>!A.has(y));if(P.length!==_.hintingShapeIds.length){if(!w)w={..._};w.hintingShapeIds=P}if(_.focusedGroupId&&A.has(_.focusedGroupId)){if(!w)w={..._};w.focusedGroupId=null}return w};if(this.sideEffects=new VA(this),this.sideEffects.registerBatchCompleteHandler(()=>{for(let _ of M){M.delete(_);const A=this.getShape(_);if(!A)continue;const T=this.getShapeUtil(A).onChildrenChange?.(A);if(T?.length)this.updateShapes(T,{squashing:!0})}this.emit("update")}),this.sideEffects.registerBeforeDeleteHandler("shape",(_)=>{if(_.parentId&&U5(_.parentId))M.add(_.parentId);const A=this._getArrowBindingsIndex().get()[_.id];if(A?.length)for(let{arrowId:k,handleId:P}of A){const y=this.getShape(k);if(!y)continue;R(y,P)}const w=new Set([_.id]),T=Y6(this.getPageStates().map((k)=>{return E(k,w)}));if(T.length)this.store.put(T)}),this.sideEffects.registerBeforeDeleteHandler("page",(_)=>{if(this.getInstanceState().currentPageId!==_.id)return;const A=this.getPages().find((k)=>k.id!==_.id)?.id;if(!A)return;this.store.put([{...this.getInstanceState(),currentPageId:A}]);const w=t9.createId(_.id),T=l9.createId(_.id);this.store.remove([w,T])}),this.sideEffects.registerAfterChangeHandler("shape",(_,A)=>{if(this.isShapeOfType(A,"arrow"))V(A);if(_.parentId!==A.parentId){const w=(T)=>{const k=this._getArrowBindingsIndex().get()[T];if(k?.length)for(let P of k)O(P.arrowId)};w(A.id),this.visitDescendants(A.id,w)}if(_.parentId!==A.parentId&&o5(A.parentId)){const w=new Set([_.id]);this.visitDescendants(_.id,(T)=>{w.add(T)});for(let T of this.getPageStates()){if(T.pageId===A.parentId)continue;const k=E(T,w);if(k)this.store.put([k])}}if(_.parentId&&U5(_.parentId))M.add(_.parentId);if(A.parentId!==_.parentId&&U5(A.parentId))M.add(A.parentId)}),this.sideEffects.registerAfterChangeHandler("instance_page_state",(_,A)=>{if(_?.selectedShapeIds!==A?.selectedShapeIds){const w=A.selectedShapeIds.filter((k)=>{let P=this.getShape(k)?.parentId;while(U5(P)){if(A.selectedShapeIds.includes(P))return!1;P=this.getShape(P)?.parentId}return!0});let T=null;if(w.length>0){const k=this.findCommonAncestor(Y6(w.map((P)=>this.getShape(P))),(P)=>this.isShapeOfType(P,"group"));if(k)T=k}else if(A?.focusedGroupId)T=A.focusedGroupId;if(w.length!==A.selectedShapeIds.length||T!==A.focusedGroupId)this.store.put([{...A,selectedShapeIds:w,focusedGroupId:T??null}])}}),this.sideEffects.registerAfterCreateHandler("shape",(_)=>{if(this.isShapeOfType(_,"arrow"))V(_)}),this.sideEffects.registerAfterCreateHandler("page",(_)=>{const A=t9.createId(_.id),w=l9.createId(_.id);if(!this.store.has(A))this.store.put([t9.create({id:A})]);if(!this.store.has(w))this.store.put([l9.create({id:w,pageId:_.id})])}),this._currentPageShapeIds=ju(this.store,()=>this.getCurrentPageId()),this._parentIdsToChildIds=Ru(this.store),this.disposables.add(this.store.listen((_)=>{this.emit("change",_)})),this.store.ensureStoreIsUsable(),this._setInstancePageState({editingShapeId:null,hoveredShapeId:null,erasingShapeIds:[]},{ephemeral:!0}),$&&this.root.children[$]===void 0)throw Error(`No state found for initialState "${$}".`);if(this.root.enter(void 0,"initial"),this.getInstanceState().followingUserId)this.stopFollowingUser();this.updateRenderingBounds(),this.on("tick",this._flushEventsForTick),requestAnimationFrame(()=>{this._tickManager.start()})}store;root;disposables=new Set;_tickManager;snaps;user;textMeasure;environment;scribbles;getContainer;sideEffects;dispose(){this.disposables.forEach((J)=>J()),this.disposables.clear()}shapeUtils;styleProps;getShapeUtil(J){const Q=typeof J==="string"?J:J.type,Z=G7(this.shapeUtils,Q);return r8(Z,`No shape util found for type "${Q}"`),Z}history=new MA(this,(J)=>{this.annotateError(J,{origin:"history.batch",willCrashApp:!0}),this.crash(J)});undo(){return this._flushEventsForTick(0),this.history.undo(),this}getCanUndo(){return this.history.getNumUndos()>0}redo(){return this._flushEventsForTick(0),this.history.redo(),this}getCanRedo(){return this.history.getNumRedos()>0}mark(J,Q,Z){return this.history.mark(J,Q,Z),this}bail(){return this.history.bail(),this}bailToMark(J){return this.history.bailToMark(J),this}batch(J){return this.history.batch(J),this}_getArrowBindingsIndex(){return Vu(this)}getArrowsBoundTo(J){return this._getArrowBindingsIndex().get()[J]||n5}getArrowInfoCache(){return this.store.createComputedCache("arrow infoCache",(J)=>{return bW(J)?oY(this,J):jN(this,J)})}getArrowInfo(J){const Q=typeof J==="string"?J:J.id;return this.getArrowInfoCache().get(Q)}annotateError(J,{origin:Q,willCrashApp:Z,tags:q,extras:Y}){const $=this.createErrorAnnotations(Q,Z);if(jY(J,{tags:{...$.tags,...q},extras:{...$.extras,...Y}}),Z)this.store.markAsPossiblyCorrupted();return this}createErrorAnnotations(J,Q){try{const Z=this.getEditingShapeId();return{tags:{origin:J,willCrashApp:Q},extras:{activeStateNode:this.root.getPath(),selectedShapes:this.getSelectedShapes(),editingShape:Z?this.getShape(Z):void 0,inputs:this.inputs}}}catch{return{tags:{origin:J,willCrashApp:Q},extras:{}}}}_crashingError=null;getCrashingError(){return this._crashingError}crash(J){return this._crashingError=J,this.store.markAsPossiblyCorrupted(),this.emit("crash",{error:J}),this}getPath(){return this.root.getPath().split("root.")[1]}isIn(J){const Q=J.split(".").reverse();let Z=this.root;while(Q.length>0){const q=Q.pop();if(!q)return!0;const Y=Z.getCurrent();if(Y?.id===q){if(Q.length===0)return!0;Z=Y;continue}else return!1}return!1}isInAny(...J){return J.some((Q)=>this.isIn(Q))}setCurrentTool(J,Q={}){return this.root.transition(J,Q),this}getCurrentTool(){return this.root.getCurrent()}getCurrentToolId(){const J=this.getCurrentTool();if(!J)return"";return J.getCurrentToolIdMask()??J.id}getStateDescendant(J){const Q=J.split(".").reverse();let Z=this.root;while(Q.length>0){const q=Q.pop();if(!q)return Z;const Y=Z.children?.[q];if(!Y)return;Z=Y}return Z}getDocumentSettings(){return this.store.get(WW)}updateDocumentSettings(J){return this.store.put([{...this.getDocumentSettings(),...J}]),this}getInstanceState(){return this.store.get(x5)}updateInstanceState(J,Q){if(this._updateInstanceState(J,{ephemeral:!0,squashing:!0,...Q}),J.isChangingStyle!==void 0){if(clearTimeout(this._isChangingStyleTimeout),J.isChangingStyle===!0)this._isChangingStyleTimeout=setTimeout(()=>{this.updateInstanceState({isChangingStyle:!1},{ephemeral:!0})},2000)}return this}_updateInstanceState=this.history.createCommand("updateInstanceState",(J,Q)=>{const Z=this.store.get(this.getInstanceState().id),q={...Z,...J};return{data:{prev:Z,next:q},ephemeral:!1,squashing:!1,...Q}},{do:({next:J})=>{this.store.put([J])},undo:({prev:J})=>{this.store.put([J])},squash({prev:J},{next:Q}){return{prev:J,next:Q}}});_isChangingStyleTimeout=-1;getOpenMenus(){return this.getInstanceState().openMenus}addOpenMenu(J){const Q=new Set(this.getOpenMenus());if(!Q.has(J))Q.add(J),this.updateInstanceState({openMenus:[...Q]});return this}deleteOpenMenu(J){const Q=new Set(this.getOpenMenus());if(Q.has(J))Q.delete(J),this.updateInstanceState({openMenus:[...Q]});return this}clearOpenMenus(){if(this.getOpenMenus().length)this.updateInstanceState({openMenus:[]});return this}getIsMenuOpen(){return this.getOpenMenus().length>0}setCursor=(J)=>{return this.updateInstanceState({cursor:{...this.getInstanceState().cursor,...J}},{ephemeral:!0}),this};getPageStates(){return this._getPageStatesQuery().get()}_getPageStatesQuery(){return this.store.query.records("instance_page_state")}getCurrentPageState(){return this.store.get(this._getCurrentPageStateId())}_getCurrentPageStateId(){return l9.createId(this.getCurrentPageId())}updateCurrentPageState(J,Q){return this._setInstancePageState(J,Q),this}_setInstancePageState=this.history.createCommand("setInstancePageState",(J,Q)=>{return{data:{prev:this.store.get(J.id??this.getCurrentPageState().id),partial:J},...Q}},{do:({prev:J,partial:Q})=>{this.store.update(J.id,(Z)=>({...Z,...Q}))},undo:({prev:J})=>{this.store.update(J.id,()=>J)}});getSelectedShapeIds(){return this.getCurrentPageState().selectedShapeIds}getSelectedShapes(){const{selectedShapeIds:J}=this.getCurrentPageState();return Y6(J.map((Q)=>this.store.get(Q)))}setSelectedShapes(J,Q){const Z=J.map((q)=>typeof q==="string"?q:q.id);return this._setSelectedShapes(Z,Q),this}_setSelectedShapes=this.history.createCommand("setSelectedShapes",(J,Q)=>{const{selectedShapeIds:Z}=this.getCurrentPageState(),q=new Set(Z);if(J.length===q.size&&J.every((Y)=>q.has(Y)))return null;return{data:{selectedShapeIds:J,prevSelectedShapeIds:Z},preservesRedoStack:!0,...Q}},{do:({selectedShapeIds:J})=>{this.store.put([{...this.getCurrentPageState(),selectedShapeIds:J}])},undo:({prevSelectedShapeIds:J})=>{this.store.put([{...this.getCurrentPageState(),selectedShapeIds:J}])},squash({prevSelectedShapeIds:J},{selectedShapeIds:Q}){return{selectedShapeIds:Q,prevSelectedShapeIds:J}}});select(...J){const Q=typeof J[0]==="string"?J:J.map((Z)=>Z.id);return this.setSelectedShapes(Q),this}deselect(...J){const Q=typeof J[0]==="string"?J:J.map((q)=>q.id),Z=this.getSelectedShapeIds();if(Z.length>0&&Q.length>0)this.setSelectedShapes(Z.filter((q)=>!Q.includes(q)));return this}selectAll(){const J=this.getSortedChildIdsForParent(this.getCurrentPageId());if(J.length<=0)return this;return this.setSelectedShapes(this._getUnlockedShapeIds(J)),this}selectNone(){if(this.getSelectedShapeIds().length>0)this.setSelectedShapes([]);return this}getOnlySelectedShapeId(){return this.getOnlySelectedShape()?.id??null}getOnlySelectedShape(){const J=this.getSelectedShapes();return J.length===1?J[0]:null}getSelectionPageBounds(){const J=this.getCurrentPageState().selectedShapeIds;if(J.length===0)return null;return V0.Common(Y6(J.map((Q)=>this.getShapePageBounds(Q))))}getSelectionRotation(){const J=this.getSelectedShapeIds();let Q=!1,Z=0;for(let q=0,Y=J.length;q<Y;q++){const $=this.getShapePageTransform(J[q]);if(!$)continue;if(Q){if($.rotation()!==Z)return 0}else Q=!0,Z=$.rotation()}return Z}getSelectionRotatedPageBounds(){const J=this.getSelectedShapeIds();if(J.length===0)return;const Q=this.getSelectionRotation();if(Q===0)return this.getSelectionPageBounds();if(J.length===1){const q=this.getShapeGeometry(J[0]).bounds.clone(),Y=this.getShapePageTransform(J[0]);return q.point=Y.applyToPoint(q.point),q}const Z=V0.FromPoints(this.getSelectedShapeIds().flatMap((q)=>{const Y=this.getShapePageTransform(q);if(!Y)return[];return Y.applyToPoints(this.getShapeGeometry(q).bounds.corners)}).map((q)=>q.rot(-Q)));return Z.point=Z.point.rot(Q),Z}getSelectionRotatedScreenBounds(){const J=this.getSelectionRotatedPageBounds();if(!J)return;const{x:Q,y:Z}=this.pageToScreen(J.point),q=this.getZoomLevel();return new V0(Q,Z,J.width*q,J.height*q)}getFocusedGroupId(){return this.getCurrentPageState().focusedGroupId??this.getCurrentPageId()}getFocusedGroup(){const J=this.getFocusedGroupId();return J?this.getShape(J):void 0}setFocusedGroup(J){const Q=typeof J==="string"?J:J?.id??null;if(Q!==null){const Z=this.getShape(Q);if(!Z)throw Error(`Editor.setFocusedGroup: Shape with id ${Q} does not exist`);if(!this.isShapeOfType(Z,"group"))throw Error(`Editor.setFocusedGroup: Cannot set focused group to shape of type ${Z.type}`)}if(Q===this.getFocusedGroupId())return this;return this._setFocusedGroupId(Q),this}_setFocusedGroupId=this.history.createCommand("setFocusedGroupId",(J)=>{const Q=this.getCurrentPageState().focusedGroupId;if(Q===J)return;return{data:{prev:Q,next:J},preservesRedoStack:!0,squashing:!0}},{do:({next:J})=>{this.store.update(this.getCurrentPageState().id,(Q)=>({...Q,focusedGroupId:J}))},undo:({prev:J})=>{this.store.update(this.getCurrentPageState().id,(Q)=>({...Q,focusedGroupId:J}))},squash({prev:J},{next:Q}){return{prev:J,next:Q}}});popFocusedGroupId(){const J=this.getFocusedGroup();if(J){const Q=this.findShapeAncestor(J,(Z)=>this.isShapeOfType(Z,"group"));this.setFocusedGroup(Q?.id??null),this.select(J.id)}else this.setFocusedGroup(null),this.selectNone();return this}getEditingShapeId(){return this.getCurrentPageState().editingShapeId}getEditingShape(){const J=this.getEditingShapeId();return J?this.getShape(J):void 0}setEditingShape(J){const Q=typeof J==="string"?J:J?.id??null;if(Q!==this.getEditingShapeId()){if(Q){const Z=this.getShape(Q);if(Z&&this.getShapeUtil(Z).canEdit(Z))return this._setInstancePageState({editingShapeId:Q}),this}this._setInstancePageState({editingShapeId:null})}return this}getHoveredShapeId(){return this.getCurrentPageState().hoveredShapeId}getHoveredShape(){const J=this.getHoveredShapeId();return J?this.getShape(J):void 0}setHoveredShape(J){const Q=typeof J==="string"?J:J?.id??null;if(Q===this.getHoveredShapeId())return this;return this.updateCurrentPageState({hoveredShapeId:Q},{ephemeral:!0}),this}getHintingShapeIds(){return this.getCurrentPageState().hintingShapeIds}getHintingShape(){const J=this.getHintingShapeIds();return Y6(J.map((Q)=>this.getShape(Q)))}setHintingShapes(J){const Q=typeof J[0]==="string"?J:J.map((Z)=>Z.id);return this.updateCurrentPageState({hintingShapeIds:iq(Q)},{ephemeral:!0}),this}getErasingShapeIds(){return this.getCurrentPageState().erasingShapeIds}getErasingShapes(){const J=this.getErasingShapeIds();return Y6(J.map((Q)=>this.getShape(Q)))}setErasingShapes(J){const Q=typeof J[0]==="string"?J:J.map((q)=>q.id);Q.sort();const Z=this.getErasingShapeIds();if(Q.length===Z.length){for(let q=0;q<Q.length;q++)if(Q[q]!==Z[q]){this._setInstancePageState({erasingShapeIds:Q},{ephemeral:!0});break}}else this._setInstancePageState({erasingShapeIds:Q},{ephemeral:!0});return this}getCroppingShapeId(){return this.getCurrentPageState().croppingShapeId}setCroppingShape(J){const Q=typeof J==="string"?J:J?.id??null;if(Q!==this.getCroppingShapeId())if(!Q)this.updateCurrentPageState({croppingShapeId:null});else{const Z=this.getShape(Q),q=this.getShapeUtil(Z);if(Z&&q.canCrop(Z))this.updateCurrentPageState({croppingShapeId:Q})}return this}getCameraId(){return t9.createId(this.getCurrentPageId())}getCamera(){return this.store.get(this.getCameraId())}getZoomLevel(){return this.getCamera().z}_setCamera(J,Q=!1){const Z=this.getCamera();if(Z.x===J.x&&Z.y===J.y&&Z.z===J.z)return this;return this.batch(()=>{const q={...Z,...J};this.store.put([q]);const{currentScreenPoint:Y,currentPagePoint:$}=this.inputs,{screenBounds:W}=this.store.unsafeGetWithoutCapture(x5);if(Y.x/q.z-q.x!==$.x||Y.y/q.z-q.y!==$.y){const G={type:"pointer",target:"canvas",name:"pointer_move",point:j.AddXY(Y,W.x,W.y),pointerId:HC.CAMERA_MOVE,ctrlKey:this.inputs.ctrlKey,altKey:this.inputs.altKey,shiftKey:this.inputs.shiftKey,button:0,isPen:this.getInstanceState().isPenMode??!1};if(Q)this._flushEventForTick(G);else this.dispatch(G)}this._tickCameraState()}),this}setCamera(J,Q){const Z=Number.isFinite(J.x)?J.x:0,q=Number.isFinite(J.y)?J.y:0,Y=Number.isFinite(J.z)?J.z:this.getZoomLevel();if(this.stopCameraAnimation(),this.getInstanceState().followingUserId)this.stopFollowingUser();if(Q){const{width:$,height:W}=this.getViewportScreenBounds();return this._animateToViewport(new V0(-Z,-q,$/Y,W/Y),Q)}else this._setCamera({x:Z,y:q,z:Y});return this}centerOnPoint(J,Q){if(!this.getInstanceState().canMoveCamera)return this;const{width:Z,height:q}=this.getViewportPageBounds();return this.setCamera({x:-(J.x-Z/2),y:-(J.y-q/2),z:this.getCamera().z},Q),this}zoomToContent(J={duration:220}){const Q=this.getSelectionPageBounds()??this.getCurrentPageBounds();if(Q)this.zoomToBounds(Q,{targetZoom:Math.min(1,this.getZoomLevel()),...J});return this}zoomToFit(J){if(!this.getInstanceState().canMoveCamera)return this;const Q=[...this.getCurrentPageShapeIds()];if(Q.length<=0)return this;const Z=V0.Common(Y6(Q.map((q)=>this.getShapePageBounds(q))));return this.zoomToBounds(Z,J),this}resetZoom(J=this.getViewportScreenCenter(),Q){if(!this.getInstanceState().canMoveCamera)return this;const{x:Z,y:q,z:Y}=this.getCamera(),{x:$,y:W}=J;return this.setCamera({x:Z+($/1-$)-($/Y-$),y:q+(W/1-W)-(W/Y-W),z:1},Q),this}zoomIn(J=this.getViewportScreenCenter(),Q){if(!this.getInstanceState().canMoveCamera)return this;const{x:Z,y:q,z:Y}=this.getCamera();let $=T1;for(let z=1;z<HX.length;z++){const U=HX[z-1],F=HX[z];if(F-Y<=(F-U)/2)continue;$=F;break}const{x:W,y:G}=J;return this.setCamera({x:Z+(W/$-W)-(W/Y-W),y:q+(G/$-G)-(G/Y-G),z:$},Q),this}zoomOut(J=this.getViewportScreenCenter(),Q){if(!this.getInstanceState().canMoveCamera)return this;const{x:Z,y:q,z:Y}=this.getCamera();let $=vY;for(let z=HX.length-1;z>0;z--){const U=HX[z-1],F=HX[z];if(F-Y>=(F-U)/2)continue;$=U;break}const{x:W,y:G}=J;return this.setCamera({x:Z+(W/$-W)-(W/Y-W),y:q+(G/$-G)-(G/Y-G),z:$},Q),this}zoomToSelection(J){if(!this.getInstanceState().canMoveCamera)return this;const Q=this.getSelectionPageBounds();if(!Q)return this;return this.zoomToBounds(Q,{targetZoom:Math.max(1,this.getZoomLevel()),...J}),this}panZoomIntoView(J,Q){if(!this.getInstanceState().canMoveCamera)return this;if(J.length<=0)return this;const Z=V0.Common(Y6(J.map((Y)=>this.getShapePageBounds(Y)))),q=this.getViewportPageBounds();if(q.h<Z.h||q.w<Z.w)return this.zoomToBounds(Z,{targetZoom:this.getCamera().z,...Q}),this;else{const Y=this.getViewportPageBounds().clone().expandBy(-32/this.getZoomLevel());let $=0,W=0;if(Y.maxY<Z.maxY)W=Y.maxY-Z.maxY;else if(Y.minY>Z.minY)W=Y.minY-Z.minY;if(Y.maxX<Z.maxX)$=Y.maxX-Z.maxX;else if(Y.minX>Z.minX)$=Y.minX-Z.minX;const G=this.getCamera();this.setCamera({x:G.x+$,y:G.y+W,z:G.z},Q)}return this}zoomToBounds(J,Q){if(!this.getInstanceState().canMoveCamera)return this;const Z=this.getViewportScreenBounds(),q=Q?.inset??Math.min(256,Z.width*0.28);let Y=u7(Math.min((Z.width-q)/J.width,(Z.height-q)/J.height),vY,T1);if(Q?.targetZoom!==void 0)Y=Math.min(Q.targetZoom,Y);return this.setCamera({x:-J.minX+(Z.width-J.width*Y)/2/Y,y:-J.minY+(Z.height-J.height*Y)/2/Y,z:Y},Q),this}pan(J,Q){if(!this.getInstanceState().canMoveCamera)return this;const{x:Z,y:q,z:Y}=this.getCamera();return this.setCamera({x:Z+J.x/Y,y:q+J.y/Y,z:Y},Q),this._flushEventsForTick(0),this}stopCameraAnimation(){return this.emit("stop-camera-animation"),this}_viewportAnimation=null;_animateViewport(J){if(!this._viewportAnimation)return;const Q=()=>{this.removeListener("tick",this._animateViewport),this.removeListener("stop-camera-animation",Q),this._viewportAnimation=null};this.once("stop-camera-animation",Q),this._viewportAnimation.elapsed+=J;const{elapsed:Z,easing:q,duration:Y,start:$,end:W}=this._viewportAnimation;if(Z>Y){this._setCamera({x:-W.x,y:-W.y,z:this.getViewportScreenBounds().width/W.width}),Q();return}const G=Y-Z,z=q(1-G/Y),U=$.minX+(W.minX-$.minX)*z,F=$.minY+(W.minY-$.minY)*z,B=$.maxX+(W.maxX-$.maxX)*z;this._setCamera({x:-U,y:-F,z:this.getViewportScreenBounds().width/(B-U)})}_animateToViewport(J,Q={}){const{duration:Z=0,easing:q=_9.easeInOutCubic}=Q,Y=this.user.getAnimationSpeed(),$=this.getViewportPageBounds();if(this.stopCameraAnimation(),this.getInstanceState().followingUserId)this.stopFollowingUser();if(Z===0||Y===0)return this._setCamera({x:-J.x,y:-J.y,z:this.getViewportScreenBounds().width/J.width});return this._viewportAnimation={elapsed:0,duration:Z/Y,easing:q,start:$.clone(),end:J.clone()},this.addListener("tick",this._animateViewport),this}slideCamera(J={}){if(!this.getInstanceState().canMoveCamera)return this;if(this.stopCameraAnimation(),this.user.getAnimationSpeed()===0)return this;const{speed:Z,friction:q,direction:Y,speedThreshold:$=0.01}=J;let W=Math.min(Z,1);const G=()=>{this.removeListener("tick",z),this.removeListener("stop-camera-animation",G)};this.once("stop-camera-animation",G);const z=(U)=>{const{x:F,y:B,z:M}=this.getCamera(),O=j.Mul(Y,W*U/M);if(W*=1-q,W<$)G();else this._setCamera({x:F+O.x,y:B+O.y,z:M})};return this.addListener("tick",z),this}animateToUser(J){const Q=this.getCollaborators().find((Z)=>Z.userId===J);if(!Q)return this;return this.batch(()=>{if(this.getInstanceState().followingUserId!==null)this.stopFollowingUser();const Z=Q.currentPageId===this.getCurrentPageId();if(!Z)this.setCurrentPage(Q.currentPageId);const q=Z?{duration:500}:void 0;this.centerOnPoint(Q.cursor,q);const{highlightedUserIds:Y}=this.getInstanceState();this.updateInstanceState({highlightedUserIds:[...Y,J]}),setTimeout(()=>{const $=[...this.getInstanceState().highlightedUserIds],W=$.indexOf(J);if(W<0)return;$.splice(W,1),this.updateInstanceState({highlightedUserIds:$})},pB)}),this}animateToShape(J,Q=GC){if(!this.getInstanceState().canMoveCamera)return this;const Z=this.getViewportScreenBounds().clone().expandBy(-32),q=Z.width/Z.height,Y=this.getShapePageBounds(J);if(!Y)return this;const $=Y.width/Y.height,W=Y.clone(),G=Y.width/Z.width;if(W.width+=(Z.minX+Z.maxX)*G,W.height+=(Z.minY+Z.maxY)*G,W.x-=Z.minX*G,W.y-=Z.minY*G,$>q)W.height=Y.width/q,W.y-=(W.height-Y.height)/2;else W.width=Y.height*q,W.x-=(W.width-Y.width)/2;return this._animateToViewport(W,Q)}_willSetInitialBounds=!0;_wasInset=!1;updateViewportScreenBounds(J,Q=!1){J.width=Math.max(J.width,1),J.height=Math.max(J.height,1);const Z=[J.minY!==0,document.body.scrollWidth!==J.maxX,document.body.scrollHeight!==J.maxY,J.minX!==0],q=J.equals(this.getViewportScreenBounds()),{_willSetInitialBounds:Y}=this;if(q)this._willSetInitialBounds=!1;else if(Y)this._willSetInitialBounds=!1,this.updateInstanceState({screenBounds:J.toJson(),insets:Z},{squashing:!0,ephemeral:!0});else if(Q&&!this.getInstanceState().followingUserId){const $=this.getViewportPageCenter();this.updateInstanceState({screenBounds:J.toJson(),insets:Z},{squashing:!0,ephemeral:!0}),this.centerOnPoint($)}else this.updateInstanceState({screenBounds:J.toJson(),insets:Z},{squashing:!0,ephemeral:!0});return this._tickCameraState(),this.updateRenderingBounds(),this}getViewportScreenBounds(){const{x:J,y:Q,w:Z,h:q}=this.getInstanceState().screenBounds;return new V0(J,Q,Z,q)}getViewportScreenCenter(){const J=this.getViewportScreenBounds();return new j(J.midX-J.minX,J.midY-J.minY)}getViewportPageBounds(){const{w:J,h:Q}=this.getViewportScreenBounds(),{x:Z,y:q,z:Y}=this.getCamera();return new V0(-Z,-q,J/Y,Q/Y)}getViewportPageCenter(){return this.getViewportPageBounds().center}screenToPage(J){const{screenBounds:Q}=this.store.unsafeGetWithoutCapture(x5),{x:Z,y:q,z:Y=1}=this.getCamera();return{x:(J.x-Q.x)/Y-Z,y:(J.y-Q.y)/Y-q,z:J.z??0.5}}pageToScreen(J){const Q=this.getViewportScreenBounds(),{x:Z,y:q,z:Y=1}=this.getCamera();return{x:(J.x+Z)*Y+Q.x,y:(J.y+q)*Y+Q.y,z:J.z??0.5}}pageToViewport(J){const{x:Q,y:Z,z:q=1}=this.getCamera();return{x:(J.x+Q)*q,y:(J.y+Z)*q,z:J.z??0.5}}_getCollaboratorsQuery(){return this.store.query.records("instance_presence",()=>({userId:{neq:this.user.getId()}}))}getCollaborators(){const J=this._getCollaboratorsQuery().get();if(!J.length)return n5;return[...new Set(J.map((Z)=>Z.userId))].sort().map((Z)=>{return J.filter((Y)=>Y.userId===Z).sort((Y,$)=>$.lastActivityTimestamp-Y.lastActivityTimestamp)[0]})}getCollaboratorsOnCurrentPage(){const J=this.getCurrentPageId();return this.getCollaborators().filter((Q)=>Q.currentPageId===J)}startFollowingUser(J){const Q=this._getCollaboratorsQuery().get().filter((W)=>W.userId===J),Z=this.user.getId();if(!Z)console.warn("You should set the userId for the current instance before following a user");if(Q.some((W)=>W.followingUserId===Z))return this;I5(()=>{this.stopFollowingUser(),this.updateInstanceState({followingUserId:J},{ephemeral:!0})});const q=()=>{this.removeListener("frame",$),this.removeListener("stop-following",q)};let Y=!1;const $=()=>{const W=[...Q].sort((t,X0)=>{return t.lastActivityTimestamp-X0.lastActivityTimestamp}).pop();if(!W){this.stopFollowingUser();return}const G=W.currentPageId===this.getCurrentPageId(),z=G?Mm:1;if(!G){this.stopFollowingUser(),this.setCurrentPage(W.currentPageId),this.startFollowingUser(J);return}const{center:U,width:F,height:B}=this.getViewportPageBounds(),M=V0.From(W.screenBounds),O=M.width/W.camera.z,R=M.height/W.camera.z,V=new j(O/2-W.camera.x,R/2-W.camera.y),E=W.followingUserId===Z,_=F+(O-F)*z,A=B+(R-B)*z,w=!E?Math.min(F/_,B/A):B/A,T=u7(this.getCamera().z*w,vY,T1),k=this.getViewportScreenBounds().w/T,P=this.getViewportScreenBounds().h/T,y=V.sub(U),p=j.Add(U,j.Mul(y,z)),s=j.Sub(p,U).len(),c=Math.abs(T-this.getCamera().z);if(s<Om&&c<Dm){Y=!0;return}if(Y&&s<Vm&&c<Rm)return;Y=!1,this.stopCameraAnimation(),this._setCamera({x:-(p.x-k/2),y:-(p.y-P/2),z:T})};return this.once("stop-following",q),this.addListener("frame",$),this}stopFollowingUser(){return this.updateInstanceState({followingUserId:null},{ephemeral:!0}),this.emit("stop-following"),this}_cameraState=U9("camera state","idle");getCameraState(){return this._cameraState.get()}_cameraStateTimeoutRemaining=0;_lastUpdateRenderingBoundsTimestamp=Date.now();_decayCameraStateTimeout=(J)=>{if(this._cameraStateTimeoutRemaining-=J,this._cameraStateTimeoutRemaining<=0)this.off("tick",this._decayCameraStateTimeout),this._cameraState.set("idle"),this.updateRenderingBounds()};_tickCameraState=()=>{this._cameraStateTimeoutRemaining=Em;const J=Date.now();if(this._cameraState.__unsafe__getWithoutCapture()==="idle")this._lastUpdateRenderingBoundsTimestamp=J,this._cameraState.set("moving"),this.on("tick",this._decayCameraStateTimeout)};getUnorderedRenderingShapes(J){const Q=[];let Z=e4*2,q=e4;const Y=this.getErasingShapeIds(),$=(G,z,U)=>{const F=this.getShape(G);if(!F)return;z*=F.opacity;let B=!1;const M=this.getShapeUtil(F);if(J){if(B=!U&&Y.includes(G),B)z*=0.32}Q.push({id:G,shape:F,util:M,index:Z,backgroundIndex:q,opacity:z}),Z+=1,q+=1;const O=this.getSortedChildIdsForParent(G);if(!O.length)return;let R=null;if(M.providesBackgroundForChildren(F))R=q,q=Z,Z+=e4;for(let V of O)$(V,z,U||B);if(R!==null)q=R},W=J?[this.getCurrentPage()]:this.getPages();for(let G of W)for(let z of this.getSortedChildIdsForParent(G.id))$(z,1,!1);return Q}getRenderingShapes(){return this.getUnorderedRenderingShapes(!0).sort(BE)}getRenderingBounds(){return this._renderingBounds.get()}_renderingBounds=U9("rendering viewport",new V0);updateRenderingBounds(){const J=this.getViewportPageBounds();if(J.equals(this._renderingBounds.__unsafe__getWithoutCapture()))return this;return this._renderingBounds.set(J.clone()),this}renderingBoundsMargin=100;_getAllPagesQuery(){return this.store.query.records("page")}getPages(){return this._getAllPagesQuery().get().sort(P9)}getCurrentPage(){return this.getPage(this.getCurrentPageId())}getCurrentPageId(){return this.getInstanceState().currentPageId}getPage(J){return this.store.get(typeof J==="string"?J:J.id)}_currentPageShapeIds;getCurrentPageShapeIds(){return this._currentPageShapeIds.get()}getCurrentPageShapeIdsSorted(){return Array.from(this.getCurrentPageShapeIds()).sort()}getPageShapeIds(J){const Q=typeof J==="string"?J:J.id,Z=this.store.query.exec("shape",{parentId:{eq:Q}});return this.getShapeAndDescendantIds(Z.map((q)=>q.id))}setCurrentPage(J,Q){const Z=typeof J==="string"?J:J.id;return this._setCurrentPageId(Z,Q),this}_setCurrentPageId=this.history.createCommand("setCurrentPage",(J,Q)=>{if(!this.store.has(J)){console.error("Tried to set the current page id to a page that doesn't exist.");return}return this.stopFollowingUser(),{data:{toId:J,fromId:this.getCurrentPageId()},squashing:!0,preservesRedoStack:!0,...Q}},{do:({toId:J})=>{if(!this.store.has(J))return;if(!this.getPageStates().find((Q)=>Q.pageId===J)){const Q=t9.create({id:t9.createId(J)});this.store.put([Q,l9.create({id:l9.createId(J),pageId:J})])}this.store.put([{...this.getInstanceState(),currentPageId:J}]),this.updateRenderingBounds()},undo:({fromId:J})=>{if(!this.store.has(J))return;this.store.put([{...this.getInstanceState(),currentPageId:J}]),this.updateRenderingBounds()},squash:({fromId:J},{toId:Q})=>{return{toId:Q,fromId:J}}});updatePage(J,Q){return this._updatePage(J,Q),this}_updatePage=this.history.createCommand("updatePage",(J,Q)=>{if(this.getInstanceState().isReadonly)return null;const Z=this.getPage(J.id);if(!Z)return null;return{data:{prev:Z,partial:J},...Q}},{do:({partial:J})=>{this.store.update(J.id,(Q)=>({...Q,...J}))},undo:({prev:J,partial:Q})=>{this.store.update(Q.id,()=>J)},squash(J,Q){return{prev:{...J.prev,...Q.prev},partial:Q.partial}}});createPage(J){return this._createPage(J),this}_createPage=this.history.createCommand("createPage",(J)=>{if(this.getInstanceState().isReadonly)return null;if(this.getPages().length>=GX)return null;const Q=this.getPages(),Z=zA(J.name??"Page 1",Q.map((G)=>G.name));let q=J.index;if(!q||Q.some((G)=>G.index===q))q=g7(Q[Q.length-1].index);const Y=a5.create({meta:{},...J,name:Z,index:q}),$=t9.create({id:t9.createId(Y.id)}),W=l9.create({id:l9.createId(Y.id),pageId:Y.id});return{data:{newPage:Y,newTabPageState:W,newCamera:$}}},{do:({newPage:J,newTabPageState:Q,newCamera:Z})=>{this.store.put([J,Z,Q])},undo:({newPage:J,newTabPageState:Q,newCamera:Z})=>{if(this.getPages().length===1)return;this.store.remove([Q.id,J.id,Z.id])}});deletePage(J){const Q=typeof J==="string"?J:J.id;return this._deletePage(Q),this}_deletePage=this.history.createCommand("delete_page",(J)=>{if(this.getInstanceState().isReadonly)return null;const Q=this.getPages();if(Q.length===1)return null;const Z=this.getPage(J),q=this.getPageStates().filter((Y)=>Y.pageId===J);if(!Z)return null;if(J===this.getCurrentPageId()){const Y=Q.findIndex((W)=>W.id===J),$=Q[Y-1]??Q[Y+1];this.setCurrentPage($.id)}return{data:{id:J,deletedPage:Z,deletedPageStates:q}}},{do:({deletedPage:J,deletedPageStates:Q})=>{const Z=this.getPages();if(Z.length===1)return;if(J.id===this.getCurrentPageId()){const q=Z.findIndex(($)=>$.id===J.id),Y=Z[q-1]??Z[q+1];this.setCurrentPage(Y.id)}this.store.remove(Q.map((q)=>q.id)),this.store.remove([J.id]),this.updateRenderingBounds()},undo:({deletedPage:J,deletedPageStates:Q})=>{this.store.put([J]),this.store.put(Q),this.updateRenderingBounds()}});duplicatePage(J,Q=a5.createId()){if(this.getPages().length>=GX)return this;const Z=typeof J==="string"?J:J.id,q=this.getPage(Z);if(!q)return this;const Y={...this.getCamera()},$=this.getContentFromCurrentPage(this.getSortedChildIdsForParent(q.id));return this.batch(()=>{const W=this.getPages(),G=CZ(q.index,W[W.indexOf(q)+1]?.index);if(this.createPage({name:q.name+" Copy",id:Q,index:G}),this.setCurrentPage(Q),this.setCamera(Y),$)return this.putContentOntoCurrentPage($)}),this}renamePage(J,Q,Z){const q=typeof J==="string"?J:J.id;if(this.getInstanceState().isReadonly)return this;return this.updatePage({id:q,name:Q},Z),this}_getAllAssetsQuery(){return this.store.query.records("asset")}getAssets(){return this._getAllAssetsQuery().get()}createAssets(J){return this._createAssets(J),this}_createAssets=this.history.createCommand("createAssets",(J)=>{if(this.getInstanceState().isReadonly)return null;if(J.length<=0)return null;return{data:{assets:J}}},{do:({assets:J})=>{this.store.put(J)},undo:({assets:J})=>{this.store.remove(J.map((Q)=>Q.id))}});updateAssets(J){return this._updateAssets(J),this}_updateAssets=this.history.createCommand("updateAssets",(J)=>{if(this.getInstanceState().isReadonly)return;if(J.length<=0)return;return{data:{snapshots:{},assets:J}}},{do:({assets:J,snapshots:Q})=>{this.store.put(J.map((Z)=>{const q=this.store.get(Z.id);return Q[Z.id]=q,{...q,...Z}}))},undo:({snapshots:J})=>{this.store.put(Object.values(J))}});deleteAssets(J){const Q=typeof J[0]==="string"?J:J.map((Z)=>Z.id);return this._deleteAssets(Q),this}_deleteAssets=this.history.createCommand("deleteAssets",(J)=>{if(this.getInstanceState().isReadonly)return;if(J.length<=0)return;const Q=Y6(J.map((Z)=>this.store.get(Z)));return{data:{ids:J,prev:Q}}},{do:({ids:J})=>{this.store.remove(J)},undo:({prev:J})=>{this.store.put(J)}});getAsset(J){return this.store.get(typeof J==="string"?J:J.id)}_getShapeGeometryCache(){return this.store.createComputedCache("bounds",(J)=>this.getShapeUtil(J).getGeometry(J),(J,Q)=>J.props===Q.props)}getShapeGeometry(J){return this._getShapeGeometryCache().get(typeof J==="string"?J:J.id)}_getShapeHandlesCache(){return this.store.createComputedCache("handles",(J)=>{return this.getShapeUtil(J).getHandles?.(J)})}getShapeHandles(J){return this._getShapeHandlesCache().get(typeof J==="string"?J:J.id)}getShapeLocalTransform(J){const Q=typeof J==="string"?J:J.id,Z=this.getShape(Q);if(!Z)throw Error("Editor.getTransform: shape not found");return j0.Identity().translate(Z.x,Z.y).rotate(Z.rotation)}_getShapePageTransformCache(){return this.store.createComputedCache("pageTransformCache",(J)=>{if(o5(J.parentId))return this.getShapeLocalTransform(J);const Q=this._getShapePageTransformCache().get(J.parentId)??j0.Identity();return j0.Compose(Q,this.getShapeLocalTransform(J))})}getShapeParentTransform(J){const Q=typeof J==="string"?J:J.id,Z=this.getShape(Q);if(!Z||o5(Z.parentId))return j0.Identity();return this._getShapePageTransformCache().get(Z.parentId)??j0.Identity()}getShapePageTransform(J){const Q=typeof J==="string"?J:J.id;return this._getShapePageTransformCache().get(Q)??j0.Identity()}_getShapePageBoundsCache(){return this.store.createComputedCache("pageBoundsCache",(J)=>{const Q=this._getShapePageTransformCache().get(J.id);if(!Q)return new V0;return V0.FromPoints(j0.applyToPoints(Q,this.getShapeGeometry(J).vertices))})}getShapePageBounds(J){return this._getShapePageBoundsCache().get(typeof J==="string"?J:J.id)}_getShapeClipPathCache(){return this.store.createComputedCache("clipPathCache",(J)=>{const Q=this._getShapeMaskCache().get(J.id);if(!Q)return;if(Q.length===0)return"polygon(0px 0px, 0px 0px, 0px 0px)";const Z=this._getShapePageTransformCache().get(J.id);if(!Z)return;return`polygon(${j0.applyToPoints(j0.Inverse(Z),Q).map((Y)=>`${Y.x}px ${Y.y}px`).join(",")})`})}getShapeClipPath(J){return this._getShapeClipPathCache().get(typeof J==="string"?J:J.id)}_getShapeMaskCache(){return this.store.createComputedCache("pageMaskCache",(J)=>{if(o5(J.parentId))return;const Q=this.getShapeAncestors(J.id).filter((q)=>this.isShapeOfType(q,"frame"));if(Q.length===0)return;return Q.map((q)=>this._getShapePageTransformCache().get(q.id).applyToPoints(this.getShapeGeometry(q).vertices)).reduce((q,Y)=>{if(!(Y&&q))return;const $=BN(q,Y);if($)return $.map(j.Cast);return[]})})}getShapeMask(J){return this._getShapeMaskCache().get(typeof J==="string"?J:J.id)}getShapeMaskedPageBounds(J){if(typeof J!=="string")J=J.id;return this._getShapeMaskedPageBoundsCache().get(J)}_getShapeMaskedPageBoundsCache(){return this.store.createComputedCache("shapeMaskedPageBoundsCache",(J)=>{const Q=this._getShapePageBoundsCache().get(J.id);if(!Q)return;const Z=this._getShapeMaskCache().get(J.id);if(Z){if(Z.length===0)return;const{corners:q}=Q;if(q.every(($,W)=>$&&j.Equals($,Z[W])))return Q.clone();const Y=BN(Z,q);if(!Y)return;return V0.FromPoints(Y)}return Q})}getShapeAncestors(J,Q=[]){const Z=typeof J==="string"?J:J.id,q=this.getShape(Z);if(!q)return Q;const Y=q.parentId;if(o5(Y))return Q.reverse(),Q;const $=this.store.get(Y);if(!$)return Q;return Q.push($),this.getShapeAncestors($,Q)}findShapeAncestor(J,Q){const Z=typeof J==="string"?J:J.id,q=this.getShape(Z);if(!q)return;const Y=q.parentId;if(o5(Y))return;const $=this.getShape(Y);if(!$)return;return Q($)?$:this.findShapeAncestor($,Q)}hasAncestor(J,Q){const Z=typeof J==="string"?J:J?.id,q=Z&&this.getShape(Z);if(!q)return!1;if(q.parentId===Q)return!0;return this.hasAncestor(this.getShapeParent(q),Q)}findCommonAncestor(J,Q){if(J.length===0)return;const Z=typeof J[0]==="string"?J:J.map((G)=>G.id),q=Y6(Z.map((G)=>this.getShape(G)));if(q.length===1){const G=q[0].parentId;if(o5(G))return;return Q?this.findShapeAncestor(q[0],Q)?.id:G}const[Y,...$]=q;let W=this.getShapeParent(Y);while(W){if(Q&&!Q(W)){W=this.getShapeParent(W);continue}if($.every((G)=>this.hasAncestor(G,W.id)))return W.id;W=this.getShapeParent(W)}return}isShapeOrAncestorLocked(J){const Q=typeof J==="string"?this.getShape(J):J;if(Q===void 0)return!1;if(Q.isLocked)return!0;return this.isShapeOrAncestorLocked(this.getShapeParent(Q))}_notVisibleShapes(){return Du(this)}getCulledShapes(){const J=this._notVisibleShapes().get(),Q=this.getSelectedShapeIds(),Z=this.getEditingShapeId(),q=new Set(J);if(Z)q.delete(Z);return Q.forEach((Y)=>{q.delete(Y)}),q}getCurrentPageBounds(){let J;return this.getCurrentPageShapeIdsSorted().forEach((Q)=>{const Z=this.getShapeMaskedPageBounds(Q);if(!Z)return;if(!J)J=Z.clone();else J=J.expand(Z)}),J}getSelectedShapeAtPoint(J){const Q=this.getSelectedShapeIds();return this.getCurrentPageShapesSorted().filter((Z)=>Z.type!=="group"&&Q.includes(Z.id)).reverse().find((Z)=>this.isPointInShape(Z,J,{hitInside:!0,margin:0}))}getShapeAtPoint(J,Q={}){const Z=this.getZoomLevel(),q=this.getViewportPageBounds(),{filter:Y,margin:$=0,hitLabels:W=!1,hitInside:G=!1,hitFrameInside:z=!1}=Q;let U=Infinity,F=null,B=Infinity,M=null;const O=(Q.renderingOnly?this.getCurrentPageRenderingShapesSorted():this.getCurrentPageShapesSorted()).filter((R)=>{if(this.isShapeOfType(R,"group"))return!1;const V=this.getShapeMask(R);if(V&&!i9(J,V))return!1;if(Y)return Y(R);return!0});for(let R=O.length-1;R>=0;R--){const V=O[R],E=this.getShapeGeometry(V),_=E instanceof g9,A=this.getPointInShapeSpace(V,J);if(this.isShapeOfType(V,"arrow")||this.isShapeOfType(V,"geo")&&V.props.fill==="none"){if(V.props.text.trim()){for(let T of E.children)if(T.isLabel&&T.isPointInBounds(A))return V}}if(this.isShapeOfType(V,"frame")){const T=E.distanceToPoint(A,G);if(Math.abs(T)<=$)return M||V;if(E.hitTestPoint(A,0,!0))return M||F||(z?V:void 0);continue}let w;if(_){let T=Infinity;for(let k of E.children){if(k.isLabel&&!W)continue;const P=k.distanceToPoint(A,G);if(P<T)T=P}w=T}else if($===0&&(E.bounds.w<1||E.bounds.h<1))w=E.distanceToPoint(A,G);else if(E.bounds.containsPoint(A,$))w=E.distanceToPoint(A,G);else w=Infinity;if(E.isClosed){if(w<=$)if(E.isFilled||_&&E.children[0].isFilled)return M||V;else{if(this.getShapePageBounds(V).contains(q))continue;if(Math.abs(w)<$){if(Math.abs(w)<B)B=Math.abs(w),M=V}else if(!M){const{area:T}=E;if(T<U)U=T,F=V}}}else if(w<e5/Z)return V}return M||F||void 0}getShapesAtPoint(J,Q={}){return this.getCurrentPageShapes().filter((Z)=>this.isPointInShape(Z,J,Q))}isPointInShape(J,Q,Z={}){const{hitInside:q=!1,margin:Y=0}=Z,$=typeof J==="string"?J:J.id,W=this.getShapeMask($);if(W&&!i9(Q,W))return!1;return this.getShapeGeometry($).hitTestPoint(this.getPointInShapeSpace(J,Q),Y,q)}getPointInShapeSpace(J,Q){const Z=typeof J==="string"?J:J.id;return this._getShapePageTransformCache().get(Z).clone().invert().applyToPoint(Q)}getPointInParentSpace(J,Q){const Z=typeof J==="string"?J:J.id,q=this.getShape(Z);if(!q)return new j(0,0);if(o5(q.parentId))return j.From(Q);const Y=this.getShapePageTransform(q.parentId);if(!Y)return j.From(Q);return Y.clone().invert().applyToPoint(Q)}getCurrentPageShapes(){return Array.from(this.getCurrentPageShapeIds(),(J)=>this.store.get(J))}getCurrentPageShapesSorted(){const J=[],Q=this.getSortedChildIdsForParent(this.getCurrentPageId());for(let Z=0,q=Q.length;Z<q;Z++)mu(this,Q[Z],J);return J}getCurrentPageRenderingShapesSorted(){const J=this.getCulledShapes();return this.getCurrentPageShapesSorted().filter(({id:Q})=>!J.has(Q))}isShapeOfType(J,Q){const Z=typeof J==="string"?this.getShape(J):J;if(!Z)return!1;return Z.type===Q}getShape(J){const Q=typeof J==="string"?J:J.id;if(!U5(Q))return;return this.store.get(Q)}getShapeParent(J){const Q=typeof J==="string"?J:J?.id;if(!Q)return;const Z=this.getShape(Q);if(Z===void 0||!U5(Z.parentId))return;return this.store.get(Z.parentId)}getShapeNearestSibling(J,Q){if(!Q)return;if(Q.parentId===J.parentId)return Q;return this.findShapeAncestor(Q,(q)=>q.parentId===J.parentId)}isShapeInPage(J,Q=this.getCurrentPageId()){const Z=typeof J==="string"?J:J.id,q=this.getShape(Z);if(!q)return!1;let Y=!1;if(q.parentId===Q)Y=!0;else{let $=this.getShape(q.parentId);J:while($){if($.parentId===Q){Y=!0;break J}$=this.getShape($.parentId)}}return Y}getAncestorPageId(J){const Q=typeof J==="string"?J:J?.id,Z=Q&&this.getShape(Q);if(!Z)return;if(o5(Z.parentId))return Z.parentId;else return this.getAncestorPageId(this.getShape(Z.parentId))}_parentIdsToChildIds;reparentShapes(J,Q,Z){const q=typeof J[0]==="string"?J:J.map((M)=>M.id);if(q.length===0)return this;const Y=[],$=o5(Q)?j0.Identity():this.getShapePageTransform(Q),W=$.rotation();let G=[];const z=Y6(this.getSortedChildIdsForParent(Q).map((M)=>this.getShape(M)));if(Z){const M=z.find((O)=>O.index===Z);if(M){const O=z[z.indexOf(M)+1];if(O)G=EZ(Z,O.index,q.length);else G=tH(Z,q.length)}else{const O=z.sort(P9).find((R)=>R.index>Z);if(O)G=EZ(Z,O.index,q.length);else G=tH(Z,q.length)}}else{const M=z.length&&z[z.length-1];G=M?tH(M.index,q.length):NQ(q.length)}const U=$.clone().invert(),F=Y6(q.map((M)=>this.getShape(M))),B=F.filter((M)=>M.isLocked);if(B.length)this.updateShapes(B.map(({id:M,type:O})=>({id:M,type:O,isLocked:!1})));for(let M=0;M<F.length;M++){const O=F[M],R=this.getShapePageTransform(O);if(!R)continue;const V=R.point();if(!V)continue;const E=U.applyToPoint(V),_=R.rotation()-W;Y.push({id:O.id,type:O.type,parentId:Q,x:E.x,y:E.y,rotation:_,index:G[M],isLocked:O.isLocked})}return this.updateShapes(Y),this}getHighestIndexForParent(J){const Q=typeof J==="string"?J:J.id,Z=this._parentIdsToChildIds.get()[Q];if(!Z||Z.length===0)return"a1";const q=this.getShape(Z[Z.length-1]);return g7(q.index)}_childIdsCache=new _Q;getSortedChildIdsForParent(J){const Q=typeof J==="string"?J:J.id,Z=this._parentIdsToChildIds.get()[Q];if(!Z)return n5;return this._childIdsCache.get(Z,()=>Z)}visitDescendants(J,Q){const Z=typeof J==="string"?J:J.id,q=this.getSortedChildIdsForParent(Z);for(let Y of q){if(Q(Y)===!1)continue;this.visitDescendants(Y,Q)}return this}getShapeAndDescendantIds(J){const Q=new Set,Z=[...J];while(Z.length>0){const q=Z.pop();if(!q)break;if(Q.has(q))continue;Q.add(q);for(let Y of this.getSortedChildIdsForParent(q))Z.push(Y)}return Q}getDroppingOverShape(J,Q=[]){const Z=this.getCurrentPageShapesSorted();for(let q=Z.length-1;q>=0;q--){const Y=Z[q];if(this.getSelectedShapeIds().includes(Y.id)||!this.getShapeUtil(Y).canDropShapes(Y,Q)||Q.find((W)=>W.id===Y.id||this.hasAncestor(Y,W.id)))continue;const $=this.getShapeMaskedPageBounds(Y.id);if($&&$.containsPoint(J)&&this.getShapeGeometry(Y).hitTestPoint(this.getPointInShapeSpace(Y,J),0,!0))return Y}}getOutermostSelectableShape(J,Q){const Z=typeof J==="string"?J:J.id,q=this.getShape(Z);let Y=q,$=q;const W=this.getFocusedGroup();while($){if(this.isShapeOfType($,"group")&&W?.id!==$.id&&!this.hasAncestor(W,$.id)&&(Q?.($)??!0))Y=$;else if(W?.id===$.id)break;$=this.getShapeParent($)}return Y}rotateShapesBy(J,Q){if((typeof J[0]==="string"?J:J.map((Y)=>Y.id)).length<=0)return this;const q=z3({editor:this});if(!q)return this;return nY({delta:Q,snapshot:q,editor:this,stage:"one-off"}),this}getChangesToTranslateShape(J,Q){let Z=J;const q=this.getShapeUtil(J);return Z=F3(Z,q.onTranslateStart?.(Z)??void 0),Z=F3(Z,{id:J.id,type:J.type,x:Q.x,y:Q.y}),Z=F3(Z,q.onTranslate?.(J,Z)??void 0),Z=F3(Z,q.onTranslateEnd?.(J,Z)??void 0),Z}nudgeShapes(J,Q,Z){const q=typeof J[0]==="string"?J:J.map(($)=>$.id);if(q.length<=0)return this;const Y=[];for(let $ of q){const W=this.getShape($),G=j.From(Q),z=this.getShapeParentTransform(W);if(z)G.rot(-z.rotation());Y.push(this.getChangesToTranslateShape(W,G.add(W)))}return this.updateShapes(Y,{squashing:!0,...Z}),this}duplicateShapes(J,Q){const Z=typeof J[0]==="string"?J:J.map((z)=>z.id);if(Z.length<=0)return this;const q=new Set(Z),Y=[],$=[...Z];while($.length>0){const z=$.pop();if(!z)break;Y.push(z),this.getSortedChildIdsForParent(z).forEach((U)=>$.push(U))}Y.reverse();const W=new Map(Y.map((z)=>[z,v6()])),G=Y6(Y.map((z)=>{const U=this.getShape(z);if(!U)return null;const F=W.get(z);let B=0,M=0;if(Q&&q.has(z)){const T=this.getShapeParentTransform(U),k=new j(Q.x,Q.y).rot(-T.rotation());B=k.x,M=k.y}const O=U.parentId??this.getCurrentPageId(),R=this.getSortedChildIdsForParent(O),V=R.indexOf(U.id),E=R[V+1],_=E?this.getShape(E):null,A=_?CZ(U.index,_.index):g7(U.index);let w=p6(U);if(this.isShapeOfType(U,"arrow")&&this.isShapeOfType(w,"arrow")){const T=this.getArrowInfo(U);let k=void 0,P=void 0;if(U.props.start.type==="binding"){if(k=W.get(U.props.start.boundShapeId),!k)if(T?.isValid){const{x:p,y:s}=T.start.point;w.props.start={type:"point",x:p,y:s}}else{const{start:p}=uJ(this,U);w.props.start={type:"point",x:p.x,y:p.y}}}if(U.props.end.type==="binding"){if(P=W.get(U.props.end.boundShapeId),!P)if(T?.isValid){const{x:p,y:s}=T.end.point;w.props.end={type:"point",x:p,y:s}}else{const{end:p}=uJ(this,U);w.props.start={type:"point",x:p.x,y:p.y}}}const y=bW(w)?oY(this,w):jN(this,w);if(T?.isValid&&y?.isValid&&!bW(U)){const p=j.Med(T.start.handle,T.end.handle),s=j.Dist(T.middle,p),c=j.Dist(y.middle,p);if(w.props.bend<0)w.props.bend+=c-s;else w.props.bend-=c-s}if(w.props.start.type==="binding"&&k)w.props.start.boundShapeId=k;if(w.props.end.type==="binding"&&P)w.props.end.boundShapeId=P}return w={...w,id:F,x:U.x+B,y:U.y+M,index:A},w}));return G.forEach((z)=>{if(U5(z.parentId)){if(W.has(z.parentId))z.parentId=W.get(z.parentId)}}),this.history.batch(()=>{const z=G.length+this.getCurrentPageShapeIds().size>e4;if(z)_N(this);const U=z?G.slice(0,e4-this.getCurrentPageShapeIds().size):G,F=U.map((B)=>B.id);if(this.createShapes(U),this.setSelectedShapes(F),Q!==void 0){const B=this.getSelectionPageBounds(),M=this.getViewportPageBounds();if(B&&!M.contains(B))this.centerOnPoint(B.center,{duration:SJ})}}),this}moveShapesToPage(J,Q){const Z=typeof J[0]==="string"?J:J.map((W)=>W.id);if(Z.length===0)return this;if(this.getInstanceState().isReadonly)return this;const q=this.getCurrentPageId();if(Q===q)return this;if(!this.store.has(Q))return this;const Y=this.getContentFromCurrentPage(Z);if(!Y)return this;if(this.getPageShapeIds(Q).size+Y.shapes.length>e4)return _N(this,Q),this;const $=this.getCamera().z;return this.history.batch(()=>{this.deleteShapes(Z),this.setCurrentPage(Q),this.setFocusedGroup(null),this.selectNone(),this.putContentOntoCurrentPage(Y,{select:!0,preserveIds:!0,preservePosition:!0}),this.setCamera({...this.getCamera(),z:$}),this.centerOnPoint(this.getSelectionRotatedPageBounds().center)}),this}toggleLock(J){const Q=typeof J[0]==="string"?J:J.map(($)=>$.id);if(this.getInstanceState().isReadonly||Q.length===0)return this;let Z=!0,q=!0;const Y=[];for(let $ of Q){const W=this.getShape($);if(W)if(Y.push(W),W.isLocked)q=!1;else Z=!1}return this.batch(()=>{if(q)this.updateShapes(Y.map(($)=>({id:$.id,type:$.type,isLocked:!0}))),this.setSelectedShapes([]);else if(Z)this.updateShapes(Y.map(($)=>({id:$.id,type:$.type,isLocked:!1})));else this.updateShapes(Y.map(($)=>({id:$.id,type:$.type,isLocked:!0})))}),this}sendToBack(J){const Q=typeof J[0]==="string"?J:J.map((q)=>q.id),Z=H3(this,"toBack",Q);if(Z)this.updateShapes(Z);return this}sendBackward(J){const Q=typeof J[0]==="string"?J:J.map((q)=>q.id),Z=H3(this,"backward",Q);if(Z)this.updateShapes(Z);return this}bringForward(J){const Q=typeof J[0]==="string"?J:J.map((q)=>q.id),Z=H3(this,"forward",Q);if(Z)this.updateShapes(Z);return this}bringToFront(J){const Q=typeof J[0]==="string"?J:J.map((q)=>q.id),Z=H3(this,"toFront",Q);if(Z)this.updateShapes(Z);return this}flipShapes(J,Q){const Z=typeof J[0]==="string"?J:J.map(($)=>$.id);if(this.getInstanceState().isReadonly)return this;let q=Y6(Z.map(($)=>this.getShape($)));if(!q.length)return this;q=Y6(q.map(($)=>{if(this.isShapeOfType($,"group"))return this.getSortedChildIdsForParent($.id).map((W)=>this.getShape(W));return $}).flat());const Y=V0.Common(Y6(q.map(($)=>this.getShapePageBounds($)))).center;return this.batch(()=>{for(let $ of q){const W=this.getShapeGeometry($).bounds,G=this.getShapePageTransform($.id);if(!G)continue;this.resizeShape($.id,{x:Q==="horizontal"?-1:1,y:Q==="vertical"?-1:1},{initialBounds:W,initialPageTransform:G,initialShape:$,mode:"scale_shape",scaleOrigin:Y,scaleAxisRotation:0})}}),this}stackShapes(J,Q,Z){const q=typeof J[0]==="string"?J:J.map((R)=>R.id);if(this.getInstanceState().isReadonly)return this;const Y=Y6(q.map((R)=>this.getShape(R)).filter((R)=>{if(!R)return!1;if(this.isShapeOfType(R,"arrow")){if(R.props.start.type==="binding"||R.props.end.type==="binding")return!1}return!0})),$=Y.length;if(Z===0&&$<3||$<2)return this;const W=Object.fromEntries(Y.map((R)=>[R.id,this.getShapePageBounds(R)]));let G,z,U,F;if(Q==="horizontal")G="x",z="minX",U="maxX",F="width";else G="y",z="minY",U="maxY",F="height";let B;if(Z===0){const R=[];Y.sort((E,_)=>W[E.id][z]-W[_.id][z]);for(let E=0;E<$-1;E++){const _=Y[E],A=Y[E+1],w=W[_.id],k=W[A.id][z]-w[U],P=R.find((y)=>y.gap===k);if(P)P.count++;else R.push({gap:k,count:1})}let V=0;if(R.forEach((E)=>{if(E.count>V)V=E.count,B=E.gap}),V===1)B=Math.max(0,R.reduce((E,_)=>E+_.gap*_.count,0)/($-1))}else B=Z;const M=[];let O=W[Y[0].id][U];return Y.forEach((R,V)=>{if(V===0)return;const E={x:0,y:0};E[G]=O+B-W[R.id][G];const _=this.getShapeParent(R),A=_?j.Rot(E,-this.getShapePageTransform(_).decompose().rotation):E,w=this.getShapeUtil(R).onTranslateStart?.(R);M.push(w?{...w,[G]:R[G]+A[G]}:{id:R.id,type:R.type,[G]:R[G]+A[G]}),O+=W[R.id][F]+B}),this.updateShapes(M),this}packShapes(J,Q){const Z=typeof J[0]==="string"?J:J.map((k)=>k.id);if(this.getInstanceState().isReadonly)return this;if(Z.length<2)return this;const q=Y6(Z.map((k)=>this.getShape(k)).filter((k)=>{if(!k)return!1;if(this.isShapeOfType(k,"arrow")){if(k.props.start.type==="binding"||k.props.end.type==="binding")return!1}return!0})),Y={},$={};let W,G,z=0;for(let k=0;k<q.length;k++)W=q[k],G=this.getShapePageBounds(W),Y[W.id]=G,$[W.id]=G.clone(),z+=G.width*G.height;const U=V0.Common(Y6(Object.values(Y))),F=U.width;q.sort((k,P)=>Y[P.id].height-Y[k.id].height);const B=Math.max(Math.ceil(Math.sqrt(z/0.95)),F),M=[new V0(U.x,U.y,B,Infinity)];let O=0,R=0,V,E;for(let k=0;k<q.length;k++){W=q[k],G=$[W.id];for(let P=M.length-1;P>=0;P--){if(V=M[P],G.width>V.width||G.height>V.height)continue;if(G.x=V.x,G.y=V.y,R=Math.max(R,G.maxY),O=Math.max(O,G.maxX),G.width===V.width&&G.height===V.height){if(E=M.pop(),P<M.length)M[P]=E}else if(G.height===V.height)V.x+=G.width+Q,V.width-=G.width+Q;else if(G.width===V.width)V.y+=G.height+Q,V.height-=G.height+Q;else M.push(new V0(V.x+(G.width+Q),V.y,V.width-(G.width+Q),G.height)),V.y+=G.height+Q,V.height-=G.height+Q;break}}const _=V0.Common(Object.values($)),A=j.Sub(U.center,_.center);let w;const T=[];for(let k=0;k<q.length;k++){W=q[k],G=Y[W.id],w=$[W.id];const P=j.Sub(w.point,G.point).add(A),y=this.getShapeParentTransform(W);if(y)P.rot(-y.rotation());const p={id:W.id,type:W.type,x:W.x+P.x,y:W.y+P.y},s=this.getShapeUtil(W).onTranslateStart?.({...W,...p});if(s)T.push({...p,...s});else T.push(p)}if(T.length)this.updateShapes(T);return this}alignShapes(J,Q){const Z=typeof J[0]==="string"?J:J.map((G)=>G.id);if(this.getInstanceState().isReadonly)return this;if(Z.length<2)return this;const q=Y6(Z.map((G)=>this.getShape(G))),Y=Object.fromEntries(q.map((G)=>[G.id,this.getShapePageBounds(G)])),$=V0.Common(Y6(Object.values(Y))),W=[];return q.forEach((G)=>{const z=Y[G.id];if(!z)return;const U={x:0,y:0};switch(Q){case"top":{U.y=$.minY-z.minY;break}case"center-vertical":{U.y=$.midY-z.minY-z.height/2;break}case"bottom":{U.y=$.maxY-z.minY-z.height;break}case"left":{U.x=$.minX-z.minX;break}case"center-horizontal":{U.x=$.midX-z.minX-z.width/2;break}case"right":{U.x=$.maxX-z.minX-z.width;break}}const F=this.getShapeParent(G),B=F?j.Rot(U,-this.getShapePageTransform(F).decompose().rotation):U;W.push(this.getChangesToTranslateShape(G,j.Add(G,B)))}),this.updateShapes(W),this}distributeShapes(J,Q){const Z=typeof J[0]==="string"?J:J.map((_)=>_.id);if(this.getInstanceState().isReadonly)return this;if(Z.length<3)return this;const q=Z.length,Y=Y6(Z.map((_)=>this.getShape(_))),$=Object.fromEntries(Y.map((_)=>[_.id,this.getShapePageBounds(_)]));let W,G,z,U,F;if(Q==="horizontal")W="x",G="minX",z="maxX",U="midX",F="width";else W="y",G="minY",z="maxY",U="midY",F="height";const B=[],M=Y.sort((_,A)=>$[_.id][G]-$[A.id][G])[0],O=Y.sort((_,A)=>$[A.id][z]-$[_.id][z])[0],R=$[M.id][U],V=($[O.id][U]-R)/(q-1),E=R+V;return Y.filter((_)=>_!==M&&_!==O).sort((_,A)=>$[_.id][U]-$[A.id][U]).forEach((_,A)=>{const w={x:0,y:0};w[W]=E+V*A-$[_.id][F]/2-$[_.id][W];const T=this.getShapeParent(_),k=T?j.Rot(w,-this.getShapePageTransform(T).rotation()):w;B.push(this.getChangesToTranslateShape(_,j.Add(_,k)))}),this.updateShapes(B),this}stretchShapes(J,Q){const Z=typeof J[0]==="string"?J:J.map((G)=>G.id);if(this.getInstanceState().isReadonly)return this;if(Z.length<2)return this;const q=Y6(Z.map((G)=>this.getShape(G))),Y=Object.fromEntries(Z.map((G)=>[G,this.getShapeGeometry(G).bounds])),$=Object.fromEntries(Z.map((G)=>[G,this.getShapePageBounds(G)])),W=V0.Common(Y6(Object.values($)));switch(Q){case"vertical":{this.batch(()=>{for(let G of q){if(this.getShapePageTransform(G).rotation()%d6)continue;const U=Y[G.id],F=$[G.id],B=new j(0,W.minY-F.minY),M=this.getShapeParentTransform(G);if(M)B.rot(-M.rotation());const{x:O,y:R}=j.Add(B,G);this.updateShapes([{id:G.id,type:G.type,x:O,y:R}],{squashing:!0});const V=new j(1,W.height/F.height);this.resizeShape(G.id,V,{initialBounds:U,scaleOrigin:new j(F.center.x,W.minY),scaleAxisRotation:0})}});break}case"horizontal":{this.batch(()=>{for(let G of q){const z=Y[G.id],U=$[G.id];if(this.getShapePageTransform(G).rotation()%d6)continue;const B=new j(W.minX-U.minX,0),M=this.getShapeParentTransform(G);if(M)B.rot(-M.rotation());const{x:O,y:R}=j.Add(B,G);this.updateShapes([{id:G.id,type:G.type,x:O,y:R}],{squashing:!0});const V=new j(W.width/U.width,1);this.resizeShape(G.id,V,{initialBounds:z,scaleOrigin:new j(W.minX,U.center.y),scaleAxisRotation:0})}});break}}return this}resizeShape(J,Q,Z={}){const q=typeof J==="string"?J:J.id;if(this.getInstanceState().isReadonly)return this;if(!Number.isFinite(Q.x))Q=new j(1,Q.y);if(!Number.isFinite(Q.y))Q=new j(Q.x,1);const Y=Z.initialShape??this.getShape(q);if(!Y)return this;const $=Z.scaleOrigin??this.getShapePageBounds(q)?.center;if(!$)return this;const W=Z.initialPageTransform?j0.Cast(Z.initialPageTransform):this.getShapePageTransform(q);if(!W)return this;const G=W.rotation();if(G==null)return this;const z=Z.scaleAxisRotation??G,U=Z.initialBounds??this.getShapeGeometry(q).bounds;if(!U)return this;if(!dz(G,z))return this._resizeUnalignedShape(q,Q,{...Z,initialBounds:U,scaleOrigin:$,scaleAxisRotation:z,initialPageTransform:W,initialShape:Y});const F=this.getShapeUtil(Y);if(F.isAspectRatioLocked(Y))if(Math.abs(Q.x)>Math.abs(Q.y))Q=new j(Q.x,Math.sign(Q.y)*Math.abs(Q.x));else Q=new j(Math.sign(Q.x)*Math.abs(Q.y),Q.y);if(F.onResize&&F.canResize(Y)){const B=this._scalePagePoint(j0.applyToPoint(W,new j(0,0)),$,Q,z),M=this.getPointInParentSpace(Y.id,B),O=new j(Q.x,Q.y),R=YX((G-z)%Math.PI,0);O.x=R?Q.x:Q.y,O.y=R?Q.y:Q.x;const V=j0.applyToPoint(W,new j),{x:E,y:_}=this.getPointInParentSpace(Y.id,V);this.updateShapes([{id:q,type:Y.type,x:M.x,y:M.y,...F.onResize({...Y,x:E,y:_},{newPoint:M,handle:Z.dragHandle??"bottom_right",mode:Z.mode??"scale_shape",scaleX:O.x,scaleY:O.y,initialBounds:U,initialShape:Y})}],{squashing:!0})}else{const B=j0.applyToPoint(W,U.center),M=this._scalePagePoint(B,$,Q,z),O=this.getPointInParentSpace(Y.id,B),R=this.getPointInParentSpace(Y.id,M),V=j.Sub(R,O);this.updateShapes([{id:q,type:Y.type,x:Y.x+V.x,y:Y.y+V.y}],{squashing:!0})}return this}_scalePagePoint(J,Q,Z,q){const Y=j.RotWith(J,Q,-q).sub(Q),$=j.MulV(Y,Z);return j.Add($,Q).rotWith(Q,q)}_resizeUnalignedShape(J,Q,Z){const{type:q}=Z.initialShape,Y=new j(Q.x,Q.y);if(Math.abs(Q.x)>Math.abs(Q.y))Y.x=Math.sign(Q.x)*Math.abs(Q.y);else Y.y=Math.sign(Q.y)*Math.abs(Q.x);if(this.resizeShape(J,Y,{initialShape:Z.initialShape,initialBounds:Z.initialBounds}),Math.sign(Q.x)*Math.sign(Q.y)<0){let{rotation:V}=j0.Decompose(Z.initialPageTransform);V-=2*V,this.updateShapes([{id:J,type:q,rotation:V}],{squashing:!0})}const $=j0.applyToPoint(Z.initialPageTransform,Z.initialBounds.center),W=this._scalePagePoint($,Z.scaleOrigin,Q,Z.scaleAxisRotation),G=this.getShapePageBounds(J),z=this.getShapePageTransform(J),U=G.center,F=z.point();if(!U||!F)return this;const B=j.Sub(W,U),M=j.Add(F,B),{x:O,y:R}=this.getPointInParentSpace(J,M);return this.updateShapes([{id:J,type:q,x:O,y:R}],{squashing:!0}),this}getInitialMetaForShape(J){return{}}createShape(J){return this._createShapes([J]),this}createShapes(J){if(!Array.isArray(J))throw Error("Editor.createShapes: must provide an array of shapes or shape partials");return this._createShapes(J),this}_createShapes=this.history.createCommand("createShapes",(J)=>{if(this.getInstanceState().isReadonly)return null;if(J.length<=0)return null;const Q=this.getCurrentPageShapeIds();if(J.length+Q.size>e4){_N(this);return}if(J.length===0)return null;return{data:{currentPageId:this.getCurrentPageId(),partials:J.map((q)=>q.id?q:{...q,id:v6()})}}},{do:({partials:J})=>{const Q=this.getFocusedGroupId(),Z=this.getCurrentPageShapesSorted();J=J.map(($)=>{if(!$.parentId||!(this.store.has($.parentId)||J.some((W)=>W.id===$.parentId))){let W=this.getFocusedGroupId();for(let z=Z.length-1;z>=0;z--){const U=Z[z];if(this.getShapeUtil(U).canReceiveNewChildrenOfType(U,$.type)&&this.isPointInShape(U,{x:$.x??0,y:$.y??0},{margin:0,hitInside:!0})){W=U.id;break}}const G=$.parentId;if(W===$.id)W=Q;if(W!==G){if($={...$},$.parentId=W,U5(W)){const z=this.getPointInShapeSpace(this.getShape(W),{x:$.x??0,y:$.y??0});$.x=z.x,$.y=z.y,$.rotation=-this.getShapePageTransform(W).rotation()+($.rotation??0)}}}return $});const q=new Map,Y=[];for(let $ of J){const W=this.getShapeUtil($);let G=$.index;if(!G){const B=$.parentId??Q;if(!q.has(B))q.set(B,this.getHighestIndexForParent(B));G=q.get(B),q.set(B,g7(G))}const z=W.getDefaultProps();for(let[B,M]of this.styleProps[$.type])z[M]=this.getStyleForNextShape(B);let U=this.store.schema.types.shape.create({...$,index:G,opacity:$.opacity??this.getInstanceState().opacityForNextShape,parentId:$.parentId??Q,props:"props"in $?{...z,...$.props}:z});if(U.index===void 0)throw Error("no index!");const F=this.getShapeUtil(U).onBeforeCreate?.(U);if(F)U=F;Y.push(U)}Y.forEach(($)=>{$.meta={...this.getInitialMetaForShape($),...$.meta}}),this.store.put(Y)},undo:({partials:J})=>{this.store.remove(J.map((Q)=>Q.id))}});animatingShapes=new Map;animateShape(J,Q){return this.animateShapes([J],Q)}animateShapes(J,Q={}){const{duration:Z=500,easing:q=_9.linear}=Q,Y=u6();let $=Z,W;const G=[];let z,U;for(let M=0,O=J.length;M<O;M++){if(z=J[M],!z)continue;U={partial:z,values:[]};const R=this.getShape(z.id);if(!R)continue;for(let V of["x","y","rotation"])if(z[V]!==void 0&&R[V]!==z[V])U.values.push({prop:V,from:R[V],to:z[V]});G.push(U),this.animatingShapes.set(R.id,Y)}let F;const B=(M)=>{if($-=M,$<0){const{animatingShapes:E}=this,_=J.filter((A)=>A&&E.get(A.id)===Y);if(_.length)this.updateShapes(_,{squashing:!1});this.removeListener("tick",B);return}W=q(1-$/Z);const{animatingShapes:O}=this,R=[];let V;for(let E=0,_=G.length;E<_;E++){if(F=G[E],V=O.get(F.partial.id),V!==Y)continue;R.push({id:F.partial.id,type:F.partial.type,...F.values.reduce((A,{prop:w,from:T,to:k})=>{return A[w]=T+(k-T)*W,A},{})})}this._updateShapes(R,{squashing:!0})};return this.addListener("tick",B),this}groupShapes(J,Q=v6()){if(!Array.isArray(J))throw Error("Editor.groupShapes: must provide an array of shapes or shape ids");if(this.getInstanceState().isReadonly)return this;const Z=typeof J[0]==="string"?J:J.map((B)=>B.id);if(Z.length<=1)return this;const q=Y6(this._getUnlockedShapeIds(Z).map((B)=>this.getShape(B))),Y=q.sort(P9).map((B)=>B.id),$=V0.Common(Y6(q.map((B)=>this.getShapePageBounds(B)))),{x:W,y:G}=$.point,z=this.findCommonAncestor(q)??this.getCurrentPageId();if(this.getCurrentToolId()!=="select")return this;if(!this.isIn("select.idle"))this.cancel();const U=q.filter((B)=>B.parentId===z).sort(P9),F=U[U.length-1]?.index;return this.batch(()=>{this.createShapes([{id:Q,type:"group",parentId:z,index:F,x:W,y:G,opacity:1,props:{}}]),this.reparentShapes(Y,Q),this.select(Q)}),this}ungroupShapes(J){const Q=typeof J[0]==="string"?J:J.map(($)=>$.id);if(this.getInstanceState().isReadonly)return this;if(Q.length===0)return this;if(this.getCurrentToolId()!=="select")return this;if(!this.isIn("select.idle"))this.cancel();const Z=new Set,q=Y6(Q.map(($)=>this.getShape($))),Y=[];if(q.forEach(($)=>{if(this.isShapeOfType($,"group"))Y.push($);else Z.add($.id)}),Y.length===0)return this;return this.batch(()=>{let $;for(let W=0,G=Y.length;W<G;W++){$=Y[W];const z=this.getSortedChildIdsForParent($.id);for(let U=0,F=z.length;U<F;U++)Z.add(z[U]);this.reparentShapes(z,$.parentId,$.index)}this.deleteShapes(Y.map((W)=>W.id)),this.select(...Z)}),this}updateShape(J,Q){return this.updateShapes([J],Q),this}updateShapes(J,Q){const Z=Array(J.length);for(let q=0,Y=J.length;q<Y;q++){const $=J[q];if(!$)continue;const W=this.getShape($.id);if(!W)continue;if(this.isShapeOrAncestorLocked(W)&&!Object.hasOwn($,"isLocked"))continue;this.animatingShapes.delete($.id),Z.push($)}return this._updateShapes(Z,Q),this}_updateShapes=this.history.createCommand("updateShapes",(J,Q)=>{if(this.getInstanceState().isReadonly)return null;const Z={},q={};let Y,$;for(let W=0,G=J.length;W<G;W++){const z=J[W];if(!z)continue;if(Y=this.getShape(z.id),!Y)continue;if($=F3(Y,z),$===Y)continue;Z[Y.id]=Y,q[Y.id]=$}return{data:{snapshots:Z,updates:q},...Q}},{do:({updates:J})=>{this.store.put(L9(J).map((Q)=>{const Z=this.store.get(Q.id);if(Z){const q=this.getShapeUtil(Q).onBeforeUpdate?.(Z,Q);if(q)return q}return Q}))},undo:({snapshots:J})=>{this.store.put(Object.values(J))},squash(J,Q){return{snapshots:{...Q.snapshots,...J.snapshots},updates:{...J.updates,...Q.updates}}}});_getUnlockedShapeIds(J){return J.filter((Q)=>!this.getShape(Q)?.isLocked)}deleteShapes(J){if(!Array.isArray(J))throw Error("Editor.deleteShapes: must provide an array of shapes or shapeIds");return this._deleteShapes(this._getUnlockedShapeIds(typeof J[0]==="string"?J:J.map((Q)=>Q.id))),this}deleteShape(J){return this.deleteShapes([typeof J==="string"?J:J.id]),this}_deleteShapes=this.history.createCommand("delete_shapes",(J)=>{if(this.getInstanceState().isReadonly)return null;if(J.length===0)return null;const Q=[...this.getCurrentPageState().selectedShapeIds],Z=new Set(J);for(let G of J)this.visitDescendants(G,(z)=>{Z.add(z)});const q=[...Z],Y=this._getArrowBindingsIndex().get(),$=Y6(q.flatMap((G)=>{const z=this.getShape(G),U=Y[G];if(U&&U.length>0)return U.map(({arrowId:F})=>this.getShape(F)).concat(z);return z})),W=Q.filter((G)=>!Z.has(G));return{data:{deletedIds:q,snapshots:$,prevSelectedShapeIds:Q,postSelectedShapeIds:W}}},{do:({deletedIds:J,postSelectedShapeIds:Q})=>{this.store.remove(J),this.store.update(this.getCurrentPageState().id,(Z)=>({...Z,selectedShapeIds:Q}))},undo:({snapshots:J,prevSelectedShapeIds:Q})=>{this.store.put(J),this.store.update(this.getCurrentPageState().id,(Z)=>({...Z,selectedShapeIds:Q}))}});_extractSharedStyles(J,Q){if(this.isShapeOfType(J,"group")){const Z=this._parentIdsToChildIds.get()[J.id];if(!Z)return;for(let q=0,Y=Z.length;q<Y;q++)this._extractSharedStyles(this.getShape(Z[q]),Q)}else for(let[Z,q]of this.styleProps[J.type])Q.applyValue(Z,G7(J.props,q))}_getSelectionSharedStyles(){const J=this.getSelectedShapes(),Q=new iY;for(let Z of J)this._extractSharedStyles(Z,Q);return Q}getStyleForNextShape(J){const Q=this.getInstanceState().stylesForNextShape[J.id];return Q===void 0?J.defaultValue:Q}getShapeStyleIfExists(J,Q){const Z=this.styleProps[J.type].get(Q);if(Z===void 0)return;return G7(J.props,Z)}getSharedStyles(){if(this.isIn("select")&&this.getSelectedShapeIds().length>0)return this._getSelectionSharedStyles();const J=this.root.getCurrent(),Q=new iY;if(!J)return Q;if(J.shapeType)for(let Z of this.styleProps[J.shapeType].keys())Q.applyValue(Z,this.getStyleForNextShape(Z));return Q}getSharedOpacity(){if(this.isIn("select")&&this.getSelectedShapeIds().length>0){const J=[],Q=(q)=>{const Y=this.getShape(q);if(!Y)return;if(this.isShapeOfType(Y,"group"))for(let $ of this.getSortedChildIdsForParent(Y.id))Q($);else J.push(Y)};for(let q of this.getSelectedShapeIds())Q(q);let Z=null;for(let q of J)if(Z===null)Z=q.opacity;else if(Z!==q.opacity)return{type:"mixed"};if(Z!==null)return{type:"shared",value:Z}}return{type:"shared",value:this.getInstanceState().opacityForNextShape}}setOpacityForNextShapes(J,Q){return this.updateInstanceState({opacityForNextShape:J},Q),this}setOpacityForSelectedShapes(J,Q){const Z=this.getSelectedShapes();if(Z.length>0){const q=[],Y=($)=>{if(this.isShapeOfType($,"group")){const W=this.getSortedChildIdsForParent($);for(let G of W)Y(this.getShape(G))}else q.push($)};for(let $ of Z)Y($);this.updateShapes(q.map(($)=>{return{id:$.id,type:$.type,opacity:J}}),Q)}return this}setStyleForNextShapes(J,Q,Z){const q=this.getInstanceState().stylesForNextShape;return this.updateInstanceState({stylesForNextShape:{...q,[J.id]:Q}},Z),this}setStyleForSelectedShapes(J,Q,Z){const q=this.getSelectedShapes();if(q.length>0){const Y=[],$=(W)=>{if(this.isShapeOfType(W,"group")){const G=this.getSortedChildIdsForParent(W.id);for(let z of G)$(this.getShape(z))}else{const G=this.getShapeUtil(W),z=this.styleProps[W.type].get(J);if(z){const U={id:W.id,type:W.type,props:{[z]:Q}};Y.push({util:G,originalShape:W,updatePartial:U})}}};for(let W of q)$(W);this.updateShapes(Y.map(({updatePartial:W})=>W),Z)}return this}externalAssetContentHandlers={file:null,url:null};registerExternalAssetHandler(J,Q){return this.externalAssetContentHandlers[J]=Q,this}async getAssetForExternalContent(J){return await this.externalAssetContentHandlers[J.type]?.(J)}externalContentHandlers={text:null,files:null,embed:null,"svg-text":null,url:null};registerExternalContentHandler(J,Q){return this.externalContentHandlers[J]=Q,this}async putExternalContent(J){return this.externalContentHandlers[J.type]?.(J)}getContentFromCurrentPage(J){const Q=typeof J[0]==="string"?J:J.map((W)=>W.id);if(!Q)return;if(Q.length===0)return;const Z={};let q=iq(Q.map((W)=>this.getShape(W)).sort(P9).flatMap((W)=>{const G=[W];return this.visitDescendants(W.id,(z)=>{G.push(this.getShape(z))}),G}));q=q.map((W)=>{if(Z[W.id]=this.getShapePageTransform(W.id),W=p6(W),this.isShapeOfType(W,"arrow")){const G=W.props.start.type==="binding"?W.props.start.boundShapeId:void 0,z=W.props.end.type==="binding"?W.props.end.boundShapeId:void 0,U=this.getArrowInfo(W);if(W.props.start.type==="binding"){if(!q.some((B)=>B.id===G))if(U?.isValid){const{x:B,y:M}=U.start.point;W.props.start={type:"point",x:B,y:M}}else{const{start:B}=uJ(this,W);W.props.start={type:"point",x:B.x,y:B.y}}}if(W.props.end.type==="binding"){if(!q.some((B)=>B.id===z))if(U?.isValid){const{x:B,y:M}=U.end.point;W.props.end={type:"point",x:B,y:M}}else{const{end:B}=uJ(this,W);W.props.end={type:"point",x:B.x,y:B.y}}}const F=bW(W)?oY(this,W):jN(this,W);if(U?.isValid&&F?.isValid&&!bW(W)){const B=j.Med(U.start.handle,U.end.handle),M=j.Dist(U.middle,B),O=j.Dist(F.middle,B);if(W.props.bend<0)W.props.bend+=O-M;else W.props.bend-=O-M}return W}return W});const Y=[];q.forEach((W)=>{if(q.find((G)=>G.id===W.parentId)===void 0){const G=this.getShapePageTransform(W.id),z=G.point(),U=G.rotation();W.x=z.x,W.y=z.y,W.rotation=U,W.parentId=this.getCurrentPageId(),Y.push(W.id)}});const $=new Set;return q.forEach((W)=>{if("assetId"in W.props){if(W.props.assetId!==null)$.add(W.props.assetId)}}),{shapes:q,rootShapeIds:Y,schema:this.store.schema.serialize(),assets:Y6(Array.from($).map((W)=>this.getAsset(W)))}}putContentOntoCurrentPage(J,Q={}){if(this.getInstanceState().isReadonly)return this;if(!J.schema)throw Error("Could not put content:\ncontent is missing a schema.");const{select:Z=!1,preserveIds:q=!1,preservePosition:Y=!1}=Q;let{point:$=void 0}=Q;const W=this.getCurrentPageId(),{rootShapeIds:G}=J,z=[],U=[],F={store:{...Object.fromEntries(J.assets.map((P)=>[P.id,P])),...Object.fromEntries(J.shapes.map((P)=>[P.id,P]))},schema:J.schema},B=this.store.schema.migrateStoreSnapshot(F);if(B.type==="error")throw Error("Could not put content: could not migrate content");for(let P of Object.values(B.value))switch(P.typeName){case"asset":{z.push(P);break}case"shape":{U.push(P);break}}const M=new Map(U.map((P)=>[P.id,v6()]));let O=this.getCurrentPageId(),R=Infinity,V=[];for(let P of this.getSelectedShapes()){if(R===0)break;const y=this.isShapeOfType(P,"frame"),p=this.getShapeAncestors(P);if(y)p.push(P);const s=y?p.length+1:p.length;if(s<R)R=s,V=p,O=y?P.id:P.parentId;else if(s===R){if(V.length!==p.length)throw Error(`Ancestors: ${V.length} !== ${p.length}`);if(V.length===0){O=W;break}else{O=W;for(let c=0;c<V.length;c++){if(p[c]!==V[c])break;O=p[c].id}}}}let E=!1;if(!o5(O)){const P=this.getShape(O);if(P){if(!this.getViewportPageBounds().includes(this.getShapePageBounds(P)))O=W;else if(G.length===1){const y=U.find((p)=>p.id===G[0]);if(this.isShapeOfType(P,"frame")&&this.isShapeOfType(y,"frame")&&y.props.w===P?.props.w&&y.props.h===P?.props.h)E=!0}}else O=W}if(!E)E=M.has(O);if(E)O=this.getShape(O).parentId;let _=this.getHighestIndexForParent(O);const A=[],w=U.map((P)=>{let y;if(q)y=p6(P),M.set(P.id,P.id);else{const p=M.get(P.id);y=p6({...P,id:p})}if(G.includes(P.id))y.parentId=W,A.push(y);if(M.has(y.parentId))y.parentId=M.get(P.parentId);else G.push(y.id),y.index=_,_=g7(_);if(this.isShapeOfType(y,"arrow")){if(y.props.start.type==="binding"){const p=M.get(y.props.start.boundShapeId);y.props.start=p?{...y.props.start,boundShapeId:p}:{type:"point",x:0,y:0}}if(y.props.end.type==="binding"){const p=M.get(y.props.end.boundShapeId);y.props.end=p?{...y.props.end,boundShapeId:p}:{type:"point",x:0,y:0}}}return y});if(w.length+this.getCurrentPageShapeIds().size>e4)return _N(this),this;const T=[],k=[];for(let P of z){if(this.store.has(P.id))continue;if((P.type==="image"||P.type==="video")&&P.props.src?.startsWith("data:image"))k.push(p6(P)),P.props.src=null;T.push(P)}return Promise.allSettled(k.map(async(P)=>{const y=await HA(P.props.src,P.props.name,P.props.mimeType??"image/png"),p=await this.getAssetForExternalContent({type:"file",file:y});if(!p){this.deleteAssets([P.id]);return}this.updateAssets([{...p,id:P.id}])})),this.batch(()=>{if(T.length>0)this.createAssets(T);if(this.createShapes(w),Z)this.select(...A.map((c)=>c.id));if(O!==W)this.reparentShapes(A.map((c)=>c.id),O);const P=w.map((c)=>this.getShape(c.id)),y=V0.Common(P.map((c)=>this.getShapePageBounds(c)));if($===void 0)if(!o5(O)){const c=this.getShape(O);$=j0.applyToPoint(this.getShapePageTransform(c),this.getShapeGeometry(c).bounds.center)}else{const c=this.getViewportPageBounds();if(Y||c.includes(V0.From(y)))$=y.center;else $=c.center}if(A.length===1){const c=A[0];if(this.isShapeOfType(c,"frame"))while(this.getShapesAtPoint($).some((t)=>this.isShapeOfType(t,"frame")&&t.props.w===c.props.w&&t.props.h===c.props.h))$.x+=y.w+16}const p=V0.Common(Y6(A.map(({id:c})=>this.getShapePageBounds(c)))).center,s=j.Sub($,p);this.updateShapes(A.map(({id:c})=>{const t=this.getShape(c),X0=this.getShapeParentTransform(c).decompose().rotation,J0=j.Rot(s,-X0);return{id:t.id,type:t.type,x:t.x+J0.x,y:t.y+J0.y}}))}),this}async getSvgElement(J,Q={}){const Z=await Au(this,J,Q);if(!Z)return;const q=document.createDocumentFragment(),Y=gu.createRoot(q);fu.flushSync(()=>{Y.render(Z.jsx)});const $=q.firstElementChild;return r8($ instanceof SVGSVGElement,"Expected an SVG element"),Y.unmount(),{svg:$,width:Z.width,height:Z.height}}async getSvgString(J,Q={}){const Z=await this.getSvgElement(J,Q);if(!Z)return;return{svg:new XMLSerializer().serializeToString(Z.svg),width:Z.width,height:Z.height}}async getSvg(J,Q={}){const Z=await this.getSvgElement(J,Q);if(!Z)return;return Z.svg}inputs={originPagePoint:new j,originScreenPoint:new j,previousPagePoint:new j,previousScreenPoint:new j,currentPagePoint:new j,currentScreenPoint:new j,keys:new Set,buttons:new Set,isPen:!1,shiftKey:!1,ctrlKey:!1,altKey:!1,isDragging:!1,isPointing:!1,isPinching:!1,isEditing:!1,isPanning:!1,pointerVelocity:new j};_updateInputsFromEvent(J){const{pointerVelocity:Q,previousScreenPoint:Z,previousPagePoint:q,currentScreenPoint:Y,currentPagePoint:$}=this.inputs,{screenBounds:W}=this.store.unsafeGetWithoutCapture(x5),{x:G,y:z,z:U}=this.store.unsafeGetWithoutCapture(this.getCameraId()),F=J.point.x-W.x,B=J.point.y-W.y,M=J.point.z??0.5;Z.setTo(Y),q.setTo($),Y.set(F,B);const O=F/U-G,R=B/U-z;if(isFinite(O)&&isFinite(R))$.set(O,R,M);if(this.inputs.isPen=J.type==="pointer"&&J.isPen,J.name==="pointer_down"||this.inputs.isPinching)Q.set(0,0);this.store.put([{id:QX,typeName:"pointer",x:$.x,y:$.y,lastActivityTimestamp:J.type==="pointer"&&J.pointerId===HC.CAMERA_MOVE?this.store.unsafeGetWithoutCapture(QX)?.lastActivityTimestamp??this._tickManager.now:this._tickManager.now,meta:{}}])}cancel(){return this.dispatch({type:"misc",name:"cancel"}),this}interrupt(){return this.dispatch({type:"misc",name:"interrupt"}),this}complete(){return this.dispatch({type:"misc",name:"complete"}),this}_clickManager=new FA(this);cancelDoubleClick(){this._clickManager.cancelDoubleClickTimeout()}_prevCursor="default";_shiftKeyTimeout=-1;_setShiftKeyTimeout=()=>{this.inputs.shiftKey=!1,this.dispatch({type:"keyboard",name:"key_up",key:"Shift",shiftKey:this.inputs.shiftKey,ctrlKey:this.inputs.ctrlKey,altKey:this.inputs.altKey,code:"ShiftLeft"})};_altKeyTimeout=-1;_setAltKeyTimeout=()=>{this.inputs.altKey=!1,this.dispatch({type:"keyboard",name:"key_up",key:"Alt",shiftKey:this.inputs.shiftKey,ctrlKey:this.inputs.ctrlKey,altKey:this.inputs.altKey,code:"AltLeft"})};_ctrlKeyTimeout=-1;_setCtrlKeyTimeout=()=>{this.inputs.ctrlKey=!1,this.dispatch({type:"keyboard",name:"key_up",key:"Ctrl",shiftKey:this.inputs.shiftKey,ctrlKey:this.inputs.ctrlKey,altKey:this.inputs.altKey,code:"ControlLeft"})};_restoreToolId="select";_pinchStart=1;_didPinch=!1;_selectedShapeIdsAtPointerDown=[];_longPressTimeout=-1;capturedPointerId=null;dispatch=(J)=>{if(this._pendingEventsForNextTick.push(J),!(J.type==="pointer"&&J.name==="pointer_move"||J.type==="wheel"||J.type==="pinch"))this._flushEventsForTick(0);return this};_pendingEventsForNextTick=[];_flushEventsForTick(J){this.batch(()=>{if(this._pendingEventsForNextTick.length>0){const Q=[...this._pendingEventsForNextTick];this._pendingEventsForNextTick.length=0;for(let Z of Q)this._flushEventForTick(Z)}if(J>0)this.root.handleEvent({type:"misc",name:"tick",elapsed:J});this.scribbles.tick(J)})}_flushEventForTick=(J)=>{if(this.getCrashingError())return this;const{inputs:Q}=this,{type:Z}=J;if(J.type==="misc"){if(J.name==="cancel"||J.name==="complete"){if(this.inputs.isDragging=!1,this.inputs.isPanning)this.inputs.isPanning=!1,this.updateInstanceState({cursor:{type:this._prevCursor,rotation:0}})}this.root.handleEvent(J);return}if(J.shiftKey)clearInterval(this._shiftKeyTimeout),this._shiftKeyTimeout=-1,Q.shiftKey=!0;else if(!J.shiftKey&&Q.shiftKey&&this._shiftKeyTimeout===-1)this._shiftKeyTimeout=setTimeout(this._setShiftKeyTimeout,150);if(J.altKey)clearInterval(this._altKeyTimeout),this._altKeyTimeout=-1,Q.altKey=!0;else if(!J.altKey&&Q.altKey&&this._altKeyTimeout===-1)this._altKeyTimeout=setTimeout(this._setAltKeyTimeout,150);if(J.ctrlKey)clearInterval(this._ctrlKeyTimeout),this._ctrlKeyTimeout=-1,Q.ctrlKey=!0;else if(!J.ctrlKey&&Q.ctrlKey&&this._ctrlKeyTimeout===-1)this._ctrlKeyTimeout=setTimeout(this._setCtrlKeyTimeout,150);const{originPagePoint:q,originScreenPoint:Y,currentPagePoint:$,currentScreenPoint:W}=Q;if(!Q.isPointing)Q.isDragging=!1;switch(Z){case"pinch":{if(!this.getInstanceState().canMoveCamera)return;switch(clearTimeout(this._longPressTimeout),this._updateInputsFromEvent(J),J.name){case"pinch_start":{if(Q.isPinching)return;if(!Q.isEditing){if(this._pinchStart=this.getCamera().z,!this._selectedShapeIdsAtPointerDown.length)this._selectedShapeIdsAtPointerDown=this.getSelectedShapeIds();this._didPinch=!0,Q.isPinching=!0,this.interrupt()}return}case"pinch":{if(!Q.isPinching)return;const{point:{z:G=1},delta:{x:z,y:U}}=J,{screenBounds:F}=this.store.unsafeGetWithoutCapture(x5),{x:B,y:M}=j.SubXY(J.point,F.x,F.y),{x:O,y:R,z:V}=this.getCamera(),E=Math.min(T1,Math.max(vY,G));if(this.stopCameraAnimation(),this.getInstanceState().followingUserId)this.stopFollowingUser();this._setCamera({x:O+z/V-B/V+B/E,y:R+U/V-M/V+M/E,z:E},!0);return}case"pinch_end":{if(!Q.isPinching)return this;Q.isPinching=!1;const{_selectedShapeIdsAtPointerDown:G}=this;if(this.setSelectedShapes(this._selectedShapeIdsAtPointerDown,{squashing:!0}),this._selectedShapeIdsAtPointerDown=[],this._didPinch)this._didPinch=!1,this.once("tick",()=>{if(!this._didPinch)this.setSelectedShapes(G,{squashing:!0})});return}}}case"wheel":{if(!this.getInstanceState().canMoveCamera)return;if(this._updateInputsFromEvent(J),this.getIsMenuOpen());else{if(this.stopCameraAnimation(),this.getInstanceState().followingUserId)this.stopFollowingUser();if(Q.ctrlKey){const{x:F,y:B}=this.inputs.currentScreenPoint,{x:M,y:O,z:R}=this.getCamera(),V=Math.min(T1,Math.max(vY,R+(J.delta.z??0)*R));this._setCamera({x:M+(F/V-F)-(F/R-F),y:O+(B/V-B)-(B/R-B),z:V},!0);return}const{x:G,y:z,z:U}=this.getCamera();if(this._setCamera({x:G+J.delta.x/U,y:z+J.delta.y/U,z:U},!0),!Q.isDragging&&Q.isPointing&&j.Dist2(q,$)>(this.getInstanceState().isCoarsePointer?iz:vZ)/this.getZoomLevel())clearTimeout(this._longPressTimeout),Q.isDragging=!0}break}case"pointer":{if(Q.isPinching)return;this._updateInputsFromEvent(J);const{isPen:G}=J;switch(J.name){case"pointer_down":{if(this.clearOpenMenus(),this._longPressTimeout=setTimeout(()=>{this.dispatch({...J,name:"long_press"})},wm),this._selectedShapeIdsAtPointerDown=this.getSelectedShapeIds(),J.button===0)this.capturedPointerId=J.pointerId;if(Q.buttons.add(J.button),Q.isPointing=!0,Q.isDragging=!1,this.getInstanceState().isPenMode){if(!G)return}else if(G)this.updateInstanceState({isPenMode:!0});if(J.button===5)this._restoreToolId=this.getCurrentToolId(),this.complete(),this.setCurrentTool("eraser");else if(J.button===1){if(!this.inputs.isPanning)this._prevCursor=this.getInstanceState().cursor.type;this.inputs.isPanning=!0}if(this.inputs.isPanning)return this.stopCameraAnimation(),this.setCursor({type:"grabbing",rotation:0}),this;Y.setTo(W),q.setTo($);break}case"pointer_move":{if(!G&&this.getInstanceState().isPenMode)return;if(this.inputs.isPanning&&this.inputs.isPointing){clearTimeout(this._longPressTimeout);const{currentScreenPoint:z,previousScreenPoint:U}=this.inputs;this.pan(j.Sub(z,U));return}if(!Q.isDragging&&Q.isPointing&&j.Dist2(q,$)>(this.getInstanceState().isCoarsePointer?iz:vZ)/this.getZoomLevel())clearTimeout(this._longPressTimeout),Q.isDragging=!0;break}case"pointer_up":{if(Q.buttons.delete(J.button),Q.isPointing=!1,Q.isDragging=!1,this.getIsMenuOpen())return;if(!G&&this.getInstanceState().isPenMode)return;if(this.capturedPointerId===J.pointerId)this.capturedPointerId=null,J.button=0;if(Q.isPanning){if(J.button===1)if(!this.inputs.keys.has(" "))Q.isPanning=!1,this.slideCamera({speed:Math.min(2,this.inputs.pointerVelocity.len()),direction:this.inputs.pointerVelocity,friction:SY}),this.setCursor({type:this._prevCursor,rotation:0});else this.slideCamera({speed:Math.min(2,this.inputs.pointerVelocity.len()),direction:this.inputs.pointerVelocity,friction:SY}),this.setCursor({type:"grab",rotation:0});else if(J.button===0)this.slideCamera({speed:Math.min(2,this.inputs.pointerVelocity.len()),direction:this.inputs.pointerVelocity,friction:SY}),this.setCursor({type:"grab",rotation:0})}else if(J.button===5)this.complete(),this.setCurrentTool(this._restoreToolId);break}}break}case"keyboard":{if(J.key==="ShiftRight")J.key="ShiftLeft";if(J.key==="AltRight")J.key="AltLeft";if(J.code==="ControlRight")J.code="ControlLeft";switch(J.name){case"key_down":{if(Q.keys.add(J.code),!J.ctrlKey&&J.code==="Space"){if(!this.inputs.isPanning)this._prevCursor=this.getInstanceState().cursor.type;this.inputs.isPanning=!0,this.setCursor({type:this.inputs.isPointing?"grabbing":"grab",rotation:0})}break}case"key_up":{if(Q.keys.delete(J.code),J.code==="Space"&&!this.inputs.buttons.has(1))this.inputs.isPanning=!1,this.setCursor({type:this._prevCursor,rotation:0});break}case"key_repeat":break}break}}if(J.type==="pointer"){if(J.button===1)J.name="middle_click";else if(J.button===2)J.name="right_click";if(J.isPen===this.getInstanceState().isPenMode)switch(J.name){case"pointer_down":{const G=this._clickManager.transformPointerDownEvent(J);if(J.name!==G.name){this.root.handleEvent(J),this.emit("event",J),this.root.handleEvent(G),this.emit("event",G);return}break}case"pointer_up":{clearTimeout(this._longPressTimeout);const G=this._clickManager.transformPointerUpEvent(J);if(J.name!==G.name){this.root.handleEvent(J),this.emit("event",J),this.root.handleEvent(G),this.emit("event",G);return}break}case"pointer_move":{this._clickManager.handleMove();break}}}return this.root.handleEvent(J),this.emit("event",J),this}}t0([z0],n0.prototype,"getCanUndo",1);t0([z0],n0.prototype,"getCanRedo",1);t0([z0],n0.prototype,"_getArrowBindingsIndex",1);t0([z0],n0.prototype,"getArrowInfoCache",1);t0([z0],n0.prototype,"getPath",1);t0([z0],n0.prototype,"getCurrentTool",1);t0([z0],n0.prototype,"getCurrentToolId",1);t0([z0],n0.prototype,"getDocumentSettings",1);t0([z0],n0.prototype,"getInstanceState",1);t0([z0],n0.prototype,"getOpenMenus",1);t0([z0],n0.prototype,"getIsMenuOpen",1);t0([z0],n0.prototype,"getPageStates",1);t0([z0],n0.prototype,"_getPageStatesQuery",1);t0([z0],n0.prototype,"getCurrentPageState",1);t0([z0],n0.prototype,"_getCurrentPageStateId",1);t0([z0],n0.prototype,"getSelectedShapeIds",1);t0([z0],n0.prototype,"getSelectedShapes",1);t0([z0],n0.prototype,"getOnlySelectedShapeId",1);t0([z0],n0.prototype,"getOnlySelectedShape",1);t0([z0],n0.prototype,"getSelectionPageBounds",1);t0([z0],n0.prototype,"getSelectionRotation",1);t0([z0],n0.prototype,"getSelectionRotatedPageBounds",1);t0([z0],n0.prototype,"getSelectionRotatedScreenBounds",1);t0([z0],n0.prototype,"getFocusedGroupId",1);t0([z0],n0.prototype,"getFocusedGroup",1);t0([z0],n0.prototype,"getEditingShapeId",1);t0([z0],n0.prototype,"getEditingShape",1);t0([z0],n0.prototype,"getHoveredShapeId",1);t0([z0],n0.prototype,"getHoveredShape",1);t0([z0],n0.prototype,"getHintingShapeIds",1);t0([z0],n0.prototype,"getHintingShape",1);t0([z0],n0.prototype,"getErasingShapeIds",1);t0([z0],n0.prototype,"getErasingShapes",1);t0([z0],n0.prototype,"getCameraId",1);t0([z0],n0.prototype,"getCamera",1);t0([z0],n0.prototype,"getZoomLevel",1);t0([z0],n0.prototype,"getViewportScreenBounds",1);t0([z0],n0.prototype,"getViewportScreenCenter",1);t0([z0],n0.prototype,"getViewportPageBounds",1);t0([z0],n0.prototype,"getViewportPageCenter",1);t0([z0],n0.prototype,"_getCollaboratorsQuery",1);t0([z0],n0.prototype,"getCollaborators",1);t0([z0],n0.prototype,"getCollaboratorsOnCurrentPage",1);t0([z0],n0.prototype,"getRenderingShapes",1);t0([z0],n0.prototype,"_getAllPagesQuery",1);t0([z0],n0.prototype,"getPages",1);t0([z0],n0.prototype,"getCurrentPageId",1);t0([z0],n0.prototype,"getCurrentPageShapeIdsSorted",1);t0([z0],n0.prototype,"_getAllAssetsQuery",1);t0([z0],n0.prototype,"_getShapeGeometryCache",1);t0([z0],n0.prototype,"_getShapeHandlesCache",1);t0([z0],n0.prototype,"_getShapePageTransformCache",1);t0([z0],n0.prototype,"_getShapePageBoundsCache",1);t0([z0],n0.prototype,"_getShapeClipPathCache",1);t0([z0],n0.prototype,"_getShapeMaskCache",1);t0([z0],n0.prototype,"_getShapeMaskedPageBoundsCache",1);t0([z0],n0.prototype,"_notVisibleShapes",1);t0([z0],n0.prototype,"getCulledShapes",1);t0([z0],n0.prototype,"getCurrentPageBounds",1);t0([z0],n0.prototype,"getCurrentPageShapes",1);t0([z0],n0.prototype,"getCurrentPageShapesSorted",1);t0([z0],n0.prototype,"getCurrentPageRenderingShapesSorted",1);t0([z0],n0.prototype,"_getSelectionSharedStyles",1);t0([z0({isEqual:(J,Q)=>J.equals(Q)})],n0.prototype,"getSharedStyles",1);t0([z0],n0.prototype,"getSharedOpacity",1);var g1=function(){const J=h(),Q=U3();return e("isDarkMode",()=>Q?.isDarkMode??J.user.getIsDarkMode(),[Q,J])};var FX=function(J,Q,Z,q,Y,$=16,W=16){const G=(-Z-Q)*(T6/180),z=Math.sin(G),U=Math.cos(G),F=1*U-1*z,B=1*z+1*U;return`url("data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg' style='color: ${Y};'><defs><filter id='shadow' y='-40%' x='-40%' width='180px' height='180%' color-interpolation-filters='sRGB'><feDropShadow dx='${F}' dy='${B}' stdDeviation='1.2' flood-opacity='.5'/></filter></defs><g fill='none' transform='rotate(${Q+Z} 16 16)${q?" scale(-1,-1) translate(0, -32)":""}' filter='url(%23shadow)'>`+J.replaceAll('"',"'")+`</g></svg>") ${$} ${W}, pointer`},L7=function(J,Q=0,Z="black"){return tW0[J](XC(Q),!1,Z)},cu=function(){const J=h(),Q=y8(),Z=g1();W7("useCursor",()=>{const{type:q,rotation:Y}=J.getInstanceState().cursor;if(oW0.includes(q)){Q.style.setProperty("--tl-cursor",`var(--tl-cursor-${q})`);return}Q.style.setProperty("--tl-cursor",L7(q,Y,Z?"white":"black"))},[J,Q,Z])},hu="<path d='m19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill='%23fff'/><path d='m18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill='%23000'/>",uu="<path d='m9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill='%23fff'/><path d='m17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill='%23000'/>",EN='<path d="M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill="black"/><path fill-rule="evenodd" clip-rule="evenodd" d="M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill="white"/>',oW0=["default","pointer","cross","move","grab","grabbing","text","zoom-in","zoom-out"],tW0={none:()=>"none","ew-resize":(J,Q,Z)=>FX(uu,J,0,Q,Z),"ns-resize":(J,Q,Z)=>FX(uu,J,90,Q,Z),"nesw-resize":(J,Q,Z)=>FX(hu,J,0,Q,Z),"nwse-resize":(J,Q,Z)=>FX(hu,J,90,Q,Z),"nwse-rotate":(J,Q,Z)=>FX(EN,J,0,Q,Z),"nesw-rotate":(J,Q,Z)=>FX(EN,J,90,Q,Z),"senw-rotate":(J,Q,Z)=>FX(EN,J,180,Q,Z),"swne-rotate":(J,Q,Z)=>FX(EN,J,270,Q,Z)};var pu=v(o(),1);var du=function(){const J=h(),Q=y8(),Z=g1(),q=e(t8.forceSrgb);pu.default.useEffect(()=>{if(Z)Q.setAttribute("data-color-mode","dark"),Q.classList.remove("tl-theme__light"),Q.classList.add("tl-theme__dark");else Q.setAttribute("data-color-mode","light"),Q.classList.remove("tl-theme__dark"),Q.classList.add("tl-theme__light");if(q)Q.classList.add("tl-theme__force-sRGB");else Q.classList.remove("tl-theme__force-sRGB")},[J,Q,q,Z])};var BX=v(o(),1),tY=function(J){const Q=BX.useRef();return BX.useLayoutEffect(()=>{Q.current=J}),BX.useDebugValue(J),BX.useCallback((...Z)=>{const q=Q.current;return r8(q,"fn does not exist"),q(...Z)},[])};var lu=v(o(),1);var iu=function(J){const Q=h(),Z=y8();lu.useLayoutEffect(()=>{if(J){if(!Q.getInstanceState().isFocused)Q.updateInstanceState({isFocused:!0});Q.getContainer().focus()}else if(Q.getInstanceState().isFocused)Q.updateInstanceState({isFocused:!1})},[Q,Z,J])};var CN=v(o(),1),nu=function(){const[J,Q]=CN.useState(0);CN.useEffect(()=>Q((Z)=>Z+1),[])};var TN=v(o(),1);var eW0=function(){if(!NX)return!1;return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(NX.navigator.platform)||NX.navigator.userAgent.includes("Mac")&&"ontouchend"in document},J20=function(J){if(J.version<su.Initial);J.version=AN},Q20=function(J){if(!J||typeof J!=="object")return console.warn("Invalid instance state"),null;if(!("version"in J)||typeof J.version!=="number")return console.warn("No version in instance state"),null;if(J.version!==AN)J=p6(J),J20(J);try{return ru.validate(J)}catch(Q){return console.warn(Q),null}},CA=function(J){const Q=J.query.ids("page");return z0("sessionStateSnapshot",()=>{const Z=J.get(x5);if(!Z)return null;const q=[...Q.get()];return{version:AN,currentPageId:Z.currentPageId,exportBackground:Z.exportBackground,isFocusMode:Z.isFocusMode,isDebugMode:Z.isDebugMode,isToolLocked:Z.isToolLocked,isGridMode:Z.isGridMode,pageStates:q.map((Y)=>{const $=J.get(l9.createId(Y)),W=J.get(t9.createId(Y));return{pageId:Y,camera:{x:W?.x??0,y:W?.y??0,z:W?.z??1},selectedShapeIds:$?.selectedShapeIds??[],focusedGroupId:$?.focusedGroupId??null}})}})},AA=function(J,Q){const Z=Q20(Q);if(!Z)return;const q=J.allRecords().filter((W)=>W.typeName==="instance_page_state"||W.typeName==="camera"),Y={added:{},updated:{},removed:{..._Y(q.map((W)=>[W.id,W]))}};if(J.has(x5))Y.removed[x5]=J.get(x5);const $={removed:{},updated:{},added:{[x5]:J.schema.types.instance.create({id:x5,currentPageId:Z.currentPageId,isDebugMode:Z.isDebugMode,isFocusMode:Z.isFocusMode,isToolLocked:Z.isToolLocked,isGridMode:Z.isGridMode,exportBackground:Z.exportBackground})}};for(let W of Z.pageStates){const G=t9.createId(W.pageId),z=l9.createId(W.pageId);$.added[G]=t9.create({id:t9.createId(W.pageId),x:W.camera.x,y:W.camera.y,z:W.camera.z}),$.added[z]=l9.create({id:l9.createId(W.pageId),pageId:W.pageId,selectedShapeIds:W.selectedShapeIds,focusedGroupId:W.focusedGroupId})}I5(()=>{J.applyDiff(PY([Y,$])),J.ensureStoreIsUsable()})},kA=function(J){const Q=[];for(let Y of Object.values(J))if(Y.typeName?.match(/^(instance.*|pointer|camera)$/))Q.push(Y);const Z=Q.filter((Y)=>Y.typeName==="instance"&&Y.id!==x5)[0];if(!Z)return null;const q={version:AN,currentPageId:Z.currentPageId,exportBackground:!!Z.exportBackground,isFocusMode:!!Z.isFocusMode,isDebugMode:!!Z.isDebugMode,isToolLocked:!!Z.isToolLocked,isGridMode:!1,pageStates:Q.filter((Y)=>Y.typeName==="instance_page_state"&&Y.instanceId===Z.id).map((Y)=>{const $=J[Y.cameraId]??{x:0,y:0,z:1};return{pageId:Y.pageId,camera:{x:$.x,y:$.y,z:$.z},selectedShapeIds:Y.selectedShapeIds,focusedGroupId:Y.focusedGroupId}})};try{return ru.validate(q),q}catch(Y){return null}},vW="TLDRAW_TAB_ID_v2",NX=globalThis.window,SW=NX?NX[vW]??eH(vW)??"TLDRAW_INSTANCE_STATE_V1_"+u6():"<error>";if(NX)if(NX[vW]=SW,eW0())o$(vW,SW);else Jz(vW);NX?.addEventListener("beforeunload",()=>{o$(vW,SW)});var su={Initial:0},AN=Math.max(...Object.values(su)),ru=f.object({version:f.number,currentPageId:PZ,isFocusMode:f.boolean,exportBackground:f.boolean,isDebugMode:f.boolean,isToolLocked:f.boolean,isGridMode:f.boolean,pageStates:f.arrayOf(f.object({pageId:PZ,camera:f.object({x:f.number,y:f.number,z:f.number}),selectedShapeIds:f.arrayOf(H7),focusedGroupId:H7.nullable()}))});var au=function(){window.alert(`Oops! We could not save changes to your browser's storage. We now need to reload the page and try again.

Keep seeing this message?
\u2022 If you're using tldraw in a private or "incognito" window, try loading tldraw in a regular window or in a different browser.
\u2022 If your hard disk is full, try clearing up some space and then reload the page.`)},ou=function(){window.alert(`Oops! We could not access your browser's storage\u2014and the app won't work correctly without that. We now need to reload the page and try again.

Keep seeing this message?
\u2022 If you're using tldraw in a private or "incognito" window, try loading tldraw in a regular window or in a different browser.`)};var q20=function(){return tu||(tu=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])},X20=function(){return eu||(eu=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])},Y20=function(J){const Q=new Promise((Z,q)=>{const Y=()=>{J.removeEventListener("success",$),J.removeEventListener("error",W)},$=()=>{Z(m1(J.result)),Y()},W=()=>{q(J.error),Y()};J.addEventListener("success",$),J.addEventListener("error",W)});return Q.then((Z)=>{if(Z instanceof IDBCursor)Jc.set(Z,J)}).catch(()=>{}),TA.set(Q,J),Q},K20=function(J){if(IA.has(J))return;const Q=new Promise((Z,q)=>{const Y=()=>{J.removeEventListener("complete",$),J.removeEventListener("error",W),J.removeEventListener("abort",W)},$=()=>{Z(),Y()},W=()=>{q(J.error||new DOMException("AbortError","AbortError")),Y()};J.addEventListener("complete",$),J.addEventListener("error",W),J.addEventListener("abort",W)});IA.set(J,Q)},Zc=function(J){PA=J(PA)},$20=function(J){if(J===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype))return function(Q,...Z){const q=J.call(kN(this),Q,...Z);return Qc.set(q,Q.sort?Q.sort():[Q]),m1(q)};if(X20().includes(J))return function(...Q){return J.apply(kN(this),Q),m1(Jc.get(this))};return function(...Q){return m1(J.apply(kN(this),Q))}},W20=function(J){if(typeof J==="function")return $20(J);if(J instanceof IDBTransaction)K20(J);if(Z20(J,q20()))return new Proxy(J,PA);return J},m1=function(J){if(J instanceof IDBRequest)return Y20(J);if(wA.has(J))return wA.get(J);const Q=W20(J);if(Q!==J)wA.set(J,Q),TA.set(Q,J);return Q},Z20=(J,Q)=>Q.some((Z)=>J instanceof Z),tu,eu,Jc=new WeakMap,IA=new WeakMap,Qc=new WeakMap,wA=new WeakMap,TA=new WeakMap,PA={get(J,Q,Z){if(J instanceof IDBTransaction){if(Q==="done")return IA.get(J);if(Q==="objectStoreNames")return J.objectStoreNames||Qc.get(J);if(Q==="store")return Z.objectStoreNames[1]?void 0:Z.objectStore(Z.objectStoreNames[0])}return m1(J[Q])},set(J,Q,Z){return J[Q]=Z,!0},has(J,Q){if(J instanceof IDBTransaction&&(Q==="done"||Q==="store"))return!0;return Q in J}},kN=(J)=>TA.get(J);var Xc=function(J,Q,{blocked:Z,upgrade:q,blocking:Y,terminated:$}={}){const W=indexedDB.open(J,Q),G=m1(W);if(q)W.addEventListener("upgradeneeded",(z)=>{q(m1(W.result),z.oldVersion,z.newVersion,m1(W.transaction),z)});if(Z)W.addEventListener("blocked",(z)=>Z(z.oldVersion,z.newVersion,z));return G.then((z)=>{if($)z.addEventListener("close",()=>$());if(Y)z.addEventListener("versionchange",(U)=>Y(U.oldVersion,U.newVersion,U))}).catch(()=>{}),G},Yc=function(J,{blocked:Q}={}){const Z=indexedDB.deleteDatabase(J);if(Q)Z.addEventListener("blocked",(q)=>Q(q.oldVersion,q));return m1(Z).then(()=>{return})},qc=function(J,Q){if(!(J instanceof IDBDatabase&&!(Q in J)&&typeof Q==="string"))return;if(bA.get(Q))return bA.get(Q);const Z=Q.replace(/FromIndex$/,""),q=Q!==Z,Y=H20.includes(Z);if(!(Z in(q?IDBIndex:IDBObjectStore).prototype)||!(Y||G20.includes(Z)))return;const $=async function(W,...G){const z=this.transaction(W,Y?"readwrite":"readonly");let U=z.store;if(q)U=U.index(G.shift());return(await Promise.all([U[Z](...G),Y&&z.done]))[0]};return bA.set(Q,$),$},G20=["get","getKey","getAll","getAllKeys","count"],H20=["put","add","delete","clear"],bA=new Map;Zc((J)=>({...J,get:(Q,Z,q)=>qc(Q,Z)||J.get(Q,Z,q),has:(Q,Z)=>!!qc(Q,Z)||J.has(Q,Z)}));async function IN(J,Q){U20(J);const Z=await Xc(J,3,{upgrade(q){if(!q.objectStoreNames.contains(l8.Records))q.createObjectStore(l8.Records);if(!q.objectStoreNames.contains(l8.Schema))q.createObjectStore(l8.Schema);if(!q.objectStoreNames.contains(l8.SessionState))q.createObjectStore(l8.SessionState)}});try{return await Q(Z)}finally{Z.close()}}async function $c({persistenceKey:J,sessionId:Q,didCancel:Z}){const q=wN+J;if(!PN().includes(q))return;return await z20({persistenceKey:J,didCancel:Z}),await IN(q,async(Y)=>{if(Z?.())return;const $=Y.transaction([l8.Records,l8.Schema,l8.SessionState],"readonly"),W=$.objectStore(l8.Records),G=$.objectStore(l8.Schema),z=$.objectStore(l8.SessionState);let U=Q?(await z.get(Q))?.snapshot:null;if(!U)U=(await z.getAll()).sort((M,O)=>M.updatedAt-O.updatedAt).pop()?.snapshot;const F={records:await W.getAll(),schema:await G.get(l8.Schema),sessionStateSnapshot:U};if(Z?.()){$.abort();return}return await $.done,F})}async function Wc({persistenceKey:J,schema:Q,changes:Z,sessionId:q,sessionStateSnapshot:Y,didCancel:$}){const W=wN+J;await IN(W,async(G)=>{const z=G.transaction([l8.Records,l8.Schema,l8.SessionState],"readwrite"),U=z.objectStore(l8.Records),F=z.objectStore(l8.Schema),B=z.objectStore(l8.SessionState);for(let[M,O]of Object.entries(Z.added))await U.put(O,M);for(let[M,O]of Object.values(Z.updated))await U.put(O,O.id);for(let M of Object.keys(Z.removed))await U.delete(M);if(F.put(Q.serialize(),l8.Schema),Y&&q)B.put({snapshot:Y,updatedAt:Date.now(),id:q},q);else if(Y||q)console.error("sessionStateSnapshot and instanceId must be provided together");if($?.())return z.abort();await z.done})}async function Gc({persistenceKey:J,schema:Q,snapshot:Z,sessionId:q,sessionStateSnapshot:Y,didCancel:$}){const W=wN+J;await IN(W,async(G)=>{const z=G.transaction([l8.Records,l8.Schema,l8.SessionState],"readwrite"),U=z.objectStore(l8.Records),F=z.objectStore(l8.Schema),B=z.objectStore(l8.SessionState);await U.clear();for(let[M,O]of Object.entries(Z))await U.put(O,M);if(F.put(Q.serialize(),l8.Schema),Y&&q)B.put({snapshot:Y,updatedAt:Date.now(),id:q},q);else if(Y||q)console.error("sessionStateSnapshot and instanceId must be provided together");if($?.())return z.abort();await z.done})}async function z20({persistenceKey:J,didCancel:Q}){await IN(wN+J,async(Z)=>{const q=Z.transaction([l8.SessionState],"readwrite"),Y=q.objectStore(l8.SessionState),$=(await Y.getAll()).sort((G,z)=>G.updatedAt-z.updatedAt);if($.length<10){await q.done;return}const W=$.slice(0,$.length-10);for(let{id:G}of W)await Y.delete(G);if(Q?.())return q.abort();await q.done})}var PN=function(){const J=JSON.parse(EY(Kc)||"[]")??[];if(!Array.isArray(J))return[];return J},U20=function(J){const Q=new Set(PN());Q.add(J),CY(Kc,JSON.stringify([...Q]))},wN="TLDRAW_DOCUMENT_v2",Kc="TLDRAW_DB_NAME_INDEX_v2",l8={Records:"records",Schema:"schema",SessionState:"session_state"};var L20=350,F20=1e4,Hc=Symbol("UPDATE_INSTANCE_STATE"),B20=(J)=>J;class zc{onmessage;constructor(J){}postMessage(J){}close(){}}var N20=typeof BroadcastChannel==="undefined"?zc:BroadcastChannel;class xA{constructor(J,{persistenceKey:Q,sessionId:Z=SW,onLoad:q,onLoadError:Y},$=new N20(`tldraw-tab-sync-${Q}`)){if(this.store=J,this.channel=$,typeof window!=="undefined")window.tlsync=this;this.persistenceKey=Q,this.sessionId=Z,this.serializedSchema=this.store.schema.serialize(),this.$sessionStateSnapshot=CA(this.store),this.disposables.add(J.listen(({changes:W})=>{this.diffQueue.push(W),this.channel.postMessage(B20({type:"diff",storeId:this.store.id,changes:W,schema:this.serializedSchema})),this.schedulePersist()},{source:"user",scope:"document"})),this.disposables.add(J.listen(()=>{this.diffQueue.push(Hc),this.schedulePersist()},{scope:"session"})),this.connect(q,Y),this.documentTypes=new Set(Object.values(this.store.schema.types).filter((W)=>W.scope==="document").map((W)=>W.typeName))}disposables=new Set;diffQueue=[];didDispose=!1;shouldDoFullDBWrite=!0;isReloading=!1;persistenceKey;sessionId;serializedSchema;isDebugging=!1;documentTypes;$sessionStateSnapshot;initTime=Date.now();debug(...J){if(this.isDebugging)console.debug(...J)}async connect(J,Q){this.debug("connecting");let Z;try{Z=await $c({persistenceKey:this.persistenceKey,sessionId:this.sessionId,didCancel:()=>this.didDispose})}catch(q){if(Q(q),ou(),typeof window!=="undefined")window.location.reload();return}if(this.debug("loaded data from store",Z,"didDispose",this.didDispose),this.didDispose)return;try{if(Z){const q=Object.fromEntries(Z.records.map((W)=>[W.id,W])),Y=Z.sessionStateSnapshot??kA(q),$=this.store.schema.migrateStoreSnapshot({store:q,schema:Z.schema??this.store.schema.serializeEarliestVersion()});if($.type==="error"){console.error("failed to migrate store",$),Q(new Error(`Failed to migrate store: ${$.reason}`));return}if(this.store.mergeRemoteChanges(()=>{this.store.put(Object.values($.value).filter((W)=>this.documentTypes.has(W.typeName)),"initialize")}),Y)AA(this.store,Y)}this.channel.onmessage=({data:q})=>{this.debug("got message",q);const Y=q,$=this.store.schema.getMigrationsSince(Y.schema);if(!$.ok){if(Date.now()-this.initTime<5000){Q(new Error("Schema mismatch, please close other tabs and reload the page"));return}this.debug("reloading"),this.isReloading=!0,window?.location?.reload?.();return}else if($.value.length>0){this.debug("telling them to reload"),this.channel.postMessage({type:"announce",schema:this.serializedSchema}),this.shouldDoFullDBWrite=!0,this.persistIfNeeded();return}if(Y.type==="diff")this.debug("applying diff"),I5(()=>{this.store.mergeRemoteChanges(()=>{this.store.applyDiff(Y.changes),this.store.ensureStoreIsUsable()})})},this.channel.postMessage({type:"announce",schema:this.serializedSchema}),this.disposables.add(()=>{this.channel.close()}),J(this)}catch(q){if(this.debug("error loading data from store",q),this.didDispose)return;Q(q);return}}close(){this.debug("closing"),this.didDispose=!0,this.disposables.forEach((J)=>J())}isPersisting=!1;didLastWriteError=!1;scheduledPersistTimeout=null;schedulePersist(){if(this.debug("schedulePersist",this.scheduledPersistTimeout),this.scheduledPersistTimeout)return;this.scheduledPersistTimeout=setTimeout(()=>{this.scheduledPersistTimeout=null,this.persistIfNeeded()},this.didLastWriteError?F20:L20)}persistIfNeeded(){if(this.debug("persistIfNeeded",{isPersisting:this.isPersisting,isReloading:this.isReloading,shouldDoFullDBWrite:this.shouldDoFullDBWrite,diffQueueLength:this.diffQueue.length,storeIsPossiblyCorrupt:this.store.isPossiblyCorrupted()}),this.scheduledPersistTimeout)clearTimeout(this.scheduledPersistTimeout),this.scheduledPersistTimeout=null;if(this.isPersisting)return;if(this.isReloading)return;if(this.store.isPossiblyCorrupted())return;if(this.shouldDoFullDBWrite||this.diffQueue.length>0)this.doPersist()}async doPersist(){r8(!this.isPersisting,"persist already in progress"),this.isPersisting=!0,this.debug("doPersist start");const J=this.diffQueue;this.diffQueue=[];try{if(this.shouldDoFullDBWrite)this.shouldDoFullDBWrite=!1,await Gc({persistenceKey:this.persistenceKey,schema:this.store.schema,snapshot:this.store.serialize(),didCancel:()=>this.didDispose,sessionId:this.sessionId,sessionStateSnapshot:this.$sessionStateSnapshot.get()});else{const Q=PY(J.filter((Z)=>Z!==Hc));await Wc({persistenceKey:this.persistenceKey,changes:Q,schema:this.store.schema,didCancel:()=>this.didDispose,sessionId:this.sessionId,sessionStateSnapshot:this.$sessionStateSnapshot.get()})}this.didLastWriteError=!1}catch(Q){if(this.shouldDoFullDBWrite=!0,this.didLastWriteError=!0,console.error("failed to store changes in indexed db",Q),au(),typeof window!=="undefined")window.location.reload()}this.isPersisting=!1,this.debug("doPersist end"),this.schedulePersist()}}var Lc=v(o(),1);var fW=function({initialData:J,defaultName:Q="",...Z}){const q="schema"in Z&&Z.schema?Z.schema:tE({shapes:M20(ON("shapeUtils"in Z&&Z.shapeUtils?Z.shapeUtils:[])),migrations:"migrations"in Z?Z.migrations:[]});return new ZW({schema:q,initialData:J,props:{defaultName:Q}})},M20=function(J){return Object.fromEntries(J.map((Q)=>[Q.type,{props:Q.props,migrations:Q.migrations}]))};var Uc=function(J){const Q=fW(J);if(J.snapshot)Q.loadSnapshot(J.snapshot);return{store:Q,opts:J}},B3=function(J){const[Q,Z]=Lc.useState(()=>Uc(J));if(!aH(Q.opts,J)){const q=Uc(J);return Z(q),q.store}return Q.store};var yA=function({persistenceKey:J,sessionId:Q,...Z}){const[q,Y]=TN.useState(null),$=B3(Z);return TN.useEffect(()=>{const W=u6();if(!J){Y({id:W,storeWithStatus:{status:"not-synced",store:$}});return}Y({id:W,storeWithStatus:{status:"loading"}});const G=(U)=>{Y((F)=>{if(F?.id===W)return{id:W,storeWithStatus:U};return F})},z=new xA($,{sessionId:Q,persistenceKey:J,onLoad(){G({store:$,status:"synced-local"})},onLoadError(U){G({status:"error",error:U})}});return()=>{Y((U)=>U?.id===W?null:U),z.close()}},[J,$,Q]),q?.storeWithStatus??{status:"loading"}};var Fc=v(o(),1);var Nc=function(){const J=h();Fc.useEffect(()=>{if(!Bc)return;function Q(Z){if(Z.target instanceof HTMLInputElement&&Z.target.type==="text"||Z.target instanceof HTMLTextAreaElement)J.complete()}return document.addEventListener("focusout",Q),()=>document.removeEventListener("focusout",Q)},[J])},Bc=!1;if(typeof window!=="undefined"){const J=window.navigator.userAgent,Q=!!J.match(/iPad/i)||!!J.match(/iPhone/i),Z=!!J.match(/WebKit/i);Bc=Q&&Z&&!J.match(/CriOS/i)}var Mc=v(o(),1);var Oc=function(){const J=h(),Q=y8();Mc.useEffect(()=>{const Z=($)=>Q.style.setProperty("--tl-zoom",$.toString()),q=sH(Z,100),Y=new s4("useZoomCss",()=>{if(J.getCurrentPageShapeIds().size<300)Z(J.getZoomLevel());else q(J.getZoomLevel())});return Y.attach(),Y.execute(),()=>{Y.detach()}},[J,Q])};var D20=function(J){const{defaultName:Q,snapshot:Z,initialData:q,shapeUtils:Y,persistenceKey:$,sessionId:W,user:G}=J,z=yA({shapeUtils:Y,initialData:q,persistenceKey:$,sessionId:W,defaultName:Q,snapshot:Z});return Z5.jsx(Dc,{...J,store:z,user:G})},Rc=function({onMount:J,children:Q,store:Z,tools:q,shapeUtils:Y,user:$,initialState:W,autoFocus:G=!0,inferDarkMode:z}){const{ErrorFallback:U}=k8(),F=y8(),[B,M]=DJ.useState(null);DJ.useLayoutEffect(()=>{const V=new n0({store:Z,shapeUtils:Y,tools:q,getContainer:()=>F,user:$,initialState:W,inferDarkMode:z});return M(V),()=>{V.dispose()}},[F,Y,q,Z,$,W,z]);const O=DJ.useSyncExternalStore(DJ.useCallback((V)=>{if(B)return B.on("crash",V),()=>B.off("crash",V);return()=>{}},[B]),()=>B?.getCrashingError()??null),{Canvas:R}=k8();if(!B)return null;return Z5.jsx(xZ,{fallback:U,onError:(V)=>B.annotateError(V,{origin:"react.tldraw",willCrashApp:!0}),children:O?Z5.jsx(j20,{crashingError:O}):Z5.jsx(XX.Provider,{value:B,children:Z5.jsx(R20,{autoFocus:G,onMount:J,children:Q??(R?Z5.jsx(R,{}):null)})})})},R20=function({children:J,onMount:Q,autoFocus:Z}){return Oc(),cu(),du(),Nc(),nu(),iu(Z),_20(Q),Z5.jsx(Z5.Fragment,{children:J})},j20=function({crashingError:J}){throw J},N3=function({children:J}){return Z5.jsx("div",{className:"tl-loading",children:J})},M3=function({children:J}){return Z5.jsx("div",{className:"tl-loading",children:J})},_20=function(J){const Q=h(),Z=tY((q)=>{const Y=J?.(q);return q.emit("mount"),window.tldrawReady=!0,Y});DJ.default.useLayoutEffect(()=>{if(Q)return Z?.(Q)},[Q,Z])},O20=[],V20=[],vA=DJ.memo(function J({store:Q,components:Z,className:q,user:Y,...$}){const[W,G]=DJ.default.useState(null),z=DJ.useMemo(()=>Y??K3(),[Y]),U=Z?.ErrorFallback===void 0?q3:Z?.ErrorFallback,F={...$,shapeUtils:$.shapeUtils??O20,tools:$.tools??V20,components:Z};return Z5.jsx("div",{ref:G,draggable:!1,className:Vc.default("tl-container tl-theme__light",q),onPointerDown:d8,tabIndex:-1,children:Z5.jsx(xZ,{fallback:U,onError:(B)=>jY(B,{tags:{origin:"react.tldraw-before-app"}}),children:W&&Z5.jsx(NC,{container:W,children:Z5.jsx(Yu,{overrides:Z,children:Q?Q instanceof ZW?Z5.jsx(Rc,{...F,store:Q,user:z}):Z5.jsx(Dc,{...F,store:Q,user:z}):Z5.jsx(D20,{...F,store:Q,user:z})})})})})}),Dc=DJ.memo(function J({store:Q,user:Z,...q}){const Y=y8();DJ.useLayoutEffect(()=>{if(Z.userPreferences.get().isDarkMode)Y.classList.remove("tl-theme__light"),Y.classList.add("tl-theme__dark")},[Y,Z]);const{LoadingScreen:$}=k8();switch(Q.status){case"error":throw Q.error;case"loading":return $?Z5.jsx($,{}):null;case"not-synced":break;case"synced-local":break;case"synced-remote":break}return Z5.jsx(Rc,{...q,store:Q.store,user:Z})});var jc=v(W0(),1),_c=v(p8(),1),P4=function({children:J,className:Q="",...Z}){return jc.jsx("div",{...Z,className:_c.default("tl-html-container",Q),children:J})};var O3=function(J,Q,Z={}){const{newPoint:q,handle:Y,scaleX:$,scaleY:W}=Q,{minWidth:G=1,maxWidth:z=Infinity,minHeight:U=1,maxHeight:F=Infinity}=Z;let B=J.props.w*$,M=J.props.h*W;const O=new j(0,0);if(B>0){if(B<G){switch(Y){case"top_left":case"left":case"bottom_left":{O.x=B-G;break}case"top":case"bottom":{O.x=(B-G)/2;break}default:O.x=0}B=G}}else if(O.x=B,B=-B,B<G){switch(Y){case"top_left":case"left":case"bottom_left":{O.x=-B;break}default:O.x=-G}B=G}if(M>0){if(M<U){switch(Y){case"top_left":case"top":case"top_right":{O.y=M-U;break}case"right":case"left":{O.y=(M-U)/2;break}default:O.y=0}M=U}}else if(O.y=M,M=-M,M<U){switch(Y){case"top_left":case"top":case"top_right":{O.y=-M;break}default:O.y=-U}M=U}const{x:R,y:V}=O.rot(J.rotation).add(q);return{x:R,y:V,props:{w:Math.min(z,B),h:Math.min(F,M)}}};class p7 extends qJ{getGeometry(J){return new ZJ({width:J.props.w,height:J.props.h,isFilled:!0})}onResize=(J,Q)=>{return O3(J,Q)};getHandleSnapGeometry(J){return{points:this.getGeometry(J).bounds.cornersAndCenter}}}class SA extends B0{static id="idle";onPointerDown=(J)=>{this.parent.transition("pointing",J)};onEnter=()=>{this.editor.setCursor({type:"cross",rotation:0})};onCancel=()=>{this.editor.setCurrentTool("select")}}class fA extends B0{static id="pointing";markId="";wasFocusedOnEnter=!1;onEnter=()=>{this.wasFocusedOnEnter=!this.editor.getIsMenuOpen()};onPointerMove=(J)=>{if(this.editor.inputs.isDragging){const{originPagePoint:Q}=this.editor.inputs,Z=this.parent.shapeType,q=v6();this.markId=`creating:${q}`,this.editor.mark(this.markId),this.editor.createShapes([{id:q,type:Z,x:Q.x,y:Q.y,props:{w:1,h:1}}]).select(q),this.editor.setCurrentTool("select.resizing",{...J,target:"selection",handle:"bottom_right",isCreating:!0,creationCursorOffset:{x:1,y:1},onInteractionEnd:this.parent.id,onCreate:this.parent.onCreate})}};onPointerUp=()=>{this.complete()};onCancel=()=>{this.cancel()};onComplete=()=>{this.complete()};onInterrupt=()=>{this.cancel()};complete(){const{originPagePoint:J}=this.editor.inputs;if(!this.wasFocusedOnEnter)return;this.editor.mark(this.markId);const Q=this.parent.shapeType,Z=v6();this.editor.mark(this.markId),this.editor.createShapes([{id:Z,type:Q,x:J.x,y:J.y}]);const q=this.editor.getShape(Z),{w:Y,h:$}=this.editor.getShapeUtil(q).getDefaultProps(),W=new j(Y/2,$/2),G=this.editor.getShapeParentTransform(q);if(G)W.rot(-G.rotation());if(this.editor.updateShapes([{id:Z,type:Q,x:q.x-W.x,y:q.y-W.y}]),this.editor.setSelectedShapes([Z]),this.editor.getInstanceState().isToolLocked)this.parent.transition("idle");else this.editor.setCurrentTool("select.idle")}cancel(){this.parent.transition("idle")}}class bN extends B0{static id="box";static initial="idle";static children=()=>[SA,fA];onCreate}var gZ=function(J){const Q=h();return e("isEditing",()=>Q.getEditingShapeId()===J,[Q,J])};var Ec=v(o(),1),gA=function(){return Ec.useId().replace(/:/g,"_")};var Cc=v(o(),1);var Q1=function(J){const Q=h();return Cc.useMemo(function q(){const Y=(U)=>{if(U.isKilled)return;if(U.button===2){Q.dispatch({type:"pointer",target:"selection",handle:J,name:"right_click",...Q5(U)});return}if(U.button!==0)return;const F=fY(U.currentTarget);function B(){F.removeEventListener("pointerup",B),x1(F,U)}b1(F,U),F.addEventListener("pointerup",B),Q.dispatch({name:"pointer_down",type:"pointer",target:"selection",handle:J,...Q5(U)}),d8(U)};let $,W;function G(U){if(U.isKilled)return;if(U.button!==0)return;if(U.clientX===$&&U.clientY===W)return;$=U.clientX,W=U.clientY,Q.dispatch({name:"pointer_move",type:"pointer",target:"selection",handle:J,...Q5(U)})}return{onPointerDown:Y,onPointerMove:G,onPointerUp:(U)=>{if(U.isKilled)return;if(U.button!==0)return;Q.dispatch({name:"pointer_up",type:"pointer",target:"selection",handle:J,...Q5(U)})}}},[Q,J])};var gW=function(J,Q=20){return Math.max(8,Math.ceil(J/Q))};class mW extends VJ{_center;radius;start;end;measure;length;angleStart;angleEnd;constructor(J){super({...J,isFilled:!1,isClosed:!1});const{center:Q,radius:Z,sweepFlag:q,largeArcFlag:Y,start:$,end:W}=J;if($.equals(W))throw Error("Arc must have different start and end points.");this.angleStart=j.Angle(Q,$),this.angleEnd=j.Angle(Q,W),this.measure=YC(this.angleStart,this.angleEnd,q,Y),this.length=this.measure*Z,this.start=$,this.end=W,this._center=Q,this.radius=Z}nearestPoint(J){const{_center:Q,measure:Z,radius:q,angleEnd:Y,angleStart:$,start:W,end:G}=this,z=OW(Z,$,Y,Q.angle(J));if(z<=0)return W;if(z>=1)return G;const U=Q.clone().add(J.clone().sub(Q).uni().mul(q));let F,B=Infinity,M;for(let O of[W,G,U])if(M=j.Dist2(J,O),M<B)F=O,B=M;if(!F)throw Error("nearest point not found");return F}hitTestLineSegment(J,Q){const{_center:Z,radius:q,measure:Y,angleStart:$,angleEnd:W}=this,G=dY(J,Q,Z,q);if(G===null)return!1;return G.some((z)=>{const U=OW(Y,$,W,Z.angle(z));return U>=0&&U<=1})}getVertices(){const{_center:J,measure:Q,length:Z,radius:q,angleStart:Y}=this,$=[];for(let W=0,G=gW(Math.abs(Z));W<G+1;W++){const z=W/G*Q,U=Y+z;$.push(t4(J,q,U))}return $}}class MX extends VJ{constructor(J){super({isClosed:!0,...J});this.config=J;const{x:Q=0,y:Z=0,radius:q}=J;this.x=Q,this.y=Z,this._center=new j(q+Q,q+Z),this.radius=q}_center;radius;x;y;getBounds(){return new V0(this.x,this.y,this.radius*2,this.radius*2)}getVertices(){const{_center:J,radius:Q}=this,Z=d6*Q,q=[];for(let Y=0,$=gW(Z);Y<$;Y++){const W=Y/$*d6;q.push(t4(J,Q,W))}return q}nearestPoint(J){const{_center:Q,radius:Z}=this;if(Q.equals(J))return j.AddXY(Q,Z,0);return Q.clone().add(J.clone().sub(Q).uni().mul(Z))}hitTestLineSegment(J,Q,Z=0){const{_center:q,radius:Y}=this;return dY(J,Q,q,Y+Z)!==null}}var E20=function(J,Q){const{a:Z,b:q,c:Y,d:$}=J;return new j((1-Q)*(1-Q)*(1-Q)*Z.x+3*((1-Q)*(1-Q))*Q*q.x+3*(1-Q)*(Q*Q)*Y.x+Q*Q*Q*$.x,(1-Q)*(1-Q)*(1-Q)*Z.y+3*((1-Q)*(1-Q))*Q*q.y+3*(1-Q)*(Q*Q)*Y.y+Q*Q*Q*$.y)};class xN extends hJ{a;b;c;d;constructor(J){const{start:Q,cp1:Z,cp2:q,end:Y}=J;super({...J,points:[Q,Y]});this.a=Q,this.b=Z,this.c=q,this.d=Y}getVertices(){const J=[],{a:Q,b:Z,c:q,d:Y}=this;for(let $=0,W=10;$<=W;$++){const G=$/W;J.push(new j((1-G)*(1-G)*(1-G)*Q.x+3*((1-G)*(1-G))*G*Z.x+3*(1-G)*(G*G)*q.x+G*G*G*Y.x,(1-G)*(1-G)*(1-G)*Q.y+3*((1-G)*(1-G))*G*Z.y+3*(1-G)*(G*G)*q.y+G*G*G*Y.y))}return J}midPoint(){return E20(this,0.5)}nearestPoint(J){let Q,Z=Infinity,q,Y;for(let $ of this.segments)if(Y=$.nearestPoint(J),q=j.Dist2(Y,J),q<Z)Q=Y,Z=q;if(!Q)throw Error("nearest point not found");return Q}}class yN extends VJ{points;constructor(J){super({...J,isClosed:!1,isFilled:!1});const{points:Q}=J;this.points=Q}_segments;get segments(){if(!this._segments){this._segments=[];const{points:J}=this,Q=J.length,Z=Q-2,q=1.25;for(let Y=0;Y<Q-1;Y++){const $=Y===0?J[0]:J[Y-1],W=J[Y],G=J[Y+1],z=Y===Z?G:J[Y+2],U=W,F=Y===0?$:new j(W.x+(G.x-$.x)/6*q,W.y+(G.y-$.y)/6*q),B=Y===Z?G:new j(G.x-(z.x-W.x)/6*q,G.y-(z.y-W.y)/6*q),M=G;this._segments.push(new xN({start:U,cp1:F,cp2:B,end:M}))}}return this._segments}_length;get length(){if(!this._length)this._length=this.segments.reduce((J,Q)=>J+Q.length,0);return this._length}getVertices(){const J=this.segments.reduce((Q,Z)=>{return Q.concat(Z.vertices)},[]);return J.push(this.points[this.points.length-1]),J}nearestPoint(J){let Q,Z=Infinity,q,Y;for(let $ of this.segments)if(Y=$.nearestPoint(J),q=j.Dist2(Y,J),q<Z)Q=Y,Z=q;if(!Q)throw Error("nearest point not found");return Q}hitTestLineSegment(J,Q){return this.segments.some((Z)=>Z.hitTestLineSegment(J,Q))}}class hW extends VJ{constructor(J){super({...J,isClosed:!0});this.config=J;const{width:Q,height:Z}=J;this.w=Q,this.h=Z}w;h;_edges;get edges(){if(!this._edges){const{vertices:J}=this;this._edges=[];for(let Q=0,Z=J.length;Q<Z;Q++){const q=J[Q],Y=J[(Q+1)%Z];this._edges.push(new f1({start:q,end:Y}))}}return this._edges}getVertices(){const J=Math.max(1,this.w),Q=Math.max(1,this.h),Z=J/2,q=Q/2,Y=Math.pow(Z-q,2)/Math.pow(Z+q,2),$=T6*(Z+q)*(1+3*Y/(10+Math.sqrt(4-3*Y))),W=gW($),G=d6/W,z=Math.cos(G),U=Math.sin(G);let F=0,B=1,M=0,O=1;const R=Array(W);for(let V=0;V<W;V++)R[V]=new j(Z+Z*B,q+q*F),M=U*B+z*F,O=z*B-U*F,F=M,B=O;return R}nearestPoint(J){let Q,Z=Infinity,q,Y;for(let $ of this.edges)if(Y=$.nearestPoint(J),q=j.Dist2(Y,J),q<Z)Q=Y,Z=q;if(!Q)throw Error("nearest point not found");return Q}hitTestLineSegment(J,Q){return this.edges.some((Z)=>Z.hitTestLineSegment(J,Q))}getBounds(){return new V0(0,0,this.w,this.h)}}var mZ=18;class vN extends hW{constructor(J){super({...J});this.config=J}getVertices(){const J=Math.max(1,this.w),Q=Math.max(1,this.h),Z=J/2,q=Q/2,Y=Array(mZ);let $,W;if(Q>J)for(let G=0;G<mZ-1;G++)$=-T6+T6*G/(mZ-2),W=T6*G/(mZ-2),Y[G]=new j(Z+Z*Math.cos($),Z+Z*Math.sin($)),Y[G+(mZ-1)]=new j(Z+Z*Math.cos(W),Q-Z+Z*Math.sin(W));else for(let G=0;G<mZ-1;G++)$=-t6+T6*G/(mZ-2),W=t6+T6*-G/(mZ-2),Y[G]=new j(J-q+q*Math.cos($),Q-q+q*Math.sin($)),Y[G+(mZ-1)]=new j(q-q*Math.cos(W),Q-q+q*Math.sin(W));return Y}}var Ac=function(J,Q,Z,q,Y){const $=Am,W=Z?km:0,G=J-W,z=J+W,U=q?0:$,F=Y?Q:Q-$;if(G<U)return Math.min(1,(U-G)/$);else if(z>F)return-Math.min(1,(z-F)/$);return 0},eY=function(J){if(!J.inputs.isDragging||J.inputs.isPanning||!J.getInstanceState().canMoveCamera)return;const{inputs:{currentScreenPoint:{x:Q,y:Z}}}=J,q=J.getZoomLevel(),Y=J.getViewportScreenBounds(),$=Y.w<1000?0.612:1,W=Y.h<1000?0.612:1,{isCoarsePointer:G,insets:[z,U,F,B]}=J.getInstanceState(),M=Ac(Q,Y.w,G,B,U),O=Ac(Z,Y.h,G,z,F);if(M===0&&O===0)return;const R=J.user.getEdgeScrollSpeed()*Cm,V=R*M*$/q,E=R*O*W/q,_=J.getCamera();J.setCamera({x:_.x+V,y:_.y+E})};async function mA({shouldReload:J=!0}={}){if(ME(),await Promise.all(PN().map((Q)=>Yc(Q))),NE(),J)window.location.reload()}if(typeof window!=="undefined")window.hardReset=mA,window.__tldraw__hardReset=mA;var hA=function(J,Q="_blank"){pY.openWindow(J,Q)};var Nl0=v(id(),1),Ml0=v(_l(),1),Ol0=v(Il(),1),Vl0=v(vl(),1),Dl0=v(Ii(),1);var ZF0=function(J){return J.getSelectedShapeIds().map((q)=>{return J.getShape(q)}).filter((q)=>{if(!q)return!1;if(J.isShapeOfType(q,"arrow")&&q.props.start.type==="binding")return!1;if(J.isShapeOfType(q,"arrow")&&q.props.end.type==="binding")return!1;return!0})},Ti=function(J,Q){const Z=h();return e("selectedShapes",()=>{const q=Z.getSelectedShapes().length;if(J===void 0)if(Q===void 0)return q;else return q<=Q;else if(Q===void 0)return q>=J;else return q>=J&&q<=Q},[Z,J,Q])},XJ=function(J,Q){const Z=h();return e("selectedShapes",()=>{const q=Z.getSelectedShapes().filter((Y)=>!Z.isShapeOrAncestorLocked(Y)).length;if(J===void 0)if(Q===void 0)return q;else return q<=Q;else if(Q===void 0)return q>=J;else return q>=J&&q<=Q},[Z])},bi=function(){const J=h();return e("showAutoSizeToggle",()=>{const Q=J.getSelectedShapes();return Q.length===1&&J.isShapeOfType(Q[0],"text")&&Q[0].props.autoSize===!1},[J])},GM=function(){const J=h();return e("hasLinkShapeSelected",()=>{const Q=J.getOnlySelectedShape();return!!(Q&&Q.type!=="embed"&&("url"in Q.props)&&!Q.isLocked)},[J])},xi=function(){const J=h();return e("onlyFlippableShape",()=>{const Q=J.getOnlySelectedShape();return Q&&(J.isShapeOfType(Q,"group")||J.isShapeOfType(Q,"arrow")||J.isShapeOfType(Q,"line")||J.isShapeOfType(Q,"draw"))},[J])},k3=function(){const J=h();return e("useCanRedo",()=>J.getCanRedo(),[J])},w3=function(){const J=h();return e("useCanUndo",()=>J.getCanUndo(),[J])},KM=()=>{const J=h();return e("threeStackableItems",()=>ZF0(J).length>2,[J])},$M=()=>{const J=h();return e("allow group",()=>{const Q=J.getSelectedShapes();if(Q.length<2)return!1;for(let Z of Q)if(J.isShapeOfType(Z,"arrow")){const{start:q,end:Y}=Z.props;if(q.type==="binding"){if(!Q.some(($)=>$.id===q.boundShapeId))return!1}if(Y.type==="binding"){if(!Q.some(($)=>$.id===Y.boundShapeId))return!1}}return!0},[J])},WM=()=>{const J=h();return e("allowUngroup",()=>J.getSelectedShapeIds().some((Q)=>J.getShape(Q)?.type==="group"),[J])},Pi=typeof window!=="undefined"&&"navigator"in window&&Boolean(navigator.clipboard)&&Boolean(navigator.clipboard.read);var $q=v(W0(),1);var r2=v(o(),1);var yi=v(W0(),1);var Yw=function({children:J}){const Q=h();if(!e("shouldDisplayHandles",()=>{if(Q.isInAny("select.idle","select.pointing_handle","select.pointing_shape"))return!0;if(Q.isInAny("select.editing_shape")){const q=Q.getOnlySelectedShape();return q&&Q.isShapeOfType(q,"note")}return!1},[Q]))return null;return yi.jsx("svg",{className:"tl-user-handles tl-overlays__item",children:J})};var Ww=v(W0(),1);var Si=v(p8(),1);var Kw=function(J,Q={}){const{size:Z=16,smoothing:q=0.5}=Q;if(J.length===0||Z<=0)return{left:[],right:[]};const Y=J[0],$=J[J.length-1],W=$.runningLength,G=Math.pow(Z*q,2),z=[],U=[];let F=J[0].vector,B=J[0].point,M=B,O=B,R=M,V=!1,E;for(let _=0;_<J.length;_++){E=J[_];const{point:A,vector:w}=J[_],T=E.vector.dpr(F),k=(_<J.length-1?J[_+1]:J[_]).vector,P=_<J.length-1?k.dpr(E.vector):1,y=T<0&&!V,p=P!==null&&P<0.2;if(y||p){if(P>-0.62&&W-E.runningLength>E.radius){const c=F.clone().mul(E.radius);if(F.clone().cpr(k)<0)O=j.Add(A,c),R=j.Sub(A,c);else O=j.Sub(A,c),R=j.Add(A,c);z.push(O),U.push(R)}else{const c=F.clone().mul(E.radius).per(),t=j.Sub(E.input,c);for(let X0=0.07692307692307693,J0=0;J0<1;J0+=X0)O=j.RotWith(t,E.input,aW*J0),z.push(O),R=j.RotWith(t,E.input,aW+aW*-J0),U.push(R)}if(B=O,M=R,p)V=!0;continue}if(V=!1,E===Y||E===$){const c=j.Per(w).mul(E.radius);z.push(j.Sub(A,c)),U.push(j.Add(A,c));continue}const s=j.Lrp(k,w,P).per().mul(E.radius);if(O=j.Sub(A,s),_<=1||j.Dist2(B,O)>G)z.push(O),B=O;if(R=j.Add(A,s),_<=1||j.Dist2(M,R)>G)U.push(R),M=R;F=w;continue}return{left:z,right:U}},oW=function(J,Q={}){const{size:Z=16,start:q={},end:Y={},last:$=!1}=Q,{cap:W=!0}=q,{cap:G=!0}=Y;if(J.length===0||Z<=0)return[];const z=J[0],U=J[J.length-1],F=U.runningLength,B=q.taper===!1?0:q.taper===!0?Math.max(Z,F):q.taper,M=Y.taper===!1?0:Y.taper===!0?Math.max(Z,F):Y.taper,{left:O,right:R}=Kw(J,Q),V=z.point,E=J.length>1?J[J.length-1].point:j.AddXY(z.point,1,1);if(J.length===1){if(!(B||M)||$){const T=j.Add(V,j.Sub(V,E).uni().per().mul(-z.radius)),k=[];for(let P=0.07692307692307693,y=P;y<=1;y+=P)k.push(j.RotWith(T,V,aW*2*y));return k}}const _=[];if(B||M&&J.length===1);else if(W)for(let T=0.125,k=T;k<=1;k+=T){const P=j.RotWith(R[0],V,aW*k);_.push(P)}else{const T=j.Sub(O[0],R[0]),k=j.Mul(T,0.5),P=j.Mul(T,0.51);_.push(j.Sub(V,k),j.Sub(V,P),j.Add(V,P),j.Add(V,k))}const A=[],w=U.vector.clone().per().neg();if(M||B&&J.length===1)A.push(E);else if(G){const T=j.Add(E,j.Mul(w,U.radius));for(let k=0.034482758620689655,P=k;P<1;P+=k)A.push(j.RotWith(T,E,aW*3*P))}else A.push(j.Add(E,j.Mul(w,U.radius)),j.Add(E,j.Mul(w,U.radius*0.99)),j.Sub(E,j.Mul(w,U.radius*0.99)),j.Sub(E,j.Mul(w,U.radius)));return O.concat(A,R.reverse(),_)},{PI:qF0}=Math,aW=qF0+0.0001;var dJ=function(J,Q={}){const{streamline:Z=0.5,size:q=16,simulatePressure:Y=!1}=Q;if(J.length===0)return[];const $=0.15+(1-Z)*0.85;let W=J.map(j.From),G=0;if(!Y){let E=W[0];while(E){if(E.z>=XF0)break;W.shift(),E=W[0]}}if(!Y){let E=W[W.length-1];while(E){if(E.z>=YF0)break;W.pop(),E=W[W.length-1]}}if(W.length===0)return[{point:j.From(J[0]),input:j.From(J[0]),pressure:Y?0.5:0.15,vector:new j(1,1),distance:0,runningLength:0,radius:1}];let z=W[1];while(z){if(j.Dist2(z,W[0])>(q/3)**2)break;W[0].z=Math.max(W[0].z,z.z),W.splice(1,1),z=W[1]}const U=W.pop();z=W[W.length-1];while(z){if(j.Dist2(z,U)>(q/3)**2)break;W.pop(),z=W[W.length-1],G++}W.push(U);const F=Q.last||!Q.simulatePressure||W.length>1&&j.Dist2(W[W.length-1],W[W.length-2])<q**2||G>0;if(W.length===2&&Q.simulatePressure){const E=W[1];W=W.slice(0,-1);for(let _=1;_<5;_++){const A=j.Lrp(W[0],E,_/4);A.z=(W[0].z+(E.z-W[0].z))*_/4,W.push(A)}}const B=[{point:W[0],input:W[0],pressure:Y?0.5:W[0].z,vector:new j(1,1),distance:0,runningLength:0,radius:1}];let M=0,O=B[0],R,V;if(F&&Z>0)W.push(W[W.length-1].clone());for(let E=1,_=W.length;E<_;E++){if(R=!$||Q.last&&E===_-1?W[E].clone():W[E].clone().lrp(O.point,1-$),O.point.equals(R))continue;if(V=j.Dist(R,O.point),M+=V,E<4&&M<q)continue;O={input:W[E],point:R,pressure:Y?0.5:W[E].z,vector:j.Sub(O.point,R).uni(),distance:V,runningLength:M,radius:1},B.push(O)}if(B[1]?.vector)B[0].vector=B[1].vector.clone();if(M<1){const E=Math.max(0.5,...B.map((_)=>_.pressure));B.forEach((_)=>_.pressure=E)}return B},XF0=0.025,YF0=0.01;var jX=function(J,Q){const{size:Z=16,thinning:q=0.5,simulatePressure:Y=!0,easing:$=(E)=>E,start:W={},end:G={}}=Q,{easing:z=_9.easeOutQuad}=W,{easing:U=_9.easeOutCubic}=G,F=J[J.length-1].runningLength;let B,M=J[0].pressure,O;if(!Y&&F<Z){const E=J.reduce((_,A)=>Math.max(_,A.pressure),0.5);return J.forEach((_)=>{_.pressure=E,_.radius=Z*$(0.5-q*(0.5-_.pressure))}),J}else{let E;for(let _=0,A=J.length;_<A;_++){if(O=J[_],O.runningLength>Z*5)break;const w=RX(1,O.distance/Z);if(Y){const T=RX(1,1-w);E=RX(1,M+(T-M)*(w*$w))}else E=RX(1,M+(O.pressure-M)*0.5);M=M+(E-M)*0.5}for(let _=0;_<J.length;_++){if(O=J[_],q){let{pressure:A}=O;const w=RX(1,O.distance/Z);if(Y){const T=RX(1,1-w);A=RX(1,M+(T-M)*(w*$w))}else A=RX(1,M+(A-M)*(w*$w));O.radius=Z*$(0.5-q*(0.5-A)),M=A}else O.radius=Z/2;if(B===void 0)B=O.radius}}const R=W.taper===!1?0:W.taper===!0?Math.max(Z,F):W.taper,V=G.taper===!1?0:G.taper===!0?Math.max(Z,F):G.taper;if(R||V)for(let E=0;E<J.length;E++){O=J[E];const{runningLength:_}=O,A=_<R?z(_/R):1,w=F-_<V?U((F-_)/V):1;O.radius=Math.max(0.01,O.radius*Math.min(A,w))}return J},{min:RX}=Math,$w=0.275;var vi=function(J,Q={}){return oW(jX(dJ(J,Q),Q),Q)};var HM=function({scribble:J,zoom:Q,color:Z,opacity:q,className:Y}){if(!J.points.length)return null;const $=vi(J.points,{size:J.size/Q,start:{taper:J.taper,easing:_9.linear},last:J.state==="stopping",simulatePressure:!1,streamline:0.32});let W;if($.length<4){const G=J.size/Q/2,{x:z,y:U}=J.points[J.points.length-1];W=`M ${z-G},${U} a ${G},${G} 0 1,0 ${G*2},0 a ${G},${G} 0 1,0 ${-G*2},0`}else W=hY($);return Ww.jsx("svg",{className:Y?Si.default("tl-overlays__item",Y):Y,children:Ww.jsx("path",{className:"tl-scribble",d:W,fill:Z??`var(--color-${J.color})`,opacity:q??J.opacity})})};var fi=v(W0(),1);var Gw=({bounds:J,rotation:Q})=>{const Z=h();if(!e("should display",()=>Z.isInAny("select.idle","select.brushing","select.scribble_brushing","select.pointing_shape","select.pointing_selection","text.resizing"),[Z]))return null;return fi.jsx(Z3,{bounds:J,rotation:Q})};var U8=v(W0(),1);var lJ=v(p8(),1),mi=v(o(),1);var S5=function(){const J=h();return e("isReadonlyMode",()=>J.getInstanceState().isReadonly,[J])};var c1=v(W0(),1);var XK=v(p8(),1),gi=function({size:J,width:Q,height:Z,hideAlternateHandles:q}){const Y=u(J/3),$=Y/2;return c1.jsxs("svg",{className:"tl-overlays__item",children:[c1.jsx("polyline",{className:"tl-corner-crop-handle",points:`
						${u(0-$)},${u(J)} 
						${u(0-$)},${u(0-$)} 
						${u(J)},${u(0-$)}`,strokeWidth:Y,"data-testid":"selection.crop.top_left","aria-label":"top_left handle"}),c1.jsx("line",{className:XK.default("tl-corner-crop-edge-handle",{"tl-hidden":q}),x1:u(Q/2-J),y1:u(0-$),x2:u(Q/2+J),y2:u(0-$),strokeWidth:Y,"data-testid":"selection.crop.top","aria-label":"top handle"}),c1.jsx("polyline",{className:XK.default("tl-corner-crop-handle",{"tl-hidden":q}),points:`
						${u(Q-J)},${u(0-$)} 
						${u(Q+$)},${u(0-$)} 
						${u(Q+$)},${u(J)}`,strokeWidth:Y,"data-testid":"selection.crop.top_right","aria-label":"top_right handle"}),c1.jsx("line",{className:XK.default("tl-corner-crop-edge-handle",{"tl-hidden":q}),x1:u(Q+$),y1:u(Z/2-J),x2:u(Q+$),y2:u(Z/2+J),strokeWidth:Y,"data-testid":"selection.crop.right","aria-label":"right handle"}),c1.jsx("polyline",{className:"tl-corner-crop-handle",points:`
						${u(Q+$)},${u(Z-J)} 
						${u(Q+$)},${u(Z+$)}
						${u(Q-J)},${u(Z+$)}`,strokeWidth:Y,"data-testid":"selection.crop.bottom_right","aria-label":"bottom_right handle"}),c1.jsx("line",{className:XK.default("tl-corner-crop-edge-handle",{"tl-hidden":q}),x1:u(Q/2-J),y1:u(Z+$),x2:u(Q/2+J),y2:u(Z+$),strokeWidth:Y,"data-testid":"selection.crop.bottom","aria-label":"bottom handle"}),c1.jsx("polyline",{className:XK.default("tl-corner-crop-handle",{"tl-hidden":q}),points:`
						${u(0+J)},${u(Z+$)} 
						${u(0-$)},${u(Z+$)}
						${u(0-$)},${u(Z-J)}`,strokeWidth:Y,"data-testid":"selection.crop.bottom_left","aria-label":"bottom_left handle"}),c1.jsx("line",{className:XK.default("tl-corner-crop-edge-handle",{"tl-hidden":q}),x1:u(0-$),y1:u(Z/2-J),x2:u(0-$),y2:u(Z/2+J),strokeWidth:Y,"data-testid":"selection.crop.left","aria-label":"left handle"})]})};var Hw=D9(function J({bounds:Q,rotation:Z}){const q=h(),Y=mi.useRef(null),$=S5(),W=Q1("top"),G=Q1("right"),z=Q1("bottom"),U=Q1("left"),F=Q1("top_left"),B=Q1("top_right"),M=Q1("bottom_right"),O=Q1("bottom_left"),R=!q.getIsMenuOpen()&&q.getInstanceState().cursor.type==="default",V=q.getInstanceState().isCoarsePointer,E=q.getOnlySelectedShape(),_=E&&q.isShapeOrAncestorLocked(E),A=E?q.getShapeUtil(E).expandSelectionOutlinePx(E):0;if(_4(Y,Q?.x,Q?.y,1,q.getSelectionRotation(),{x:-A,y:-A}),!Q)return null;Q=Q.clone().expandBy(A).zeroFix();const w=q.getZoomLevel(),T=q.getInstanceState().isChangingStyle,k=Q.width,P=Q.height,y=8/w,p=k<y*2,s=P<y*2,c=k<y*4,t=P<y*4,X0=k<y*5,J0=P<y*5,Q0=V?1.75:1,a=6/w*Q0,_0=(c?a/2:a)*(Q0*0.75),T0=(t?a/2:a)*(Q0*0.75),r0=(E?!q.getShapeUtil(E).hideSelectionBoundsFg(E):!0)&&!T;let C0=r0&&q.isInAny("select.idle","select.brushing","select.scribble_brushing","select.pointing_canvas","select.pointing_selection","select.pointing_shape","select.crop.idle","select.crop.pointing_crop","select.pointing_resize_handle","select.pointing_crop_handle")||r0&&q.isIn("select.resizing")&&E&&q.isShapeOfType(E,"text");if(E&&C0){if(q.environment.isFirefox&&q.isShapeOfType(E,"embed"))C0=!1}const k0=q.isInAny("select.pointing_crop_handle","select.crop.idle","select.crop.pointing_crop")&&!T&&!$,b0=q.isInAny("select.idle","select.pointing_selection","select.pointing_shape","select.crop.idle")&&!T&&!$,K6=!V&&!(p||s)&&(b0||k0)&&(E?!q.getShapeUtil(E).hideRotateHandle(E):!0)&&!_,b6=V&&(!c||!t)&&(b0||k0)&&(E?!q.getShapeUtil(E).hideRotateHandle(E):!0)&&!_,I8=b0&&(E?q.getShapeUtil(E).canResize(E)&&!q.getShapeUtil(E).hideResizeHandles(E):!0)&&!k0&&!_,_6=p||s,x6=p&&s,c6=X0||J0,$8=I8||k0,G6=!K6,i6=!b0||!b6,I6=!b0||!$8,J9=!b0||!$8||_6,R8=!b0||!$8||_6,j8=!b0||!$8||x6&&!k0;let W6=!0,S6=!0;if(k0)W6=c6,S6=c6;else if(I8){W6=_6||x6||V;const W9=V&&E&&E.type==="text";S6=W6&&!W9}const f8=Math.min(24/w,P-T0*3),u8=b0&&V&&E&&q.isShapeOfType(E,"text")&&f8*w>=4;return U8.jsx("svg",{className:"tl-overlays__item tl-selection__fg","data-testid":"selection-foreground",children:U8.jsxs("g",{ref:Y,children:[C0&&U8.jsx("rect",{className:"tl-selection__fg__outline",width:u(k),height:u(P)}),U8.jsx(zM,{"data-testid":"selection.rotate.top-left",cx:0,cy:0,targetSize:a,corner:"top_left_rotate",cursor:R?L7("nwse-rotate",Z):void 0,isHidden:G6}),U8.jsx(zM,{"data-testid":"selection.rotate.top-right",cx:k+a*3,cy:0,targetSize:a,corner:"top_right_rotate",cursor:R?L7("nesw-rotate",Z):void 0,isHidden:G6}),U8.jsx(zM,{"data-testid":"selection.rotate.bottom-left",cx:0,cy:P+a*3,targetSize:a,corner:"bottom_left_rotate",cursor:R?L7("swne-rotate",Z):void 0,isHidden:G6}),U8.jsx(zM,{"data-testid":"selection.rotate.bottom-right",cx:k+a*3,cy:P+a*3,targetSize:a,corner:"bottom_right_rotate",cursor:R?L7("senw-rotate",Z):void 0,isHidden:G6}),U8.jsx($F0,{"data-testid":"selection.rotate.mobile",cx:c?-a*1.5:k/2,cy:c?P/2:-a*1.5,size:y,isHidden:i6}),U8.jsx("rect",{className:lJ.default("tl-transparent",{"tl-hidden":W6}),"data-testid":"selection.resize.top","aria-label":"top target",pointerEvents:"all",x:0,y:u(0-(t?T0*2:T0)),width:u(k),height:u(Math.max(1,T0*2)),style:R?{cursor:L7("ns-resize",Z)}:void 0,...W}),U8.jsx("rect",{className:lJ.default("tl-transparent",{"tl-hidden":S6}),"data-testid":"selection.resize.right","aria-label":"right target",pointerEvents:"all",x:u(k-(c?0:_0)),y:0,height:u(P),width:u(Math.max(1,_0*2)),style:R?{cursor:L7("ew-resize",Z)}:void 0,...G}),U8.jsx("rect",{className:lJ.default("tl-transparent",{"tl-hidden":W6}),"data-testid":"selection.resize.bottom","aria-label":"bottom target",pointerEvents:"all",x:0,y:u(P-(t?0:T0)),width:u(k),height:u(Math.max(1,T0*2)),style:R?{cursor:L7("ns-resize",Z)}:void 0,...z}),U8.jsx("rect",{className:lJ.default("tl-transparent",{"tl-hidden":S6}),"data-testid":"selection.resize.left","aria-label":"left target",pointerEvents:"all",x:u(0-(c?_0*2:_0)),y:0,height:u(P),width:u(Math.max(1,_0*2)),style:R?{cursor:L7("ew-resize",Z)}:void 0,...U}),U8.jsx("rect",{className:lJ.default("tl-transparent",{"tl-hidden":I6}),"data-testid":"selection.target.top-left","aria-label":"top-left target",pointerEvents:"all",x:u(0-(c?_0*2:_0*1.5)),y:u(0-(t?T0*2:T0*1.5)),width:u(_0*3),height:u(T0*3),style:R?{cursor:L7("nwse-resize",Z)}:void 0,...F}),U8.jsx("rect",{className:lJ.default("tl-transparent",{"tl-hidden":J9}),"data-testid":"selection.target.top-right","aria-label":"top-right target",pointerEvents:"all",x:u(k-(c?0:_0*1.5)),y:u(0-(t?T0*2:T0*1.5)),width:u(_0*3),height:u(T0*3),style:R?{cursor:L7("nesw-resize",Z)}:void 0,...B}),U8.jsx("rect",{className:lJ.default("tl-transparent",{"tl-hidden":j8}),"data-testid":"selection.target.bottom-right","aria-label":"bottom-right target",pointerEvents:"all",x:u(k-(c?_0:_0*1.5)),y:u(P-(t?T0:T0*1.5)),width:u(_0*3),height:u(T0*3),style:R?{cursor:L7("nwse-resize",Z)}:void 0,...M}),U8.jsx("rect",{className:lJ.default("tl-transparent",{"tl-hidden":R8}),"data-testid":"selection.target.bottom-left","aria-label":"bottom-left target",pointerEvents:"all",x:u(0-(c?_0*3:_0*1.5)),y:u(P-(t?0:T0*1.5)),width:u(_0*3),height:u(T0*3),style:R?{cursor:L7("nesw-resize",Z)}:void 0,...O}),I8&&U8.jsxs(U8.Fragment,{children:[U8.jsx("rect",{"data-testid":"selection.resize.top-left",className:lJ.default("tl-corner-handle",{"tl-hidden":I6}),"aria-label":"top_left handle",x:u(0-y/2),y:u(0-y/2),width:u(y),height:u(y)}),U8.jsx("rect",{"data-testid":"selection.resize.top-right",className:lJ.default("tl-corner-handle",{"tl-hidden":J9}),"aria-label":"top_right handle",x:u(k-y/2),y:u(0-y/2),width:u(y),height:u(y)}),U8.jsx("rect",{"data-testid":"selection.resize.bottom-right",className:lJ.default("tl-corner-handle",{"tl-hidden":j8}),"aria-label":"bottom_right handle",x:u(k-y/2),y:u(P-y/2),width:u(y),height:u(y)}),U8.jsx("rect",{"data-testid":"selection.resize.bottom-left",className:lJ.default("tl-corner-handle",{"tl-hidden":R8}),"aria-label":"bottom_left handle",x:u(0-y/2),y:u(P-y/2),width:u(y),height:u(y)})]}),u8&&U8.jsxs(U8.Fragment,{children:[U8.jsx("rect",{"data-testid":"selection.text-resize.left.handle",className:"tl-text-handle","aria-label":"bottom_left handle",x:u(0-y/4),y:u(P/2-f8/2),rx:y/4,width:u(y/2),height:u(f8)}),U8.jsx("rect",{"data-testid":"selection.text-resize.right.handle",className:"tl-text-handle","aria-label":"bottom_left handle",rx:y/4,x:u(k-y/4),y:u(P/2-f8/2),width:u(y/2),height:u(f8)})]}),k0&&U8.jsx(gi,{...{size:y,width:k,height:P,hideAlternateHandles:c6}})]})})}),zM=function J({cx:Q,cy:Z,targetSize:q,corner:Y,cursor:$,isHidden:W,"data-testid":G}){const z=Q1(Y);return U8.jsx("rect",{className:lJ.default("tl-transparent","tl-rotate-corner",{"tl-hidden":W}),"data-testid":G,"aria-label":`${Y} target`,pointerEvents:"all",x:u(Q-q*3),y:u(Z-q*3),width:u(Math.max(1,q*3)),height:u(Math.max(1,q*3)),cursor:$,...z})},KF0=Math.sqrt(Math.PI),$F0=function J({cx:Q,cy:Z,size:q,isHidden:Y,"data-testid":$}){const W=Q1("mobile_rotate"),G=h(),z=e("zoom level",()=>G.getZoomLevel(),[G]),U=Math.max(14*(1/z),20/Math.max(1,z));return U8.jsxs("g",{children:[U8.jsx("circle",{"data-testid":$,pointerEvents:"all",className:lJ.default("tl-transparent","tl-mobile-rotate__bg",{"tl-hidden":Y}),cx:Q,cy:Z,r:U,...W}),U8.jsx("circle",{className:lJ.default("tl-mobile-rotate__fg",{"tl-hidden":Y}),cx:Q,cy:Z,r:q/KF0})]})};var E9={lineHeight:1.35,fontWeight:"normal",fontVariant:"normal",fontStyle:"normal",padding:"0px"},C9={s:2,m:3.5,l:5,xl:10},cZ={s:18,m:24,l:36,xl:44},Z1={s:18,m:22,l:26,xl:32},wQ={s:18,m:20,l:24,xl:28},iJ={draw:"var(--tl-font-draw)",sans:"var(--tl-font-sans)",serif:"var(--tl-font-serif)",mono:"var(--tl-font-mono)"},hi=20,ui=4.25,T4=16;var WF0=function(J,Q){var Z=J==null?null:typeof Symbol!="undefined"&&J[Symbol.iterator]||J["@@iterator"];if(Z!=null){var q,Y,$,W,G=[],z=!0,U=!1;try{if($=(Z=Z.call(J)).next,Q===0){if(Object(Z)!==Z)return;z=!1}else for(;!(z=(q=$.call(Z)).done)&&(G.push(q.value),G.length!==Q);z=!0);}catch(F){U=!0,Y=F}finally{try{if(!z&&Z.return!=null&&(W=Z.return(),Object(W)!==W))return}finally{if(U)throw Y}}return G}},ci=function(J,Q){var Z=Object.keys(J);if(Object.getOwnPropertySymbols){var q=Object.getOwnPropertySymbols(J);Q&&(q=q.filter(function(Y){return Object.getOwnPropertyDescriptor(J,Y).enumerable})),Z.push.apply(Z,q)}return Z},b4=function(J){for(var Q=1;Q<arguments.length;Q++){var Z=arguments[Q]!=null?arguments[Q]:{};Q%2?ci(Object(Z),!0).forEach(function(q){GF0(J,q,Z[q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(J,Object.getOwnPropertyDescriptors(Z)):ci(Object(Z)).forEach(function(q){Object.defineProperty(J,q,Object.getOwnPropertyDescriptor(Z,q))})}return J},GF0=function(J,Q,Z){if(Q=OF0(Q),Q in J)Object.defineProperty(J,Q,{value:Z,enumerable:!0,configurable:!0,writable:!0});else J[Q]=Z;return J},HF0=function(J,Q){if(J==null)return{};var Z={},q=Object.keys(J),Y,$;for($=0;$<q.length;$++){if(Y=q[$],Q.indexOf(Y)>=0)continue;Z[Y]=J[Y]}return Z},zF0=function(J,Q){if(J==null)return{};var Z=HF0(J,Q),q,Y;if(Object.getOwnPropertySymbols){var $=Object.getOwnPropertySymbols(J);for(Y=0;Y<$.length;Y++){if(q=$[Y],Q.indexOf(q)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(J,q))continue;Z[q]=J[q]}}return Z},pi=function(J,Q){return LF0(J)||WF0(J,Q)||di(J,Q)||NF0()},UM=function(J){return UF0(J)||FF0(J)||di(J)||BF0()},UF0=function(J){if(Array.isArray(J))return Lw(J)},LF0=function(J){if(Array.isArray(J))return J},FF0=function(J){if(typeof Symbol!=="undefined"&&J[Symbol.iterator]!=null||J["@@iterator"]!=null)return Array.from(J)},di=function(J,Q){if(!J)return;if(typeof J==="string")return Lw(J,Q);var Z=Object.prototype.toString.call(J).slice(8,-1);if(Z==="Object"&&J.constructor)Z=J.constructor.name;if(Z==="Map"||Z==="Set")return Array.from(J);if(Z==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Z))return Lw(J,Q)},Lw=function(J,Q){if(Q==null||Q>J.length)Q=J.length;for(var Z=0,q=new Array(Q);Z<Q;Z++)q[Z]=J[Z];return q},BF0=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},NF0=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},MF0=function(J,Q){if(typeof J!=="object"||J===null)return J;var Z=J[Symbol.toPrimitive];if(Z!==void 0){var q=Z.call(J,Q||"default");if(typeof q!=="object")return q;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Q==="string"?String:Number)(J)},OF0=function(J){var Q=MF0(J,"string");return typeof Q==="symbol"?Q:String(Q)},P3=function(J){var Q=J.sizes.shift(),Z=Math.max(Math.ceil(Q[0]),1),q=Math.max(Math.ceil(Q[1]),1),Y=[Z-1,q-1,1,1],$=Date.now(),W=typeof WorkerGlobalScope!=="undefined"&&self instanceof WorkerGlobalScope,G,z;if(W)G=new OffscreenCanvas(1,1),z=new OffscreenCanvas(Z,q);else G=document.createElement("canvas"),G.width=1,G.height=1,z=document.createElement("canvas"),z.width=Z,z.height=q;var U=G.getContext("2d"),F=z.getContext("2d");if(F)F.fillRect.apply(F,Y),U.drawImage(z,Z-1,q-1,1,1,0,0,1,1);var B=U&&U.getImageData(0,0,1,1).data[3]!==0,M=Date.now()-$;if([G,z].forEach(function(O){O.height=0,O.width=0}),W){if(postMessage({width:Z,height:q,benchmark:M,isTestPass:B}),!B&&J.sizes.length)P3(J)}else if(B)J.onSuccess(Z,q,M);else if(J.onError(Z,q,M),J.sizes.length)P3(J);return B},Uw=function(J){var Q=J.width===J.height,Z=J.height===1,q=J.width===1,Y=[];if(!J.width||!J.height)J.sizes.forEach(function(F){var B=Q||Z?F:1,M=Q||q?F:1;Y.push([B,M])});else{var $=J.min||tW.min,W=J.step||tW.step,G=Math.max(J.width,J.height);while(G>=$){var z=Q||Z?G:1,U=Q||q?G:1;Y.push([z,U]),G-=W}}return Y},LM=function(J){var Q=window&&"HTMLCanvasElement"in window,Z=window&&"OffscreenCanvas"in window,q=Date.now(),Y=J.onError,$=J.onSuccess,W=zF0(J,VF0),G=null;if(!Q)return!1;if(J.useWorker&&Z){var z="\n            var canvasTest = ".concat(P3.toString(),";\n            onmessage = function(e) {\n                canvasTest(e.data);\n            };\n        "),U=new Blob([z],{type:"application/javascript"}),F=URL.createObjectURL(U);G=new Worker(F),URL.revokeObjectURL(F),G.onmessage=function(B){var M=B.data,O=M.width,R=M.height,V=M.benchmark,E=M.isTestPass;if(E)I3[q].onSuccess(O,R,V),delete I3[q];else I3[q].onError(O,R,V)}}if(J.usePromise)return new Promise(function(B,M){var O=b4(b4({},J),{},{onError:function E(_,A,w){var T;if(J.sizes.length===0)T=!0;else{var k=J.sizes.slice(-1),P=pi(k,1),y=pi(P[0],2),p=y[0],s=y[1];T=_===p&&A===s}if(Y(_,A,w),T)M({width:_,height:A,benchmark:w})},onSuccess:function E(_,A,w){$(_,A,w),B({width:_,height:A,benchmark:w})}});if(G){var{onError:R,onSuccess:V}=O;I3[q]={onError:R,onSuccess:V},G.postMessage(W)}else P3(O)});else if(G)I3[q]={onError:Y,onSuccess:$},G.postMessage(W);else return P3(J)};/*!
 * canvas-size
 * v1.2.6
 * https://github.com/jhildenbiddle/canvas-size
 * (c) 2015-2023 John Hildenbiddle <http://hildenbiddle.com>
 * MIT license
 */var zw={area:[16384,14188,11402,11180,10836,8192,4096,1],height:[8388607,65535,32767,16384,8192,4096,1],width:[4194303,65535,32767,16384,8192,4096,1]},VF0=["onError","onSuccess"],tW={max:null,min:1,sizes:[],step:1024,usePromise:!1,useWorker:!1,onError:Function.prototype,onSuccess:Function.prototype},I3={},FM={maxArea:function J(){var Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Z=Uw({width:Q.max,height:Q.max,min:Q.min,step:Q.step,sizes:UM(zw.area)}),q=b4(b4(b4({},tW),Q),{},{sizes:Z});return LM(q)},maxHeight:function J(){var Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Z=Uw({width:1,height:Q.max,min:Q.min,step:Q.step,sizes:UM(zw.height)}),q=b4(b4(b4({},tW),Q),{},{sizes:Z});return LM(q)},maxWidth:function J(){var Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Z=Uw({width:Q.max,height:1,min:Q.min,step:Q.step,sizes:UM(zw.width)}),q=b4(b4(b4({},tW),Q),{},{sizes:Z});return LM(q)},test:function J(){var Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Z=b4(b4({},tW),Q);if(Z.sizes=UM(Z.sizes),Z.width&&Z.height)Z.sizes=[[Z.width,Z.height]];return LM(Z)}};var DF0=function(){if(!Fw)Fw=RF0();return Fw};async function RF0(){const J=await FM.maxWidth({usePromise:!0}),Q=await FM.maxHeight({usePromise:!0}),Z=await FM.maxArea({usePromise:!0});return{maxWidth:J.width,maxHeight:Q.height,maxArea:Z.width*Z.height}}async function BM(J,Q){if(J<=li&&Q<=li&&J*Q<=jF0)return[J,Q];const{maxWidth:Z,maxHeight:q,maxArea:Y}=await DF0(),$=J/Q;if(J>Z)J=Z,Q=J/$;if(Q>q)Q=q,J=Q*$;if(J*Q>Y){const W=Math.sqrt(Y/(J*Q));J*=W,Q*=W}return[J,Q]}var Fw=null,li=8192,jF0=16777216;var ii=function(J,Q){let Z=0;while(J[Q+Z])Z+=J[Q+Z]+1;return Z+1},_F0=function(J){return new TextDecoder("ascii").decode(J.slice(0,3))==="GIF"},ni=function(J){const Q=new Uint8Array(J);let Z,q,Y=0,$=0;if(!_F0(J))return!1;Z=Q[10]&128,q=Q[10]&7,Y+=6,Y+=7,Y+=Z?3*Math.pow(2,q+1):0;while($<2&&Y<Q.length)switch(Q[Y]){case 44:$+=1,Z=Q[Y+9]&128,q=Q[Y+9]&7,Y+=10,Y+=Z?3*Math.pow(2,q+1):0,Y+=ii(Q,Y+1)+1;break;case 33:Y+=2,Y+=ii(Q,Y);break;case 59:Y=Q.length;break;default:Y=Q.length;break}return $>1};/*!
 * MIT License
 * Modified code originally from <https://github.com/qzb/is-animated>
 * Copyright (c) 2016 Jzef Sokoowski <j.k.sokolowski@gmail.com>
 */var Bw=function(J,Q){const Z=J.w/Q.w,q=J.h/Q.h;if(Z<=1&&q<=1)return J;else if(Z>q)return{w:J.w/Z,h:J.h/Z};else return{w:J.w/q,h:J.h/q}};async function Nw(J,Q,Z,q={}){const Y=await a4.usingObjectURL(J,a4.loadImage),{type:$=J.type,quality:W=0.92}=q,[G,z]=await BM(Math.min(Q*2,Y.naturalWidth),Math.min(Z*2,Y.naturalHeight)),U=document.createElement("canvas");U.width=G,U.height=z;const F=r4(U.getContext("2d",{willReadFrequently:!0}),"Could not get canvas context");return F.imageSmoothingEnabled=!0,F.imageSmoothingQuality="high",F.drawImage(Y,0,0,G,z),new Promise((B,M)=>{U.toBlob((O)=>{if(O)B(O);else M(new Error("Could not resize image"))},$,W)})}async function Mw(J){return ni(await J.arrayBuffer())}var EF0=function(J){if(typeof J!=="string")throw new TypeError("Expected a string");return J.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")},CF0=function(J){const Q=new URL(J).host.replace("www.","");for(let Z of bZ)if(si(Z.hostnames,Q)){const q=Z.fromEmbedUrl(J);if(q)return{definition:Z,url:q,embedUrl:J}}},kF0=function(J){const Q=new URL(J).host.replace("www.","");for(let Z of bZ)if(si(Z.hostnames,Q)){const q=Z.toEmbedUrl(J);if(q)return{definition:Z,embedUrl:q,url:J}}},Ow=function(J){return kF0(J)??CF0(J)},d7=function(J){try{return Ow(J)}catch(Q){console.error(Q)}return},AF0=(J)=>{return J.split("*").map((Q)=>EF0(Q)).join(".+")},si=(J,Q)=>{return!!J.find((Z)=>{const q=new RegExp(AF0(Z));return Q.match(q)})};var NM=function(J){if(typeof window.getSelection==="undefined")return;const Q=window.getSelection();if(!Q)return;let Z=0;if(Q.rangeCount!==0){const q=Q.getRangeAt(0),Y=q.cloneRange();Y.selectNodeContents(J),Y.setEnd(q.endContainer,q.endOffset),Z=Y.toString().length}return Z};/*!
 * MIT License
 * Adapted (mostly copied) the work of https://github.com/fregante/text-field-edit
 * Copyright (c) Federico Brigante <opensource@bfred.it> (bfred.it)
 */var MM="  ";class F5{static insertTextFirefox(J,Q){J.setRangeText(Q,J.selectionStart||0,J.selectionEnd||0,"end"),J.dispatchEvent(new InputEvent("input",{data:Q,inputType:"insertText",isComposing:!1}))}static insert(J,Q){const Z=J.ownerDocument,q=Z.activeElement;if(q!==J)J.focus();if(!Z.execCommand("insertText",!1,Q))F5.insertTextFirefox(J,Q);if(q===Z.body)J.blur();else if(q instanceof HTMLElement&&q!==J)q.focus()}static set(J,Q){J.select(),F5.insert(J,Q)}static getSelection(J){const{selectionStart:Q,selectionEnd:Z}=J;return J.value.slice(Q?Q:void 0,Z?Z:void 0)}static wrapSelection(J,Q,Z){const{selectionStart:q,selectionEnd:Y}=J,$=F5.getSelection(J);F5.insert(J,Q+$+(Z??Q)),J.selectionStart=(q||0)+Q.length,J.selectionEnd=(Y||0)+Q.length}static replace(J,Q,Z){let q=0;J.value.replace(Q,(...Y)=>{const $=q+Y[Y.length-2],W=Y[0].length;J.selectionStart=$,J.selectionEnd=$+W;const G=typeof Z==="string"?Z:Z(...Y);return F5.insert(J,G),J.selectionStart=$,q+=G.length-W,G})}static findLineEnd(J,Q){const Z=J.lastIndexOf("\n",Q-1)+1;if(J.charAt(Z)!=="	")return Q;return Z+1}static indent(J){const{selectionStart:Q,selectionEnd:Z,value:q}=J,Y=q.slice(Q,Z),$=/\n/g.exec(Y)?.length;if($&&$>0){const W=q.lastIndexOf("\n",Q-1)+1,G=J.value.slice(W,Z-1),z=G.replace(/^|\n/g,"$&  "),U=z.length-G.length;J.setSelectionRange(W,Z-1),F5.insert(J,z),J.setSelectionRange(Q+1,Z+U)}else F5.insert(J,"  ")}static unindent(J){const{selectionStart:Q,selectionEnd:Z,value:q}=J,Y=q.lastIndexOf("\n",Q-1)+1,$=F5.findLineEnd(q,Z),W=J.value.slice(Y,$),G=W.replace(/(^|\n)(\t| {1,2})/g,"$1"),z=W.length-G.length;J.setSelectionRange(Y,$),F5.insert(J,G);const U=/\t| {1,2}/.exec(q.slice(Y,Q)),F=U?U[0].length:0,B=Q-F;J.setSelectionRange(Q-F,Math.max(B,Z-z))}static indentCE(J){const Q=window.getSelection(),Z=J.innerText,q=NM(J)??0,Y=NM(J)??0,$=Z.slice(q,Y),W=/\n/g.exec($)?.length;if(W&&W>0){const G=Z.lastIndexOf("\n",q-1)+1,z=Z.slice(G,Y-1),F=z.replace(/^|\n/g,"$&  ").length-z.length;if(Q)Q.setBaseAndExtent(J,q+1,J,Y+F)}else{const G=window.getSelection();J.innerText=Z.slice(0,q)+"  "+Z.slice(q),G?.setBaseAndExtent(J,q+1,J,q+2)}}static unindentCE(J){const Q=window.getSelection(),Z=J.innerText,q=NM(J)??0,Y=NM(J)??0,$=Z.lastIndexOf("\n",q-1)+1,W=F5.findLineEnd(Z,Y),G=Z.slice($,W),z=G.replace(/(^|\n)(\t| {1,2})/g,"$1"),U=G.length-z.length;if(Q){Q.setBaseAndExtent(J,$,J,W);const F=/\t| {1,2}/.exec(Z.slice($,q)),B=F?F[0].length:0,M=q-B;Q.setBaseAndExtent(J,q-B,J,Math.max(M,Y-U))}}static fixNewLines=/\r?\n|\r/g;static normalizeText(J){return J.replace(F5.fixNewLines,"\n")}static normalizeTextForDom(J){return J.replace(F5.fixNewLines,"\n").split("\n").map((Q)=>Q||" ").join("\n")}}var OM=function(J){return wF0.test(J)},IF0=function(J){return J.replace(/\t/g,MM)},PF0=function(J){const Q=J.split("\n");while(Q[0]&&Q[0].trim().length===0)Q.shift();let Z=Infinity;for(let q of Q)if(q.trim().length>0){const Y=q.length-q.trimStart().length;Z=Math.min(Z,Y)}return Q.map((q)=>q.slice(Z)).join("\n")},TF0=function(J){return J.replace(/[ \t]+$/gm,"").replace(/\n+$/,"")},ri=function(J){return TF0(PF0(IF0(J)))},wF0=/[\u0590-\u05FF\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]/,_X=(J,Q)=>{return J.length<=Q?J:J.substring(0,Q-3)+"..."};var oi=function(J,{maxImageDimension:Q,maxAssetSize:Z,acceptedImageMimeTypes:q,acceptedVideoMimeTypes:Y},{toasts:$,msg:W}){J.registerExternalAssetHandler("file",async({file:G})=>{const z=G.name;let U=G;const F=q.includes(U.type),B=Y.includes(U.type);if(r8(F||B,`File type not allowed: ${U.type}`),r8(U.size<=Z,`File size too big: ${(U.size/1024).toFixed()}kb > ${(Z/1024).toFixed()}kb`),U.type==="video/quicktime")U=new Blob([U],{type:"video/mp4"});let M=F?await a4.getImageSize(U):await a4.getVideoSize(U);const O=U.type==="image/gif"?await Mw(U):B,R=await HE(await U.arrayBuffer());if(isFinite(Q)){const _=Bw(M,{w:Q,h:Q});if(M!==_&&(U.type==="image/jpeg"||U.type==="image/png"))M=_}if(U.type==="image/jpeg"||U.type==="image/png")U=await Nw(U,M.w,M.h,{type:U.type,quality:0.92});const V=j4.createId(R);return j4.create({id:V,type:F?"image":"video",typeName:"asset",props:{name:z,src:await V4.blobToDataUrl(U),w:M.w,h:M.h,mimeType:U.type,isAnimated:O}})}),J.registerExternalAssetHandler("url",async({url:G})=>{let z;try{const F=await(await fetch(G,{method:"GET",mode:"no-cors"})).text(),B=new DOMParser().parseFromString(F,"text/html");z={image:B.head.querySelector('meta[property="og:image"]')?.getAttribute("content")??"",title:B.head.querySelector('meta[property="og:title"]')?.getAttribute("content")??_X(G,32),description:B.head.querySelector('meta[property="og:description"]')?.getAttribute("content")??""}}catch(U){console.error(U),$.addToast({title:W("assets.url.failed"),severity:"error"}),z={image:"",title:_X(G,32),description:""}}return{id:j4.createId(s$(G)),typeName:"asset",type:"bookmark",props:{src:G,description:z.description,image:z.image,title:z.title},meta:{}}}),J.registerExternalContentHandler("svg-text",async({point:G,text:z})=>{const U=G??(J.inputs.shiftKey?J.inputs.currentPagePoint:J.getViewportPageCenter()),F=new DOMParser().parseFromString(z,"image/svg+xml").querySelector("svg");if(!F)throw new Error("No <svg/> element present");let B=parseFloat(F.getAttribute("width")||"0"),M=parseFloat(F.getAttribute("height")||"0");if(!(B&&M)){document.body.appendChild(F);const R=F.getBoundingClientRect();document.body.removeChild(F),B=R.width,M=R.height}const O=await J.getAssetForExternalContent({type:"file",file:new File([z],"asset.svg",{type:"image/svg+xml"})});if(!O)throw Error("Could not create an asset");ai(J,[O],U)}),J.registerExternalContentHandler("embed",({point:G,url:z,embed:U})=>{const F=G??(J.inputs.shiftKey?J.inputs.currentPagePoint:J.getViewportPageCenter()),{width:B,height:M}=U,O=v6(),R={id:O,type:"embed",x:F.x-(B||450)/2,y:F.y-(M||450)/2,props:{w:B,h:M,url:z}};J.createShapes([R]).select(O)}),J.registerExternalContentHandler("files",async({point:G,files:z})=>{const U=G??(J.inputs.shiftKey?J.inputs.currentPagePoint:J.getViewportPageCenter()),F=new j(U.x,U.y),B=[];await Promise.all(z.map(async(M,O)=>{if(M.size>Z)return console.warn(`File size too big: ${(M.size/1024).toFixed()}kb > ${(Z/1024).toFixed()}kb`),null;if(!M.type)throw new Error("No mime type");if(!q.concat(Y).includes(M.type))return console.warn(`${M.name} not loaded - Extension not allowed.`),null;try{const R=await J.getAssetForExternalContent({type:"file",file:M});if(!R)throw Error("Could not create an asset");B[O]=R}catch(R){return $.addToast({title:W("assets.files.upload-failed"),severity:"error"}),console.error(R),null}})),ai(J,Y6(B),F)}),J.registerExternalContentHandler("text",async({point:G,text:z})=>{const U=G??(J.inputs.shiftKey?J.inputs.currentPagePoint:J.getViewportPageCenter()),F=J.getShapeUtil("text").getDefaultProps(),B=ri(z),M=J.getOnlySelectedShape();if(M&&"text"in M.props){J.updateShapes([{id:M.id,type:M.type,props:{text:B}}]);return}let O,R,V,E="middle";const _=B.split("\n").length>1,A=OM(B);if(_)E=_?A?"end":"start":"middle";const w=J.textMeasure.measureText(B,{...E9,fontFamily:iJ[F.font],fontSize:cZ[F.size],maxWidth:null}),T=Math.min(_?J.getViewportPageBounds().width*0.9:920,Math.max(200,J.getViewportPageBounds().width*0.9));if(w.w>T){const k=J.textMeasure.measureText(B,{...E9,fontFamily:iJ[F.font],fontSize:cZ[F.size],maxWidth:T});O=k.w,R=k.h,V=!1,E=A?"end":"start"}else O=w.w,R=w.h,V=!0;if(U.y-R/2<J.getViewportPageBounds().minY+40)U.y=J.getViewportPageBounds().minY+40+R/2;J.createShapes([{id:v6(),type:"text",x:U.x-O/2,y:U.y-R/2,props:{text:B,align:E,autoSize:V,w:O}}])}),J.registerExternalContentHandler("url",async({point:G,url:z})=>{const U=d7(z);if(U)return J.putExternalContent({type:"embed",url:U.url,point:G,embed:U.definition});const F=G??(J.inputs.shiftKey?J.inputs.currentPagePoint:J.getViewportPageCenter()),B=j4.createId(s$(z)),M=bF0(J,z,F);let O=J.getAsset(B),R=!1;if(!O){R=!0;try{const V=await J.getAssetForExternalContent({type:"url",url:z});if(!V)throw Error("Could not create an asset");O=V}catch(V){$.addToast({title:W("assets.url.failed"),severity:"error"});return}}J.batch(()=>{if(R)J.createAssets([O]);J.updateShapes([{id:M.id,type:M.type,props:{assetId:O.id}}])})})};async function ai(J,Q,Z){if(!Q.length)return[];const q=j.From(Z),Y=[];for(let $ of Q)switch($.type){case"bookmark":{Y.push({id:v6(),type:"bookmark",x:q.x-150,y:q.y-160,opacity:1,props:{assetId:$.id,url:$.props.src}}),q.x+=300;break}case"image":{Y.push({id:v6(),type:"image",x:q.x-$.props.w/2,y:q.y-$.props.h/2,opacity:1,props:{assetId:$.id,w:$.props.w,h:$.props.h}}),q.x+=$.props.w;break}case"video":Y.push({id:v6(),type:"video",x:q.x-$.props.w/2,y:q.y-$.props.h/2,opacity:1,props:{assetId:$.id,w:$.props.w,h:$.props.h}}),q.x+=$.props.w}return J.batch(()=>{const $=Q.filter((W)=>!J.getAsset(W.id));if($.length)J.createAssets($);J.createShapes(Y).select(...Y.map((W)=>W.id)),ti(J,Z)}),Y.map(($)=>$.id)}var ti=function(J,Q){const Z=J.getViewportPageBounds();let q=J.getSelectionPageBounds();if(q){const Y=q.center.sub(Q);J.updateShapes(J.getSelectedShapes().map(($)=>{const W=J.getShapeParentTransform($).decompose().rotation,G=j.Rot(Y,-W);return{id:$.id,type:$.type,x:$.x-G.x,y:$.y-G.y}}))}if(q=J.getSelectionPageBounds(),q&&!Z.contains(q))J.zoomToSelection()},bF0=function(J,Q,Z){const q={id:v6(),type:"bookmark",x:Z.x-150,y:Z.y-160,opacity:1,props:{assetId:null,url:Q}};return J.batch(()=>{J.createShapes([q]).select(q.id),ti(J,Z)}),J.getShape(q.id)};class Vw extends B0{static id="idle";onPointerDown=(J)=>{this.parent.transition("pointing",J)};onEnter=()=>{this.editor.setCursor({type:"cross",rotation:0})};onCancel=()=>{this.editor.setCurrentTool("select")};onKeyUp=(J)=>{if(J.key==="Enter"){if(this.editor.getInstanceState().isReadonly)return null;const Q=this.editor.getOnlySelectedShape();if(Q&&this.editor.getShapeUtil(Q).canEdit(Q))this.editor.setCurrentTool("select"),this.editor.setEditingShape(Q.id),this.editor.root.getCurrent()?.transition("editing_shape",{...J,target:"shape",shape:Q})}}}class Dw extends B0{static id="pointing";shape;markId="";onEnter=()=>{this.didTimeout=!1;const J=this.editor.getShapeAtPoint(this.editor.inputs.currentPagePoint,{filter:(Q)=>{return!Q.isLocked&&this.editor.getShapeUtil(Q).canBind(Q)},margin:0,hitInside:!0,renderingOnly:!0});if(!J)this.createArrowShape();else this.editor.setHintingShapes([J.id]);this.startPreciseTimeout()};onExit=()=>{this.shape=void 0,this.editor.setHintingShapes([]),this.clearPreciseTimeout()};onPointerMove=()=>{if(this.editor.inputs.isDragging){if(!this.shape)this.createArrowShape();if(!this.shape)throw Error("expected shape");this.updateArrowShapeEndHandle(),this.editor.setCurrentTool("select.dragging_handle",{shape:this.shape,handle:this.editor.getShapeHandles(this.shape).find((J)=>J.id==="end"),isCreating:!0,onInteractionEnd:"arrow"})}};onPointerUp=()=>{this.cancel()};onCancel=()=>{this.cancel()};onComplete=()=>{this.cancel()};onInterrupt=()=>{this.cancel()};cancel(){if(this.shape)this.editor.bailToMark(this.markId);this.editor.setHintingShapes([]),this.parent.transition("idle")}createArrowShape(){const{originPagePoint:J}=this.editor.inputs,Q=v6();this.markId=`creating:${Q}`,this.editor.mark(this.markId),this.editor.createShapes([{id:Q,type:"arrow",x:J.x,y:J.y}]);const Z=this.editor.getShape(Q);if(!Z)throw Error("expected shape");const q=this.editor.getShapeHandles(Z);if(!q)throw Error("expected handles for arrow");const Y=this.editor.getShapeUtil("arrow"),$=this.shape,W=q.find((z)=>z.id==="start"),G=Y.onHandleDrag?.(Z,{handle:{...W,x:0,y:0},isPrecise:!0,initial:$});if(G){const z=G.props?.start;if(z?.type==="binding")this.editor.setHintingShapes([z.boundShapeId]);this.editor.updateShapes([G],{squashing:!0})}this.shape=this.editor.getShape(Q),this.editor.select(Q)}updateArrowShapeEndHandle(){const J=this.shape;if(!J)throw Error("expected shape");const Q=this.editor.getShapeHandles(J);if(!Q)throw Error("expected handles for arrow");const Z={...J,props:{...J.props,end:{...J.props.end,x:0,y:0}}};{const q=this.editor.getShapeUtil("arrow"),Y=this.shape,$=this.editor.getPointInShapeSpace(J,this.editor.inputs.currentPagePoint),W=Q.find((z)=>z.id==="end"),G=q.onHandleDrag?.(Z,{handle:{...W,x:$.x,y:$.y},isPrecise:!1,initial:Y});if(G){const z=G.props?.end;if(z?.type==="binding")this.editor.setHintingShapes([z.boundShapeId]);this.editor.updateShapes([G],{squashing:!0})}}{const q=this.editor.getShapeUtil("arrow"),Y=this.shape,$=Q.find((G)=>G.id==="start"),W=q.onHandleDrag?.(Z,{handle:{...$,x:0,y:0},isPrecise:this.didTimeout,initial:Y});if(W)this.editor.updateShapes([W],{squashing:!0})}this.shape=this.editor.getShape(J.id)}preciseTimeout=-1;didTimeout=!1;startPreciseTimeout(){this.preciseTimeout=window.setTimeout(()=>{if(!this.getIsActive())return;this.didTimeout=!0},320)}clearPreciseTimeout(){clearTimeout(this.preciseTimeout)}}class VM extends B0{static id="arrow";static initial="idle";static children=()=>[Vw,Dw];shapeType="arrow"}class T3 extends B0{static id="drawing";info={};initialShape;shapeType=this.parent.id==="highlight"?"highlight":"draw";util=this.editor.getShapeUtil(this.shapeType);isPen=!1;segmentMode="free";didJustShiftClickToExtendPreviousShapeLine=!1;pagePointWhereCurrentSegmentChanged={};pagePointWhereNextSegmentChanged=null;lastRecordedPoint={};mergeNextPoint=!1;currentLineLength=0;canDraw=!1;markId=null;onEnter=(J)=>{if(this.markId=null,this.info=J,this.canDraw=!this.editor.getIsMenuOpen(),this.lastRecordedPoint=this.editor.inputs.currentPagePoint.clone(),this.canDraw)this.startShape()};onPointerMove=()=>{const{inputs:J}=this.editor;if(this.isPen!==J.isPen){if(this.markId){this.editor.bailToMark(this.markId),this.startShape();return}}else if(!this.canDraw&&J.isDragging)this.startShape(),this.canDraw=!0;if(this.canDraw){if(J.isPen)if(j.Dist(J.currentPagePoint,this.lastRecordedPoint)>=1/this.editor.getZoomLevel())this.lastRecordedPoint=J.currentPagePoint.clone(),this.mergeNextPoint=!1;else this.mergeNextPoint=!0;else this.mergeNextPoint=!1;this.updateDrawingShape()}};onKeyDown=(J)=>{if(J.key==="Shift")switch(this.segmentMode){case"free":{this.segmentMode="starting_straight",this.pagePointWhereNextSegmentChanged=this.editor.inputs.currentPagePoint.clone();break}case"starting_free":this.segmentMode="starting_straight"}this.updateDrawingShape()};onKeyUp=(J)=>{if(J.key==="Shift")switch(this.editor.snaps.clearIndicators(),this.segmentMode){case"straight":{this.segmentMode="starting_free",this.pagePointWhereNextSegmentChanged=this.editor.inputs.currentPagePoint.clone();break}case"starting_straight":{this.pagePointWhereNextSegmentChanged=null,this.segmentMode="free";break}}this.updateDrawingShape()};onExit=()=>{this.editor.snaps.clearIndicators(),this.pagePointWhereCurrentSegmentChanged=this.editor.inputs.currentPagePoint.clone()};canClose(){return this.shapeType!=="highlight"}getIsClosed(J,Q){if(!this.canClose())return!1;const Z=C9[Q],q=J[0].points[0],Y=J[J.length-1],$=Y.points[Y.points.length-1];return q!==$&&this.currentLineLength>Z*4&&j.DistMin(q,$,Z*2)}startShape(){const{inputs:{originPagePoint:J,isPen:Q}}=this.editor;this.markId="draw start "+u6(),this.editor.mark(this.markId),this.isPen=Q;const Z=this.isPen?this.info.point.z*1.25:0.5;if(this.segmentMode=this.editor.inputs.shiftKey?"straight":"free",this.didJustShiftClickToExtendPreviousShapeLine=!1,this.lastRecordedPoint=J.clone(),this.initialShape){const Y=this.editor.getShape(this.initialShape.id);if(Y&&this.segmentMode==="straight"){this.didJustShiftClickToExtendPreviousShapeLine=!0;const $=P5(Y.props.segments);if(!$)throw Error("Expected a previous segment!");const W=P5($.points);if(!W)throw Error("Expected a previous point!");const{x:G,y:z}=this.editor.getPointInShapeSpace(Y,J).toFixed(),U=this.isPen?this.info.point.z*1.25:0.5,F={type:this.segmentMode,points:[{x:W.x,y:W.y,z:+U.toFixed(2)},{x:G,y:z,z:+U.toFixed(2)}]},B=j0.applyToPoint(this.editor.getShapePageTransform(Y.id),W);this.pagePointWhereCurrentSegmentChanged=B,this.pagePointWhereNextSegmentChanged=null;const M=[...Y.props.segments,F];if(this.currentLineLength<C9[Y.props.size]*4)this.currentLineLength=this.getLineLength(M);const O={id:Y.id,type:this.shapeType,props:{segments:M}};if(this.canClose())O.props.isClosed=this.getIsClosed(M,Y.props.size);this.editor.updateShapes([O]);return}}this.pagePointWhereCurrentSegmentChanged=J.clone();const q=v6();this.editor.createShapes([{id:q,type:this.shapeType,x:J.x,y:J.y,props:{isPen:this.isPen,segments:[{type:this.segmentMode,points:[{x:0,y:0,z:+Z.toFixed(2)}]}]}}]),this.currentLineLength=0,this.initialShape=this.editor.getShape(q)}updateDrawingShape(){const{initialShape:J}=this,{inputs:Q}=this.editor;if(!J)return;const{id:Z,props:{size:q}}=J,Y=this.editor.getShape(Z);if(!Y)return;const{segments:$}=Y.props,{x:W,y:G,z}=this.editor.getPointInShapeSpace(Y,Q.currentPagePoint).toFixed(),U={x:W,y:G,z:this.isPen?+(z*1.25).toFixed(2):0.5};switch(this.segmentMode){case"starting_straight":{const{pagePointWhereNextSegmentChanged:F}=this;if(F===null)throw Error("We should have a point where the segment changed");if(j.Dist2(F,Q.currentPagePoint)>vZ){this.pagePointWhereCurrentSegmentChanged=this.pagePointWhereNextSegmentChanged.clone(),this.pagePointWhereNextSegmentChanged=null,this.segmentMode="straight";const M=P5($);if(!M)throw Error("Expected a previous segment!");const O=P5(M.points);if(!O)throw Error("Expected a previous last point!");let R;const V=this.editor.getPointInShapeSpace(Y,this.pagePointWhereCurrentSegmentChanged).toFixed().toJson();if(M.type==="straight"){this.currentLineLength+=j.Dist(O,V),R={type:"straight",points:[{...O},V]};const _=this.editor.getShapePageTransform(Y);this.pagePointWhereCurrentSegmentChanged=j0.applyToPoint(_,O)}else R={type:"straight",points:[V,U]};const E={id:Z,type:this.shapeType,props:{segments:[...$,R]}};if(this.canClose())E.props.isClosed=this.getIsClosed($,q);this.editor.updateShapes([E],{squashing:!0})}break}case"starting_free":{const{pagePointWhereNextSegmentChanged:F}=this;if(F===null)throw Error("We should have a point where the segment changed");if(j.Dist2(F,Q.currentPagePoint)>vZ){this.pagePointWhereCurrentSegmentChanged=this.pagePointWhereNextSegmentChanged.clone(),this.pagePointWhereNextSegmentChanged=null,this.segmentMode="free";const M=$.slice(),O=M[M.length-1],R=P5(O.points);if(!R)throw Error("No previous point!");const V={type:"free",points:[...j.PointsBetween(R,U,6).map((A)=>A.toFixed().toJson())]},E=[...M,V];if(this.currentLineLength<C9[Y.props.size]*4)this.currentLineLength=this.getLineLength(E);const _={id:Z,type:this.shapeType,props:{segments:E}};if(this.canClose())_.props.isClosed=this.getIsClosed(E,q);this.editor.updateShapes([_],{squashing:!0})}break}case"straight":{const F=$.slice(),B=F[F.length-1],{pagePointWhereCurrentSegmentChanged:M}=this,{ctrlKey:O,currentPagePoint:R}=this.editor.inputs;if(!M)throw Error("We should have a point where the segment changed");let V,E=!1;if(this.didJustShiftClickToExtendPreviousShapeLine){if(this.editor.inputs.isDragging)E=!O,this.didJustShiftClickToExtendPreviousShapeLine=!1}else E=!O;let _=this.editor.getPointInShapeSpace(Y,R).toFixed().toJson(),A=!1,w=void 0;if(this.editor.user.getIsSnapMode()?!O:O){if(F.length>2){let P=void 0,y=8/this.editor.getZoomLevel();for(let p=0,s=$.length-2;p<s;p++){const c=$[p];if(!c)break;if(c.type==="free")continue;const t=c.points[0],X0=P5(c.points);if(!(t&&X0))continue;const J0=j.NearestPointOnLineSegment(t,X0,_);if(j.DistMin(J0,_,y)){P=J0.toFixed().toJson(),y=j.Dist(J0,_),w=c;break}}if(P)A=!0,_=P}}if(A&&w){const P=this.editor.getShapePageTransform(Y),y=w.points[0],p=P5(w.points);if(!p)throw Error("Expected a last point!");const s=j0.applyToPoint(P,y),c=j0.applyToPoint(P,p),t=j0.applyToPoint(P,_);this.editor.snaps.setIndicators([{id:u6(),type:"points",points:[s,t,c]}])}else{if(this.editor.snaps.clearIndicators(),E){const P=j.Angle(M,R),p=WX(P,24)-P;V=j.RotWith(R,M,p)}else V=R;_=this.editor.getPointInShapeSpace(Y,V).toFixed().toJson()}this.currentLineLength+=j.Dist(B.points[0],_),F[F.length-1]={...B,type:"straight",points:[B.points[0],_]};const k={id:Z,type:this.shapeType,props:{segments:F}};if(this.canClose())k.props.isClosed=this.getIsClosed($,q);this.editor.updateShapes([k],{squashing:!0});break}case"free":{const F=$.slice(),B=F[F.length-1],M=[...B.points];if(M.length&&this.mergeNextPoint){const{z:R}=M[M.length-1];M[M.length-1]={x:U.x,y:U.y,z:R?Math.max(R,U.z):U.z}}else this.currentLineLength+=j.Dist(M[M.length-1],U),M.push(U);if(F[F.length-1]={...B,points:M},this.currentLineLength<C9[Y.props.size]*4)this.currentLineLength=this.getLineLength(F);const O={id:Z,type:this.shapeType,props:{segments:F}};if(this.canClose())O.props.isClosed=this.getIsClosed(F,q);if(this.editor.updateShapes([O],{squashing:!0}),M.length>500){this.editor.updateShapes([{id:Z,type:this.shapeType,props:{isComplete:!0}}]);const R=v6();this.editor.createShapes([{id:R,type:this.shapeType,x:xY(Q.currentPagePoint.x),y:xY(Q.currentPagePoint.y),props:{isPen:this.isPen,segments:[{type:"free",points:[{x:0,y:0,z:this.isPen?+(z*1.25).toFixed():0.5}]}]}}]),this.initialShape=p6(this.editor.getShape(R)),this.mergeNextPoint=!1,this.lastRecordedPoint=Q.currentPagePoint.clone(),this.currentLineLength=0}break}}}getLineLength(J){let Q=0;for(let Z of J)for(let q=0;q<Z.points.length-1;q++){const Y=Z.points[q],$=Z.points[q+1];Q+=j.Dist2($,Y)}return Math.sqrt(Q)}onPointerUp=()=>{this.complete()};onCancel=()=>{this.cancel()};onComplete=()=>{this.complete()};onInterrupt=()=>{if(this.editor.inputs.isDragging)return;if(this.markId)this.editor.bailToMark(this.markId);this.cancel()};complete(){if(!this.canDraw){this.cancel();return}const{initialShape:J}=this;if(!J)return;this.editor.updateShapes([{id:J.id,type:J.type,props:{isComplete:!0}}]),this.parent.transition("idle")}cancel(){this.parent.transition("idle",this.info)}}class b3 extends B0{static id="idle";onPointerDown=(J)=>{this.parent.transition("drawing",J)};onEnter=()=>{this.editor.setCursor({type:"cross",rotation:0})};onCancel=()=>{this.editor.setCurrentTool("select")}}class DM extends B0{static id="draw";static initial="idle";static children=()=>[b3,T3];shapeType="draw";onExit=()=>{const J=this.children.drawing;J.initialShape=void 0}}var xF0=function(J,Q,Z){if(Q.includes(J.id))return!1;if(J.parentId===Z.parentId)return!0;return!1};class RM extends bN{static id="frame";static initial="idle";shapeType="frame";onCreate=(J)=>{if(!J)return;const Q=this.editor.getShapePageBounds(J),Z=[],q=this.editor.getShapeAncestors(J).map((Y)=>Y.id);if(this.editor.getSortedChildIdsForParent(J.parentId).map((Y)=>{const $=this.editor.getShape(Y);if(!$)return;if($.id===J.id)return;if($.isLocked)return;const W=this.editor.getShapePageBounds($);if(!W)return;if(Q.contains(W)){if(xF0($,q,J))Z.push($.id)}}),this.editor.reparentShapes(Z,J.id),this.editor.getInstanceState().isToolLocked)this.editor.setCurrentTool("frame");else this.editor.setCurrentTool("select.idle")}}class Rw extends B0{static id="idle";onPointerDown=(J)=>{this.parent.transition("pointing",J)};onEnter=()=>{this.editor.setCursor({type:"cross",rotation:0})};onKeyUp=(J)=>{if(J.key==="Enter"){if(this.editor.getInstanceState().isReadonly)return null;const Q=this.editor.getOnlySelectedShape();if(Q&&this.editor.getShapeUtil(Q).canEdit(Q))this.editor.setCurrentTool("select"),this.editor.setEditingShape(Q.id),this.editor.root.getCurrent()?.transition("editing_shape",{...J,target:"shape",shape:Q})}};onCancel=()=>{this.editor.setCurrentTool("select")}}class jw extends B0{static id="pointing";markId="";onPointerUp=()=>{this.complete()};onPointerMove=(J)=>{if(this.editor.inputs.isDragging){const{originPagePoint:Q}=this.editor.inputs,Z=v6();this.markId=`creating:${Z}`,this.editor.mark(this.markId),this.editor.createShapes([{id:Z,type:"geo",x:Q.x,y:Q.y,props:{w:1,h:1,geo:this.editor.getStyleForNextShape(z7)}}]).select(Z).setCurrentTool("select.resizing",{...J,target:"selection",handle:"bottom_right",isCreating:!0,creationCursorOffset:{x:1,y:1},onInteractionEnd:"geo"})}};onCancel=()=>{this.cancel()};onComplete=()=>{this.complete()};onInterrupt=()=>{this.cancel()};complete(){const{originPagePoint:J}=this.editor.inputs,Q=v6();this.markId=`creating:${Q}`,this.editor.mark(this.markId),this.editor.createShapes([{id:Q,type:"geo",x:J.x,y:J.y,props:{geo:this.editor.getStyleForNextShape(z7),w:1,h:1}}]);const Z=this.editor.getShape(Q);if(!Z)return;const q=Z.props.geo==="star"?new V0(0,0,200,190):Z.props.geo==="cloud"?new V0(0,0,300,180):new V0(0,0,200,200),Y=q.center,$=this.editor.getShapeParentTransform(Z);if($)Y.rot(-$.rotation());if(this.editor.select(Q),this.editor.updateShapes([{id:Z.id,type:"geo",x:Z.x-Y.x,y:Z.y-Y.y,props:{geo:this.editor.getStyleForNextShape(z7),w:q.width,h:q.height}}]),this.editor.getInstanceState().isToolLocked)this.parent.transition("idle");else this.editor.setCurrentTool("select",{})}cancel(){this.parent.transition("idle")}}class jM extends B0{static id="geo";static initial="idle";static children=()=>[Rw,jw];shapeType="geo"}class _M extends B0{static id="highlight";static initial="idle";static children=()=>[b3,T3];shapeType="highlight";onExit=()=>{const J=this.children.drawing;J.initialShape=void 0}}class _w extends B0{static id="idle";shapeId="";onEnter=(J)=>{this.shapeId=J.shapeId,this.editor.setCursor({type:"cross",rotation:0})};onPointerDown=()=>{this.parent.transition("pointing",{shapeId:this.shapeId})};onCancel=()=>{this.editor.setCurrentTool("select")}}var ei=2;class Ew extends B0{static id="pointing";shape={};markId;onEnter=(J)=>{const{inputs:Q}=this.editor,{currentPagePoint:Z}=Q;this.markId=void 0;const q=J.shapeId&&this.editor.getShape(J.shapeId);if(q&&Q.shiftKey){this.markId=`creating:${q.id}`,this.editor.mark(this.markId),this.shape=q;const Y=this.editor.getShapeHandles(this.shape);if(!Y)return;const $=Y.filter((B)=>B.type==="vertex").sort(P9),W=$[$.length-1],G=$[$.length-2],z=j0.applyToPoint(this.editor.getShapeParentTransform(this.shape),new j(this.shape.x,this.shape.y)),U=j.Sub(Z,z).addXY(0.1,0.1),F=p6(this.shape.props.points);if(j.DistMin(W,G,ei)||j.DistMin(U,W,ei))F[W.id]={id:W.id,index:W.index,x:U.x,y:U.y};else{const B=g7(W.index);F[B]={id:B,index:B,x:U.x,y:U.y}}this.editor.updateShapes([{id:this.shape.id,type:this.shape.type,props:{points:F}}])}else{const Y=v6();this.markId=`creating:${Y}`,this.editor.mark(this.markId),this.editor.createShapes([{id:Y,type:"line",x:Z.x,y:Z.y}]),this.editor.select(Y),this.shape=this.editor.getShape(Y)}};onPointerMove=()=>{if(!this.shape)return;if(this.editor.inputs.isDragging){const J=this.editor.getShapeHandles(this.shape);if(!J){if(this.markId)this.editor.bailToMark(this.markId);throw Error("No handles found")}const Q=P5(J);this.editor.setCurrentTool("select.dragging_handle",{shape:this.shape,isCreating:!0,handle:{...Q,x:Q.x-0.1,y:Q.y-0.1},onInteractionEnd:"line"})}};onPointerUp=()=>{this.complete()};onCancel=()=>{this.cancel()};onComplete=()=>{this.complete()};onInterrupt=()=>{if(this.parent.transition("idle"),this.markId)this.editor.bailToMark(this.markId);this.editor.snaps.clearIndicators()};complete(){this.parent.transition("idle",{shapeId:this.shape.id}),this.editor.snaps.clearIndicators()}cancel(){if(this.markId)this.editor.bailToMark(this.markId);this.parent.transition("idle",{shapeId:this.shape.id}),this.editor.snaps.clearIndicators()}}class EM extends B0{static id="line";static initial="idle";static children=()=>[_w,Ew];shapeType="line"}class Cw extends B0{static id="idle";onPointerDown=(J)=>{this.parent.transition("pointing",J)};onEnter=()=>{this.editor.setCursor({type:"cross",rotation:0})};onCancel=()=>{this.editor.setCurrentTool("select")}}var K8=function(J,Q){const Z=new Set;for(let Y of Q){const $=J.getShape(Y);if(!$)continue;if(J.getShapeUtil($).onDragShapesOut)Z.add($);const W=J.getShape($.parentId);if(!W)continue;if(J.getShapeUtil(W).onDragShapesOut)Z.add(W)}const q=new Map;for(let Y of Z){const $=CM(J,Y);if($.length)q.set(Y,$)}for(let[Y,$]of q){const W=J.getShapeUtil(Y),G=Y6($.map((z)=>J.getShape(z)));W.onDragShapesOut?.(Y,G)}},CM=function(J,Q){const Z=J.getSortedChildIdsForParent(Q.id);if(Z.length===0)return[];const q=J.getShapePageBounds(Q);if(!q)return[];let Y,$,W;const G=[];for(let z of Z){const U=J.getShapePageBounds(z);if(!U)continue;if(!q.includes(U)){G.push(z);continue}Y??=J.getShapeGeometry(Q),$??=J.getShapePageTransform(Q),W??=$.applyToPoints(Y.vertices);const F=J.getShapePageTransform(z).clone().invert().applyToPoints(W),{vertices:B,isClosed:M}=J.getShapeGeometry(z);if(B.some((O)=>i9(O,F)))continue;if(M){if(G3(F,B))continue}else if(YA(F,B))continue;G.push(z)}return G},YK=function(J,Q,Z=!1){if(J.select(Q),J.setEditingShape(Q),J.setCurrentTool("select.editing_shape",{target:"shape",shape:Q}),Z)J.emit("select-all-text",{shapeId:Q.id});Aw(J)},Aw=function(J){const Q=J.getSelectionPageBounds(),Z=J.getViewportPageBounds();if(Q&&!Z.contains(Q)){const q=Q.clone().expandBy(yF0/J.getZoomLevel()).expand(Z),Y=Z.clone().translate({x:(q.center.x-Z.center.x)*2,y:(q.center.y-Z.center.y)*2});J.zoomToBounds(Y,{duration:SJ,inset:0})}},yF0=16;var kw=function(J,Q,Z,q){return Object.fromEntries(Object.entries(vF0).map(([Y,$],W)=>{const G=$.clone();if(W===0&&q)G.y-=q;else if(W===2&&Z)G.y+=Z;return[Y,G.rot(Q).add(J)]}))},kM=function(J,Q,Z){const q=new Set(J.getSelectedShapeIds()),Y=(L8+EX+Z)**2,$=new Map,W=[];for(let U of J.getCurrentPageShapes()){if(!J.isShapeOfType(U,"note")||q.has(U.id))continue;const F=J.getShapePageTransform(U.id);if(Q!==F.rotation())continue;$.set(U,J.getShapePageBounds(U).center),W.push(...Object.values(kw(F.point(),Q,U.props.growY,Z)))}const G=W.length;let z;for(let[U,F]of $)for(let B=0;B<G;B++){if(z=W[B],!z)continue;if(j.Dist2(F,z)>Y)continue;if(J.isPointInShape(U,z))W[B]=void 0}return Y6(W)},wM=function(J,Q,Z,q,Y=!1){let $;const W=J.getCurrentPageShapesSorted(),G=L8+EX**2;for(let z=W.length-1;z>=0;z--){const U=W[z];if(U.type==="note"&&U.id!==Q.id){const F=J.getShapePageBounds(U);if(F&&j.Dist2(F.center,Z)<G&&J.isPointInShape(U,Z)){$=U;break}}}if(J.complete(),!$||Y){J.mark("creating note shape");const z=v6();J.createShape({id:z,type:"note",x:Z.x,y:Z.y,rotation:q,opacity:Q.opacity,props:{...Q.props,text:"",growY:0,fontSizeAdjustment:0,url:""}});const U=J.getShape(z),F=J.getPointInParentSpace(U,j.Sub(Z,j.Rot(x3,q)));J.updateShape({id:z,type:"note",x:F.x,y:F.y}),$=J.getShape(z)}return Aw(J),$},EX=20,Jn=0,L8=200,x3={x:L8/2,y:L8/2},AM=10,vF0={["a1"]:new j(L8*0.5,L8*-0.5-EX),["a2"]:new j(L8*1.5+EX,L8*0.5),["a3"]:new j(L8*0.5,L8*1.5+EX),["a4"]:new j(L8*-0.5-EX,L8*0.5)};var Qn=function(J,Q){let Z=AM/J.getZoomLevel(),q;for(let Y of kM(J,0,0)){const $=j.Sub(Q,Y),W=$.len();if(W<Z)Z=W,q=$}return q},Zn=function(J,Q,Z){J.createShape({id:Q,type:"note",x:Z.x,y:Z.y}).select(Q);const q=J.getShape(Q),Y=J.getShapeGeometry(q).bounds;return J.updateShapes([{id:Q,type:"note",x:q.x-Y.width/2,y:q.y-Y.height/2}]),J.getShape(Q)};class ww extends B0{static id="pointing";dragged=!1;info={};wasFocusedOnEnter=!1;markId="";shape={};onEnter=()=>{const{editor:J}=this;if(this.wasFocusedOnEnter=!J.getIsMenuOpen(),this.wasFocusedOnEnter){const Q=v6();this.markId=`creating:${Q}`,J.mark(this.markId);const Z=this.editor.inputs.originPagePoint.clone(),q=Qn(this.editor,Z);if(q)Z.sub(q);this.shape=Zn(this.editor,Q,Z)}};onPointerMove=(J)=>{if(this.editor.inputs.isDragging){if(!this.wasFocusedOnEnter){const Q=v6(),Z=this.editor.inputs.originPagePoint.clone(),q=Qn(this.editor,Z);if(q)Z.sub(q);this.shape=Zn(this.editor,Q,Z)}this.editor.setCurrentTool("select.translating",{...J,target:"shape",shape:this.shape,onInteractionEnd:"note",isCreating:!0,onCreate:()=>{this.editor.setEditingShape(this.shape.id),this.editor.setCurrentTool("select.editing_shape")}})}};onPointerUp=()=>{this.complete()};onInterrupt=()=>{this.cancel()};onComplete=()=>{this.complete()};onCancel=()=>{this.cancel()};complete(){if(this.wasFocusedOnEnter)if(this.editor.getInstanceState().isToolLocked)this.parent.transition("idle");else this.editor.setEditingShape(this.shape.id),this.editor.setCurrentTool("select.editing_shape",{...this.info,target:"shape",shape:this.shape})}cancel(){this.editor.bailToMark(this.markId),this.parent.transition("idle",this.info)}}class IM extends B0{static id="note";static initial="idle";static children=()=>[Cw,ww];shapeType="note"}var SF0=function(J){const Q=J.getShapeAtPoint(J.inputs.currentPagePoint,{hitInside:!1,hitLabels:!1,margin:e5/J.getZoomLevel(),renderingOnly:!0});if(!Q)return J.setHoveredShape(null);let Z=void 0;const q=J.getOutermostSelectableShape(Q);if(q===Q)Z=Q;else if(q.id===J.getFocusedGroupId()||J.getSelectedShapeIds().includes(q.id))Z=Q;else Z=q;return J.setHoveredShape(Z.id)},pZ=nH(SF0,32);class Iw extends B0{static id="idle";onPointerMove=(J)=>{switch(J.target){case"shape":case"canvas":pZ(this.editor)}};onPointerDown=(J)=>{this.parent.transition("pointing",J)};onEnter=()=>{this.editor.setCursor({type:"cross",rotation:0})};onKeyDown=(J)=>{if(J.key==="Enter"){if(this.editor.getInstanceState().isReadonly)return null;const Q=this.editor.getOnlySelectedShape();if(Q&&this.editor.getShapeUtil(Q).canEdit(Q))this.editor.setCurrentTool("select"),this.editor.setEditingShape(Q.id),this.editor.root.getCurrent()?.transition("editing_shape",{...J,target:"shape",shape:Q})}};onCancel=()=>{this.editor.setCurrentTool("select")}}class Pw extends B0{static id="pointing";shape;markId="";onExit=()=>{this.editor.setHintingShapes([])};onPointerMove=(J)=>{if(this.editor.inputs.isDragging){const{inputs:{originPagePoint:Q}}=this.editor,Z=v6();if(this.markId=`creating:${Z}`,this.editor.mark(this.markId),this.editor.createShapes([{id:Z,type:"text",x:Q.x,y:Q.y,props:{text:"",autoSize:!1,w:20}}]),this.editor.select(Z),this.shape=this.editor.getShape(Z),!this.shape)return;const{shape:q}=this;this.editor.setCurrentTool("select.resizing",{...J,target:"selection",handle:"right",isCreating:!0,creationCursorOffset:{x:1,y:1},onInteractionEnd:"text",onCreate:()=>{this.editor.setEditingShape(q.id),this.editor.setCurrentTool("select.editing_shape")}})}};onPointerUp=()=>{this.complete()};onComplete=()=>{this.cancel()};onCancel=()=>{this.cancel()};onInterrupt=()=>{this.cancel()};complete(){this.editor.mark("creating text shape");const J=v6(),{x:Q,y:Z}=this.editor.inputs.currentPagePoint;this.editor.createShapes([{id:J,type:"text",x:Q,y:Z,props:{text:"",autoSize:!0}}]).select(J),this.editor.setEditingShape(J),this.editor.setCurrentTool("select"),this.editor.root.getCurrent()?.transition("editing_shape")}cancel(){this.parent.transition("idle"),this.editor.bailToMark(this.markId)}}class PM extends B0{static id="text";static initial="idle";static children=()=>[Iw,Pw];shapeType="text"}var Tw=[PM,DM,jM,IM,EM,RM,VM,_M];var R6=v(W0(),1);var En=v(o(),1);var IQ=v(W0(),1);var qn=v(o(),1),g6=function(){return y5({isDarkMode:g1()})},O8=qn.default.memo(function J({theme:Q,d:Z,color:q,fill:Y}){switch(Y){case"none":return null;case"solid":return IQ.jsx("path",{fill:Q[q].semi,d:Z});case"semi":return IQ.jsx("path",{fill:Q.solid,d:Z});case"pattern":return IQ.jsx(fF0,{theme:Q,color:q,fill:Y,d:Z})}}),fF0=function J({d:Q,color:Z,theme:q}){const Y=h(),$=U3(),W=e("zoomLevel",()=>Y.getZoomLevel(),[Y]),G=Math.ceil(W),z=Y.getZoomLevel()<=0.18;return IQ.jsxs(IQ.Fragment,{children:[IQ.jsx("path",{fill:q[Z].pattern,d:Q}),IQ.jsx("path",{fill:$?`url(#${yZ[`1_${q.id}`]})`:z?q[Z].semi:`url(#${yZ[`${G}_${q.id}`]})`,d:Q})]})};var bM=v(W0(),1);var TM=v(W0(),1);var gF0=function(J){return J.replace(/\s/g,"\xA0")},y3=function(J,Q,Z){const{padding:q=0}=Z;if(Q.length===0)return null;const Y=V0.From(Q[0].box);for(let{box:U}of Q)Y.union(U);const $=q+(Z.offsetX??0),W=(Z.offsetY??0)+Z.fontSize/2+(Z.verticalTextAlign==="start"?q:Z.verticalTextAlign==="end"?Z.height-q-Y.height:(Math.ceil(Z.height)-Y.height)/2);let G=null;const z=[];for(let{text:U,box:F}of Q){if(G!==null&&F.y>G)z.push(TM.jsx("tspan",{alignmentBaseline:"mathematical",x:$,y:F.y+W,children:"\n"},z.length));z.push(TM.jsx("tspan",{alignmentBaseline:"mathematical",x:F.x+$,y:F.y+W,children:gF0(U)},z.length)),G=F.y}return TM.jsx("text",{fontSize:Z.fontSize,fontFamily:Z.fontFamily,fontStyle:Z.fontFamily,fontWeight:Z.fontWeight,dominantBaseline:"mathematical",alignmentBaseline:"mathematical",stroke:Z.stroke,strokeWidth:Z.strokeWidth,fill:Z.fill,children:z})};var Xn=function(J,Q,Z,q){if((J==="start-legacy"||J==="end-legacy")&&Z.length!==0){const Y=V0.From(Z[0].box);for(let{box:$}of Z)Y.union($);if(J==="start-legacy")return(q-2*Q-Y.width)/2;else if(J==="end-legacy")return-(q-2*Q-Y.width)/2}},Yn=function(J){return J==="start-legacy"||J==="middle-legacy"||J==="end-legacy"};var CX=function({fontSize:J,font:Q,align:Z,verticalAlign:q,text:Y,labelColor:$,bounds:W,padding:G=16,stroke:z=!0}){const U=h(),F=g6(),B={fontSize:J,fontFamily:Bz[Q],textAlign:Z,verticalTextAlign:q,width:Math.ceil(W.width),height:Math.ceil(W.height),padding:G,lineHeight:E9.lineHeight,fontStyle:"normal",fontWeight:"normal",overflow:"wrap",offsetX:0,offsetY:0,fill:$,stroke:void 0,strokeWidth:void 0},M=U.textMeasure.measureTextSpans(Y,B),O=Xn(Z,G,M,W.width);if(O)B.offsetX=O;B.offsetX+=W.x,B.offsetY+=W.y;const R=y3(U,M,B);let V=null;if(z)B.fill=F.background,B.stroke=F.background,B.strokeWidth=2,V=y3(U,M,B);return bM.jsxs(bM.Fragment,{children:[V,R]})};var B5=v(W0(),1);var PQ=v(o(),1);var TQ=function(J){return{key:`${MJ.id}:${J}`,getElement:async()=>{const Q=mF0(J);if(!Q)return null;const{$$_url:Z,$$_fontface:q}=Q;if(!Z||!q)return null;const Y=await(await fetch(Z)).blob(),$=await V4.blobToDataUrl(Y),W=q.replace(Z,$);return B5.jsx("style",{children:W})}}},mF0=function(J){const Q=Bz[J];for(let Z of document.fonts)if(Q.includes(Z.family))return Z;return null},eW=function(J){return{key:`${MJ.id}:${J}`,getElement:async()=>{if(J!=="pattern")return null;return B5.jsx(hF0,{})}}},hF0=function(){const J=g6();return B5.jsxs(B5.Fragment,{children:[B5.jsxs("mask",{id:"hash_pattern_mask",children:[B5.jsx("rect",{x:"0",y:"0",width:"8",height:"8",fill:"white"}),B5.jsxs("g",{strokeLinecap:"round",stroke:"black",children:[B5.jsx("line",{x1:0.6666666666666666,y1:2,x2:2,y2:0.6666666666666666}),B5.jsx("line",{x1:3.333333333333333,y1:4.666666666666666,x2:4.666666666666666,y2:3.333333333333333}),B5.jsx("line",{x1:6,y1:7.333333333333333,x2:7.333333333333333,y2:6})]})]}),B5.jsx("pattern",{id:yZ[`1_${J.id}`],width:"8",height:"8",patternUnits:"userSpaceOnUse",children:B5.jsx("rect",{x:"0",y:"0",width:"8",height:"8",fill:J.solid,mask:"url(#hash_pattern_mask)"})})]})},J2=function(){return{key:`${MJ.id}:pattern`,component:pF0}},cF0=function(){const Q=h().getInstanceState().devicePixelRatio,[Z,q]=PQ.useState(!1),Y=PQ.useMemo(()=>uF0(),[]),[$,W]=PQ.useState(Y);return PQ.useEffect(()=>{const z=[];for(let F=1;F<=Math.ceil(T1);F++)z.push(Kn(Q,F,!1).then((B)=>({zoom:F,url:URL.createObjectURL(B),darkMode:!1}))),z.push(Kn(Q,F,!0).then((B)=>({zoom:F,url:URL.createObjectURL(B),darkMode:!0})));let U=!1;return Promise.all(z).then((F)=>{if(U)return;W(F),q(!0)}),()=>{U=!0,q(!1)}},[Q]),{defs:B5.jsx(B5.Fragment,{children:$.map((z)=>{const U=z.zoom+(z.darkMode?"_dark":"_light");return B5.jsx("pattern",{id:yZ[U],width:v3,height:v3,patternUnits:"userSpaceOnUse",children:B5.jsx("image",{href:z.url,width:v3,height:v3})},U)})}),isReady:Z}},pF0=function(){const J=h(),Q=PQ.useRef(null),{defs:Z,isReady:q}=cF0();return PQ.useEffect(()=>{if(q&&J.environment.isSafari){const Y=Wn(Q.current);if(Y)requestAnimationFrame(()=>{Y.style.display="none",requestAnimationFrame(()=>{Y.style.display=""})})}},[J,q]),B5.jsx("g",{ref:Q,"data-testid":q?"ready-pattern-fill-defs":void 0,children:Z})},Wn=function(J){if(J.classList.contains("tl-html-layer"))return J;if(J.parentElement)return Wn(J.parentElement);return null},v3=8,Kn=(J,Q,Z)=>{return new Promise((q,Y)=>{const $=v3*Q*J,W=document.createElement("canvas");W.width=$,W.height=$;const G=W.getContext("2d");if(!G)return;G.fillStyle=Z?"#212529":"#f8f9fa",G.fillRect(0,0,$,$),G.globalCompositeOperation="destination-out",G.lineCap="round",G.lineWidth=1.25*Q*J;const z=0.6666666666666666,U=(F)=>F*Q*J;G.beginPath(),G.moveTo(U(z*1),U(z*3)),G.lineTo(U(z*3),U(z*1)),G.moveTo(U(z*5),U(z*7)),G.lineTo(U(z*7),U(z*5)),G.moveTo(U(z*9),U(z*11)),G.lineTo(U(z*11),U(z*9)),G.stroke(),W.toBlob((F)=>{if(!F||t8.throwToBlob.get())Y();else q(F)})})},$n=(J,Q)=>{const Z=document.createElement("canvas");Z.width=J[0],Z.height=J[1];const q=Z.getContext("2d");if(!q)return"";return Q(q),Z.toDataURL()},uF0=()=>{const J=[];for(let Q=1;Q<=Math.ceil(T1);Q++){const Z=$n([1,1],(Y)=>{Y.fillStyle=GW.lightMode.black.semi,Y.fillRect(0,0,1,1)}),q=$n([1,1],(Y)=>{Y.fillStyle=GW.darkMode.black.semi,Y.fillRect(0,0,1,1)});J.push({zoom:Q,url:Z,darkMode:!1}),J.push({zoom:Q,url:q,darkMode:!0})}return J};var nJ=function(J,Q,Z={}){const{closed:q=!1,snap:Y=1,start:$="outset",end:W="outset",lengthRatio:G=2,style:z="dashed"}=Z;let U=0,F=0,B=1,M=0,O=0;switch(z){case"dashed":{B=1,U=Math.min(Q*G,J/4);break}case"dotted":{B=100,U=Q/B;break}default:return{strokeDasharray:"none",strokeDashoffset:"none"}}if(!q){if($==="outset")J+=U/2,O+=U/2;else if($==="skip")J-=U,O-=U;if(W==="outset")J+=U/2;else if(W==="skip")J-=U}if(F=Math.floor(J/U/(2*B)),F-=F%Y,F<3&&z==="dashed")if(J/Q<5)U=J,F=1,M=0;else U=J*0.333,M=J*0.333;else if(F=Math.max(F,3),U=J/F/(2*B),q)O=U/2,M=(J-F*U)/F;else M=(J-F*U)/Math.max(1,F-1);return{strokeDasharray:[U,M].join(" "),strokeDashoffset:O.toString()}};var bw=function(J,Q){const Z=Gn.get(Q);if(Z)return Z;const q=J.getArrowInfo(Q);let Y=0,$=0;const W=q.isStraight?new f1({start:j.From(q.start.point),end:j.From(q.end.point)}):new mW({center:j.Cast(q.handleArc.center),radius:q.handleArc.radius,start:j.Cast(q.start.point),end:j.Cast(q.end.point),sweepFlag:q.bodyArc.sweepFlag,largeArcFlag:q.bodyArc.largeArcFlag});if(Q.props.text.trim()){const z=W.bounds,{w:U,h:F}=J.textMeasure.measureText(Q.props.text,{...E9,fontFamily:iJ[Q.props.font],fontSize:wQ[Q.props.size],maxWidth:null});if(Y=U,$=F,z.width>z.height){Y=Math.max(Math.min(U,64),Math.min(z.width-64,U));const{w:B,h:M}=J.textMeasure.measureText(Q.props.text,{...E9,fontFamily:iJ[Q.props.font],fontSize:wQ[Q.props.size],maxWidth:Y});Y=B,$=M}if(Y>16*wQ[Q.props.size]){Y=16*wQ[Q.props.size];const{w:B,h:M}=J.textMeasure.measureText(Q.props.text,{...E9,fontFamily:iJ[Q.props.font],fontSize:wQ[Q.props.size],maxWidth:Y});Y=B,$=M}}const G=new j(Y,$).addScalar(ui*2);return Gn.set(Q,G),G},Un=function(J,Q){const Z=C9[Q.props.size];return hi+(Z-C9.s)*2+(Z===C9.xl?20:0)},dF0=function(J,Q,Z){const q=bw(J,Q),Y=Un(J,Q),$=j.Nudge(Z.start.point,Z.end.point,Y),W=j.Nudge(Z.end.point,Z.start.point,Y),G=lY($,W,V0.FromCenter(Z.middle,q).corners);if(!G||G.length!==2)return{start:0.5,end:0.5};let[z,U]=G;if(j.Dist2(z,$)>j.Dist2(U,$))[U,z]=G;const F=$.add(j.Sub(Z.middle,z)),B=W.add(j.Sub(Z.middle,U)),M=j.Dist(Z.start.point,F)/Z.length,O=j.Dist(Z.start.point,B)/Z.length;return{start:M,end:O}},lF0=function(J,Q,Z){const q=bw(J,Q),Y=Un(J,Q),$=Math.sign(Q.props.bend),W=Y/Z.handleArc.radius*$,G=j.Angle(Z.bodyArc.center,Z.start.point)-W,z=j.Angle(Z.bodyArc.center,Z.end.point)+W,U=t4(Z.bodyArc.center,Z.bodyArc.radius,G),F=t4(Z.bodyArc.center,Z.bodyArc.radius,z),B=[],M=Hn(Z.bodyArc.center,Z.bodyArc.radius,G,z,$,V0.FromCenter(U,q).corners);B.push(new e8({points:V0.FromCenter(U,q).corners,debugColor:"lime",isFilled:!1,ignore:!0}));const O=Hn(Z.bodyArc.center,Z.bodyArc.radius,G,z,$,V0.FromCenter(F,q).corners);B.push(new e8({points:V0.FromCenter(F,q).corners,debugColor:"lime",isFilled:!1,ignore:!0}));for(let y of[...M??[],...O??[],U,F])B.push(new MX({x:y.x-3,y:y.y-3,radius:3,isFilled:!1,debugColor:"magenta",ignore:!0}));const R=(M&&zn(Z.start.point,M))??Z.middle,V=(O&&zn(Z.end.point,O))??Z.middle,E=j.Angle(Z.bodyArc.center,Z.start.point),_=j.Angle(Z.bodyArc.center,Z.end.point),A=j.Angle(Z.bodyArc.center,R),w=j.Angle(Z.bodyArc.center,V);if(RQ(E,A,$)>RQ(E,w,$))return{start:0.5,end:0.5,dbg:B};const T=RQ(E,_,$),k=RQ(E,A,$)/T,P=RQ(E,w,$)/T;return{start:k,end:P,dbg:B}},S3=function(J,Q){let Z;const q=[],Y=J.getArrowInfo(Q),$=Q.props.start.type==="binding",W=Q.props.end.type==="binding",G=Y.start.arrowhead!=="none",z=Y.end.arrowhead!=="none";if(Y.isStraight){const F=dF0(J,Q,Y);let B=u7(Q.props.labelPosition,G||$?F.start:0,z||W?F.end:1);B=B>=0.48&&B<=0.52?0.5:B,Z=j.Lrp(Y.start.point,Y.end.point,B)}else{const F=lF0(J,Q,Y);if(F.dbg)q.push(...F.dbg);let B=u7(Q.props.labelPosition,G||$?F.start:0,z||W?F.end:1);B=B>=0.48&&B<=0.52?0.5:B;const M=iF0(j.Angle(Y.bodyArc.center,Y.start.point),j.Angle(Y.bodyArc.center,Y.end.point),Math.sign(Q.props.bend),B);Z=t4(Y.bodyArc.center,Y.bodyArc.radius,M)}const U=bw(J,Q);return{box:V0.FromCenter(Z,U),debugGeom:q}},Hn=function(J,Q,Z,q,Y,$){const W=TW(J,Q,$),G=RQ(Z,q,Y);return W?.filter((z)=>{const U=RQ(Z,j.Angle(J,z),Y);return U>=0&&U<=G})},zn=function(J,Q){let Z=null,q=(-Infinity);for(let Y of Q){const $=j.Dist2(J,Y);if($>q)Z=Y,q=$}return Z},iF0=function(J,Q,Z,q){const Y=RQ(J,Q,Z);return J+Y*q*Z*-1},Gn=new WeakMap;var nF0=function(J,Q,Z){const q=Q==="end"?J.end.point:J.start.point,Y=Q==="end"?J.start.point:J.end.point,$=J.isStraight?j.Dist(Y,q):Math.abs(J.bodyArc.length),W=Math.max(Math.min($/5,Z*3),Z);let G;if(J.isStraight)G=j.Nudge(q,Y,W);else{const z=XA(q,W,J.handleArc.center,J.handleArc.radius);G=Q==="end"?J.handleArc.sweepFlag?z[0]:z[1]:J.handleArc.sweepFlag?z[1]:z[0]}if(j.IsNaN(G))G=J.start.point;return{point:q,int:G}},sF0=function({point:J,int:Q}){const Z=j.RotWith(Q,J,T6/6),q=j.RotWith(Q,J,-T6/6);return`M ${Z.x} ${Z.y} L ${J.x} ${J.y} L ${q.x} ${q.y}`},rF0=function({point:J,int:Q}){const Z=j.RotWith(Q,J,T6/6),q=j.RotWith(Q,J,-T6/6);return`M ${Z.x} ${Z.y} L ${J.x} ${J.y} L ${q.x} ${q.y} Z`},aF0=function({point:J,int:Q}){const Z=j.Sub(Q,J).div(2),q=j.Add(J,j.Rot(Z,t6)),Y=j.Sub(J,j.Rot(Z,t6));return`M ${q.x} ${q.y} L ${Q.x} ${Q.y} L ${Y.x} ${Y.y} Z`},oF0=function({point:J,int:Q}){const Z=j.Lrp(J,Q,0.45),q=j.Dist(Z,J);return`M ${Z.x-q},${Z.y}
  a ${q},${q} 0 1,0 ${q*2},0
  a ${q},${q} 0 1,0 -${q*2},0 `},tF0=function({point:J,int:Q}){const Z=j.Lrp(J,Q,0.75),q=j.RotWith(Z,J,T6/4),Y=j.RotWith(Z,J,-T6/4),$=j.Lrp(q,Y,0.5);return $.add(j.Sub($,J)),`M ${$.x} ${$.y} L ${q.x} ${q.y} ${J.x} ${J.y} L ${Y.x} ${Y.y} Z`},eF0=function({int:J,point:Q}){const Z=j.Lrp(Q,J,0.85),q=j.Sub(Z,Q).div(2),Y=j.Add(Q,j.Rot(q,t6)),$=j.Sub(Q,j.Rot(q,t6)),W=j.Add(Z,j.Rot(q,t6)),G=j.Sub(Z,j.Rot(q,t6));return`M ${Y.x} ${Y.y} L ${W.x} ${W.y} L ${G.x} ${G.y} L ${$.x} ${$.y} Z`},JB0=function({int:J,point:Q}){const Z=j.Sub(J,Q).div(2),q=j.Add(Q,j.Rot(Z,t6)),Y=j.Sub(Q,j.Rot(Z,t6));return`M ${q.x} ${q.y} L ${Y.x} ${Y.y}`},f3=function(J,Q,Z){const q=Q==="end"?J.end.arrowhead:J.start.arrowhead;if(q==="none")return;const Y=nF0(J,Q,Z);if(!Y)return;switch(q){case"bar":return JB0(Y);case"square":return eF0(Y);case"diamond":return tF0(Y);case"dot":return oF0(Y);case"inverted":return aF0(Y);case"arrow":return sF0(Y);case"triangle":return rF0(Y)}return""};var Ln=function(J){const{start:Q,end:Z,handleArc:{radius:q,largeArcFlag:Y,sweepFlag:$}}=J;return`M${Q.handle.x},${Q.handle.y} A${q} ${q} 0 ${Y} ${$} ${Z.handle.x},${Z.handle.y}`},xw=function(J){const{start:Q,end:Z,bodyArc:{radius:q,largeArcFlag:Y,sweepFlag:$}}=J;return`M${Q.point.x},${Q.point.y} A${q} ${q} 0 ${Y} ${$} ${Z.point.x},${Z.point.y}`},Fn=function(J,Q){return`M${J.x},${J.y}L${Q.x},${Q.y}`},Bn=function(J){return Fn(J.start.handle,J.end.handle)},yw=function(J){return Fn(J.start.point,J.end.point)};var Vn=v(W0(),1),Dn=v(o(),1);var Q2=v(W0(),1),Z2=v(o(),1);var Nn=v(W0(),1);var Mn=v(o(),1),On=Mn.forwardRef(function J({isEditing:Q,text:Z,handleFocus:q,handleChange:Y,handleKeyDown:$,handleBlur:W,handleInputPointerDown:G,handleDoubleClick:z},U){return Nn.jsx("textarea",{ref:U,className:"tl-text tl-text-input",name:"text",tabIndex:-1,readOnly:!Q,autoComplete:"off",autoCapitalize:"off",autoCorrect:"off",autoSave:"off",placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:Z,onFocus:q,onChange:Y,onKeyDown:$,onBlur:W,onTouchEnd:d8,onContextMenu:Q?d8:void 0,onPointerDown:G,onDoubleClick:z,onDragStart:A6})});var p1=v(o(),1);var vw=function(J,Q,Z){const q=h(),Y=p1.useRef(null),$=p1.useRef(),W=e("isEditing",()=>q.getEditingShapeId()===J,[q]),G=e("isEditingAnything",()=>!!q.getEditingShapeId(),[q]);p1.useEffect(()=>{function M({shapeId:O}){requestAnimationFrame(()=>{if(O===J){const R=Y.current;if(R){if(document.activeElement!==R)R.focus();R.select()}}})}return q.on("select-all-text",M),()=>{q.off("select-all-text",M)}},[q,J]),p1.useEffect(()=>{if(!W)return;const M=Y.current;if(!M)return;if(document.activeElement!==M){if(M.focus(),q.getInstanceState().isCoarsePointer)M.select()}else if(q.environment.isSafari)M.blur(),M.focus();function O(){const R=window.getSelection?.();if(R&&R.type!=="None"){const V=[];for(let E=0;E<R.rangeCount;E++)V.push(R.getRangeAt?.(E));$.current=V}}return document.addEventListener("selectionchange",O),()=>{document.removeEventListener("selectionchange",O)}},[q,W]);const z=p1.useCallback(()=>{const M=$.current;requestAnimationFrame(()=>{const O=Y.current,R=q.getEditingShapeId();if(R){if(O&&R===J){if(O.focus(),M&&M.length){const V=window.getSelection();if(V)M.forEach((E)=>V.addRange(E))}}}else window.getSelection()?.removeAllRanges()})},[q,J]),U=p1.useCallback((M)=>{if(q.getEditingShapeId()!==J)return;switch(M.key){case"Enter":{if(M.ctrlKey||M.metaKey)q.complete();break}}},[q,J]),F=p1.useCallback((M)=>{if(q.getEditingShapeId()!==J)return;let O=F5.normalizeText(M.currentTarget.value);const R=O.replace(/\t/g,MM);if(R!==O){const V=M.currentTarget.selectionStart;M.currentTarget.value=R,M.currentTarget.selectionStart=V+(R.length-O.length),M.currentTarget.selectionEnd=V+(R.length-O.length),O=R}q.updateShape({id:J,type:Q,props:{text:O}})},[q,J,Q]),B=p1.useCallback((M)=>{q.dispatch({...Q5(M),type:"pointer",name:"pointer_down",target:"shape",shape:q.getShape(J)}),d8(M)},[q,J]);return{rInput:Y,handleFocus:QB0,handleBlur:z,handleKeyDown:U,handleChange:F,handleInputPointerDown:B,handleDoubleClick:d8,isEmpty:Z.trim().length===0,isEditing:W,isEditingAnything:G}},QB0=function(){return};var dZ=Z2.default.memo(function J({id:Q,type:Z,text:q,labelColor:Y,font:$,fontSize:W,lineHeight:G,align:z,verticalAlign:U,wrap:F,isSelected:B,onKeyDown:M,classNamePrefix:O,style:R,textWidth:V,textHeight:E}){const{rInput:_,isEmpty:A,isEditing:w,isEditingAnything:T,...k}=vw(Q,Z,q),[P,y]=Z2.useState(q);Z2.useEffect(()=>{if(!w)y(q)},[w,q]);const p=F5.normalizeTextForDom(q),s=p.length>0,c=Yn(z);if(!w&&!s)return null;const t=O||"tl-text";return Q2.jsx("div",{className:`${t}-label tl-text-wrapper`,"data-font":$,"data-align":z,"data-hastext":!A,"data-isediting":w,"data-iseditinganything":T,"data-textwrap":!!F,"data-isselected":B,style:{justifyContent:z==="middle"||c?"center":z,alignItems:U==="middle"?"center":U,...R},children:Q2.jsxs("div",{className:`${t}-label__inner tl-text-content__wrapper`,style:{fontSize:W,lineHeight:W*G+"px",minHeight:G+32,minWidth:V||0,color:Y,width:V,height:E},children:[Q2.jsx("div",{className:`${t} tl-text tl-text-content`,dir:"ltr",children:p}),(T||B)&&Q2.jsx(On,{ref:_,text:q,isEditing:w,...k,handleKeyDown:M??k.handleKeyDown},P)]})})});var Rn=Dn.memo(function J({id:Q,text:Z,size:q,font:Y,position:$,width:W,isSelected:G,labelColor:z}){const U=g6();return Vn.jsx(dZ,{id:Q,classNamePrefix:"tl-arrow",type:"arrow",font:Y,fontSize:wQ[q],lineHeight:E9.lineHeight,align:"middle",verticalAlign:"middle",text:Z,labelColor:U[z].solid,textWidth:W,isSelected:G,style:{transform:`translate(${$.x}px, ${$.y}px)`}})});var qB0=function(J,Q){const Z=J.getArrowInfo(Q);return Z.isStraight?j.Dist(Z.start.handle,Z.end.handle):Math.abs(Z.handleArc.length)},XB0=function(){return R6.jsx("marker",{id:"arrowhead-dot",className:"tl-arrow-hint",refX:"3.0",refY:"3.0",orient:"0",children:R6.jsx("circle",{cx:"3",cy:"3",r:"2",strokeDasharray:"100%"})})},YB0=function(){return R6.jsxs("marker",{id:"arrowhead-cross",className:"tl-arrow-hint",refX:"3.0",refY:"3.0",orient:"auto",children:[R6.jsx("line",{x1:"1.5",y1:"1.5",x2:"4.5",y2:"4.5",strokeDasharray:"100%"}),R6.jsx("line",{x1:"1.5",y1:"4.5",x2:"4.5",y2:"1.5",strokeDasharray:"100%"})]})},ZB0=0;class xM extends qJ{static type="arrow";static props=Nz;static migrations=Mz;canEdit=()=>!0;canBind=()=>!1;canSnap=()=>!1;hideResizeHandles=()=>!0;hideRotateHandle=()=>!0;hideSelectionBoundsBg=()=>!0;hideSelectionBoundsFg=()=>!0;getDefaultProps(){return{dash:"draw",size:"m",fill:"none",color:"black",labelColor:"black",bend:0,start:{type:"point",x:0,y:0},end:{type:"point",x:2,y:0},arrowheadStart:"none",arrowheadEnd:"arrow",text:"",labelPosition:0.5,font:"draw"}}getGeometry(J){const Q=this.editor.getArrowInfo(J),Z=[],q=Q.isStraight?new f1({start:j.From(Q.start.point),end:j.From(Q.end.point)}):new mW({center:j.Cast(Q.handleArc.center),radius:Q.handleArc.radius,start:j.Cast(Q.start.point),end:j.Cast(Q.end.point),sweepFlag:Q.bodyArc.sweepFlag,largeArcFlag:Q.bodyArc.largeArcFlag});let Y;if(J.props.text.trim()){const $=S3(this.editor,J);Z.push(...$.debugGeom),Y=new ZJ({x:$.box.x,y:$.box.y,width:$.box.w,height:$.box.h,isFilled:!0,isLabel:!0})}return new g9({children:[...Y?[q,Y]:[q],...Z]})}getHandles(J){const Q=this.editor.getArrowInfo(J);return[{id:"start",type:"vertex",index:"a0",x:Q.start.handle.x,y:Q.start.handle.y,canBind:!0},{id:"middle",type:"virtual",index:"a2",x:Q.middle.x,y:Q.middle.y,canBind:!1},{id:"end",type:"vertex",index:"a3",x:Q.end.handle.x,y:Q.end.handle.y,canBind:!0}].filter(Boolean)}onHandleDrag=(J,{handle:Q,isPrecise:Z})=>{const q=Q.id;if(q==="middle"){const{start:R,end:V}=uJ(this.editor,J),E=j.Sub(V,R),_=j.Per(E),A=j.Med(V,R),w=j.Sub(A,_),T=j.Add(A,_),k=j.NearestPointOnLineSegment(w,T,Q,!1);let P=j.Dist(k,A);if(j.Clockwise(k,V,A))P*=-1;return{id:J.id,type:J.type,props:{bend:P}}}const Y=p6(J);if(this.editor.inputs.ctrlKey)return Y.props[q]={type:"point",x:Q.x,y:Q.y},Y;const $=this.editor.getShapePageTransform(J.id).applyToPoint(Q),W=this.editor.getShapeAtPoint($,{hitInside:!0,hitFrameInside:!0,margin:0,filter:(R)=>{return!R.isLocked&&this.editor.getShapeUtil(R).canBind(R)}});if(!W)return Y.props[q]={type:"point",x:Q.x,y:Q.y},Y;const G=this.editor.getShapeGeometry(W),z=V0.ZeroFix(G.bounds),F=this.editor.getShapePageTransform(Y.id).applyToPoint(Q),B=this.editor.getPointInShapeSpace(W,F);let M=Z;if(!M){const R=Y.props[q];if(R.type==="point"||R.type==="binding"&&W.id!==R.boundShapeId)M=this.editor.inputs.pointerVelocity.len()<0.5}if(!Z){if(!G.isClosed)M=!0;const R=Y.props[q==="start"?"end":"start"];if(R.type==="binding"&&W.id===R.boundShapeId&&R.isPrecise)M=!0}const O={x:(B.x-z.minX)/z.width,y:(B.y-z.minY)/z.height};if(M){if(j.Dist(B,z.center)<Math.max(4,Math.min(Math.min(z.width,z.height)*0.15,16))/this.editor.getZoomLevel())O.x=0.5,O.y=0.5}if(Y.props[q]={type:"binding",boundShapeId:W.id,normalizedAnchor:O,isPrecise:M,isExact:this.editor.inputs.altKey},Y.props.start.type==="binding"&&Y.props.end.type==="binding"){if(Y.props.start.boundShapeId===Y.props.end.boundShapeId){if(j.Equals(Y.props.start.normalizedAnchor,Y.props.end.normalizedAnchor))Y.props.end.normalizedAnchor.x+=0.05}}return Y};onTranslateStart=(J)=>{const Q=J.props.start.type==="binding"?J.props.start.boundShapeId:null,Z=J.props.end.type==="binding"?J.props.end.boundShapeId:null,q=uJ(this.editor,J),Y=this.editor.getShapePageTransform(J.id),$=this.editor.getSelectedShapeIds(),W=new Set;if(Q)W.add(Q),this.editor.getShapeAncestors(Q).forEach((z)=>W.add(z.id));if(Z)W.add(Z),this.editor.getShapeAncestors(Z).forEach((z)=>W.add(z.id));for(let z of $)if(W.has(z))return;let G=J;_n.set(J,{pagePosition:Y.applyToPoint(J),terminalBindings:sq(q,(z,U)=>{const F=J.props[z];if(F.type!=="binding")return null;return{binding:F,shapePosition:U,pagePosition:Y.applyToPoint(U)}})});for(let z of["start","end"]){const U=J.props[z];if(U.type!=="binding")continue;G={...J,props:{...J.props,[z]:{...U,isPrecise:!0}}}}return G};onTranslate=(J,Q)=>{const Z=_n.get(J);if(!Z)return;const q=this.editor.getShapePageTransform(Q.id),Y=j.Sub(q.applyToPoint(Q),Z.pagePosition);let $=Q;for(let[W,G]of z5(Z.terminalBindings)){if(!G)continue;const z=j.Add(G.pagePosition,j.Mul(Y,0.5)),U=this.editor.getShapeAtPoint(z,{hitInside:!0,hitFrameInside:!0,margin:0,filter:(F)=>{return!F.isLocked&&this.editor.getShapeUtil(F).canBind(F)}});if(U?.id===G.binding.boundShapeId){const F=V0.ZeroFix(this.editor.getShapeGeometry(U).bounds),B=this.editor.getPointInShapeSpace(U,z),M={x:(B.x-F.minX)/F.width,y:(B.y-F.minY)/F.height};$={...$,props:{...$.props,[W]:{...G.binding,isPrecise:!0,normalizedAnchor:M}}}}else $={...$,props:{...$.props,[W]:{type:"point",x:G.shapePosition.x,y:G.shapePosition.y}}}}return $};onResize=(J,Q)=>{const{scaleX:Z,scaleY:q}=Q,Y=uJ(this.editor,J),{start:$,end:W}=p6(J.props);let{bend:G}=J.props;if($.type==="point")$.x=Y.start.x*Z,$.y=Y.start.y*q;if(W.type==="point")W.x=Y.end.x*Z,W.y=Y.end.y*q;const z=Math.abs(Z),U=Math.abs(q);if(Z<0&&q>=0){if(G!==0)G*=-1,G*=Math.max(z,U);if($.type==="binding")$.normalizedAnchor.x=1-$.normalizedAnchor.x;if(W.type==="binding")W.normalizedAnchor.x=1-W.normalizedAnchor.x}else if(Z>=0&&q<0){if(G!==0)G*=-1,G*=Math.max(z,U);if($.type==="binding")$.normalizedAnchor.y=1-$.normalizedAnchor.y;if(W.type==="binding")W.normalizedAnchor.y=1-W.normalizedAnchor.y}else if(Z>=0&&q>=0){if(G!==0)G*=Math.max(z,U)}else if(Z<0&&q<0){if(G!==0)G*=Math.max(z,U);if($.type==="binding")$.normalizedAnchor.x=1-$.normalizedAnchor.x,$.normalizedAnchor.y=1-$.normalizedAnchor.y;if(W.type==="binding")W.normalizedAnchor.x=1-W.normalizedAnchor.x,W.normalizedAnchor.y=1-W.normalizedAnchor.y}return{props:{start:$,end:W,bend:G}}};onDoubleClickHandle=(J,Q)=>{switch(Q.id){case"start":return{id:J.id,type:J.type,props:{...J.props,arrowheadStart:J.props.arrowheadStart==="none"?"arrow":"none"}};case"end":return{id:J.id,type:J.type,props:{...J.props,arrowheadEnd:J.props.arrowheadEnd==="none"?"arrow":"none"}}}};component(J){const Q=this.editor.getOnlySelectedShape(),Z=this.editor.isInAny("select.idle","select.pointing_handle","select.dragging_handle","select.translating","arrow.dragging")&&!this.editor.getInstanceState().isReadonly;if(!this.editor.getArrowInfo(J)?.isValid)return null;const Y=S3(this.editor,J),$=J.id===this.editor.getOnlySelectedShapeId(),G=this.editor.getEditingShapeId()===J.id||J.props.text;return R6.jsxs(R6.Fragment,{children:[R6.jsx(mJ,{id:J.id,style:{minWidth:50,minHeight:50},children:R6.jsx(jn,{shape:J,shouldDisplayHandles:Z&&Q===J})}),G&&R6.jsx(Rn,{id:J.id,text:J.props.text,font:J.props.font,size:J.props.size,position:Y.box.center,width:Y.box.w,isSelected:$,labelColor:J.props.labelColor})]})}indicator(J){const{start:Q,end:Z}=uJ(this.editor,J),q=this.editor.getArrowInfo(J),Y=this.editor.getShapeGeometry(J),$=Y.bounds,W=J.props.text.trim()?Y.children[1]:null,G=gZ(J.id);if(!q)return null;if(j.Equals(Q,Z))return null;const z=C9[J.props.size],U=q.start.arrowhead&&f3(q,"start",z),F=q.end.arrowhead&&f3(q,"end",z),B=q.isStraight?yw(q):xw(q),M=U&&q.start.arrowhead!=="arrow"||F&&q.end.arrowhead!=="arrow"||!!W,O=(J.id+"_clip").replace(":","_");if(G&&W)return R6.jsx("rect",{x:u(W.x),y:u(W.y),width:W.w,height:W.h,rx:3.5,ry:3.5});return R6.jsxs("g",{children:[M&&R6.jsx("defs",{children:R6.jsxs("mask",{id:O,children:[R6.jsx("rect",{x:$.minX-100,y:$.minY-100,width:$.w+200,height:$.h+200,fill:"white"}),W&&R6.jsx("rect",{x:u(W.x),y:u(W.y),width:W.w,height:W.h,fill:"black",rx:3.5,ry:3.5}),U&&R6.jsx("path",{d:U,fill:q.start.arrowhead==="arrow"?"none":"black",stroke:"none"}),F&&R6.jsx("path",{d:F,fill:q.end.arrowhead==="arrow"?"none":"black",stroke:"none"})]})}),R6.jsxs("g",{...M?{mask:`url(#${O})`}:void 0,children:[M&&R6.jsx("rect",{x:$.minX-100,y:$.minY-100,width:$.width+200,height:$.height+200,opacity:0}),R6.jsx("path",{d:B})]}),U&&R6.jsx("path",{d:U}),F&&R6.jsx("path",{d:F}),W&&R6.jsx("rect",{x:u(W.x),y:u(W.y),width:W.w,height:W.h,rx:3.5,ry:3.5})]})}onEditEnd=(J)=>{const{id:Q,type:Z,props:{text:q}}=J;if(q.trimEnd()!==J.props.text)this.editor.updateShapes([{id:Q,type:Z,props:{text:q.trimEnd()}}])};toSvg(J,Q){if(Q.addExportDef(eW(J.props.fill)),J.props.text)Q.addExportDef(TQ(J.props.font));const Z=y5(Q);return R6.jsxs(R6.Fragment,{children:[R6.jsx(jn,{shape:J,shouldDisplayHandles:!1}),R6.jsx(CX,{fontSize:wQ[J.props.size],font:J.props.font,align:"middle",verticalAlign:"middle",text:J.props.text,labelColor:Z[J.props.labelColor].solid,bounds:S3(this.editor,J).box,padding:4})]})}getCanvasSvgDefs(){return[J2(),{key:"arrow:dot",component:XB0},{key:"arrow:cross",component:YB0}]}}var jn=D9(function J({shape:Q,shouldDisplayHandles:Z}){const q=h(),Y=g6(),$=q.getArrowInfo(Q),W=V0.ZeroFix(q.getShapeGeometry(Q).bounds),G=En.default.useMemo(()=>{return q.environment.isSafari?ZB0+=1:0},[Q]);if(!$?.isValid)return null;const z=C9[Q.props.size],U=$.start.arrowhead&&f3($,"start",z),F=$.end.arrowhead&&f3($,"end",z),B=$.isStraight?yw($):xw($);let M=null;if(Z){const{strokeDasharray:T,strokeDashoffset:k}=nJ(qB0(q,Q),2,{end:"skip",start:"skip",lengthRatio:2.5});M=Q.props.start.type==="binding"||Q.props.end.type==="binding"?R6.jsx("path",{className:"tl-arrow-hint",d:$.isStraight?Bn($):Ln($),strokeDasharray:T,strokeDashoffset:k,strokeWidth:2,markerStart:Q.props.start.type==="binding"?Q.props.start.isExact?"":Q.props.start.isPrecise?"url(#arrowhead-cross)":"url(#arrowhead-dot)":"",markerEnd:Q.props.end.type==="binding"?Q.props.end.isExact?"":Q.props.end.isPrecise?"url(#arrowhead-cross)":"url(#arrowhead-dot)":"",opacity:0.16}):null}const{strokeDasharray:O,strokeDashoffset:R}=nJ($.isStraight?$.length:Math.abs($.bodyArc.length),z,{style:Q.props.dash}),V=S3(q,Q),E=!($.start.arrowhead==="none"||$.start.arrowhead==="arrow"),_=!($.end.arrowhead==="none"||$.end.arrowhead==="arrow"),A=(Q.id+"_clip_"+G).replace(":","_");return R6.jsxs(R6.Fragment,{children:[R6.jsx("defs",{children:R6.jsxs("mask",{id:A,children:[R6.jsx("rect",{x:u(-100+W.minX),y:u(-100+W.minY),width:u(W.width+200),height:u(W.height+200),fill:"white"}),Q.props.text.trim()&&R6.jsx("rect",{x:V.box.x,y:V.box.y,width:V.box.w,height:V.box.h,fill:"black",rx:4,ry:4}),U&&E&&R6.jsx("path",{d:U,fill:$.start.arrowhead==="arrow"?"none":"black",stroke:"none"}),F&&_&&R6.jsx("path",{d:F,fill:$.end.arrowhead==="arrow"?"none":"black",stroke:"none"})]})}),R6.jsxs("g",{fill:"none",stroke:Y[Q.props.color].solid,strokeWidth:z,strokeLinejoin:"round",strokeLinecap:"round",pointerEvents:"none",children:[M,R6.jsxs("g",{mask:`url(#${A})`,children:[R6.jsx("rect",{x:u(W.minX-100),y:u(W.minY-100),width:u(W.width+200),height:u(W.height+200),opacity:0}),R6.jsx("path",{d:B,strokeDasharray:O,strokeDashoffset:R})]}),U&&E&&Q.props.fill!=="none"&&R6.jsx(O8,{theme:Y,d:U,color:Q.props.color,fill:Q.props.fill}),F&&_&&Q.props.fill!=="none"&&R6.jsx(O8,{theme:Y,d:F,color:Q.props.color,fill:Q.props.fill}),U&&R6.jsx("path",{d:U}),F&&R6.jsx("path",{d:F})]})]})}),_n=new WeakMap;var x4=v(W0(),1);var Sw=v(W0(),1);var An=v(p8(),1),d1=function({url:J,zoomLevel:Q}){return Sw.jsx("a",{className:An.default("tl-hyperlink-button",{"tl-hyperlink-button__hidden":Q<0.32}),href:J,target:"_blank",rel:"noopener noreferrer",onPointerDown:d8,onPointerUp:d8,title:J,draggable:!1,children:Sw.jsx("div",{className:"tl-hyperlink-button__icon",style:{mask:`url("${Cn}") center 100% / 100% no-repeat`,WebkitMask:`url("${Cn}") center 100% / 100% no-repeat`}})})},Cn="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30' fill='none'%3E%3Cpath stroke='%23000' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M13 5H7a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6M19 5h6m0 0v6m0-6L13 17'/%3E%3C/svg%3E";var g3=function(J){return KB0.map((Z)=>{const{offsetX:q,offsetY:Y,blur:$,spread:W,color:G}=Z,z=new j(q,Y),{x:U,y:F}=z.rot(-J);return`${U}px ${F}px ${$}px ${W}px ${G}`}).join(", ")},KB0=[{offsetX:0,offsetY:2,blur:4,spread:0,color:"#00000029"},{offsetX:0,offsetY:3,blur:6,spread:0,color:"#0000001f"}];var kn=function(J,Q){const{url:Z}=Q.props,q=j4.createId(s$(Z));if(J.getAsset(q)){if(Q.props.assetId!==q)J.updateShapes([{id:Q.id,type:Q.type,props:{assetId:q}}])}else J.updateShapes([{id:Q.id,type:Q.type,props:{assetId:null}}]),WB0(J,Q)};class yM extends p7{static type="bookmark";static props=Oz;static migrations=Vz;canResize=()=>!1;hideSelectionBoundsFg=()=>!0;getDefaultProps(){return{url:"",w:300,h:320,assetId:null}}component(J){const Q=J.props.assetId?this.editor.getAsset(J.props.assetId):null,Z=this.editor.getShapePageTransform(J).rotation(),q=$B0(J);return x4.jsx(P4,{children:x4.jsxs("div",{className:"tl-bookmark__container",style:{boxShadow:g3(Z)},children:[x4.jsxs("div",{className:"tl-bookmark__image_container",children:[Q?.props.image?x4.jsx("img",{className:"tl-bookmark__image",draggable:!1,src:Q?.props.image,alt:Q?.props.title||""}):x4.jsx("div",{className:"tl-bookmark__placeholder"}),x4.jsx(d1,{url:J.props.url,zoomLevel:this.editor.getZoomLevel()})]}),x4.jsxs("div",{className:"tl-bookmark__copy_container",children:[Q?.props.title&&x4.jsx("h2",{className:"tl-bookmark__heading",children:_X(Q?.props.title||"",54)}),Q?.props.description&&x4.jsx("p",{className:"tl-bookmark__description",children:_X(Q?.props.description||"",128)}),x4.jsx("a",{className:"tl-bookmark__link",href:J.props.url||"",target:"_blank",rel:"noopener noreferrer",onPointerDown:d8,onPointerUp:d8,onClick:d8,children:_X(q,45)})]})]})})}indicator(J){return x4.jsx("rect",{width:u(J.props.w),height:u(J.props.h),rx:"6",ry:"6"})}onBeforeCreate=(J)=>{kn(this.editor,J)};onBeforeUpdate=(J,Q)=>{if(J.props.url!==Q.props.url)if(!f.linkUrl.isValid(Q.props.url))return{...Q,props:{...Q.props,url:J.props.url}};else kn(this.editor,Q)}}var $B0=(J)=>{try{const Q=new URL(J.props.url),Z=Q.pathname.replace(/\/*$/,"");return`${Q.hostname}${Z}`}catch(Q){return J.props.url}},WB0=sH(async(J,Q)=>{const{url:Z}=Q.props,q=await J.getAssetForExternalContent({type:"url",url:Z});if(!q)return;J.batch(()=>{J.createAssets([q]),J.updateShapes([{id:Q.id,type:Q.type,props:{assetId:q.id}}])})},500);var B7=v(W0(),1);var l1=function(J,Q=!1){const Z=J.length;if(Z<2)return"";let q=J[0].point,Y=J[1].point;if(Z===2)return`M${J5(q)}L${J5(Y)}`;let $="";for(let W=2,G=Z-1;W<G;W++)q=J[W].point,Y=J[W+1].point,$+=t5(q,Y);if(Q)return`M${t5(J[0].point,J[1].point)}Q${J5(J[1].point)}${t5(J[1].point,J[2].point)}T${$}${t5(J[Z-1].point,J[0].point)}${t5(J[0].point,J[1].point)}Z`;else return`M${J5(J[0].point)}Q${J5(J[1].point)}${t5(J[1].point,J[2].point)}${J.length>3?"T":""}${$}L${J5(J[Z-1].point)}`};var wn=function(J,Q={}){const{start:Z={},end:q={}}=Q,{cap:Y=!0}=Z,{cap:$=!0}=q;r8(!Z.taper&&!q.taper,"cap taper not supported here"),r8(!Z.easing&&!q.easing,"cap easing not supported here"),r8(Y&&$,"cap must be true");const W=dJ(J,Q);jX(W,Q);const G=GB0(W);let z="";for(let U of G)z+=zB0(U,Q);return z},GB0=function(J){if(J.length<=2)return[J];const Q=[];let Z=[J[0]],q=j.Sub(J[1].point,J[0].point).uni(),Y,$,W,G,z;for(let U=1,F=J.length;U<F-1;U++){if(W=J[U-1],G=J[U],z=J[U+1],Y=j.Sub(z.point,G.point).uni(),$=j.Dpr(q,Y),q=Y,$<-0.8){const B={...G,point:G.input};Z.push(B),Q.push(fw(Z)),Z=[B];continue}if(Z.push(G),$>0.7)continue;if((j.Dist2(W.point,G.point)+j.Dist2(G.point,z.point))/((W.radius+G.radius+z.radius)/3)**2<1.5){Z.push(G),Q.push(fw(Z)),Z=[G];continue}}return Z.push(J[J.length-1]),Q.push(fw(Z)),Q},fw=function(J){const Q=J[0];let Z;while(J.length>2)if(Z=J[1],j.Dist2(Q.point,Z.point)<((Q.radius+Z.radius)/2*0.5)**2)J.splice(1,1);else break;const q=J[J.length-1];let Y;while(J.length>2)if(Y=J[J.length-2],j.Dist2(q.point,Y.point)<((q.radius+Y.radius)/2*0.5)**2)J.splice(J.length-2,1);else break;if(J.length>1)J[0]={...J[0],vector:j.Sub(J[0].point,J[1].point).uni()},J[J.length-1]={...J[J.length-1],vector:j.Sub(J[J.length-2].point,J[J.length-1].point).uni()};return J},HB0=function(J,Q,Z){return"M "+J+" "+Q+" m -"+Z+", 0 a "+Z+","+Z+" 0 1,1 "+Z*2+",0 a "+Z+","+Z+" 0 1,1 -"+Z*2+",0"},zB0=function(J,Q={}){if(J.length===0)return"";if(J.length===1)return HB0(J[0].point.x,J[0].point.y,J[0].radius);const{left:Z,right:q}=Kw(J,Q);q.reverse();let Y=`M${J5(Z[0])}T`;for(let $=1;$<Z.length;$++)Y+=t5(Z[$-1],Z[$]);{const $=J[J.length-1],W=$.radius,G=$.vector.clone().per().neg(),z=j.Add($.point,j.Mul(G,W)),U=j.Add($.point,j.Mul(G,-W));Y+=`${J5(z)}A${u(W)},${u(W)} 0 0 1 ${J5(U)}T`}for(let $=1;$<q.length;$++)Y+=t5(q[$-1],q[$]);{const $=J[0],W=$.radius,G=$.vector.clone().per(),z=j.Add($.point,j.Mul(G,W)),U=j.Add($.point,j.Mul(G,-W));Y+=`${J5(z)}A${u(W)},${u(W)} 0 0 1 ${J5(U)}Z`}return Y};var AX=function(){const J=h();return e("zoom",()=>J.getZoomLevel()<0.35,[J])};var vM=function({strokeWidth:J,showAsComplete:Q}){return{size:1+J,thinning:0,streamline:0.5,smoothing:0.5,simulatePressure:!1,easing:_9.easeOutSine,last:Q}},SM=function(J,Q,Z,q){return{...q?In(Q):J.dash==="draw"?J.isPen?FB0(Q):LB0(Q):In(Q),last:J.isComplete||Z}},KK=function(J){const Q=[];for(let Z of J)if(Z.type==="free"||Z.points.length<2)Q.push(...Z.points.map(j.Cast));else{const q=Math.max(4,Math.floor(j.Dist(Z.points[0],Z.points[1])/16));Q.push(...j.PointsBetween(Z.points[0],Z.points[1],q))}return Q},Pn=function(J,Q){return{draw:"none",solid:"none",dotted:`0.1 ${Q*2}`,dashed:`${Q*2} ${Q*2}`}[J.props.dash]},UB0=(J)=>J*0.65+ZC(J*T6/2)*0.35,LB0=(J)=>{return{size:1+J,thinning:0.5,streamline:0.62+(1+J)/8*0.06,smoothing:0.62,easing:_9.easeOutSine,simulatePressure:!0}},FB0=(J)=>{return{size:1+J*1.2,thinning:0.62,streamline:0.62,smoothing:0.62,simulatePressure:!1,easing:UB0}},In=(J)=>{return{size:1+J,thinning:0,streamline:0.62+(1+J)/8*0.06,smoothing:0.62,simulatePressure:!1,easing:_9.linear}};var bn=function(J,Q){const Z=(Q+1)*0.5;return`M ${J.x} ${J.y} m -${Z}, 0 a ${Z},${Z} 0 1,0 ${Z*2},0 a ${Z},${Z} 0 1,0 -${Z*2},0`},gw=function(J){return J.props.segments.length===1&&J.props.segments[0].points.length<2},Tn=function({shape:J,forceSolid:Q}){const Z=g6(),q=C9[J.props.size],Y=KK(J.props.segments),$=J.props.isComplete||P5(J.props.segments)?.type==="straight";let W=q;if(!Q&&!J.props.isPen&&J.props.dash==="draw"&&Y.length===1)W+=f7(J.id)()*(q/6);const G=SM(J.props,W,$,Q);if(!Q&&J.props.dash==="draw")return B7.jsxs(B7.Fragment,{children:[J.props.isClosed&&J.props.fill&&Y.length>1?B7.jsx(O8,{theme:Z,fill:J.props.isClosed?J.props.fill:"none",color:J.props.color,d:l1(dJ(Y,G),J.props.isClosed)}):null,B7.jsx("path",{d:wn(Y,G),strokeLinecap:"round",fill:Z[J.props.color].solid})]});const z=dJ(Y,G),U=z.length<2,F=U?bn(Y[0],0):l1(z,J.props.isClosed);return B7.jsxs(B7.Fragment,{children:[B7.jsx(O8,{theme:Z,color:J.props.color,fill:U||J.props.isClosed?J.props.fill:"none",d:F}),B7.jsx("path",{d:F,strokeLinecap:"round",fill:U?Z[J.props.color].solid:"none",stroke:Z[J.props.color].solid,strokeWidth:q,strokeDasharray:U?"none":Pn(J,q),strokeDashoffset:"0"})]})};class fM extends qJ{static type="draw";static props=Dz;static migrations=Rz;hideResizeHandles=(J)=>gw(J);hideRotateHandle=(J)=>gw(J);hideSelectionBoundsFg=(J)=>gw(J);getDefaultProps(){return{segments:[],color:"black",fill:"none",dash:"draw",size:"m",isComplete:!1,isClosed:!1,isPen:!1}}getGeometry(J){const Q=KK(J.props.segments),Z=C9[J.props.size];if(J.props.segments.length===1){const Y=V0.FromPoints(Q);if(Y.width<Z*2&&Y.height<Z*2)return new MX({x:-Z,y:-Z,radius:Z,isFilled:!0})}const q=dJ(Q,SM(J.props,Z,!0,!0)).map((Y)=>Y.point);if(J.props.isClosed)return new e8({points:q,isFilled:J.props.fill!=="none"});return new hJ({points:q})}component(J){return B7.jsx(mJ,{id:J.id,children:B7.jsx(Tn,{shape:J,forceSolid:AX()})})}indicator(J){const Q=AX(),Z=C9[J.props.size],q=KK(J.props.segments);let Y=Z;if(!Q&&!J.props.isPen&&J.props.dash==="draw"&&q.length===1)Y+=f7(J.id)()*(Z/6);const $=J.props.isComplete||P5(J.props.segments)?.type==="straight",W=SM(J.props,Y,$,!0),G=dJ(q,W),z=G.length>1?l1(G,J.props.isClosed):bn(q[0],Y);return B7.jsx("path",{d:z})}toSvg(J,Q){return Q.addExportDef(eW(J.props.fill)),B7.jsx(Tn,{shape:J,forceSolid:!1})}getCanvasSvgDefs(){return[J2()]}onResize=(J,Q)=>{const{scaleX:Z,scaleY:q}=Q,Y=[];for(let $ of J.props.segments)Y.push({...$,points:$.points.map(({x:W,y:G,z})=>{return{x:xY(Z*W),y:xY(q*G),z}})});return{props:{segments:Y}}};expandSelectionOutlinePx(J){const Q=J.props.dash==="draw"?1.6:1;return C9[J.props.size]*Q/2}}var $K=v(W0(),1);var mw=v(o(),1);var xn=function(J,Q,Z={}){const{newPoint:q,handle:Y,scaleX:$,scaleY:W}=Q,{minWidth:G=1,maxWidth:z=Infinity,minHeight:U=1,maxHeight:F=Infinity}=Z;let B=J.props.w*$,M=J.props.h*W;const O=new j(0,0);if(B>0){if(B<G){switch(Y){case"top_left":case"left":case"bottom_left":{O.x=B-G;break}case"top":case"bottom":{O.x=(B-G)/2;break}default:O.x=0}B=G}}else if(O.x=B,B=-B,B<G){switch(Y){case"top_left":case"left":case"bottom_left":{O.x=-B;break}default:O.x=-G}B=G}if(M>0){if(M<U){switch(Y){case"top_left":case"top":case"top_right":{O.y=M-U;break}case"right":case"left":{O.y=(M-U)/2;break}default:O.y=0}M=U}}else if(O.y=M,M=-M,M<U){switch(Y){case"top_left":case"top":case"top_right":{O.y=-M;break}default:O.y=-U}M=U}const{x:R,y:V}=O.rot(J.rotation).add(q);return{x:R,y:V,props:{w:Math.min(z,B),h:Math.min(F,M)}}};var NB0=function({id:J,file:Q,isInteractive:Z,width:q,height:Y,style:$,pageRotation:W}){return $K.jsx("iframe",{className:"tl-embed",draggable:!1,width:u(q),height:u(Y),frameBorder:"0",scrolling:"no",seamless:!0,referrerPolicy:"no-referrer-when-downgrade",style:{...$,pointerEvents:Z?"all":"none",zIndex:Z?"":"-1",boxShadow:g3(W)},srcDoc:`
			<html>
				<head>
					<base target="_blank">
				</head>
				<body>
					<script src=${`https://gist.github.com/${J}.js${Q?`?file=${Q}`:""}`}></script>
					<style type="text/css">
						* { margin: 0px; }
						table { height: 100%; background-color: red; }
						.gist { background-color: none; height: 100%;  }
						.gist .gist-file { height: calc(100vh - 2px); padding: 0px; display: grid; grid-template-rows: 1fr auto; }
					</style>
				</body>
			</html>`})},BB0=(J)=>{return Object.entries(J).filter(([Q,Z])=>Z).map(([Q])=>Q).join(" ")};class gM extends p7{static type="embed";static props=jz;static migrations=_z;hideSelectionBoundsFg=(J)=>!this.canResize(J);canEdit=()=>!0;canResize=(J)=>{return!!d7(J.props.url)?.definition?.doesResize};canEditInReadOnly=()=>!0;getDefaultProps(){return{w:300,h:300,url:""}}isAspectRatioLocked=(J)=>{return d7(J.props.url)?.definition.isAspectRatioLocked??!1};onResize=(J,Q)=>{const Z=this.isAspectRatioLocked(J),q=d7(J.props.url);let Y=q?.definition.minWidth??200,$=q?.definition.minHeight??200;if(Z){const W=J.props.w/J.props.h;if(W>1)Y*=W;else $/=W}return xn(J,Q,{minWidth:Y,minHeight:$})};component(J){const{w:Q,h:Z,url:q}=J.props,Y=gZ(J.id),$=mw.useMemo(()=>Ow(q),[q]),W=e("is hovering",()=>{const{editingShapeId:F,hoveredShapeId:B}=this.editor.getCurrentPageState();if(F&&B!==F){const M=this.editor.getShape(F);if(M&&this.editor.isShapeOfType(M,"embed"))return!0}return!1},[]),G=this.editor.getShapePageTransform(J).rotation(),z=Y||W;if($?.definition.type==="github_gist"){const F=$.url.split("/").pop();if(!F)throw Error("No gist id!");return $K.jsx(P4,{className:"tl-embed-container",id:J.id,children:$K.jsx(NB0,{id:F,width:u(Q),height:u(Z),isInteractive:z,pageRotation:G})})}const U=BB0({...aE,...$?.definition.overridePermissions??{}});return $K.jsx(P4,{className:"tl-embed-container",id:J.id,children:$?.definition?$K.jsx("iframe",{className:"tl-embed",sandbox:U,src:$.embedUrl,width:u(Q),height:u(Z),draggable:!1,frameBorder:"0",referrerPolicy:"no-referrer-when-downgrade",style:{border:0,pointerEvents:z?"auto":"none",zIndex:z?"":"-1",boxShadow:g3(G),borderRadius:$?.definition.overrideOutlineRadius??8,background:$?.definition.backgroundColor}}):null})}indicator(J){const Q=mw.useMemo(()=>d7(J.props.url),[J.props.url]);return $K.jsx("rect",{width:u(J.props.w),height:u(J.props.h),rx:Q?.definition.overrideOutlineRadius??8,ry:Q?.definition.overrideOutlineRadius??8})}}var l7=v(W0(),1);var Sn=v(p8(),1);var hM=v(W0(),1);var X2=v(o(),1);var mM=v(W0(),1);var q2=v(o(),1);var yn=q2.forwardRef(({id:J,name:Q,isEditing:Z},q)=>{const Y=h(),$=q2.useCallback((z)=>{if(z.key==="Enter"&&!z.nativeEvent.isComposing)d8(z),z.currentTarget.blur(),Y.setEditingShape(null)},[Y]),W=q2.useCallback((z)=>{const U=Y.getShape(J);if(!U)return;const F=U.props.name,B=z.currentTarget.value.trim();if(F===B)return;Y.updateShapes([{id:J,type:"frame",props:{name:B}}],{squashing:!0})},[J,Y]),G=q2.useCallback((z)=>{const U=Y.getShape(J);if(!U)return;const F=U.props.name,B=z.currentTarget.value;if(F===B)return;Y.updateShapes([{id:J,type:"frame",props:{name:B}}],{squashing:!0})},[J,Y]);return mM.jsxs("div",{className:`tl-frame-label ${Z?"tl-frame-label__editing":""}`,children:[mM.jsx("input",{className:"tl-frame-name-input",ref:q,style:{display:Z?void 0:"none"},value:Q,autoFocus:!0,onKeyDown:$,onBlur:W,onChange:G}),hw(Q,"Frame")+String.fromCharCode(8203)]})});var vn=function J({id:Q,name:Z,width:q,height:Y}){const $=h(),W=e("shape rotation",()=>E4($.getShapePageTransform(Q).rotation()),[$,Q]),G=gZ(Q),z=X2.useRef(null),U=X2.useCallback((R)=>{const V=Q5(R);if($.getEditingShapeId()===Q)return;$.dispatch({type:"pointer",name:"pointer_down",target:"shape",shape:$.getShape(Q),...V}),R.preventDefault()},[$,Q]);X2.useEffect(()=>{const R=z.current;if(R&&G)R.focus(),R.select(),requestAnimationFrame(()=>{if(document.activeElement!==R)R.focus(),R.select()})},[z,G]);const B=((W+Math.PI/4)*(2/Math.PI)+4)%4,M=["top","left","bottom","right"][Math.floor(B)];let O;switch(M){case"top":O="";break;case"right":O=`translate(${u(q)}px, 0px) rotate(90deg)`;break;case"bottom":O=`translate(${u(q)}px, ${u(Y)}px) rotate(180deg)`;break;case"left":O=`translate(0px, ${u(Y)}px) rotate(270deg)`;break}return hM.jsx("div",{className:"tl-frame-heading",style:{overflow:G?"visible":"hidden",maxWidth:`calc(var(--tl-zoom) * ${M==="top"||M==="bottom"?Math.ceil(q):Math.ceil(Y)}px + var(--space-5))`,bottom:"100%",transform:`${O} scale(var(--tl-scale)) translateX(calc(-1 * var(--space-3))`},onPointerDown:U,children:hM.jsx("div",{className:"tl-frame-heading-hit-area",children:hM.jsx(yn,{ref:z,id:Q,name:Z,isEditing:G})})})};var hw=function(J,Q){if(J.match(/^\s*$/))return Q;return J};class uM extends p7{static type="frame";static props=Ez;static migrations=Cz;canBind=()=>!0;canEdit=()=>!0;getDefaultProps(){return{w:320,h:180,name:""}}getGeometry(J){return new ZJ({width:J.props.w,height:J.props.h,isFilled:!1})}component(J){const Q=this.editor.getShapeGeometry(J).bounds,Z=g6(),q=e("is creating this shape",()=>{const Y=this.editor.getStateDescendant("select.resizing");if(!Y)return!1;if(!Y.getIsActive())return!1;const $=Y?.info;if(!$)return!1;return $.isCreating&&this.editor.getOnlySelectedShapeId()===J.id},[J.id]);return l7.jsxs(l7.Fragment,{children:[l7.jsx(mJ,{children:l7.jsx("rect",{className:Sn.default("tl-frame__body",{"tl-frame__creating":q}),width:Q.width,height:Q.height,fill:Z.solid,stroke:Z.text})}),q?null:l7.jsx(vn,{id:J.id,name:J.props.name,width:Q.width,height:Q.height})]})}toSvg(J,Q){const Z=y5({isDarkMode:Q.isDarkMode}),$=((E4(this.editor.getShapePageTransform(J.id).rotation())+Math.PI/4)*(2/Math.PI)+4)%4,W=Math.floor($);let G;switch(W){case 0:G="";break;case 3:G=`translate(${u(J.props.w)}, 0) rotate(90)`;break;case 2:G=`translate(${u(J.props.w)}, ${u(J.props.h)}) rotate(180)`;break;case 1:G=`translate(0, ${u(J.props.h)}) rotate(270)`;break;default:throw Error("labelSide out of bounds")}const z={fontSize:12,fontFamily:"Inter, sans-serif",textAlign:"start",width:J.props.w,height:32,padding:0,lineHeight:1,fontStyle:"normal",fontWeight:"normal",overflow:"truncate-ellipsis",verticalTextAlign:"middle"},U=this.editor.textMeasure.measureTextSpans(hw(J.props.name,"Frame")+String.fromCharCode(8203),z),F=U[0],B=P5(U),M=B.box.w+B.box.x-F.box.x,O=y3(this.editor,U,{offsetY:-z.height-2,...z});return l7.jsxs(l7.Fragment,{children:[l7.jsx("rect",{width:J.props.w,height:J.props.h,fill:Z.solid,stroke:Z.black.solid,strokeWidth:1,rx:1,ry:1}),l7.jsxs("g",{transform:G,children:[l7.jsx("rect",{x:-8,y:-z.height-4,width:M+16,height:z.height,fill:Z.background,rx:4,ry:4}),O]})]})}indicator(J){const Q=this.editor.getShapeGeometry(J).bounds;return l7.jsx("rect",{width:u(Q.width),height:u(Q.height),className:"tl-frame-indicator"})}canReceiveNewChildrenOfType=(J,Q)=>{return!J.isLocked};providesBackgroundForChildren(){return!0}canDropShapes=(J,Q)=>{return!J.isLocked};onDragShapesOver=(J,Q)=>{if(!Q.every((Z)=>Z.parentId===J.id))this.editor.reparentShapes(Q,J.id)};onDragShapesOut=(J,Q)=>{const Z=this.editor.getShape(J.parentId);if(Z&&this.editor.isShapeOfType(Z,"group"))this.editor.reparentShapes(Q,Z.id);else this.editor.reparentShapes(Q,this.editor.getCurrentPageId())};onResize=(J,Q)=>{return O3(J,Q)}}var f5=v(W0(),1);var sJ=function(J){return`${u(J.x)},${u(J.y)} `},fn=function(J=""){let Q=0,Z=0,q=0,Y=0;function $(){const W=Q^Q<<11;return Q=Z,Z=q,q=Y,Y^=(Y>>>19^W^W>>>8)>>>0,Y/4294967296*2}for(let W=0;W<J.length+64;W++)Q^=J.charCodeAt(W)|0,$();return $},m3=function(J){let Q="M";const Z=J.length;let q,Y,$;for(let W=0,G=Z;W<G;W+=3)q=J[W],Y=J[W+1],$=J[W+2],Q+=`${sJ(q)}L${sJ(Y)}Q${sJ($)}`;return Q+=`${sJ(J[0])}`,Q},h3=function(J,Q,Z,q,Y){const $=[],W=fn(J);let G=Q[0],z;const U=Q.length;for(let F=0,B=U*Y;F<B;F++){z=j.AddXY(Q[(F+1)%U],W()*Z,W()*Z);const M=j.Sub(z,G),O=j.Len(M),R=j.Div(M,O).mul(Math.min(O/4,q));$.push(j.Add(G,R),j.Add(z,R.neg()),z),G=z}return $},uw=function(J,Q,Z){let q=`M ${sJ(Q[0])}L`,Y=`M ${sJ(Q[0])}L`;const $=Z/3,W=Z*2,G=fn(J);let z=Q[0],U,F=Q[0],B;const M=Q.length;for(let O=0,R=M-1;O<R;O++){U=Q[O+1],B=j.AddXY(Q[O+1],G()*$,G()*$);const V=j.Sub(U,z),E=j.Len(V),_=j.Div(V,E).mul(Math.min(E/4,W)),A=j.Add(z,_),w=j.Add(U,_.neg()),T=j.Sub(B,F),k=j.Len(T),P=j.Div(T,k).mul(Math.min(k/4,W)),y=j.Add(F,P),p=j.Add(B,P.neg());if(O===R-1)q+=`${sJ(A)}L ${sJ(U)}`,Y+=`${sJ(y)}L ${sJ(B)}`;else q+=`${sJ(A)}L ${sJ(w)}Q ${sJ(U)}`,Y+=`${sJ(y)}L ${sJ(p)}Q ${sJ(B)}`,z=U,F=B}return[q,q+Y]};var gn=function(J,Q){const Z=Math.min(J,Q)/2,q=Math.max(J,Q)-Z*2;return Math.PI*(Z*2)+2*q},MB0=function(J,Q,Z){const q=Math.min(J,Q)/2,Y=Math.max(J,Q)-q*2,W=(Math.PI*(q*2)+2*Y)/Z,G=J>Q?[{type:"straight",start:new j(q,0),delta:new j(1,0)},{type:"arc",center:new j(J-q,q),startAngle:-T6/2},{type:"straight",start:new j(J-q,Q),delta:new j(-1,0)},{type:"arc",center:new j(q,q),startAngle:T6/2}]:[{type:"straight",start:new j(J,q),delta:new j(0,1)},{type:"arc",center:new j(q,Q-q),startAngle:0},{type:"straight",start:new j(0,Q-q),delta:new j(0,-1)},{type:"arc",center:new j(q,q),startAngle:T6}];let z=0;const U=[];for(let F=0;F<Z;F++){const B=G[0];if(B.type==="straight")U.push(j.Add(B.start,j.Mul(B.delta,z)));else U.push(t4(B.center,q,B.startAngle+z/q));z+=W;let M=B.type==="straight"?Y:T6*q;while(z>M)z-=M,G.push(G.shift()),M=G[0].type==="straight"?Y:T6*q}return U},u3=function(J,Q,Z,q){const Y=f7(Z),$=gn(J,Q),W=Math.max(Math.ceil($/OB0(q,50,70,100,130)),6,Math.ceil($/Math.min(J,Q))),G=$/W*0.2,z=Math.max(J-G*2,1),U=Math.max(Q-G*2,1),F=(J-z)/2,B=(Q-U)/2,M=gn(z,U)/W,O=MB0(z,U,W).map((A)=>{return A.addXY(F,B)}),R=J<20?0:G*0.3,V=Q<20?0:G*0.3,E=O.slice(0);for(let A=0;A<Math.floor(W/2);A++)E[A]=j.AddXY(E[A],Y()*R,Y()*V),E[W-A-1]=j.AddXY(E[W-A-1],Y()*R,Y()*V);const _=[];for(let A=0;A<E.length;A++){const w=A===E.length-1?0:A+1,T=E[A],k=E[w],P=O[A],y=O[w],p=j.Average([P,y]),s=j.Angle(P,y)-Math.PI/2,c=j.Dist(P,y),t=M-c,J0=j.Dist(T,k)/c,Q0=(Math.max(F,B)+t)*J0,a=j.Add(p,j.FromAngle(s,Q0));if(a.x<0)a.x=0;else if(a.x>J)a.x=J;if(a.y<0)a.y=0;else if(a.y>Q)a.y=Q;const _0=mn(T,k,a),T0=j.Dist(_0?_0:j.Average([T,k]),T);_.push({leftPoint:T,rightPoint:k,arcPoint:a,center:_0,radius:T0})}return _},mn=function(J,Q,Z){const q=J.x*(Q.y-Z.y)-J.y*(Q.x-Z.x)+Q.x*Z.y-Z.x*Q.y,Y=(J.x*J.x+J.y*J.y)*(Z.y-Q.y)+(Q.x*Q.x+Q.y*Q.y)*(J.y-Z.y)+(Z.x*Z.x+Z.y*Z.y)*(Q.y-J.y),$=(J.x*J.x+J.y*J.y)*(Q.x-Z.x)+(Q.x*Q.x+Q.y*Q.y)*(Z.x-J.x)+(Z.x*Z.x+Z.y*Z.y)*(J.x-Q.x),W=-Y/(2*q),G=-$/(2*q);if(!Number.isFinite(W)||!Number.isFinite(G))return null;return new j(W,G)},hn=function(J,Q,Z,q){const Y=[],$=u3(J,Q,Z,q);for(let{center:W,radius:G,leftPoint:z,rightPoint:U}of $)Y.push(...VB0(z,U,W,G,10));return Y},Y2=function(J,Q,Z,q){const Y=u3(J,Q,Z,q);let $=`M${u(Y[0].leftPoint.x)},${u(Y[0].leftPoint.y)}`;for(let{leftPoint:W,rightPoint:G,radius:z,center:U}of Y){if(U===null){$+=` L${u(G.x)},${u(G.y)}`;continue}const F=cn(W,G,U)?"0":"1";$+=` A${u(z)},${u(z)} 0 ${F},1 ${u(G.x)},${u(G.y)}`}return $+=" Z",$},un=function(J,Q,Z,q){const Y=f7(Z),$=q==="s"?0.5:q==="m"?0.7:q==="l"?0.9:1.6,W=(R)=>{return R+Y()*$*2},G=u3(J,Q,Z,q),F=G.reduce((R,V)=>R+j.Dist2(V.leftPoint,V.rightPoint),0)/G.length>($*15)**2?(R)=>new j(W(R.x),W(R.y)):(R)=>R;let B=`M${u(G[0].leftPoint.x)},${u(G[0].leftPoint.y)}`,M=F(G[0].leftPoint),O=`M${u(M.x)},${u(M.y)}`;for(let{leftPoint:R,center:V,rightPoint:E,radius:_,arcPoint:A}of G){if(V===null){B+=` L${u(E.x)},${u(E.y)}`;const p=F(E);O+=` L${u(p.x)},${u(p.y)}`,M=p;continue}const w=cn(R,E,V)?"0":"1";B+=` A${u(_)},${u(_)} 0 ${w},1 ${u(E.x)},${u(E.y)}`;const T=F(E),k=F(A),P=mn(M,T,k);if(!P){O+=` L${u(T.x)},${u(T.y)}`,M=T;continue}const y=Math.abs(j.Dist(P,M));O+=` A${u(y)},${u(y)} 0 ${w},1 ${u(T.x)},${u(T.y)}`,M=T}return B+O+" Z"},VB0=function(J,Q,Z,q,Y){if(Z===null)return[j.From(J),j.From(Q)];const $=[],W=j.Angle(Z,J),G=j.Angle(Z,Q),z=$X(W,G);for(let U=0;U<Y;U++){const F=U/(Y-1),B=W+z*F,M=t4(Z,q,B);$.push(M)}return $},cn=function(J,Q,Z){return(Q.x-J.x)*(Z.y-J.y)-(Q.y-J.y)*(Z.x-J.x)>0},OB0=(J,Q,Z,q,Y)=>{switch(J){case"s":return Q;case"m":return Z;case"l":return q;case"xl":return Y}};var DB0=function(J){return{size:1+J,thinning:0.25,end:{taper:J},start:{taper:J},streamline:0,smoothing:1,simulatePressure:!1}},RB0=function(J,Q,Z,q){const Y=f7(J),$=Q/2,W=Z/2,G=KX($,W),z=[],U=d6*Y(),F=d6+t6/2+Math.abs(Y())*t6,B=Math.max(16,G/10);for(let M=0;M<B;M++){const O=M/(B-1),R=U+O*F,V=Math.cos(R),E=Math.sin(R);z.push(new j($*V+Q*0.5+0.05*Y(),W*E+Z/2+0.05*Y(),Math.min(1,0.5+Math.abs(0.5-(Y()>0?_9.easeInOutSine(O):_9.easeInExpo(O)))/2)))}return dJ(z,DB0(q))},pn=function(J,Q,Z,q){return l1(RB0(J,Q,Z,q))};var y4=v(W0(),1);var c3=function(J,Q){switch(J.geo){case"x-box":return jB0(J.w,J.h,Q,J.dash);case"check-box":return _B0(J.w,J.h);default:return}},jB0=function(J,Q,Z,q){const Y=q==="draw"?0.62:0;if(q==="dashed")return[[new j(0,0),new j(J/2,Q/2)],[new j(J,Q),new j(J/2,Q/2)],[new j(0,Q),new j(J/2,Q/2)],[new j(J,0),new j(J/2,Q/2)]];const $=(G)=>Math.max(0,Math.min(J,G)),W=(G)=>Math.max(0,Math.min(Q,G));return[[new j($(Z*Y),W(Z*Y)),new j($(J-Z*Y),W(Q-Z*Y))],[new j($(Z*Y),W(Q-Z*Y)),new j($(J-Z*Y),W(Z*Y))]]},_B0=function(J,Q){const Z=Math.min(J,Q)*0.82,q=(J-Z)/2,Y=(Q-Z)/2,$=(G)=>Math.max(0,Math.min(J,G)),W=(G)=>Math.max(0,Math.min(Q,G));return[[new j($(q+Z*0.25),W(Y+Z*0.52)),new j($(q+Z*0.45),W(Y+Z*0.82))],[new j($(q+Z*0.45),W(Y+Z*0.82)),new j($(q+Z*0.82),W(Y+Z*0.22))]]};var kX=v(W0(),1);var dn=v(o(),1);var ln=dn.memo(function J({dash:Q,fill:Z,color:q,strokeWidth:Y,w:$,h:W,id:G,size:z}){const U=g6(),F=Y2($,W,G,z),B=u3($,W,G,z);return kX.jsxs(kX.Fragment,{children:[kX.jsx(O8,{theme:U,d:F,fill:Z,color:q}),kX.jsx("g",{strokeWidth:Y,stroke:U[q].solid,fill:"none",pointerEvents:"all",children:B.map(({leftPoint:M,rightPoint:O,center:R,radius:V},E)=>{const _=R?V*E4(E4(j.Angle(R,O))-E4(j.Angle(R,M))):j.Dist(M,O),{strokeDasharray:A,strokeDashoffset:w}=nJ(_,Y,{style:Q,start:"outset",end:"outset"});return kX.jsx("path",{d:R?`M${M.x},${M.y}A${V},${V},0,0,1,${O.x},${O.y}`:`M${M.x},${M.y}L${O.x},${O.y}`,strokeDasharray:A,strokeDashoffset:w},E)})})]})});var WK=v(W0(),1);var nn=v(o(),1);var sn=nn.memo(function J({w:Q,h:Z,strokeWidth:q,dash:Y,color:$,fill:W}){const G=g6(),z=Q/2,U=Z/2,F=Math.max(0,z),B=Math.max(0,U),M=KX(F,B),{strokeDasharray:O,strokeDashoffset:R}=nJ(M<64?M*2:M,q,{style:Y,snap:4,closed:!0}),V=`M${z-F},${U}a${F},${B},0,1,1,${F*2},0a${F},${B},0,1,1,-${F*2},0`;return WK.jsxs(WK.Fragment,{children:[WK.jsx(O8,{theme:G,d:V,color:$,fill:W}),WK.jsx("path",{d:V,strokeWidth:q,width:u(Q),height:u(Z),fill:"none",stroke:G[$].solid,strokeDasharray:O,strokeDashoffset:R,pointerEvents:"all"})]})});var GK=v(W0(),1);var on=v(o(),1);var rn=function(J,Q){if(Q>J){const q=J/2;return`
    M0,${q}
    a${q},${q},0,1,1,${q*2},0
    L${J},${Q-q}
    a${q},${q},0,1,1,-${q*2},0
    Z`}const Z=Q/2;return`
    M${Z},0
    L${J-Z},0
    a${Z},${Z},0,1,1,0,${Z*2}
    L${Z},${Q}
    a${Z},${Z},0,1,1,0,${-Z*2}
    Z`},an=function(J,Q){if(J>Q){const q=Q/2;return KX(q,q)+(J-q*2)*2}const Z=J/2;return KX(Z,Z)+(Q-Z*2)*2};var tn=on.memo(function J({w:Q,h:Z,strokeWidth:q,dash:Y,color:$,fill:W}){const G=g6(),z=rn(Q,Z),U=an(Q,Z),{strokeDasharray:F,strokeDashoffset:B}=nJ(U<64?U*2:U,q,{style:Y,snap:4,start:"outset",end:"outset",closed:!0});return GK.jsxs(GK.Fragment,{children:[GK.jsx(O8,{theme:G,d:z,color:$,fill:W}),GK.jsx("path",{d:z,strokeWidth:q,width:u(Q),height:u(Z),fill:"none",stroke:G[$].solid,strokeDasharray:F,strokeDashoffset:B,pointerEvents:"all"})]})});var lZ=v(W0(),1);var en=v(o(),1);var Js=en.memo(function J({dash:Q,fill:Z,color:q,strokeWidth:Y,outline:$,lines:W}){const G=g6(),z="M"+$[0]+"L"+$.slice(1)+"Z";return lZ.jsxs(lZ.Fragment,{children:[lZ.jsx(O8,{theme:G,d:z,fill:Z,color:q}),lZ.jsxs("g",{strokeWidth:Y,stroke:G[q].solid,fill:"none",pointerEvents:"all",children:[Array.from(Array($.length)).map((U,F)=>{const B=$[F],M=$[(F+1)%$.length],O=j.Dist(B,M),{strokeDasharray:R,strokeDashoffset:V}=nJ(O,Y,{style:Q,start:"outset",end:"outset"});return lZ.jsx("line",{x1:B.x,y1:B.y,x2:M.x,y2:M.y,strokeDasharray:R,strokeDashoffset:V},F)}),W&&W.map(([U,F],B)=>{const M=j.Dist(U,F),{strokeDasharray:O,strokeDashoffset:R}=nJ(M,Y,{style:Q,start:"skip",end:"outset",snap:Q==="dotted"?4:void 0});return lZ.jsx("path",{d:`M${U.x},${U.y}L${F.x},${F.y}`,stroke:G[q].solid,strokeWidth:Y,fill:"none",strokeDasharray:O,strokeDashoffset:R},`line_fg_${B}`)})]})]})});var HK=v(W0(),1),Qs=v(o(),1);var Zs=Qs.memo(function J({fill:Q,color:Z,strokeWidth:q,w:Y,h:$,id:W,size:G}){const z=g6(),U=un(Y,$,W,G);return HK.jsxs(HK.Fragment,{children:[HK.jsx(O8,{theme:z,d:U,fill:Q,color:Z}),HK.jsx("path",{d:U,stroke:z[Z].solid,strokeWidth:q,fill:"none"})]})});var zK=v(W0(),1),qs=v(o(),1);var Xs=qs.memo(function J({id:Q,outline:Z,lines:q,fill:Y,color:$,strokeWidth:W}){const G=g6(),z=h3(Q,Z,W/3,W*2,2);let U=m3(z);if(q)for(let[M,O]of q)U+=`M${M.x},${M.y}L${O.x},${O.y}`;const F=h3(Q,Z,0,W*2,1),B=m3(F);return zK.jsxs(zK.Fragment,{children:[zK.jsx(O8,{d:B,fill:Y,color:$,theme:G}),zK.jsx("path",{d:U,stroke:G[$].solid,strokeWidth:W,fill:"none"})]})});var UK=v(W0(),1),Ys=v(o(),1);var Ks=Ys.memo(function J({fill:Q,color:Z,strokeWidth:q,w:Y,h:$,id:W,size:G}){const z=g6(),U=Y2(Y,$,W,G);return UK.jsxs(UK.Fragment,{children:[UK.jsx(O8,{theme:z,d:U,fill:Q,color:Z}),UK.jsx("path",{d:U,stroke:z[Z].solid,strokeWidth:q,fill:"none"})]})});var LK=v(W0(),1),$s=v(o(),1);var cw=$s.memo(function J({w:Q,h:Z,strokeWidth:q,fill:Y,color:$}){const W=g6(),G=Q/2,z=Z/2,U=Math.max(0,G),F=Math.max(0,z),B=`M${G-U},${z}a${U},${F},0,1,1,${U*2},0a${U},${F},0,1,1,-${U*2},0`;return LK.jsxs(LK.Fragment,{children:[LK.jsx(O8,{d:B,color:$,fill:Y,theme:W}),LK.jsx("path",{d:B,stroke:W[$].solid,strokeWidth:q,fill:"none"})]})});var FK=v(W0(),1),Ws=v(o(),1);var dw=function(J,Q){let Z;if(Q>J){const q=J/2;Z=`
    M0,${q}
    a${q},${q},0,1,1,${q*2},0
    L${J},${Q-q}
    a${q},${q},0,1,1,-${q*2},0
    Z`}else{const q=Q/2;Z=`
    M${q},0
    L${J-q},0
    a${q},${q},0,1,1,0,${q*2}
    L${q},${Q}
    a${q},${q},0,1,1,0,${-q*2}
    Z`}return Z},pw=Ws.memo(function J({w:Q,h:Z,strokeWidth:q,fill:Y,color:$}){const W=g6(),G=dw(Q,Z);return FK.jsxs(FK.Fragment,{children:[FK.jsx(O8,{d:G,color:$,fill:Y,theme:W}),FK.jsx("path",{d:G,stroke:W[$].solid,strokeWidth:q,fill:"none"})]})});var BK=v(W0(),1),Gs=v(o(),1);var Hs=Gs.memo(function J({outline:Q,lines:Z,fill:q,color:Y,strokeWidth:$}){const W=g6();let G="M"+Q[0]+"L"+Q.slice(1)+"Z";if(Z)for(let[z,U]of Z)G+=`M${z.x},${z.y}L${U.x},${U.y}`;return BK.jsxs(BK.Fragment,{children:[BK.jsx(O8,{d:G,fill:q,color:Y,theme:W}),BK.jsx("path",{d:G,stroke:W[Y].solid,strokeWidth:$,fill:"none"})]})});var lw=function({shape:J}){const Q=h(),{id:Z,props:q}=J,{w:Y,color:$,fill:W,dash:G,growY:z,size:U}=q,F=C9[U],B=q.h+z;switch(q.geo){case"cloud":{if(G==="solid")return y4.jsx(Ks,{color:$,fill:W,strokeWidth:F,w:Y,h:B,id:Z,size:U});else if(G==="dashed"||G==="dotted")return y4.jsx(ln,{color:$,fill:W,strokeWidth:F,w:Y,h:B,id:Z,size:U,dash:G});else if(G==="draw")return y4.jsx(Zs,{color:$,fill:W,strokeWidth:F,w:Y,h:B,id:Z,size:U});break}case"ellipse":{if(G==="solid")return y4.jsx(cw,{strokeWidth:F,w:Y,h:B,color:$,fill:W});else if(G==="dashed"||G==="dotted")return y4.jsx(sn,{id:Z,strokeWidth:F,w:Y,h:B,dash:G,color:$,fill:W});else if(G==="draw")return y4.jsx(cw,{strokeWidth:F,w:Y,h:B,color:$,fill:W});break}case"oval":{if(G==="solid")return y4.jsx(pw,{strokeWidth:F,w:Y,h:B,color:$,fill:W});else if(G==="dashed"||G==="dotted")return y4.jsx(tn,{id:Z,strokeWidth:F,w:Y,h:B,dash:G,color:$,fill:W});else if(G==="draw")return y4.jsx(pw,{strokeWidth:F,w:Y,h:B,color:$,fill:W});break}default:{const M=Q.getShapeGeometry(J),O=M instanceof g9?M.children[0].vertices:M.vertices,R=c3(J.props,F);if(G==="solid")return y4.jsx(Hs,{fill:W,color:$,strokeWidth:F,outline:O,lines:R});else if(G==="dashed"||G==="dotted")return y4.jsx(Js,{dash:G,fill:W,color:$,strokeWidth:F,outline:O,lines:R});else if(G==="draw")return y4.jsx(Xs,{id:Z,fill:W,color:$,strokeWidth:F,outline:O,lines:R})}}};var cM=function(J,Q){const Z=Q.props.text;if(!Z)return{w:0,h:0};const q=J.textMeasure.measureText("w",{...E9,fontFamily:iJ[Q.props.font],fontSize:Z1[Q.props.size],maxWidth:100}),Y={s:2,m:3.5,l:5,xl:10},$=J.textMeasure.measureText(Z,{...E9,fontFamily:iJ[Q.props.font],fontSize:Z1[Q.props.size],minWidth:q.w,maxWidth:Math.max(0,Math.ceil(q.w+Y[Q.props.size]),Math.ceil(Q.props.w-T4*2))});return{w:$.w+T4*2,h:$.h+T4*2}},q1=51;class pM extends p7{static type="geo";static props=Az;static migrations=kz;canEdit=()=>!0;getDefaultProps(){return{w:100,h:100,geo:"rectangle",color:"black",labelColor:"black",fill:"none",dash:"draw",size:"m",font:"draw",text:"",align:"middle",verticalAlign:"middle",growY:0,url:""}}getGeometry(J){const Q=Math.max(1,J.props.w),Z=Math.max(1,J.props.h+J.props.growY),q=Q/2,Y=Z/2,$=C9[J.props.size],W=J.props.fill!=="none";let G;switch(J.props.geo){case"cloud":{G=new e8({points:hn(Q,Z,J.id,J.props.size),isFilled:W});break}case"triangle":{G=new e8({points:[new j(q,0),new j(Q,Z),new j(0,Z)],isFilled:W});break}case"diamond":{G=new e8({points:[new j(q,0),new j(Q,Y),new j(q,Z),new j(0,Y)],isFilled:W});break}case"pentagon":{G=new e8({points:lz(Q,Z,5),isFilled:W});break}case"hexagon":{G=new e8({points:lz(Q,Z,6),isFilled:W});break}case"octagon":{G=new e8({points:lz(Q,Z,8),isFilled:W});break}case"ellipse":{G=new hW({width:Q,height:Z,isFilled:W});break}case"oval":{G=new vN({width:Q,height:Z,isFilled:W});break}case"star":{const E=d6/5/2,_=Math.floor(1.25)*2,A=10-_,T=Math.floor(2.5)*2,k=Math.cos(-t6+_*E)*Q/2,P=Math.cos(-t6+A*E)*Q/2,y=Math.sin(-t6+0*E)*Z/2,p=Math.sin(-t6+T*E)*Z/2,s=Q-Math.abs(k-P),c=Z-Math.abs(p-y),t=Q/2+P-(Q/2-k),X0=Z/2+y-(Z/2-p),Q0=(Q-t)/2,a=(Z-X0)/2,_0=(Q+s)/2,T0=(Z+c)/2,r0=_0*1/2,C0=T0*1/2;G=new e8({points:Array.from(Array(10)).map((k0,b0)=>{const K6=-t6+b0*E;return new j(Q0+(b0%2?r0:_0)*Math.cos(K6),a+(b0%2?C0:T0)*Math.sin(K6))}),isFilled:W});break}case"rhombus":{const V=Math.min(Q*0.38,Z*0.38);G=new e8({points:[new j(V,0),new j(Q,0),new j(Q-V,Z),new j(0,Z)],isFilled:W});break}case"rhombus-2":{const V=Math.min(Q*0.38,Z*0.38);G=new e8({points:[new j(0,0),new j(Q-V,0),new j(Q,Z),new j(V,Z)],isFilled:W});break}case"trapezoid":{const V=Math.min(Q*0.38,Z*0.38);G=new e8({points:[new j(V,0),new j(Q-V,0),new j(Q,Z),new j(0,Z)],isFilled:W});break}case"arrow-right":{const V=Math.min(Q,Z)*0.38,E=Z*0.16;G=new e8({points:[new j(0,E),new j(Q-V,E),new j(Q-V,0),new j(Q,Z/2),new j(Q-V,Z),new j(Q-V,Z-E),new j(0,Z-E)],isFilled:W});break}case"arrow-left":{const V=Math.min(Q,Z)*0.38,E=Z*0.16;G=new e8({points:[new j(V,0),new j(V,E),new j(Q,E),new j(Q,Z-E),new j(V,Z-E),new j(V,Z),new j(0,Z/2)],isFilled:W});break}case"arrow-up":{const V=Q*0.16,E=Math.min(Q,Z)*0.38;G=new e8({points:[new j(Q/2,0),new j(Q,E),new j(Q-V,E),new j(Q-V,Z),new j(V,Z),new j(V,E),new j(0,E)],isFilled:W});break}case"arrow-down":{const V=Q*0.16,E=Math.min(Q,Z)*0.38;G=new e8({points:[new j(V,0),new j(Q-V,0),new j(Q-V,Z-E),new j(Q,Z-E),new j(Q/2,Z),new j(0,Z-E),new j(V,Z-E)],isFilled:W});break}case"check-box":case"x-box":case"rectangle":{G=new ZJ({width:Q,height:Z,isFilled:W});break}}const z=cM(this.editor,J),U=Math.min(100,Q/2),F=Math.min(Q,Math.max(z.w,Math.min(U,Math.max(1,Q-8)))),B=Math.min(Z1[J.props.size]*E9.lineHeight+T4*2,Z/2),M=Math.min(Z,Math.max(z.h,Math.min(B,Math.max(1,Q-8)))),O=c3(J.props,$),R=O?O.map((V)=>new hJ({points:V})):[];return new g9({children:[G,new ZJ({x:J.props.align==="start"?0:J.props.align==="end"?Q-F:(Q-F)/2,y:J.props.verticalAlign==="start"?0:J.props.verticalAlign==="end"?Z-M:(Z-M)/2,width:F,height:M,isFilled:!0,isLabel:!0}),...R]})}getHandleSnapGeometry(J){const Q=this.getGeometry(J),Z=Q.children[0];switch(J.props.geo){case"arrow-down":case"arrow-left":case"arrow-right":case"arrow-up":case"check-box":case"diamond":case"hexagon":case"octagon":case"pentagon":case"rectangle":case"rhombus":case"rhombus-2":case"star":case"trapezoid":case"triangle":case"x-box":return{outline:Z,points:[...Z.getVertices(),Q.bounds.center]};case"cloud":case"ellipse":case"oval":return{outline:Z,points:[Q.bounds.center]};default:r5(J.props.geo)}}onEditEnd=(J)=>{const{id:Q,type:Z,props:{text:q}}=J;if(q.trimEnd()!==J.props.text)this.editor.updateShapes([{id:Q,type:Z,props:{text:q.trimEnd()}}])};component(J){const{id:Q,type:Z,props:q}=J,{fill:Y,font:$,align:W,verticalAlign:G,size:z,text:U}=q,F=J.id===this.editor.getOnlySelectedShapeId(),B=g6(),O=this.editor.getEditingShapeId()!==null||J.props.text;return f5.jsxs(f5.Fragment,{children:[f5.jsx(mJ,{id:Q,children:f5.jsx(lw,{shape:J})}),O&&f5.jsx(P4,{style:{overflow:"hidden",width:J.props.w,height:J.props.h+q.growY},children:f5.jsx(dZ,{id:Q,type:Z,font:$,fontSize:Z1[z],lineHeight:E9.lineHeight,fill:Y,align:W,verticalAlign:G,text:U,isSelected:F,labelColor:B[q.labelColor].solid,wrap:!0})}),J.props.url&&f5.jsx(d1,{url:J.props.url,zoomLevel:this.editor.getZoomLevel()})]})}indicator(J){const{id:Q,props:Z}=J,{w:q,size:Y}=Z,$=Z.h+Z.growY,W=C9[Y];switch(Z.geo){case"ellipse":{if(Z.dash==="draw")return f5.jsx("path",{d:pn(Q,q,$,W)});return f5.jsx("ellipse",{cx:q/2,cy:$/2,rx:q/2,ry:$/2})}case"oval":return f5.jsx("path",{d:dw(q,$)});case"cloud":return f5.jsx("path",{d:Y2(q,$,Q,Y)});default:{const G=this.editor.getShapeGeometry(J),z=G instanceof g9?G.children[0].vertices:G.vertices;let U;if(Z.dash==="draw"){const B=h3(Q,z,0,W*2,1);U=m3(B)}else U="M"+z[0]+"L"+z.slice(1)+"Z";const F=c3(J.props,W);if(F)for(let[B,M]of F)U+=`M${B.x},${B.y}L${M.x},${M.y}`;return f5.jsx("path",{d:U})}}}toSvg(J,Q){const{props:Z}=J;Q.addExportDef(eW(J.props.fill));let q;if(Z.text){Q.addExportDef(TQ(J.props.font));const Y=y5(Q),$=this.editor.getShapeGeometry(J).bounds;q=f5.jsx(CX,{fontSize:Z1[Z.size],font:Z.font,align:Z.align,verticalAlign:Z.verticalAlign,text:Z.text,labelColor:Y[Z.labelColor].solid,bounds:$})}return f5.jsxs(f5.Fragment,{children:[f5.jsx(lw,{shape:J}),q]})}getCanvasSvgDefs(){return[J2()]}onResize=(J,{handle:Q,newPoint:Z,scaleX:q,scaleY:Y,initialShape:$})=>{let W=$.props.w*q,G=($.props.h+$.props.growY)*Y,z=0,U=0;if(J.props.text.trim()){let O=Math.max(Math.abs(W),q1),R=Math.max(Math.abs(G),q1);if(O<q1&&R===q1)O=q1;if(O===q1&&R<q1)R=q1;const V=cM(this.editor,{...J,props:{...J.props,w:O,h:R}}),E=Math.max(Math.abs(W),V.w)*Math.sign(W),_=Math.max(Math.abs(G),V.h)*Math.sign(G);z=Math.abs(E)-Math.abs(W),U=Math.abs(_)-Math.abs(G),W=E,G=_}const F=new j(0,0);if(q<0)F.x+=W;if(Q==="left"||Q==="top_left"||Q==="bottom_left")F.x+=q<0?z:-z;if(Y<0)F.y+=G;if(Q==="top"||Q==="top_left"||Q==="top_right")F.y+=Y<0?U:-U;const{x:B,y:M}=F.rot(J.rotation).add(Z);return{x:B,y:M,props:{w:Math.max(Math.abs(W),1),h:Math.max(Math.abs(G),1),growY:0}}};onBeforeCreate=(J)=>{if(!J.props.text)if(J.props.growY)return{...J,props:{...J.props,growY:0}};else return;const Q=J.props.h,Z=cM(this.editor,J).h;let q=null;if(Z>Q)q=Z-Q;else if(J.props.growY)q=0;if(q!==null)return{...J,props:{...J.props,growY:q}}};onBeforeUpdate=(J,Q)=>{const Z=J.props.text,q=Q.props.text;if(Z===q&&J.props.font===Q.props.font&&J.props.size===Q.props.size)return;if(Z&&!q)return{...Q,props:{...Q.props,growY:0}};const Y=J.props.w,$=J.props.h,W=cM(this.editor,Q),G=W.w,z=W.h;if(!Z&&q&&q.length===1){let F=Math.max(Y,G),B=Math.max($,z);if(J.props.w<q1&&J.props.h<q1)F=Math.max(F,q1),B=Math.max(B,q1),F=Math.max(F,B),B=Math.max(F,B);return{...Q,props:{...Q.props,w:F,h:B,growY:0}}}let U=null;if(z>$)U=z-$;else if(J.props.growY)U=0;if(U!==null)return{...Q,props:{...Q.props,growY:U,w:Math.max(Q.props.w,G)}};if(G>J.props.w)return{...Q,props:{...Q.props,w:G}}};onDoubleClick=(J)=>{if(this.editor.inputs.altKey)switch(J.props.geo){case"rectangle":return{...J,props:{geo:"check-box"}};case"check-box":return{...J,props:{geo:"rectangle"}}}return}}var iZ=v(W0(),1);var dM=v(o(),1),zs=function(){const[J,Q]=dM.useState(!1);return dM.useEffect(()=>{const q=CSS.supports("color","color(display-p3 1 1 1)"),Y=matchMedia("(color-gamut: p3)");Q(q&&Y.matches);const $=()=>Q(q&&Y.matches);return Y.addEventListener("change",$),()=>Y.removeEventListener("change",$)},[]),e(t8.forceSrgb)||!J?"srgb":"p3"};var EB0=function(J){return`M ${J.x} ${J.y} m -${0.1}, 0 a ${0.1},${0.1} 0 1,0 ${0.2},0 a ${0.1},${0.1} 0 1,0 -${0.2},0`},CB0=function(J,Q){const Z=Q/2;return`M ${J.x} ${J.y} m -${Z}, 0 a ${Z},${Z} 0 1,0 ${Z*2},0 a ${Z},${Z} 0 1,0 -${Z*2},0`},Fs=function(J,Q,Z){const q=KK(J.props.segments),Y=J.props.isComplete||P5(J.props.segments)?.type==="straight";let $=Q;if(!Z&&!J.props.isPen&&q.length===1)$+=f7(J.id)()*(Q/6);const W=vM({strokeWidth:$,showAsComplete:Y});return{strokePoints:dJ(q,W),sw:$}},AB0=function(J,Q,Z){const{strokePoints:q,sw:Y}=Fs(J,Q,Z);return{solidStrokePath:q.length>1?l1(q,!1):EB0(J.props.segments[0].points[0]),sw:Y}},lM=function({strokeWidth:J,shape:Q,opacity:Z}){const q=g6(),Y=AX(),{solidStrokePath:$,sw:W}=AB0(Q,J,Y),G=zs(),z=q[Q.props.color].highlight[G];return iZ.jsx("path",{d:$,strokeLinecap:"round",fill:"none",pointerEvents:"all",stroke:z,strokeWidth:W,opacity:Z})},K2=function(J){return cZ[J.props.size]*1.12},iM=function(J){return J.props.segments.length===1&&J.props.segments[0].points.length<2},Us=0.35,Ls=0.82;class nM extends qJ{static type="highlight";static props=Pz;static migrations=Tz;hideResizeHandles=(J)=>iM(J);hideRotateHandle=(J)=>iM(J);hideSelectionBoundsFg=(J)=>iM(J);getDefaultProps(){return{segments:[],color:"black",size:"m",isComplete:!1,isPen:!1}}getGeometry(J){const Q=K2(J);if(iM(J))return new MX({x:-Q/2,y:-Q/2,radius:Q/2,isFilled:!0});const{strokePoints:Z,sw:q}=Fs(J,Q,!0),Y=vM({strokeWidth:q,showAsComplete:!0});return jX(Z,Y),new e8({points:oW(Z,Y),isFilled:!0})}component(J){return iZ.jsx(mJ,{id:J.id,style:{opacity:Us},children:iZ.jsx(lM,{strokeWidth:K2(J),shape:J})})}backgroundComponent(J){return iZ.jsx(mJ,{id:J.id,style:{opacity:Ls},children:iZ.jsx(lM,{strokeWidth:K2(J),shape:J})})}indicator(J){const Q=AX(),Z=K2(J),q=KK(J.props.segments);let Y=Z;if(!Q&&!J.props.isPen&&q.length===1)Y+=f7(J.id)()*(Z/6);const $=J.props.isComplete||P5(J.props.segments)?.type==="straight",W=vM({strokeWidth:Z,showAsComplete:$}),G=dJ(q,W);let z;if(G.length<2)z=CB0(q[0],Y);else z=l1(G,!1);return iZ.jsx("path",{d:z})}toSvg(J){return iZ.jsx(lM,{strokeWidth:K2(J),shape:J,opacity:Us})}toBackgroundSvg(J){return iZ.jsx(lM,{strokeWidth:K2(J),shape:J,opacity:Ls})}onResize=(J,Q)=>{const{scaleX:Z,scaleY:q}=Q,Y=[];for(let $ of J.props.segments)Y.push({...$,points:$.points.map(({x:W,y:G,z})=>{return{x:Z*W,y:q*G,z}})});return{props:{segments:Y}}}}var A9=v(W0(),1);var oM=v(o(),1);var $2=v(W0(),1),sM=function(){return $2.jsxs("svg",{width:"15",height:"15",viewBox:"0 0 30 30",xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",children:[$2.jsx("path",{d:"M3,11 L3,3 11,3",strokeWidth:"2"}),$2.jsx("path",{d:"M19,27 L27,27 L27,19",strokeWidth:"2"}),$2.jsx("path",{d:"M27,3 L3,27",strokeWidth:"2"})]})};var rM=v(o(),1),aM=function(){const[J,Q]=rM.useState(!1);return rM.useEffect(()=>{const Z=window.matchMedia("(prefers-reduced-motion: reduce)"),q=()=>{Q(Z.matches)};return q(),Z.addEventListener("change",q),()=>Z.removeEventListener("change",q)},[]),J};async function kB0(J){const Z=await(await fetch(J)).blob();return V4.blobToDataUrl(Z)}var Bs=function(J){const Q=J.props.crop,Z=Q?.topLeft;if(!Z)return{width:J.props.w,height:J.props.h};const q=1/(Q.bottomRight.x-Q.topLeft.x)*J.props.w,Y=1/(Q.bottomRight.y-Q.topLeft.y)*J.props.h,$=-Z.x*q,W=-Z.y*Y;return{transform:`translate(${$}px, ${W}px)`,width:q,height:Y}};class tM extends p7{static type="image";static props=bz;static migrations=xz;isAspectRatioLocked=()=>!0;canCrop=()=>!0;getDefaultProps(){return{w:100,h:100,assetId:null,playing:!0,url:"",crop:null}}component(J){const Q=this.editor.getCroppingShapeId()===J.id,Z=aM(),[q,Y]=oM.useState(""),$=J.props.assetId?this.editor.getAsset(J.props.assetId):void 0,W=J.id===this.editor.getOnlySelectedShapeId();if(oM.useEffect(()=>{if($?.props.src&&"mimeType"in $.props&&$?.props.mimeType==="image/gif"){let F=!1;const B=$.props.src;if(!B)return;const M=new Image;return M.onload=()=>{if(F)return;const O=document.createElement("canvas");O.width=M.width,O.height=M.height;const R=O.getContext("2d");if(!R)return;R.drawImage(M,0,0),Y(O.toDataURL())},M.crossOrigin="anonymous",M.src=B,()=>{F=!0}}},[Z,$?.props]),$?.type==="bookmark")throw Error("Bookmark assets can't be rendered as images");const G=W&&Q&&this.editor.isInAny("select.crop","select.cropping","select.pointing_crop_handle"),z=Z&&($?.props.mimeType?.includes("video")||$?.props.mimeType?.includes("gif")),U=Bs(J);if(!$?.props.src)return A9.jsxs(P4,{id:J.id,style:{overflow:"hidden",width:J.props.w,height:J.props.h,color:"var(--color-text-3)",backgroundColor:$?"transparent":"var(--color-low)",border:$?"none":"1px solid var(--color-low-border)"},children:[A9.jsx("div",{className:"tl-image-container",style:U,children:$?null:A9.jsx(sM,{})}),")","url"in J.props&&J.props.url&&A9.jsx(d1,{url:J.props.url,zoomLevel:this.editor.getZoomLevel()})]});return A9.jsxs(A9.Fragment,{children:[G&&A9.jsx("div",{style:U,children:A9.jsx("div",{className:"tl-image",style:{opacity:0.1,backgroundImage:`url(${!J.props.playing||z?q:$.props.src})`},draggable:!1})}),A9.jsxs(P4,{id:J.id,style:{overflow:"hidden",width:J.props.w,height:J.props.h},children:[A9.jsxs("div",{className:"tl-image-container",style:U,children:[A9.jsx("div",{className:"tl-image",style:{backgroundImage:`url(${!J.props.playing||z?q:$.props.src})`},draggable:!1}),$.props.isAnimated&&!J.props.playing&&A9.jsx("div",{className:"tl-image__tg",children:"GIF"})]}),")",J.props.url&&A9.jsx(d1,{url:J.props.url,zoomLevel:this.editor.getZoomLevel()})]})]})}indicator(J){if(this.editor.getCroppingShapeId()===J.id)return null;return A9.jsx("rect",{width:u(J.props.w),height:u(J.props.h)})}async toSvg(J){const Q=J.props.assetId?this.editor.getAsset(J.props.assetId):null;if(!Q)return null;let Z=Q?.props.src||"";if(Z.startsWith("http")||Z.startsWith("/")||Z.startsWith("./"))Z=await kB0(Z)||"";const q=Bs(J),Y=J.props.crop;if(q.transform&&Y){const{transform:$,width:W,height:G}=q,z=(Y.bottomRight.x-Y.topLeft.x)*W,U=(Y.bottomRight.y-Y.topLeft.y)*G,F=[new j(0,0),new j(z,0),new j(z,U),new j(0,U)],B=`cropClipPath_${J.id.replace(":","_")}`;return A9.jsxs(A9.Fragment,{children:[A9.jsx("defs",{children:A9.jsx("clipPath",{id:B,children:A9.jsx("polygon",{points:F.map((M)=>`${M.x},${M.y}`).join(" ")})})}),A9.jsx("g",{clipPath:"url(#{cropClipId})",children:A9.jsx("image",{href:Z,width:W,height:G,style:{transform:$}})})]})}else return A9.jsx("image",{href:Z,width:J.props.w,height:J.props.h})}onDoubleClick=(J)=>{const Q=J.props.assetId?this.editor.getAsset(J.props.assetId):void 0;if(!Q)return;if(!(Q.props.src&&("mimeType"in Q.props)&&Q.props.mimeType==="image/gif"))return;this.editor.updateShapes([{type:"image",id:J.id,props:{playing:!J.props.playing}}])};onDoubleClickEdge=(J)=>{const Q=J.props;if(!Q)return;if(this.editor.getCroppingShapeId()!==J.id)return;const Z=p6(Q.crop)||{topLeft:{x:0,y:0},bottomRight:{x:1,y:1}},q=1/(Z.bottomRight.x-Z.topLeft.x)*J.props.w,Y=1/(Z.bottomRight.y-Z.topLeft.y)*J.props.h,$=new j(Z.topLeft.x*q,Z.topLeft.y*Y).rot(J.rotation),W={id:J.id,type:J.type,x:J.x-$.x,y:J.y-$.y,props:{crop:{topLeft:{x:0,y:0},bottomRight:{x:1,y:1}},w:q,h:Y}};this.editor.updateShapes([W])}}var V8=v(W0(),1);var iw=function(J,Q){const{start:Z,end:q}=J;if(Q)return`M${u(Z.x)},${u(Z.y)} L${u(q.x)},${u(q.y)} `;return`${u(q.x)},${u(q.y)} `},nw=function(J,Q){const{a:Z,b:q,c:Y,d:$}=J;if(j.Equals(Z,$))return"";return`${Q?`M${u(Z.x)},${u(Z.y)}`:""}C${u(q.x)},${u(q.y)} ${u(Y.x)},${u(Y.y)} ${u($.x)},${u($.y)}`},wB0=function(J,Q){let Z=J.segments.reduce((q,Y,$)=>{return q+nw(Y,$===0)},"");if(Q)Z+="Z";return Z},IB0=function(J,Q){let Z=J.segments.reduce((q,Y,$)=>{return q+iw(Y,$===0)},"");if(Q)Z+="Z";return Z},eM=function(J,Q=!1){if(J instanceof hJ)return IB0(J,Q);else return wB0(J,Q)};var Ns=function(J){return{size:J,thinning:0.4,streamline:0,smoothing:0.5,simulatePressure:!0,last:!0}},Ms=function(J,Q,Z){const q=Q.vertices,Y=Ns(Z);return dJ(q,Y)},PB0=function(J,Q,Z){const q=Ns(Z);return oW(jX(Ms(J,Q,Z),q),q)},Os=function(J,Q,Z){const q=PB0(J,Q,Z);return hY(q)},Vs=function(J,Q,Z){if(J.props.dash==="draw"){const q=Ms(J,Q,Z);return l1(q)}return eM(Q)};var sw=function(J){return Object.values(J.props.points).sort(P9)},p3=function(J){const Q=sw(J).map(j.From);switch(J.props.spline){case"cubic":return new yN({points:Q});case"line":return new hJ({points:Q})}},Ds=function({shape:J}){const Q=g6(),Z=p3(J),q=C9[J.props.size],{dash:Y,color:$}=J.props;if(J.props.spline==="line"){if(Y==="solid"){const W=Z.points,G="M"+W[0]+"L"+W.slice(1);return V8.jsxs(V8.Fragment,{children:[V8.jsx(O8,{d:G,fill:"none",color:$,theme:Q}),V8.jsx("path",{d:G,stroke:Q[$].solid,strokeWidth:q,fill:"none"})]})}if(Y==="dashed"||Y==="dotted"){const W=Z.points,G="M"+W[0]+"L"+W.slice(1);return V8.jsxs(V8.Fragment,{children:[V8.jsx(O8,{d:G,fill:"none",color:$,theme:Q}),V8.jsx("g",{stroke:Q[$].solid,strokeWidth:q,children:Z.segments.map((z,U)=>{const{strokeDasharray:F,strokeDashoffset:B}=nJ(z.length,q,{style:Y,start:U>0?"outset":"none",end:U<Z.segments.length-1?"outset":"none"});return V8.jsx("path",{strokeDasharray:F,strokeDashoffset:B,d:iw(z,!0),fill:"none"},U)})})]})}if(Y==="draw"){const W=Z.points,[G,z]=uw(J.id,W,q);return V8.jsxs(V8.Fragment,{children:[V8.jsx(O8,{d:G,fill:"none",color:$,theme:Q}),V8.jsx("path",{d:z,stroke:Q[$].solid,strokeWidth:q,fill:"none"})]})}}if(J.props.spline==="cubic"){const W=eM(Z);if(Y==="solid")return V8.jsxs(V8.Fragment,{children:[V8.jsx(O8,{d:W,fill:"none",color:$,theme:Q}),V8.jsx("path",{strokeWidth:q,stroke:Q[$].solid,fill:"none",d:W})]});if(Y==="dashed"||Y==="dotted")return V8.jsxs(V8.Fragment,{children:[V8.jsx(O8,{d:W,fill:"none",color:$,theme:Q}),V8.jsx("g",{stroke:Q[$].solid,strokeWidth:q,children:Z.segments.map((G,z)=>{const{strokeDasharray:U,strokeDashoffset:F}=nJ(G.length,q,{style:Y,start:z>0?"outset":"none",end:z<Z.segments.length-1?"outset":"none"});return V8.jsx("path",{strokeDasharray:U,strokeDashoffset:F,d:nw(G,!0),fill:"none"},z)})})]});if(Y==="draw")return V8.jsxs(V8.Fragment,{children:[V8.jsx(O8,{d:W,fill:"none",color:$,theme:Q}),V8.jsx("path",{d:Os(J,Z,q),strokeWidth:1,stroke:Q[$].solid,fill:Q[$].solid})]})}},TB0=new _Q;class JO extends qJ{static type="line";static props=yz;static migrations=vz;hideResizeHandles=()=>!0;hideRotateHandle=()=>!0;hideSelectionBoundsFg=()=>!0;hideSelectionBoundsBg=()=>!0;getDefaultProps(){const[J,Q]=NQ(2);return{dash:"draw",size:"m",color:"black",spline:"line",points:{[J]:{id:J,index:J,x:0,y:0},[Q]:{id:Q,index:Q,x:0.1,y:0.1}}}}getGeometry(J){return p3(J)}getHandles(J){return TB0.get(J.props,()=>{const Q=p3(J),Z=sw(J),q=Z.map((Y)=>({...Y,id:Y.index,type:"vertex",canSnap:!0}));for(let Y=0;Y<Z.length-1;Y++){const $=CZ(Z[Y].index,Z[Y+1].index),G=Q.segments[Y].midPoint();q.push({id:$,type:"create",index:$,x:G.x,y:G.y,canSnap:!0})}return q.sort(P9)})}onResize=(J,Q)=>{const{scaleX:Z,scaleY:q}=Q;return{props:{points:sq(J.props.points,(Y,{id:$,index:W,x:G,y:z})=>({id:$,index:W,x:G*Z,y:z*q}))}}};onHandleDrag=(J,{handle:Q})=>{if(Q.type!=="vertex")return;return{...J,props:{...J.props,points:{...J.props.points,[Q.id]:{id:Q.id,index:Q.index,x:Q.x,y:Q.y}}}}};component(J){return V8.jsx(mJ,{id:J.id,children:V8.jsx(Ds,{shape:J})})}indicator(J){const Q=C9[J.props.size],Z=p3(J),{dash:q}=J.props;let Y;if(J.props.spline==="line"){const $=Z.points;if(q==="solid"||q==="dotted"||q==="dashed")Y="M"+$[0]+"L"+$.slice(1);else{const[W]=uw(J.id,$,Q);Y=W}}else Y=Vs(J,Z,Q);return V8.jsx("path",{d:Y})}toSvg(J){return V8.jsx(Ds,{shape:J})}getHandleSnapGeometry(J){const Q=sw(J);return{points:Q,getSelfSnapPoints:(Z)=>{const q=this.getHandles(J).filter((Y)=>Y.type==="vertex").findIndex((Y)=>Y.id===Z.id);return Q.filter((Y,$)=>Math.abs($-q)>1).map(j.From)},getSelfSnapOutline:(Z)=>{const q=this.getHandles(J).filter(($)=>$.type==="vertex").findIndex(($)=>$.id===Z.id),Y=p3(J).segments.filter(($,W)=>W!==q-1&&W!==q);if(!Y.length)return null;return new g9({children:Y})}}}}var i7=v(W0(),1);var ws=v(o(),1);var Es=v(W0(),1);var bQ=v(o(),1);var Rs=v(W0(),1),W2=v(o(),1),rw=function({assetUrls:J,children:Q}){return W2.useEffect(()=>{for(let Z of Object.values(J.icons)){const q=new Image;q.src=Z,q.decode()}for(let Z of Object.values(J.embedIcons)){const q=new Image;q.src=Z,q.decode()}},[J]),Rs.jsx(js.Provider,{value:J,children:Q})},NK=function(){const J=W2.useContext(js);if(!J)throw new Error("useAssetUrls must be used within an AssetUrlsProvider");return J},js=W2.createContext(null);var d3={"action.convert-to-bookmark":"Convert to Bookmark","action.convert-to-embed":"Convert to Embed","action.open-embed-link":"Open link","action.align-bottom":"Align bottom","action.align-center-horizontal":"Align horizontally","action.align-center-vertical":"Align vertically","action.align-center-horizontal.short":"Align H","action.align-center-vertical.short":"Align V","action.align-left":"Align left","action.align-right":"Align right","action.align-top":"Align top","action.back-to-content":"Back to content","action.bring-forward":"Bring forward","action.bring-to-front":"Bring to front","action.copy-as-json.short":"JSON","action.copy-as-json":"Copy as JSON","action.copy-as-png.short":"PNG","action.copy-as-png":"Copy as PNG","action.copy-as-svg.short":"SVG","action.copy-as-svg":"Copy as SVG","action.copy":"Copy","action.cut":"Cut","action.delete":"Delete","action.unlock-all":"Unlock all","action.distribute-horizontal":"Distribute horizontally","action.distribute-vertical":"Distribute vertically","action.distribute-horizontal.short":"Distribute H","action.distribute-vertical.short":"Distribute V","action.duplicate":"Duplicate","action.edit-link":"Edit link","action.exit-pen-mode":"Exit pen mode","action.export-as-json.short":"JSON","action.export-as-json":"Export as JSON","action.export-as-png.short":"PNG","action.export-as-png":"Export as PNG","action.export-as-svg.short":"SVG","action.export-as-svg":"Export as SVG","action.export-all-as-json.short":"JSON","action.export-all-as-json":"Export as JSON","action.export-all-as-png.short":"PNG","action.export-all-as-png":"Export as PNG","action.export-all-as-svg.short":"SVG","action.export-all-as-svg":"Export as SVG","action.fit-frame-to-content":"Fit to content","action.flip-horizontal":"Flip horizontally","action.flip-vertical":"Flip vertically","action.flip-horizontal.short":"Flip H","action.flip-vertical.short":"Flip V","action.fork-project":"Fork this project","action.group":"Group","action.insert-embed":"Insert embed","action.insert-media":"Upload media","action.leave-shared-project":"Leave shared project","action.new-project":"New project","action.new-shared-project":"New shared project","action.open-cursor-chat":"Cursor chat","action.open-file":"Open file","action.pack":"Pack","action.paste":"Paste","action.print":"Print","action.redo":"Redo","action.remove-frame":"Remove frame","action.rename":"Rename","action.rotate-ccw":"Rotate counterclockwise","action.rotate-cw":"Rotate clockwise","action.save-copy":"Save a copy","action.select-all":"Select all","action.select-none":"Select none","action.send-backward":"Send backward","action.send-to-back":"Send to back","action.share-project":"Share this project","action.stack-horizontal":"Stack horizontally","action.stack-vertical":"Stack vertically","action.stack-horizontal.short":"Stack H","action.stack-vertical.short":"Stack V","action.stop-following":"Stop following","action.stretch-horizontal":"Stretch horizontally","action.stretch-vertical":"Stretch vertically","action.stretch-horizontal.short":"Stretch H","action.stretch-vertical.short":"Stretch V","action.toggle-auto-size":"Toggle auto size","action.toggle-dark-mode.menu":"Dark mode","action.toggle-dark-mode":"Toggle dark mode","action.toggle-wrap-mode.menu":"Select on wrap","action.toggle-wrap-mode":"Toggle Select on wrap","action.toggle-reduce-motion.menu":"Reduce motion","action.toggle-reduce-motion":"Toggle reduce motion","action.toggle-edge-scrolling.menu":"Edge scrolling","action.toggle-edge-scrolling":"Toggle edge scrolling","action.toggle-debug-mode.menu":"Debug mode","action.toggle-debug-mode":"Toggle debug mode","action.toggle-focus-mode.menu":"Focus mode","action.toggle-focus-mode":"Toggle focus mode","action.toggle-grid.menu":"Show grid","action.toggle-grid":"Toggle grid","action.toggle-lock":"Toggle locked","action.toggle-snap-mode.menu":"Always snap","action.toggle-snap-mode":"Toggle always snap","action.toggle-tool-lock.menu":"Tool lock","action.toggle-tool-lock":"Toggle tool lock","action.toggle-transparent.context-menu":"Transparent","action.toggle-transparent.menu":"Transparent","action.toggle-transparent":"Toggle transparent background","action.undo":"Undo","action.ungroup":"Ungroup","action.zoom-in":"Zoom in","action.zoom-out":"Zoom out","action.zoom-to-100":"Zoom to 100%","action.zoom-to-fit":"Zoom to fit","action.zoom-to-selection":"Zoom to selection","assets.files.upload-failed":"Upload failed","assets.url.failed":"Couldn't load URL preview","color-style.white":"White","color-style.black":"Black","color-style.blue":"Blue","color-style.green":"Green","color-style.grey":"Grey","color-style.light-blue":"Light blue","color-style.light-green":"Light green","color-style.light-red":"Light red","color-style.light-violet":"Light violet","color-style.orange":"Orange","color-style.red":"Red","color-style.violet":"Violet","color-style.yellow":"Yellow","fill-style.none":"None","document.default-name":"Untitled","fill-style.semi":"Semi","fill-style.solid":"Solid","fill-style.pattern":"Pattern","dash-style.dashed":"Dashed","dash-style.dotted":"Dotted","dash-style.draw":"Draw","dash-style.solid":"Solid","size-style.s":"Small","size-style.m":"Medium","size-style.l":"Large","size-style.xl":"Extra large","opacity-style.0.1":"10%","opacity-style.0.25":"25%","opacity-style.0.5":"50%","opacity-style.0.75":"75%","opacity-style.1":"100%","font-style.draw":"Draw","font-style.sans":"Sans","font-style.serif":"Serif","font-style.mono":"Mono","align-style.start":"Start","align-style.middle":"Middle","align-style.end":"End","align-style.justify":"Justify","verticalAlign-style.start":"Top","verticalAlign-style.middle":"Middle","verticalAlign-style.end":"Bottom","geo-style.arrow-down":"Arrow down","geo-style.arrow-left":"Arrow left","geo-style.arrow-right":"Arrow right","geo-style.arrow-up":"Arrow up","geo-style.diamond":"Diamond","geo-style.ellipse":"Ellipse","geo-style.hexagon":"Hexagon","geo-style.octagon":"Octagon","geo-style.oval":"Oval","geo-style.cloud":"Cloud","geo-style.pentagon":"Pentagon","geo-style.rectangle":"Rectangle","geo-style.rhombus-2":"Rhombus 2","geo-style.rhombus":"Rhombus","geo-style.star":"Star","geo-style.trapezoid":"Trapezoid","geo-style.triangle":"Triangle","geo-style.x-box":"X box","geo-style.check-box":"Check box","arrowheadStart-style.none":"None","arrowheadStart-style.arrow":"Arrow","arrowheadStart-style.bar":"Bar","arrowheadStart-style.diamond":"Diamond","arrowheadStart-style.dot":"Dot","arrowheadStart-style.inverted":"Inverted","arrowheadStart-style.pipe":"Pipe","arrowheadStart-style.square":"Square","arrowheadStart-style.triangle":"Triangle","arrowheadEnd-style.none":"None","arrowheadEnd-style.arrow":"Arrow","arrowheadEnd-style.bar":"Bar","arrowheadEnd-style.diamond":"Diamond","arrowheadEnd-style.dot":"Dot","arrowheadEnd-style.inverted":"Inverted","arrowheadEnd-style.pipe":"Pipe","arrowheadEnd-style.square":"Square","arrowheadEnd-style.triangle":"Triangle","spline-style.line":"Line","spline-style.cubic":"Cubic","tool.select":"Select","tool.hand":"Hand","tool.draw":"Draw","tool.eraser":"Eraser","tool.arrow-down":"Arrow down","tool.arrow-left":"Arrow left","tool.arrow-right":"Arrow right","tool.arrow-up":"Arrow up","tool.arrow":"Arrow","tool.cloud":"Cloud","tool.diamond":"Diamond","tool.ellipse":"Ellipse","tool.hexagon":"Hexagon","tool.highlight":"Highlight","tool.line":"Line","tool.octagon":"Octagon","tool.oval":"Oval","tool.pentagon":"Pentagon","tool.rectangle":"Rectangle","tool.rhombus":"Rhombus","tool.star":"Star","tool.trapezoid":"Trapezoid","tool.triangle":"Triangle","tool.x-box":"X box","tool.check-box":"Check box","tool.asset":"Asset","tool.frame":"Frame","tool.note":"Note","tool.laser":"Laser","tool.embed":"Embed","tool.text":"Text","menu.title":"Menu","menu.copy-as":"Copy as","menu.edit":"Edit","menu.export-as":"Export as","menu.file":"File","menu.language":"Language","menu.preferences":"Preferences","menu.view":"View","context-menu.arrange":"Arrange","context-menu.copy-as":"Copy as","context-menu.export-as":"Export as","context-menu.export-all-as":"Export","context-menu.move-to-page":"Move to page","context-menu.reorder":"Reorder","page-menu.title":"Pages","page-menu.create-new-page":"Create new page","page-menu.max-page-count-reached":"Max pages reached","page-menu.new-page-initial-name":"Page 1","page-menu.edit-start":"Edit","page-menu.edit-done":"Done","page-menu.go-to-page":"Go to page","page-menu.submenu.rename":"Rename","page-menu.submenu.duplicate-page":"Duplicate","page-menu.submenu.title":"Menu","page-menu.submenu.move-down":"Move down","page-menu.submenu.move-up":"Move up","page-menu.submenu.delete":"Delete","share-menu.title":"Share","share-menu.save-note":"Download this project to your computer as a .tldr file.","share-menu.fork-note":"Create a new shared project based on this snapshot.","share-menu.share-project":"Share this project","share-menu.default-project-name":"Shared Project","share-menu.copy-link":"Copy share link","share-menu.readonly-link":"Read-only","share-menu.create-snapshot-link":"Copy snapshot link","share-menu.snapshot-link-note":"Capture and share this project as a read-only snapshot link.","share-menu.copy-readonly-link":"Copy read-only link","share-menu.offline-note":"Create a new shared project based on your current project.","share-menu.copy-link-note":"Anyone with the link will be able to view and edit this project.","share-menu.copy-readonly-link-note":"Anyone with the link will be able to view (but not edit) this project.","share-menu.project-too-large":"Sorry, this project can't be shared because it's too large. We're working on it!","share-menu.upload-failed":"Sorry, we couldn't upload your project at the moment. Please try again or let us know if the problem persists.","status.offline":"Offline","status.online":"Online","people-menu.title":"People","people-menu.change-name":"Change name","people-menu.change-color":"Change color","people-menu.follow":"Following","people-menu.following":"Following","people-menu.leading":"Following You","people-menu.user":"(You)","people-menu.invite":"Invite others","help-menu.title":"Help and resources","help-menu.about":"About","help-menu.discord":"Discord","help-menu.github":"GitHub","help-menu.keyboard-shortcuts":"Keyboard shortcuts","help-menu.twitter":"Twitter","actions-menu.title":"Actions","edit-link-dialog.title":"Edit link","edit-link-dialog.invalid-url":"A link must be a valid URL.","edit-link-dialog.detail":"Links will open in a new tab.","edit-link-dialog.url":"URL","edit-link-dialog.clear":"Clear","edit-link-dialog.save":"Continue","edit-link-dialog.cancel":"Cancel","embed-dialog.title":"Insert embed","embed-dialog.back":"Back","embed-dialog.create":"Create","embed-dialog.cancel":"Cancel","embed-dialog.url":"URL","embed-dialog.instruction":"Paste in the site's URL to create the embed.","embed-dialog.invalid-url":"We could not create an embed from that URL.","edit-pages-dialog.move-down":"Move down","edit-pages-dialog.move-up":"Move up","shortcuts-dialog.title":"Keyboard shortcuts","shortcuts-dialog.edit":"Edit","shortcuts-dialog.file":"File","shortcuts-dialog.preferences":"Preferences","shortcuts-dialog.tools":"Tools","shortcuts-dialog.transform":"Transform","shortcuts-dialog.view":"View","shortcuts-dialog.collaboration":"Collaboration","home-project-dialog.title":"Home project","home-project-dialog.description":"This is your local home project. It's just for you!","rename-project-dialog.title":"Rename project","rename-project-dialog.cancel":"Cancel","rename-project-dialog.rename":"Rename","home-project-dialog.ok":"Ok","style-panel.title":"Styles","style-panel.align":"Align","style-panel.vertical-align":"Vertical align","style-panel.position":"Position","style-panel.arrowheads":"Arrows","style-panel.arrowhead-start":"Start","style-panel.arrowhead-end":"End","style-panel.color":"Color","style-panel.dash":"Dash","style-panel.fill":"Fill","style-panel.font":"Font","style-panel.geo":"Shape","style-panel.mixed":"Mixed","style-panel.opacity":"Opacity","style-panel.size":"Size","style-panel.spline":"Spline","tool-panel.drawing":"Drawing","tool-panel.shapes":"Shapes","tool-panel.more":"More","debug-panel.more":"More","navigation-zone.toggle-minimap":"Toggle minimap","navigation-zone.zoom":"Zoom","focus-mode.toggle-focus-mode":"Toggle focus mode","toast.close":"Close","file-system.file-open-error.title":"Could not open file","file-system.file-open-error.not-a-tldraw-file":"The file you tried to open doesn't look like a tldraw file.","file-system.file-open-error.file-format-version-too-new":"The file you tried to open is from a newer version of tldraw. Please reload the page and try again.","file-system.file-open-error.generic-corrupted-file":"The file you tried to open is corrupted.","file-system.confirm-open.title":"Overwrite current project?","file-system.confirm-open.description":"Opening a file will replace your current project and any unsaved changes will be lost. Are you sure you want to continue?","file-system.confirm-open.cancel":"Cancel","file-system.confirm-open.open":"Open file","file-system.confirm-open.dont-show-again":"Don't ask again","file-system.confirm-clear.title":"Clear current project?","file-system.confirm-clear.description":"Creating a new project will clear your current project and any unsaved changes will be lost. Are you sure you want to continue?","file-system.confirm-clear.cancel":"Cancel","file-system.confirm-clear.continue":"Continue","file-system.confirm-clear.dont-show-again":"Don't ask again","file-system.shared-document-file-open-error.title":"Could not open file","file-system.shared-document-file-open-error.description":"Opening files from shared projects is not supported.","sharing.confirm-leave.title":"Leave current project?","sharing.confirm-leave.description":"Are you sure you want to leave this shared project? You can return to it by navigating to its URL.","sharing.confirm-leave.cancel":"Cancel","sharing.confirm-leave.leave":"Leave","sharing.confirm-leave.dont-show-again":"Don't ask again","toast.error.export-fail.title":"Failed export","toast.error.export-fail.desc":"Failed to export image","toast.error.copy-fail.title":"Failed copy","toast.error.copy-fail.desc":"Failed to copy image","context.pages.new-page":"New page","vscode.file-open.desc":"We've updated this document to work with the current version of tldraw. If you'd like to keep the original version (which will work on old.tldraw.com), click below to create a backup.","vscode.file-open.open":"Continue","vscode.file-open.backup":"Backup","vscode.file-open.backup-saved":"Backup saved","vscode.file-open.backup-failed":"Backup failed: this is not a .tldr file.","vscode.file-open.dont-show-again":"Don't ask again","cursor-chat.type-to-chat":"Type to chat..."};async function _s(J,Q){if(!(await fetch(Q.translations.en)).ok)return console.warn("No main translations found."),G2;if(J==="en")return G2;const q=DQ.find((G)=>G.locale===J);if(!q)return console.warn(`No translation found for locale ${J}`),G2;const $=await(await fetch(Q.translations[q.locale])).json();if(!$)return console.warn(`No messages found for locale ${J}`),G2;const W=[];for(let G in G2.messages)if(!$[G])W.push(G);if(W.length>0)console.warn(`Language ${J}: missing messages for keys:
${W.join("\n")}`);return{locale:J,label:q.label,dir:bB0.has(q.locale)?"rtl":"ltr",messages:{...G2.messages,...$}}}var bB0=new Set(["ar","fa","he","ur","ku"]),G2={locale:"en",label:"English",messages:d3,dir:"ltr"};var e0=function(){const J=QO();return bQ.useCallback(function Q(Z){return J.messages[Z]??Z},[J])},ZO=function(J){return J},Cs=bQ.createContext({}),QO=()=>bQ.useContext(Cs),As=D9(function J({overrides:Q,children:Z}){const Y=h().user.getLocale(),$=NK(),[W,G]=bQ.useState(()=>{if(Q&&Q.en)return{locale:"en",label:"English",dir:"ltr",messages:{...d3,...Q.en}};return{locale:"en",label:"English",dir:"ltr",messages:d3}});return bQ.useEffect(()=>{let z=!1;async function U(){const F=await _s(Y,$);if(F&&!z)if(Q&&Q[Y])G({...F,messages:{...F.messages,...Q[Y]}});else G(F)}return U(),()=>{z=!0}},[$,Y,Q]),Es.jsx(Cs.Provider,{value:W,children:Z})});var ks=function(J,Q){const{labelHeight:Z,fontSizeAdjustment:q}=Is(J,Q),Y=Math.max(0,Z-L8);if(Y!==Q.props.growY||q!==Q.props.fontSizeAdjustment)return{...Q,props:{...Q.props,growY:Y,fontSizeAdjustment:q}}},xB0=function(J,Q){const Z=Q.props.text;if(!Z)return{labelHeight:Z1[Q.props.size]*E9.lineHeight+T4*2,labelWidth:100,fontSizeAdjustment:0};const q=Z1[Q.props.size];let Y=0,$=0,W=L8,G=L8;const z=1;do{Y=Math.min(q,q-$);const U=J.textMeasure.measureText(Z,{...E9,fontFamily:iJ[Q.props.font],fontSize:Y,maxWidth:L8-T4*2-z,disableOverflowWrapBreaking:!0});if(W=U.h+T4*2,G=U.w+T4*2,Y<=14){const F=J.textMeasure.measureText(Z,{...E9,fontFamily:iJ[Q.props.font],fontSize:Y,maxWidth:L8-T4*2-z});W=F.h+T4*2,G=F.w+T4*2;break}if(U.scrollWidth.toFixed(0)===U.w.toFixed(0))break}while($++<50);return{labelHeight:W,labelWidth:G,fontSizeAdjustment:Y}},Is=function(J,Q){return yB0.get(Q,()=>xB0(J,Q))},vB0=function(J){const Q=h(),Z=QO();return ws.useCallback((q)=>{const Y=Q.getShape(J);if(!Y)return;const $=q.key==="Tab",W=(q.metaKey||q.ctrlKey)&&q.key==="Enter";if($||W){q.preventDefault();const G=Q.getShapePageTransform(J),z=G.rotation(),U=!!(Z.dir==="rtl"||OM(Y.props.text)),F=L8+EX+(W&&!q.shiftKey?Y.props.growY:0),B=new j($?q.shiftKey!=U?-1:1:0,W?q.shiftKey?-1:1:0).mul(F).add(x3).rot(z).add(G.point()),M=wM(Q,Y,B,z);if(M)Q.mark("editing adjacent shape"),YK(Q,M,!0)}},[J,Q,Z.dir])},qO=function(J){return L8+J.props.growY},SB0=function(J,Q){const Z=f7(J),q=Math.abs(Z())+0.5,Y=Math.cos(Q);return`0px ${5-q}px 5px -5px rgba(15, 23, 31, .6),
	0px ${(4+q*7)*Math.max(0,Y)}px ${6+q*7}px -${4+q*6}px rgba(15, 23, 31, ${(0.3+q*0.1).toFixed(2)}), 
	0px 48px 10px -10px inset rgba(15, 23, 44, ${((0.022+Z()*0.005)*((1+Y)/2)).toFixed(2)})`};class XO extends qJ{static type="note";static props=Sz;static migrations=fz;canEdit=()=>!0;hideResizeHandles=()=>!0;hideSelectionBoundsFg=()=>!1;getDefaultProps(){return{color:"black",size:"m",text:"",font:"draw",align:"middle",verticalAlign:"middle",growY:0,fontSizeAdjustment:0,url:""}}getGeometry(J){const Q=qO(J),{labelHeight:Z,labelWidth:q}=Is(this.editor,J);return new g9({children:[new ZJ({width:L8,height:Q,isFilled:!0}),new ZJ({x:J.props.align==="start"?0:J.props.align==="end"?L8-q:(L8-q)/2,y:J.props.verticalAlign==="start"?0:J.props.verticalAlign==="end"?Q-Z:(Q-Z)/2,width:q,height:Z,isFilled:!0,isLabel:!0})]})}getHandles(J){const Q=this.editor.getZoomLevel(),Z=Jn/Q,q=qO(J),Y=this.editor.getInstanceState().isCoarsePointer;if(Q<0.25||Y)return[];if(Q<0.5)return[{id:"bottom",index:"a3",type:"clone",x:L8/2,y:q+Z}];return[{id:"top",index:"a1",type:"clone",x:L8/2,y:-Z},{id:"right",index:"a2",type:"clone",x:L8+Z,y:q/2},{id:"bottom",index:"a3",type:"clone",x:L8/2,y:q+Z},{id:"left",index:"a4",type:"clone",x:-Z,y:q/2}]}component(J){const{id:Q,type:Z,props:{color:q,font:Y,size:$,align:W,text:G,verticalAlign:z,fontSizeAdjustment:U}}=J,F=vB0(Q),B=g6(),M=qO(J),O=e("shape rotation",()=>this.editor.getShapePageTransform(Q)?.rotation()??0,[this.editor]),R=AX(),V=J.id===this.editor.getOnlySelectedShapeId();return i7.jsxs(i7.Fragment,{children:[i7.jsx("div",{id:Q,className:"tl-note__container",style:{width:L8,height:M,backgroundColor:B[q].note.fill,borderBottom:R?"3px solid rgb(15, 23, 31, .2)":"none",boxShadow:R?"none":SB0(J.id,O)},children:i7.jsx(dZ,{id:Q,type:Z,font:Y,fontSize:U||Z1[$],lineHeight:E9.lineHeight,align:W,verticalAlign:z,text:G,isNote:!0,isSelected:V,labelColor:B[q].note.text,wrap:!0,onKeyDown:F})}),"url"in J.props&&J.props.url&&i7.jsx(d1,{url:J.props.url,zoomLevel:this.editor.getZoomLevel()})]})}indicator(J){return i7.jsx("rect",{rx:"1",width:u(L8),height:u(qO(J))})}toSvg(J,Q){if(Q.addExportDef(TQ(J.props.font)),J.props.text)Q.addExportDef(TQ(J.props.font));const Z=y5({isDarkMode:Q.isDarkMode}),q=this.editor.getShapeGeometry(J).bounds;return i7.jsxs(i7.Fragment,{children:[i7.jsx("rect",{x:5,y:5,rx:1,width:L8-10,height:q.h,fill:"rgba(0,0,0,.1)"}),i7.jsx("rect",{rx:1,width:L8,height:q.h,fill:Z[J.props.color].note.fill}),i7.jsx(CX,{fontSize:J.props.fontSizeAdjustment||Z1[J.props.size],font:J.props.font,align:J.props.align,verticalAlign:J.props.verticalAlign,text:J.props.text,labelColor:Z[J.props.color].note.text,bounds:q,stroke:!1})]})}onBeforeCreate=(J)=>{return ks(this.editor,J)};onBeforeUpdate=(J,Q)=>{if(J.props.text===Q.props.text&&J.props.font===Q.props.font&&J.props.size===Q.props.size)return;return ks(this.editor,Q)};onEditEnd=(J)=>{const{id:Q,type:Z,props:{text:q}}=J;if(q.trimEnd()!==J.props.text)this.editor.updateShapes([{id:Q,type:Z,props:{text:q.trimEnd()}}])}}var yB0=new _Q;var YO=v(W0(),1);var bs=v(o(),1);var Ps=function(J,{initialBounds:Q,scaleX:Z,scaleY:q,newPoint:Y}){const $=Math.max(0.01,Math.min(Math.abs(Z),Math.abs(q))),W=new j(0,0);if(Z<0)W.x=-(Q.width*$);if(q<0)W.y=-(Q.height*$);const{x:G,y:z}=j.Add(Y,W.rot(J.rotation));return{x:G,y:z,props:{scale:$*J.props.scale}}};var Ts=function(J,Q){const{font:Z,text:q,autoSize:Y,size:$,w:W}=Q,G=Y?16:Math.max(16,W),z=cZ[$],U=Y?null:Math.floor(Math.max(G,W)),F=J.textMeasure.measureText(q,{...E9,fontFamily:iJ[Z],fontSize:z,maxWidth:U});if(Y)F.w+=1;return{width:Math.max(G,F.w),height:Math.max(z,F.h)}},gB0=function(J){const Q=h();return bs.useCallback((Z)=>{if(Q.getEditingShapeId()!==J)return;switch(Z.key){case"Enter":{if(Z.ctrlKey||Z.metaKey)Q.complete();break}case"Tab":{if(A6(Z),Z.shiftKey)F5.unindent(Z.currentTarget);else F5.indent(Z.currentTarget);break}}},[Q,J])},fB0=new _Q;class KO extends qJ{static type="text";static props=gz;static migrations=mz;getDefaultProps(){return{color:"black",size:"m",w:8,text:"",font:"draw",align:"middle",autoSize:!0,scale:1}}getMinDimensions(J){return fB0.get(J.props,(Q)=>Ts(this.editor,Q))}getGeometry(J){const{scale:Q}=J.props,{width:Z,height:q}=this.getMinDimensions(J);return new ZJ({width:Z*Q,height:q*Q,isFilled:!0,isLabel:!0})}canEdit=()=>!0;isAspectRatioLocked=()=>!0;component(J){const{id:Q,props:{font:Z,size:q,text:Y,color:$,scale:W,align:G}}=J,{width:z,height:U}=this.getMinDimensions(J),F=J.id===this.editor.getOnlySelectedShapeId(),B=g6(),M=gB0(Q);return YO.jsx(dZ,{id:Q,classNamePrefix:"tl-text-shape",type:"text",font:Z,fontSize:cZ[q],lineHeight:E9.lineHeight,align:G,verticalAlign:"middle",text:Y,labelColor:B[$].solid,isSelected:F,textWidth:z,textHeight:U,style:{transform:`scale(${W})`,transformOrigin:"top left"},wrap:!0,onKeyDown:M})}indicator(J){const Q=this.editor.getShapeGeometry(J).bounds,Z=h();if(J.props.autoSize&&Z.getEditingShapeId()===J.id)return null;return YO.jsx("rect",{width:u(Q.width),height:u(Q.height)})}toSvg(J,Q){if(Q.addExportDef(TQ(J.props.font)),J.props.text)Q.addExportDef(TQ(J.props.font));const Z=this.editor.getShapeGeometry(J).bounds,q=Z.width/(J.props.scale??1),Y=Z.height/(J.props.scale??1),$=y5(Q);return YO.jsx(CX,{fontSize:cZ[J.props.size],font:J.props.font,align:J.props.align,verticalAlign:"middle",text:J.props.text,labelColor:$[J.props.color].solid,bounds:new V0(0,0,q,Y),padding:0})}onResize=(J,Q)=>{const{initialBounds:Z,initialShape:q,scaleX:Y,handle:$}=Q;if(Q.mode==="scale_shape"||$!=="right"&&$!=="left")return{id:J.id,type:J.type,...Ps(J,Q)};else{const W=Z.width;let G=W*Y;const z=new j(0,0);if(G=Math.max(1,Math.abs(G)),$==="left"){if(z.x=W-G,Y<0)z.x+=G}else if(Y<0)z.x-=G;const{x:U,y:F}=z.rot(J.rotation).add(q);return{id:J.id,type:J.type,x:U,y:F,props:{w:G/q.props.scale,autoSize:!1}}}};onBeforeCreate=(J)=>{if(!J.props.autoSize)return;if(J.props.text.trim())return;const Q=this.getMinDimensions(J);return{...J,x:J.x-Q.width/2,y:J.y-Q.height/2}};onEditEnd=(J)=>{const{id:Q,type:Z,props:{text:q}}=J,Y=J.props.text.trimEnd();if(Y.length===0)this.editor.deleteShapes([J.id]);else if(Y!==J.props.text)this.editor.updateShapes([{id:Q,type:Z,props:{text:q.trimEnd()}}])};onBeforeUpdate=(J,Q)=>{if(!Q.props.autoSize)return;const Z=J.props.size!==Q.props.size||J.props.align!==Q.props.align||J.props.font!==Q.props.font||J.props.scale!==1&&Q.props.scale===1,q=J.props.text!==Q.props.text;if(!Z&&!q)return;const Y=this.getMinDimensions(J),$=Ts(this.editor,Q.props),W=Y.width*J.props.scale,G=Y.height*J.props.scale,z=$.width*Q.props.scale,U=$.height*Q.props.scale;let F;switch(Q.props.align){case"middle":{F=new j((z-W)/2,q?0:(U-G)/2);break}case"end":{F=new j(z-W,q?0:(U-G)/2);break}default:{if(q)break;F=new j(0,(U-G)/2);break}}if(F){F.rot(Q.rotation);const{x:B,y:M}=Q;return{...Q,x:B-F.x,y:M-F.y,props:{...Q.props,w:z}}}else return{...Q,props:{...Q.props,w:z}}};onDoubleClickEdge=(J)=>{if(!J.props.autoSize)return{id:J.id,type:J.type,props:{autoSize:!0}};if(J.props.scale!==1)return{id:J.id,type:J.type,props:{scale:1}}}}var n7=v(W0(),1);var X1=v(o(),1);var mB0=function(J){const Q=J.split(":")[1],Z=document.querySelector(`.tl-video-shape-${Q}`);if(Z){const q=document.createElement("canvas");return q.width=Z.videoWidth,q.height=Z.videoHeight,q.getContext("2d").drawImage(Z,0,0),q.toDataURL("image/png")}else throw new Error("Video with not found when attempting serialization.")};class $O extends p7{static type="video";static props=hz;static migrations=uz;canEdit=()=>!0;isAspectRatioLocked=()=>!0;getDefaultProps(){return{w:100,h:100,assetId:null,time:0,playing:!0,url:""}}component(J){const{editor:Q}=this,Z=Q.getShapeGeometry(J).bounds.w*Q.getZoomLevel()>=110,q=J.props.assetId?Q.getAsset(J.props.assetId):null,{time:Y,playing:$}=J.props,W=gZ(J.id),G=aM(),z=X1.useRef(null),U=X1.useCallback((V)=>{const E=V.currentTarget;if(!E)return;Q.updateShapes([{type:"video",id:J.id,props:{playing:!0,time:E.currentTime}}])},[J.id,Q]),F=X1.useCallback((V)=>{const E=V.currentTarget;if(!E)return;Q.updateShapes([{type:"video",id:J.id,props:{playing:!1,time:E.currentTime}}])},[J.id,Q]),B=X1.useCallback((V)=>{const E=V.currentTarget;if(!E)return;if(W)Q.updateShapes([{type:"video",id:J.id,props:{time:E.currentTime}}])},[W,J.id,Q]),[M,O]=X1.useState(!1),R=X1.useCallback((V)=>{const E=V.currentTarget;if(!E)return;if(Y!==E.currentTime)E.currentTime=Y;if(!$)E.pause();O(!0)},[$,Y]);return X1.useEffect(()=>{const V=z.current;if(!V)return;if(M&&!W&&Y!==V.currentTime)V.currentTime=Y;if(W){if(document.activeElement!==V)V.focus()}},[W,M,Y]),X1.useEffect(()=>{if(G){const V=z.current;if(!V)return;V.pause(),V.currentTime=0}},[z,G]),n7.jsxs(n7.Fragment,{children:[n7.jsx(P4,{id:J.id,style:{color:"var(--color-text-3)",backgroundColor:q?"transparent":"var(--color-low)",border:q?"none":"1px solid var(--color-low-border)"},children:n7.jsx("div",{className:"tl-counter-scaled",children:n7.jsx("div",{className:"tl-video-container",children:q?.props.src?n7.jsx("video",{ref:z,style:W?{pointerEvents:"all"}:void 0,className:`tl-video tl-video-shape-${J.id.split(":")[1]}`,width:"100%",height:"100%",draggable:!1,playsInline:!0,autoPlay:!0,muted:!0,loop:!0,disableRemotePlayback:!0,disablePictureInPicture:!0,controls:W&&Z,onPlay:U,onPause:F,onTimeUpdate:B,onLoadedData:R,hidden:!M,children:n7.jsx("source",{src:q.props.src})}):n7.jsx(sM,{})})})}),"url"in J.props&&J.props.url&&n7.jsx(d1,{url:J.props.url,zoomLevel:Q.getZoomLevel()})]})}indicator(J){return n7.jsx("rect",{width:u(J.props.w),height:u(J.props.h)})}toSvg(J){return n7.jsx("image",{href:mB0(J.id),width:J.props.w,height:J.props.h})}}var MK=[KO,yM,fM,pM,XO,JO,uM,xM,nM,gM,tM,$O];var xs=function(J){return[J.sideEffects.registerAfterChangeHandler("instance",(Q,Z)=>{if(Q.isFocused!==Z.isFocused)if(Z.isFocused)J.getContainer().focus();else J.complete(),J.getContainer().blur()}),J.sideEffects.registerAfterChangeHandler("instance_page_state",(Q,Z)=>{if(Q.croppingShapeId!==Z.croppingShapeId){const q=J.isInAny("select.crop","select.pointing_crop_handle","select.cropping");if(!Q.croppingShapeId&&Z.croppingShapeId){if(!q)J.setCurrentTool("select.crop.idle")}else if(Q.croppingShapeId&&!Z.croppingShapeId){if(q)J.setCurrentTool("select.idle")}}if(Q.editingShapeId!==Z.editingShapeId){if(!Q.editingShapeId&&Z.editingShapeId){if(!J.isIn("select.editing_shape"))J.setCurrentTool("select.editing_shape")}else if(Q.editingShapeId&&!Z.editingShapeId){if(J.isIn("select.editing_shape"))J.setCurrentTool("select.idle")}}})]};class aw extends B0{static id="erasing";info={};scribbleId="id";markId="";excludedShapeIds=new Set;onEnter=(J)=>{this.markId="erase scribble begin",this.editor.mark(this.markId),this.info=J;const{originPagePoint:Q}=this.editor.inputs;this.excludedShapeIds=new Set(this.editor.getCurrentPageShapes().filter((q)=>{if(this.editor.isShapeOrAncestorLocked(q))return!0;if(this.editor.isShapeOfType(q,"group")||this.editor.isShapeOfType(q,"frame")){const Y=this.editor.getPointInShapeSpace(q,Q);return this.editor.getShapeGeometry(q).bounds.containsPoint(Y)}return!1}).map((q)=>q.id));const Z=this.editor.scribbles.addScribble({color:"muted-1",size:12});this.scribbleId=Z.id,this.update()};pushPointToScribble=()=>{const{x:J,y:Q}=this.editor.inputs.currentPagePoint;this.editor.scribbles.addPoint(this.scribbleId,J,Q)};onExit=()=>{this.editor.scribbles.stop(this.scribbleId)};onPointerMove=()=>{this.update()};onPointerUp=()=>{this.complete()};onCancel=()=>{this.cancel()};onComplete=()=>{this.complete()};update(){const{editor:J,excludedShapeIds:Q}=this,Z=J.getErasingShapeIds(),q=J.getZoomLevel(),Y=J.getCurrentPageShapes(),{inputs:{currentPagePoint:$,previousPagePoint:W}}=J;this.pushPointToScribble();const G=new Set(Z),z=e5/q;for(let U of Y){if(J.isShapeOfType(U,"group"))continue;const F=J.getShapeMask(U.id);if(F&&!i9($,F))continue;const B=J.getShapeGeometry(U),M=J.getShapePageTransform(U);if(!B||!M)continue;const O=M.clone().invert(),R=O.applyToPoint(W),V=O.applyToPoint($),{bounds:E}=B;if(E.minX-z>Math.max(R.x,V.x)||E.minY-z>Math.max(R.y,V.y)||E.maxX+z<Math.min(R.x,V.x)||E.maxY+z<Math.min(R.y,V.y))continue;if(B.hitTestLineSegment(R,V,z))G.add(J.getOutermostSelectableShape(U).id)}this.editor.setErasingShapes([...G].filter((U)=>!Q.has(U)))}complete(){const{editor:J}=this;J.deleteShapes(J.getCurrentPageState().erasingShapeIds),J.setErasingShapes([]),this.parent.transition("idle")}cancel(){const{editor:J}=this;J.setErasingShapes([]),J.bailToMark(this.markId),this.parent.transition("idle",this.info)}}class ow extends B0{static id="idle";onPointerDown=(J)=>{this.parent.transition("pointing",J)};onCancel=()=>{this.editor.setCurrentTool("select")}}class tw extends B0{static id="pointing";onEnter=()=>{const J=this.editor.getZoomLevel(),Q=this.editor.getCurrentPageShapesSorted(),{inputs:{currentPagePoint:Z}}=this.editor,q=new Set,Y=q.size;for(let $=Q.length,W=$-1;W>=0;W--){const G=Q[W];if(this.editor.isShapeOrAncestorLocked(G)||this.editor.isShapeOfType(G,"group"))continue;if(this.editor.isPointInShape(G,Z,{hitInside:!1,margin:e5/J})){const z=this.editor.getOutermostSelectableShape(G);if(this.editor.isShapeOfType(z,"frame")&&q.size>Y)break;q.add(z.id)}}this.editor.setErasingShapes([...q])};onLongPress=(J)=>{this.startErasing(J)};onPointerMove=(J)=>{if(this.editor.inputs.isDragging)this.startErasing(J)};onPointerUp=()=>{this.complete()};onCancel=()=>{this.cancel()};onComplete=()=>{this.complete()};onInterrupt=()=>{this.cancel()};startErasing(J){this.parent.transition("erasing",J)}complete(){const J=this.editor.getErasingShapeIds();if(J.length)this.editor.mark("erase end"),this.editor.deleteShapes(J);this.editor.setErasingShapes([]),this.parent.transition("idle")}cancel(){this.editor.setErasingShapes([]),this.parent.transition("idle")}}class WO extends B0{static id="eraser";static initial="idle";static children=()=>[ow,tw,aw];onEnter=()=>{this.editor.setCursor({type:"cross",rotation:0})}}class ew extends B0{static id="dragging";initialCamera=new j;onEnter=()=>{this.initialCamera=j.From(this.editor.getCamera()),this.update()};onPointerMove=()=>{this.update()};onPointerUp=()=>{this.complete()};onCancel=()=>{this.parent.transition("idle")};onComplete=()=>{this.complete()};update(){const{initialCamera:J,editor:Q}=this,{currentScreenPoint:Z,originScreenPoint:q}=Q.inputs,Y=j.Sub(Z,q).div(Q.getZoomLevel());if(Y.len2()===0)return;Q.setCamera(J.clone().add(Y))}complete(){const{editor:J}=this,{pointerVelocity:Q}=J.inputs,Z=Math.min(Q.len(),2);if(Z>0.1)this.editor.slideCamera({speed:Z,direction:Q,friction:SY});this.parent.transition("idle")}}class JI extends B0{static id="idle";onEnter=()=>{this.editor.setCursor({type:"grab",rotation:0})};onPointerDown=(J)=>{this.parent.transition("pointing",J)};onCancel=()=>{this.editor.setCurrentTool("select")}}class QI extends B0{static id="pointing";onEnter=()=>{this.editor.stopCameraAnimation(),this.editor.updateInstanceState({cursor:{type:"grabbing",rotation:0}},{ephemeral:!0})};onLongPress=()=>{this.startDragging()};onPointerMove=()=>{if(this.editor.inputs.isDragging)this.startDragging()};startDragging(){this.parent.transition("dragging")}onPointerUp=()=>{this.complete()};onCancel=()=>{this.complete()};onComplete=()=>{this.complete()};onInterrupt=()=>{this.complete()};complete(){this.parent.transition("idle")}}class GO extends B0{static id="hand";static initial="idle";static children=()=>[JI,QI,ew];onDoubleClick=(J)=>{if(J.phase==="settle"){const{currentScreenPoint:Q}=this.editor.inputs;this.editor.zoomIn(Q,{duration:220,easing:_9.easeOutQuint})}};onTripleClick=(J)=>{if(J.phase==="settle"){const{currentScreenPoint:Q}=this.editor.inputs;this.editor.zoomOut(Q,{duration:320,easing:_9.easeOutQuint})}};onQuadrupleClick=(J)=>{if(J.phase==="settle"){const Q=this.editor.getZoomLevel(),{inputs:{currentScreenPoint:Z}}=this.editor;if(Q===1)this.editor.zoomToFit({duration:400,easing:_9.easeOutQuint});else this.editor.resetZoom(Z,{duration:320,easing:_9.easeOutQuint})}}}class ZI extends B0{static id="idle";onPointerDown=(J)=>{this.parent.transition("lasering",J)}}class qI extends B0{static id="lasering";scribbleId="id";onEnter=()=>{const J=this.editor.scribbles.addScribble({color:"laser",opacity:0.7,size:4,delay:1200,shrink:0.05,taper:!0});this.scribbleId=J.id,this.pushPointToScribble()};onExit=()=>{this.editor.scribbles.stop(this.scribbleId)};onPointerMove=()=>{this.pushPointToScribble()};onPointerUp=()=>{this.complete()};pushPointToScribble=()=>{const{x:J,y:Q}=this.editor.inputs.currentPagePoint;this.editor.scribbles.addPoint(this.scribbleId,J,Q)};onCancel=()=>{this.cancel()};onComplete=()=>{this.complete()};complete(){this.parent.transition("idle")}cancel(){this.parent.transition("idle")}}class HO extends B0{static id="laser";static initial="idle";static children=()=>[ZI,qI];onEnter=()=>{this.editor.setCursor({type:"cross",rotation:0})}}class XI extends B0{static id="brushing";info={};initialSelectedShapeIds=[];excludedShapeIds=new Set;isWrapMode=!1;initialStartShape=null;onEnter=(J)=>{const{altKey:Q,currentPagePoint:Z}=this.editor.inputs;if(this.isWrapMode=this.editor.user.getIsWrapMode(),Q){this.parent.transition("scribble_brushing",J);return}this.excludedShapeIds=new Set(this.editor.getCurrentPageShapes().filter((q)=>this.editor.isShapeOfType(q,"group")||this.editor.isShapeOrAncestorLocked(q)).map((q)=>q.id)),this.info=J,this.initialSelectedShapeIds=this.editor.getSelectedShapeIds().slice(),this.initialStartShape=this.editor.getShapesAtPoint(Z)[0],this.hitTestShapes()};onExit=()=>{this.initialSelectedShapeIds=[],this.editor.updateInstanceState({brush:null})};onTick=()=>{eY(this.editor)};onPointerMove=()=>{this.hitTestShapes()};onPointerUp=()=>{this.complete()};onComplete=()=>{this.complete()};onCancel=(J)=>{this.editor.setSelectedShapes(this.initialSelectedShapeIds,{squashing:!0}),this.parent.transition("idle",J)};onKeyDown=(J)=>{if(this.editor.inputs.altKey)this.parent.transition("scribble_brushing",J);else this.hitTestShapes()};onKeyUp=()=>{this.hitTestShapes()};complete(){this.hitTestShapes(),this.parent.transition("idle")}hitTestShapes(){const{editor:J,excludedShapeIds:Q,isWrapMode:Z}=this,{inputs:{originPagePoint:q,currentPagePoint:Y,shiftKey:$,ctrlKey:W}}=J,G=new Set($?this.initialSelectedShapeIds:[]),z=Z?!W:W,U=V0.FromPoints([q,Y]),{corners:F}=U;let B,M,O,R,V,E;const _=J.getCurrentPageShapes(),A=J.getCurrentPageId();J:for(let k=0,P=_.length;k<P;k++){if(O=_[k],Q.has(O.id)||G.has(O.id))continue J;if(R=J.getShapePageBounds(O),!R)continue J;if(U.contains(R)){this.handleHit(O,Y,A,G,F);continue J}if(z||J.isShapeOfType(O,"frame"))continue J;if(U.collides(R)){if(V=J.getShapePageTransform(O),!V)continue J;E=V.clone().invert().applyToPoints(F);const y=J.getShapeGeometry(O);Q:for(let p=0;p<4;p++)if(B=E[p],M=E[(p+1)%4],y.hitTestLineSegment(B,M,0)){this.handleHit(O,Y,A,G,F);break Q}}}J.getInstanceState().isCoarsePointer;const w=J.getInstanceState().brush;if(!w||!U.equals(w))J.updateInstanceState({brush:{...U.toJson()}});const T=J.getSelectedShapeIds();if(T.length!==G.size||T.some((k)=>!G.has(k)))J.setSelectedShapes(Array.from(G),{squashing:!0})}onInterrupt=()=>{this.editor.updateInstanceState({brush:null})};handleHit(J,Q,Z,q,Y){if(J.parentId===Z){q.add(J.id);return}const $=this.editor.getOutermostSelectableShape(J),W=this.editor.getShapeMask($.id);if(W&&!G3(W,Y)&&!i9(Q,W))return;q.add($.id)}}var H2=function(J,Q=!1){const Z=J.getZoomLevel(),{inputs:{currentPagePoint:q}}=J;return J.getShapeAtPoint(q,{hitInside:!1,hitLabels:Q,margin:e5/Z,renderingOnly:!0})??J.getSelectedShapeAtPoint(q)};var zO=function(J,Q,Z){if(!Q)throw Error("Needs to translate a cropped shape!");const{crop:q}=Q.props;if(!q)return;const Y=J.inputs.shiftKey?Math.abs(Z.x)<Math.abs(Z.y)?"x":"y":null;if(Y==="x")Z.x=0;else if(Y==="y")Z.y=0;Z.rot(-Q.rotation);const $=1/(q.bottomRight.x-q.topLeft.x)*Q.props.w,W=1/(q.bottomRight.y-q.topLeft.y)*Q.props.h,G=q.bottomRight.y-q.topLeft.y,z=q.bottomRight.x-q.topLeft.x,U=p6(q);return U.topLeft.x=Math.min(1-z,Math.max(0,U.topLeft.x-Z.x/$)),U.topLeft.y=Math.min(1-G,Math.max(0,U.topLeft.y-Z.y/W)),U.bottomRight.x=U.topLeft.x+z,U.bottomRight.y=U.topLeft.y+G,{id:Q.id,type:Q.type,props:{crop:U}}};class YI extends B0{static id="idle";onEnter=()=>{this.editor.updateInstanceState({cursor:{type:"default",rotation:0}},{ephemeral:!0});const J=this.editor.getOnlySelectedShape();if(this.editor.on("change-history",this.cleanupCroppingState),J)this.editor.mark("crop"),this.editor.setCroppingShape(J.id)};onExit=()=>{this.editor.updateInstanceState({cursor:{type:"default",rotation:0}},{ephemeral:!0}),this.editor.off("change-history",this.cleanupCroppingState)};onCancel=()=>{this.editor.setCroppingShape(null),this.editor.setCurrentTool("select.idle",{})};onPointerDown=(J)=>{if(this.editor.getIsMenuOpen())return;if(J.ctrlKey){this.cancel(),this.editor.root.handleEvent(J);return}switch(J.target){case"canvas":{const Q=H2(this.editor);if(Q&&!this.editor.isShapeOfType(Q,"group")){this.onPointerDown({...J,shape:Q,target:"shape"});return}this.cancel(),this.editor.root.handleEvent(J);break}case"shape":{if(J.shape.id===this.editor.getCroppingShapeId()){this.editor.setCurrentTool("select.crop.pointing_crop",J);return}else if(this.editor.getShapeUtil(J.shape)?.canCrop(J.shape))this.editor.setCroppingShape(J.shape.id),this.editor.setSelectedShapes([J.shape.id]),this.editor.setCurrentTool("select.crop.pointing_crop",J);else this.cancel(),this.editor.root.handleEvent(J);break}case"selection":{switch(J.handle){case"mobile_rotate":case"top_left_rotate":case"top_right_rotate":case"bottom_left_rotate":case"bottom_right_rotate":{this.editor.setCurrentTool("select.pointing_rotate_handle",{...J,onInteractionEnd:"select.crop"});break}case"top":case"right":case"bottom":case"left":{this.editor.setCurrentTool("select.pointing_crop_handle",{...J,onInteractionEnd:"select.crop"});break}case"top_left":case"top_right":case"bottom_left":case"bottom_right":{this.editor.setCurrentTool("select.pointing_crop_handle",{...J,onInteractionEnd:"select.crop"});break}default:this.cancel()}break}}};onDoubleClick=(J)=>{if(this.editor.inputs.shiftKey||J.phase!=="up")return;const Q=this.editor.getCroppingShapeId();if(!Q)return;const Z=this.editor.getShape(Q);if(!Z)return;const q=this.editor.getShapeUtil(Z);if(!q)return;if(J.target==="selection")q.onDoubleClickEdge?.(Z)};onKeyDown=()=>{this.nudgeCroppingImage(!1)};onKeyRepeat=()=>{this.nudgeCroppingImage(!0)};onKeyUp=(J)=>{switch(J.code){case"Enter":{this.editor.setCroppingShape(null),this.editor.setCurrentTool("select.idle",{});break}}};cancel(){this.editor.setCroppingShape(null),this.editor.setCurrentTool("select.idle",{})}cleanupCroppingState=()=>{if(!this.editor.getCroppingShapeId())this.editor.setCurrentTool("select.idle",{})};nudgeCroppingImage(J=!1){const{editor:{inputs:{keys:Q}}}=this,Z=Q.has("ShiftLeft"),q=new j(0,0);if(Q.has("ArrowLeft"))q.x+=1;if(Q.has("ArrowRight"))q.x-=1;if(Q.has("ArrowUp"))q.y+=1;if(Q.has("ArrowDown"))q.y-=1;if(q.equals(new j(0,0)))return;if(Z)q.mul(10);const Y=this.editor.getShape(this.editor.getCroppingShapeId());if(!Y)return;const $=zO(this.editor,Y,q);if($){if(!J)this.editor.mark("translate crop");this.editor.updateShapes([$])}}}class KI extends B0{static id="pointing_crop";onCancel=()=>{this.editor.setCurrentTool("select.crop.idle",{})};onPointerMove=(J)=>{if(this.editor.inputs.isDragging)this.editor.setCurrentTool("select.crop.translating_crop",J)};onPointerUp=(J)=>{this.editor.setCurrentTool("select.crop.idle",J)}}class $I extends B0{static id="translating_crop";info={};markId="translating crop";snapshot={};onEnter=(J)=>{this.info=J,this.snapshot=this.createSnapshot(),this.editor.mark(this.markId),this.editor.setCursor({type:"move",rotation:0}),this.updateShapes()};onExit=()=>{this.editor.updateInstanceState({cursor:{type:"default",rotation:0}},{ephemeral:!0})};onPointerMove=()=>{this.updateShapes()};onPointerUp=()=>{this.complete()};onComplete=()=>{this.complete()};onCancel=()=>{this.cancel()};onKeyDown=(J)=>{switch(J.key){case"Alt":case"Shift":{this.updateShapes();return}}};onKeyUp=(J)=>{switch(J.key){case"Enter":{this.complete();return}case"Alt":case"Shift":this.updateShapes()}};complete(){this.updateShapes(),this.editor.setCurrentTool("select.crop.idle",this.info)}cancel(){this.editor.bailToMark(this.markId),this.editor.setCurrentTool("select.crop.idle",this.info)}createSnapshot(){return{shape:this.editor.getOnlySelectedShape()}}updateShapes(){const J=this.snapshot.shape;if(!J)return;const{originPagePoint:Q,currentPagePoint:Z}=this.editor.inputs,q=Z.clone().sub(Q),Y=zO(this.editor,J,q);if(Y)this.editor.updateShapes([Y],{squashing:!0})}}class WI extends B0{static id="crop";static initial="idle";static children=()=>[YI,$I,KI]}var v4=8;var xQ={bottom:"ns-resize",top:"ns-resize",left:"ew-resize",right:"ew-resize",bottom_left:"nesw-resize",bottom_right:"nwse-resize",top_left:"nwse-resize",top_right:"nesw-resize",bottom_left_rotate:"swne-rotate",bottom_right_rotate:"senw-rotate",top_left_rotate:"nwse-rotate",top_right_rotate:"nesw-rotate",mobile_rotate:"grabbing"};class GI extends B0{static id="pointing_resize_handle";info={};updateCursor(){const J=this.editor.getSelectedShapes(),Q=xQ[this.info.handle];this.editor.updateInstanceState({cursor:{type:Q,rotation:J.length===1?this.editor.getSelectionRotation():0}})}onEnter=(J)=>{this.info=J,this.updateCursor()};onPointerMove=()=>{if(this.editor.inputs.isDragging)this.startResizing()};onLongPress=()=>{this.startResizing()};startResizing(){if(this.editor.getInstanceState().isReadonly)return;this.parent.transition("resizing",this.info)}onPointerUp=()=>{this.complete()};onCancel=()=>{this.cancel()};onComplete=()=>{this.cancel()};onInterrupt=()=>{this.cancel()};complete(){if(this.info.onInteractionEnd)this.editor.setCurrentTool(this.info.onInteractionEnd,{});else this.parent.transition("idle")}cancel(){if(this.info.onInteractionEnd)this.editor.setCurrentTool(this.info.onInteractionEnd,{});else this.parent.transition("idle")}}class HI extends B0{static id="cropping";info={};markId="";snapshot={};onEnter=(J)=>{this.info=J,this.markId="cropping",this.editor.mark(this.markId),this.snapshot=this.createSnapshot(),this.updateShapes()};onPointerMove=()=>{this.updateShapes()};onPointerUp=()=>{this.complete()};onComplete=()=>{this.complete()};onCancel=()=>{this.cancel()};updateCursor(){if(!this.editor.getSelectedShapes()[0])return;const Q=xQ[this.info.handle];this.editor.updateInstanceState({cursor:{type:Q,rotation:this.editor.getSelectionRotation()}})}getDefaultCrop=()=>({topLeft:{x:0,y:0},bottomRight:{x:1,y:1}});updateShapes(){const{shape:J,cursorHandleOffset:Q}=this.snapshot;if(!J)return;if(!this.editor.getShapeUtil("image"))return;const q=J.props,Y=this.editor.inputs.currentPagePoint.clone().sub(Q),$=this.editor.inputs.originPagePoint.clone().sub(Q),W=Y.clone().sub($).rot(-J.rotation),G=q.crop??this.getDefaultCrop(),z=p6(G),U=new j(J.x,J.y),F=new j(0,0),B=1/(G.bottomRight.x-G.topLeft.x)*q.w,M=1/(G.bottomRight.y-G.topLeft.y)*q.h;let O=!1;switch(this.info.handle){case"top":case"top_left":case"top_right":{if(M<v4)break;if(O=!0,z.topLeft.y=z.topLeft.y+W.y/M,M*(z.bottomRight.y-z.topLeft.y)<v4)z.topLeft.y=z.bottomRight.y-v4/M,F.y=(z.topLeft.y-G.topLeft.y)*M;else if(z.topLeft.y<=0)z.topLeft.y=0,F.y=(z.topLeft.y-G.topLeft.y)*M;else F.y=W.y;break}case"bottom":case"bottom_left":case"bottom_right":{if(M<v4)break;if(O=!0,z.bottomRight.y=Math.min(1,z.bottomRight.y+W.y/M),M*(z.bottomRight.y-z.topLeft.y)<v4)z.bottomRight.y=z.topLeft.y+v4/M;break}}switch(this.info.handle){case"left":case"top_left":case"bottom_left":{if(B<v4)break;if(O=!0,z.topLeft.x=z.topLeft.x+W.x/B,B*(z.bottomRight.x-z.topLeft.x)<v4)z.topLeft.x=z.bottomRight.x-v4/B,F.x=(z.topLeft.x-G.topLeft.x)*B;else if(z.topLeft.x<=0)z.topLeft.x=0,F.x=(z.topLeft.x-G.topLeft.x)*B;else F.x=W.x;break}case"right":case"top_right":case"bottom_right":{if(B<v4)break;if(O=!0,z.bottomRight.x=Math.min(1,z.bottomRight.x+W.x/B),B*(z.bottomRight.x-z.topLeft.x)<v4)z.bottomRight.x=z.topLeft.x+v4/B;break}}if(!O)return;U.add(F.rot(J.rotation));const R={id:J.id,type:J.type,x:U.x,y:U.y,props:{crop:z,w:(z.bottomRight.x-z.topLeft.x)*B,h:(z.bottomRight.y-z.topLeft.y)*M}};this.editor.updateShapes([R],{squashing:!0}),this.updateCursor()}complete(){if(this.updateShapes(),K8(this.editor,[this.snapshot.shape.id]),this.info.onInteractionEnd)this.editor.setCurrentTool(this.info.onInteractionEnd,this.info);else this.editor.setCroppingShape(null),this.parent.transition("idle")}cancel(){if(this.editor.bailToMark(this.markId),this.info.onInteractionEnd)this.editor.setCurrentTool(this.info.onInteractionEnd,this.info);else this.editor.setCroppingShape(null),this.parent.transition("idle")}createSnapshot(){const J=this.editor.getSelectionRotation(),{inputs:{originPagePoint:Q}}=this.editor,Z=this.editor.getOnlySelectedShape(),q=this.editor.getSelectionRotatedPageBounds(),Y=j.RotWith(q.getHandlePoint(this.info.handle),q.point,J),$=j.Sub(Q,Y);return{shape:Z,cursorHandleOffset:$}}}class zI extends B0{static id="dragging_handle";shapeId="";initialHandle={};initialAdjacentHandle=null;initialPagePoint={};markId="";initialPageTransform;initialPageRotation;info={};isPrecise=!1;isPreciseId=null;pointingId=null;onEnter=(J)=>{const{shape:Q,isCreating:Z,handle:q}=J;if(this.info=J,this.parent.setCurrentToolIdMask(J.onInteractionEnd),this.shapeId=Q.id,this.markId=Z?`creating:${Q.id}`:"dragging handle",!Z)this.editor.mark(this.markId);if(this.initialHandle=p6(q),this.editor.isShapeOfType(Q,"line")){if(this.initialHandle.type==="create"){this.editor.updateShape({...Q,props:{points:{...Q.props.points,[q.index]:{id:q.index,index:q.index,x:q.x,y:q.y}}}});const G=this.editor.getShapeHandles(Q).find((z)=>z.index===q.index);this.initialHandle=p6(G)}}this.initialPageTransform=this.editor.getShapePageTransform(Q),this.initialPageRotation=this.initialPageTransform.rotation(),this.initialPagePoint=this.editor.inputs.originPagePoint.clone(),this.editor.updateInstanceState({cursor:{type:Z?"cross":"grabbing",rotation:0}},{ephemeral:!0});const Y=this.editor.getShapeHandles(Q).sort(P9),$=Y.findIndex((W)=>W.id===J.handle.id);this.initialAdjacentHandle=null;for(let W=$+1;W<Y.length;W++){const G=Y[W];if(G.type==="vertex"&&G.id!=="middle"&&G.id!==J.handle.id){this.initialAdjacentHandle=G;break}}if(!this.initialAdjacentHandle)for(let W=Y.length-1;W>=0;W--){const G=Y[W];if(G.type==="vertex"&&G.id!=="middle"&&G.id!==J.handle.id){this.initialAdjacentHandle=G;break}}if(this.editor.isShapeOfType(Q,"arrow")){const W=Q.props[J.handle.id];if(this.isPrecise=!1,W?.type==="binding")if(this.editor.setHintingShapes([W.boundShapeId]),this.isPrecise=W.isPrecise,this.isPrecise)this.isPreciseId=W.boundShapeId;else this.resetExactTimeout();else this.editor.setHintingShapes([])}this.update(),this.editor.select(this.shapeId)};exactTimeout=-1;resetExactTimeout(){if(this.exactTimeout!==-1)this.clearExactTimeout();this.exactTimeout=setTimeout(()=>{if(this.getIsActive()&&!this.isPrecise)this.isPrecise=!0,this.isPreciseId=this.pointingId,this.update();this.exactTimeout=-1},750)}clearExactTimeout(){if(this.exactTimeout!==-1)clearTimeout(this.exactTimeout),this.exactTimeout=-1}onPointerMove=()=>{this.update()};onKeyDown=()=>{this.update()};onKeyUp=()=>{this.update()};onPointerUp=()=>{this.complete()};onComplete=()=>{this.update(),this.complete()};onCancel=()=>{this.cancel()};onExit=()=>{this.parent.setCurrentToolIdMask(void 0),this.editor.setHintingShapes([]),this.editor.snaps.clearIndicators(),this.editor.updateInstanceState({cursor:{type:"default",rotation:0}},{ephemeral:!0})};complete(){this.editor.snaps.clearIndicators(),K8(this.editor,[this.shapeId]);const{onInteractionEnd:J}=this.info;if(this.editor.getInstanceState().isToolLocked&&J){this.editor.setCurrentTool(J,{shapeId:this.shapeId});return}this.parent.transition("idle")}cancel(){this.editor.bailToMark(this.markId),this.editor.snaps.clearIndicators();const{onInteractionEnd:J}=this.info;if(J){this.editor.setCurrentTool(J,{shapeId:this.shapeId});return}this.parent.transition("idle")}update(){const{editor:J,shapeId:Q,initialPagePoint:Z}=this,{initialHandle:q,initialPageRotation:Y,initialAdjacentHandle:$}=this,W=this.editor.getHintingShapeIds(),G=this.editor.user.getIsSnapMode(),{snaps:z,inputs:{currentPagePoint:U,shiftKey:F,ctrlKey:B,altKey:M,pointerVelocity:O}}=J,R=this.info.shape,V=J.getShape(Q);if(!V)return;const E=J.getShapeUtil(V);let _=U.clone().sub(Z).rot(-Y).add(q);if(F&&$&&q.id!=="middle"){const k=j.Angle($,_),y=WX(k,24)-k;_=j.RotWith(_,$,y)}J.snaps.clearIndicators();let A={...q,x:_.x,y:_.y};if(q.canSnap&&(G?!B:B)){if(!J.getShapePageTransform(V.id))throw Error("Expected a page transform");const P=z.handles.snapHandle({currentShapeId:Q,handle:A});if(P)P.nudge.rot(-J.getShapeParentTransform(V).rotation()),_.add(P.nudge),A={...q,x:_.x,y:_.y}}const w=E.onHandleDrag?.(V,{handle:A,isPrecise:this.isPrecise||M,initial:R}),T={...V,...w};if(q.canBind){const k=T.props[q.id];if(k?.type==="binding"){if(W[0]!==k.boundShapeId)J.setHintingShapes([k.boundShapeId]),this.pointingId=k.boundShapeId,this.isPrecise=O.len()<0.5||M,this.isPreciseId=this.isPrecise?k.boundShapeId:null,this.resetExactTimeout()}else if(W.length>0)J.setHintingShapes([]),this.pointingId=null,this.isPrecise=!1,this.isPreciseId=null,this.resetExactTimeout()}if(w)J.updateShapes([T],{squashing:!0})}}var UO=function(J){if(J.isLabel)return[J];if(J instanceof g9)return J.children.filter((Q)=>Q.isLabel);return[]};class UI extends B0{static id="editing_shape";hitShapeForPointerUp=null;onEnter=()=>{const J=this.editor.getEditingShape();if(!J)throw Error("Entered editing state without an editing shape");this.hitShapeForPointerUp=null,pZ(this.editor),this.editor.select(J)};onExit=()=>{const{editingShapeId:J}=this.editor.getCurrentPageState();if(!J)return;this.editor.setEditingShape(null);const Q=this.editor.getShape(J);this.editor.getShapeUtil(Q).onEditEnd?.(Q)};onPointerMove=(J)=>{if(this.hitShapeForPointerUp&&this.editor.inputs.isDragging){if(this.editor.getInstanceState().isReadonly)return;this.editor.select(this.hitShapeForPointerUp),this.parent.transition("translating",J),this.hitShapeForPointerUp=null;return}switch(J.target){case"shape":case"canvas":{pZ(this.editor);return}}};onPointerDown=(J)=>{switch(this.hitShapeForPointerUp=null,J.target){case"canvas":{const Q=H2(this.editor,!0);if(Q){this.onPointerDown({...J,shape:Q,target:"shape"});return}break}case"shape":{const{shape:Q}=J,Z=this.editor.getEditingShape();if(!Z)throw Error("Expected an editing shape!");const q=this.editor.getShapeUtil(Q).getGeometry(Q),Y=UO(q),$=Y.length===1?Y[0]:void 0,W=this.editor.isShapeOfType(Z,"text")&&Z.props.text.trim()==="";if($&&!W){const G=this.editor.getPointInShapeSpace(Q,this.editor.inputs.currentPagePoint);if($.bounds.containsPoint(G,0)&&$.hitTestPoint(G))if(Q.id===Z.id)return;else{this.hitShapeForPointerUp=Q,this.editor.mark("editing on pointer up"),this.editor.select(Q.id);return}}else{if(Q.id===Z.id){if(this.editor.isShapeOfType(Q,"frame"))this.editor.setEditingShape(null)}else{this.parent.transition("pointing_shape",J);return}return}break}}this.parent.transition("idle",J),this.editor.root.handleEvent(J)};onPointerUp=(J)=>{const Q=this.hitShapeForPointerUp;if(!Q)return;this.hitShapeForPointerUp=null;const Z=this.editor.getShapeUtil(Q);if(this.editor.getInstanceState().isReadonly){if(!Z.canEditInReadOnly(Q)){this.parent.transition("pointing_shape",J);return}}this.editor.select(Q.id),this.editor.setEditingShape(Q.id),pZ(this.editor)};onComplete=(J)=>{this.parent.transition("idle",J)};onCancel=(J)=>{this.parent.transition("idle",J)}}var LI=function(J){const Q=J.getOnlySelectedShape();return!!(Q&&!J.isShapeOrAncestorLocked(Q)&&J.getShapeUtil(Q).canCrop(Q))};var OK=function(J){const Q=J.getSelectedShapeIds(),{shiftKey:Z,altKey:q,currentPagePoint:Y}=J.inputs,$=J.getShapeAtPoint(Y,{hitInside:!1,margin:e5/J.getZoomLevel(),hitLabels:!0,renderingOnly:!0,filter:(W)=>!W.isLocked});if($){const W=J.getOutermostSelectableShape($);if(Z&&!q)if(J.cancelDoubleClick(),Q.includes(W.id))J.mark("deselecting shape"),J.deselect(W);else J.mark("shift selecting shape"),J.setSelectedShapes([...Q,W.id]);else{let G=void 0;if(W===$)G=$;else if(W.id===J.getFocusedGroupId()||Q.includes(W.id))G=$;else G=W;if(G&&!Q.includes(G.id))J.mark("selecting shape"),J.select(G.id)}}else if(Z)return;else{if(Q.length>0)J.mark("selecting none"),J.selectNone();const W=J.getFocusedGroupId();if(U5(W)){const G=J.getShape(W);if(!J.isPointInShape(G,Y,{margin:0,hitInside:!0}))J.setFocusedGroup(null)}}};var ys=function(J,Q){const Z=J.getSelectionRotatedPageBounds();if(!Z)return!1;const q=J.getSelectionRotation();if(!q)return Z.containsPoint(Q);return i9(Q,Z.corners.map((Y)=>j.RotWith(Y,Z.point,q)))},hB0=["Delete","Backspace","[","]","Enter"," ","Shift","Tab"];class FI extends B0{static id="idle";onEnter=()=>{this.parent.setCurrentToolIdMask(void 0),pZ(this.editor),this.editor.updateInstanceState({cursor:{type:"default",rotation:0}},{ephemeral:!0})};onPointerMove=()=>{pZ(this.editor)};onPointerDown=(J)=>{if(this.editor.getIsMenuOpen())return;const Q=J.ctrlKey&&LI(this.editor);if(J.ctrlKey&&!Q){if(J.target==="shape"&&this.isDarwin&&this.editor.inputs.keys.has("ControlLeft")){if(!this.editor.isShapeOrAncestorLocked(J.shape)){this.parent.transition("pointing_shape",J);return}}this.parent.transition("brushing",J);return}switch(J.target){case"canvas":{const Z=H2(this.editor);if(Z&&!Z.isLocked){this.onPointerDown({...J,shape:Z,target:"shape"});return}const q=this.editor.getSelectedShapeIds(),Y=this.editor.getOnlySelectedShape(),{inputs:{currentPagePoint:$}}=this.editor;if(q.length>1||Y&&!this.editor.getShapeUtil(Y).hideSelectionBoundsBg(Y)){if(ys(this.editor,$)){this.onPointerDown({...J,target:"selection"});return}}this.parent.transition("pointing_canvas",J);break}case"shape":{const{shape:Z}=J;if(this.isOverArrowLabelTest(Z)){this.parent.transition("pointing_arrow_label",J);break}if(this.editor.isShapeOrAncestorLocked(Z)){this.parent.transition("pointing_canvas",J);break}this.parent.transition("pointing_shape",J);break}case"handle":{if(this.editor.getInstanceState().isReadonly)break;if(this.editor.inputs.altKey)this.parent.transition("pointing_shape",J);else this.parent.transition("pointing_handle",J);break}case"selection":{switch(J.handle){case"mobile_rotate":case"top_left_rotate":case"top_right_rotate":case"bottom_left_rotate":case"bottom_right_rotate":{this.parent.transition("pointing_rotate_handle",J);break}case"top":case"right":case"bottom":case"left":{if(Q)this.parent.transition("pointing_crop_handle",J);else this.parent.transition("pointing_resize_handle",J);break}case"top_left":case"top_right":case"bottom_left":case"bottom_right":{if(Q)this.parent.transition("pointing_crop_handle",J);else this.parent.transition("pointing_resize_handle",J);break}default:{const Z=this.editor.getHoveredShape();if(Z&&!this.editor.getSelectedShapeIds().includes(Z.id)&&!Z.isLocked){this.onPointerDown({...J,shape:Z,target:"shape"});return}this.parent.transition("pointing_selection",J)}}break}}};onDoubleClick=(J)=>{if(this.editor.inputs.shiftKey||J.phase!=="up")return;switch(J.target){case"canvas":{const Q=this.editor.getHoveredShape(),Z=Q&&!this.editor.isShapeOfType(Q,"group")?Q:this.editor.getSelectedShapeAtPoint(this.editor.inputs.currentPagePoint)??this.editor.getShapeAtPoint(this.editor.inputs.currentPagePoint,{margin:e5/this.editor.getZoomLevel(),hitInside:!1}),q=this.editor.getFocusedGroupId();if(Z){if(this.editor.isShapeOfType(Z,"group")){OK(this.editor);return}else{const Y=this.editor.getShape(Z.parentId);if(Y&&this.editor.isShapeOfType(Y,"group"))if(q&&Y.id===q);else{OK(this.editor);return}}this.onDoubleClick({...J,shape:Z,target:"shape"});return}if(!this.editor.inputs.shiftKey)this.handleDoubleClickOnCanvas(J);break}case"selection":{if(this.editor.getInstanceState().isReadonly)break;const Q=this.editor.getOnlySelectedShape();if(Q){const Z=this.editor.getShapeUtil(Q);if(!this.canInteractWithShapeInReadOnly(Q))return;if(J.handle==="right"||J.handle==="left"||J.handle==="top"||J.handle==="bottom"){const q=Z.onDoubleClickEdge?.(Q);if(q){this.editor.mark("double click edge"),this.editor.updateShapes([q]),K8(this.editor,[Q.id]);return}}if(Z.canCrop(Q)&&!this.editor.isShapeOrAncestorLocked(Q)){this.parent.transition("crop",J);return}if(this.shouldStartEditingShape(Q))this.startEditingShape(Q,J,!0)}break}case"shape":{const{shape:Q}=J,Z=this.editor.getShapeUtil(Q);if(Q.type!=="video"&&Q.type!=="embed"&&this.editor.getInstanceState().isReadonly)break;if(Z.onDoubleClick){const q=Z.onDoubleClick?.(Q);if(q){this.editor.updateShapes([q]);return}else if(Z.canCrop(Q)&&!this.editor.isShapeOrAncestorLocked(Q)){this.editor.mark("select and crop"),this.editor.select(J.shape?.id),this.parent.transition("crop",J);return}}if(this.shouldStartEditingShape(Q))this.startEditingShape(Q,J,!0);else this.handleDoubleClickOnCanvas(J);break}case"handle":{if(this.editor.getInstanceState().isReadonly)break;const{shape:Q,handle:Z}=J,Y=this.editor.getShapeUtil(Q).onDoubleClickHandle?.(Q,Z);if(Y)this.editor.updateShapes([Y]);else if(this.shouldStartEditingShape(Q))this.startEditingShape(Q,J,!0)}}};onRightClick=(J)=>{switch(J.target){case"canvas":{const Q=this.editor.getHoveredShape(),Z=Q&&!this.editor.isShapeOfType(Q,"group")?Q:this.editor.getShapeAtPoint(this.editor.inputs.currentPagePoint,{margin:e5/this.editor.getZoomLevel(),hitInside:!1,hitLabels:!0,hitFrameInside:!1,renderingOnly:!0});if(Z){this.onRightClick({...J,shape:Z,target:"shape"});return}const q=this.editor.getSelectedShapeIds(),Y=this.editor.getOnlySelectedShape(),{inputs:{currentPagePoint:$}}=this.editor;if(q.length>1||Y&&!this.editor.getShapeUtil(Y).hideSelectionBoundsBg(Y)){if(ys(this.editor,$)){this.onRightClick({...J,target:"selection"});return}}this.editor.selectNone();break}case"shape":{const{selectedShapeIds:Q}=this.editor.getCurrentPageState(),{shape:Z}=J,q=this.editor.getOutermostSelectableShape(Z,(Y)=>!Q.includes(Y.id));if(!Q.includes(q.id))this.editor.mark("selecting shape"),this.editor.setSelectedShapes([q.id]);break}}};onCancel=()=>{if(this.editor.getFocusedGroupId()!==this.editor.getCurrentPageId()&&this.editor.getSelectedShapeIds().length>0)this.editor.popFocusedGroupId();else this.editor.mark("clearing selection"),this.editor.selectNone()};onKeyDown=(J)=>{switch(J.code){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":{this.nudgeSelectedShapes(!1);return}}if(t8.editOnType.get()){if(!hB0.includes(J.key)&&!J.altKey&&!J.ctrlKey){const Q=this.editor.getOnlySelectedShape();if(Q&&this.editor.isShapeOfType(Q,"note")&&this.shouldStartEditingShape(Q)){this.startEditingShape(Q,{...J,target:"shape",shape:Q},!0);return}}}};onKeyRepeat=(J)=>{switch(J.code){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":{this.nudgeSelectedShapes(!0);break}}};onKeyUp=(J)=>{switch(J.code){case"Enter":{const Q=this.editor.getSelectedShapes();if(Q.every((q)=>this.editor.isShapeOfType(q,"group"))){this.editor.setSelectedShapes(Q.flatMap((q)=>this.editor.getSortedChildIdsForParent(q.id)));return}const Z=this.editor.getOnlySelectedShape();if(Z&&this.shouldStartEditingShape(Z)){this.startEditingShape(Z,{...J,target:"shape",shape:Z},!0);return}if(LI(this.editor))this.parent.transition("crop",J);break}}};shouldStartEditingShape(J=this.editor.getOnlySelectedShape()){if(!J)return!1;if(this.editor.isShapeOrAncestorLocked(J)&&J.type!=="embed")return!1;if(!this.canInteractWithShapeInReadOnly(J))return!1;return this.editor.getShapeUtil(J).canEdit(J)}startEditingShape(J,Q,Z){if(this.editor.isShapeOrAncestorLocked(J)&&J.type!=="embed")return;this.editor.mark("editing shape"),YK(this.editor,J,Z),this.parent.transition("editing_shape",Q)}isDarwin=window.navigator.userAgent.toLowerCase().indexOf("mac")>-1;isOverArrowLabelTest(J){if(!J)return!1;const Q=this.editor.getPointInShapeSpace(J,this.editor.inputs.currentPagePoint);if(this.editor.isShapeOfType(J,"arrow")){const Z=this.editor.getShapeGeometry(J).children[1];if(Z&&i9(Q,Z.vertices))return!0}return!1}handleDoubleClickOnCanvas(J){if(this.editor.getInstanceState().isReadonly)return;this.editor.mark("creating text shape");const Q=v6(),{x:Z,y:q}=this.editor.inputs.currentPagePoint;this.editor.createShapes([{id:Q,type:"text",x:Z,y:q,props:{text:"",autoSize:!0}}]);const Y=this.editor.getShape(Q);if(!Y)return;const $=this.editor.getShapeUtil(Y);if(this.editor.getInstanceState().isReadonly){if(!$.canEditInReadOnly(Y))return}this.editor.setEditingShape(Q),this.editor.select(Q),this.parent.transition("editing_shape",J)}nudgeSelectedShapes(J=!1){const{editor:{inputs:{keys:Q}}}=this,Z=Q.has("ShiftLeft"),q=new j(0,0);if(Q.has("ArrowLeft"))q.x-=1;if(Q.has("ArrowRight"))q.x+=1;if(Q.has("ArrowUp"))q.y-=1;if(Q.has("ArrowDown"))q.y+=1;if(q.equals(new j(0,0)))return;if(!J)this.editor.mark("nudge shapes");const{gridSize:Y}=this.editor.getDocumentSettings(),$=this.editor.getInstanceState().isGridMode?Z?Y*pB0:Y:Z?uB0:cB0,W=this.editor.getSelectedShapeIds();this.editor.nudgeShapes(W,q.mul($)),K8(this.editor,W)}canInteractWithShapeInReadOnly(J){if(!this.editor.getInstanceState().isReadonly)return!0;if(this.editor.getShapeUtil(J).canEditInReadOnly(J))return!0;return!1}}var uB0=10,cB0=1,pB0=5;class BI extends B0{static id="pointing_arrow_label";shapeId="";markId="";wasAlreadySelected=!1;didDrag=!1;info={};updateCursor(){this.editor.setCursor({type:"grabbing",rotation:0})}onEnter=(J)=>{const{shape:Q}=J;this.parent.setCurrentToolIdMask(J.onInteractionEnd),this.info=J,this.shapeId=Q.id,this.didDrag=!1,this.wasAlreadySelected=this.editor.getOnlySelectedShapeId()===Q.id,this.updateCursor();const q=this.editor.getShapeGeometry(Q).children[1];if(!q)throw Error(`Expected to find an arrow label geometry for shape: ${Q.id}`);const{currentPagePoint:Y}=this.editor.inputs,$=this.editor.getPointInShapeSpace(Q,Y);this._labelDragOffset=j.Sub(q.center,$),this.markId="label-drag start",this.editor.mark(this.markId),this.editor.setSelectedShapes([this.shapeId])};onExit=()=>{this.parent.setCurrentToolIdMask(void 0),this.editor.updateInstanceState({cursor:{type:"default",rotation:0}},{ephemeral:!0})};_labelDragOffset=new j(0,0);onPointerMove=()=>{const{isDragging:J}=this.editor.inputs;if(!J)return;const Q=this.editor.getShape(this.shapeId);if(!Q)return;const Z=this.editor.getArrowInfo(Q),q=this.editor.getShapeGeometry(Q),Y=q.children[0],$=this.editor.getPointInShapeSpace(Q,this.editor.inputs.currentPagePoint),W=Y.nearestPoint(j.Add($,this._labelDragOffset));let G;if(Z.isStraight){const z=j.Dist(Z.start.point,Z.end.point);G=1-j.Dist(Z.end.point,W)/z}else{const{_center:z,measure:U,angleEnd:F,angleStart:B}=q.children[0];G=OW(U,B,F,z.angle(W))}if(isNaN(G))G=0.5;this.didDrag=!0,this.editor.updateShape({id:Q.id,type:Q.type,props:{labelPosition:G}},{squashing:!0})};onPointerUp=()=>{const J=this.editor.getShape(this.shapeId);if(!J)return;if(this.didDrag||!this.wasAlreadySelected)this.complete();else this.editor.setEditingShape(J.id),this.editor.setCurrentTool("select.editing_shape")};onCancel=()=>{this.cancel()};onComplete=()=>{this.cancel()};onInterrupt=()=>{this.cancel()};complete(){if(this.info.onInteractionEnd)this.editor.setCurrentTool(this.info.onInteractionEnd,{});else this.parent.transition("idle")}cancel(){if(this.editor.bailToMark(this.markId),this.info.onInteractionEnd)this.editor.setCurrentTool(this.info.onInteractionEnd,{});else this.parent.transition("idle")}}class NI extends B0{static id="pointing_canvas";onEnter=()=>{const{inputs:J}=this.editor;if(!J.shiftKey){if(this.editor.getSelectedShapeIds().length>0)this.editor.mark("selecting none"),this.editor.selectNone()}};onPointerMove=(J)=>{if(this.editor.inputs.isDragging)this.parent.transition("brushing",J)};onPointerUp=()=>{OK(this.editor),this.complete()};onComplete=()=>{this.complete()};onInterrupt=()=>{this.parent.transition("idle")};complete(){this.parent.transition("idle")}}class MI extends B0{static id="pointing_crop_handle";info={};onEnter=(J)=>{this.info=J,this.parent.setCurrentToolIdMask(J.onInteractionEnd);const Q=this.editor.getSelectedShapes()[0];if(!Q)return;const Z=xQ[this.info.handle];this.editor.updateInstanceState({cursor:{type:Z,rotation:this.editor.getSelectionRotation()}}),this.editor.setCroppingShape(Q.id)};onExit=()=>{this.editor.updateInstanceState({cursor:{type:"default",rotation:0}},{ephemeral:!0}),this.parent.setCurrentToolIdMask(void 0)};onPointerMove=()=>{if(this.editor.inputs.isDragging)this.startCropping()};onLongPress=()=>{this.startCropping()};startCropping(){if(this.editor.getInstanceState().isReadonly)return;this.parent.transition("cropping",{...this.info,onInteractionEnd:this.info.onInteractionEnd})}onPointerUp=()=>{if(this.info.onInteractionEnd)this.editor.setCurrentTool(this.info.onInteractionEnd,this.info);else this.editor.setCroppingShape(null),this.parent.transition("idle")};onCancel=()=>{this.cancel()};onComplete=()=>{this.cancel()};onInterrupt=()=>{this.cancel()};cancel(){if(this.info.onInteractionEnd)this.editor.setCurrentTool(this.info.onInteractionEnd,this.info);else this.editor.setCroppingShape(null),this.parent.transition("idle")}}var vs=function(J,Q,Z,q){const Y=J.getShapePageTransform(Q.id),$=Y.point(),W=Y.rotation(),z=kw($,W,Q.props.growY,0)[Z.index];if(z)return wM(J,Q,z,W,q)};class OI extends B0{static id="pointing_handle";info={};onEnter=(J)=>{this.info=J;const{shape:Q}=J;if(this.editor.isShapeOfType(Q,"arrow")){const Z=Q.props[J.handle.id];if(Z?.type==="binding")this.editor.setHintingShapes([Z.boundShapeId])}this.editor.updateInstanceState({cursor:{type:"grabbing",rotation:0}},{ephemeral:!0})};onExit=()=>{this.editor.setHintingShapes([]),this.editor.updateInstanceState({cursor:{type:"default",rotation:0}},{ephemeral:!0})};onPointerUp=()=>{const{shape:J,handle:Q}=this.info;if(this.editor.isShapeOfType(J,"note")){const{editor:Z}=this,q=vs(Z,J,Q,!1);if(q){YK(Z,q,!0);return}}this.parent.transition("idle",this.info)};onPointerMove=()=>{const{editor:J}=this;if(J.inputs.isDragging)this.startDraggingHandle()};onLongPress=()=>{this.startDraggingHandle()};startDraggingHandle(){const{editor:J}=this;if(J.getInstanceState().isReadonly)return;const{shape:Q,handle:Z}=this.info;if(J.isShapeOfType(Q,"note")){const q=vs(J,Q,Z,!0);if(q){const Y=J.getPointInParentSpace(q,J.inputs.originPagePoint).sub(j.Rot(x3,q.rotation));J.updateShape({...q,x:Y.x,y:Y.y}),J.setHoveredShape(q.id).select(q.id).setCurrentTool("select.translating",{...this.info,target:"shape",shape:J.getShape(q),onInteractionEnd:"note",isCreating:!0,onCreate:()=>{YK(J,q,!0)}});return}}this.parent.transition("dragging_handle",this.info)}onCancel=()=>{this.cancel()};onComplete=()=>{this.cancel()};onInterrupt=()=>{this.cancel()};cancel(){this.parent.transition("idle")}}class VI extends B0{static id="pointing_rotate_handle";info={};updateCursor(){this.editor.updateInstanceState({cursor:{type:xQ[this.info.handle],rotation:this.editor.getSelectionRotation()}})}onEnter=(J)=>{this.parent.setCurrentToolIdMask(J.onInteractionEnd),this.info=J,this.updateCursor()};onExit=()=>{this.parent.setCurrentToolIdMask(void 0),this.editor.updateInstanceState({cursor:{type:"default",rotation:0}},{ephemeral:!0})};onPointerMove=()=>{if(this.editor.inputs.isDragging)this.startRotating()};onLongPress=()=>{this.startRotating()};startRotating(){if(this.editor.getInstanceState().isReadonly)return;this.parent.transition("rotating",this.info)}onPointerUp=()=>{this.complete()};onCancel=()=>{this.cancel()};onComplete=()=>{this.cancel()};onInterrupt=()=>{this.cancel()};complete(){if(this.info.onInteractionEnd)this.editor.setCurrentTool(this.info.onInteractionEnd,{});else this.parent.transition("idle")}cancel(){if(this.info.onInteractionEnd)this.editor.setCurrentTool(this.info.onInteractionEnd,{});else this.parent.transition("idle")}}class DI extends B0{static id="pointing_selection";info={};onEnter=(J)=>{this.info=J};onPointerUp=(J)=>{OK(this.editor),this.parent.transition("idle",J)};onPointerMove=(J)=>{if(this.editor.inputs.isDragging)this.startTranslating(J)};onLongPress=(J)=>{this.startTranslating(J)};startTranslating(J){if(this.editor.getInstanceState().isReadonly)return;this.parent.transition("translating",J)}onDoubleClick=(J)=>{const Q=this.editor.getHoveredShape(),Z=Q&&!this.editor.isShapeOfType(Q,"group")?Q:this.editor.getShapeAtPoint(this.editor.inputs.currentPagePoint,{hitInside:!0,margin:0,renderingOnly:!0});if(Z){this.parent.transition("idle"),this.parent.onDoubleClick?.({...J,target:"shape",shape:this.editor.getShape(Z)});return}};onCancel=()=>{this.cancel()};onComplete=()=>{this.cancel()};onInterrupt=()=>{this.cancel()};cancel(){this.parent.transition("idle")}}class RI extends B0{static id="pointing_shape";hitShape={};hitShapeForPointerUp={};isDoubleClick=!1;didSelectOnEnter=!1;onEnter=(J)=>{const Q=this.editor.getSelectedShapeIds(),Z=this.editor.getSelectionRotatedPageBounds(),q=this.editor.getFocusedGroupId(),{inputs:{currentPagePoint:Y,shiftKey:$,altKey:W}}=this.editor;this.hitShape=J.shape,this.isDoubleClick=!1;const G=this.editor.getOutermostSelectableShape(J.shape),z=this.editor.findShapeAncestor(G,(U)=>Q.includes(U.id));if(this.editor.getShapeUtil(J.shape).onClick||G.id===q||Q.includes(G.id)||z||Q.length>1&&Z?.containsPoint(Y)){this.didSelectOnEnter=!1,this.hitShapeForPointerUp=G;return}if(this.didSelectOnEnter=!0,$&&!W){if(this.editor.cancelDoubleClick(),!Q.includes(G.id))this.editor.mark("shift selecting shape"),this.editor.setSelectedShapes([...Q,G.id])}else this.editor.mark("selecting shape"),this.editor.setSelectedShapes([G.id])};onPointerUp=(J)=>{const Q=this.editor.getSelectedShapeIds(),Z=this.editor.getFocusedGroupId(),q=this.editor.getZoomLevel(),{inputs:{currentPagePoint:Y,shiftKey:$}}=this.editor,W=this.editor.getShapeAtPoint(Y,{margin:e5/q,hitInside:!0,renderingOnly:!0})??this.hitShape,G=W?this.editor.getOutermostSelectableShape(W):this.hitShapeForPointerUp;if(G){const z=this.editor.getShapeUtil(G);if(z.onClick){const U=z.onClick?.(G);if(U){this.editor.mark("shape on click"),this.editor.updateShapes([U]),this.parent.transition("idle",J);return}}if(G.id===Z){if(Q.length>0)this.editor.mark("clearing shape ids"),this.editor.setSelectedShapes([]);else this.editor.popFocusedGroupId();this.parent.transition("idle",J);return}}if(!this.didSelectOnEnter){const z=this.editor.getOutermostSelectableShape(W,(U)=>!Q.includes(U.id));if(Q.includes(z.id))if($)this.editor.mark("deselecting on pointer up"),this.editor.deselect(G);else if(Q.includes(G.id)){if(Q.length===1){const U=this.editor.getShapeUtil(G).getGeometry(G),F=UO(U),B=F.length===1?F[0]:void 0;if(B){const M=this.editor.getPointInShapeSpace(G,Y);if(B.bounds.containsPoint(M,0)&&B.hitTestPoint(M)){this.editor.batch(()=>{this.editor.mark("editing on pointer up"),this.editor.select(G.id);const O=this.editor.getShapeUtil(G);if(this.editor.getInstanceState().isReadonly){if(!O.canEditInReadOnly(G))return}if(this.editor.setEditingShape(G.id),this.editor.setCurrentTool("select.editing_shape"),this.isDoubleClick)this.editor.emit("select-all-text",{shapeId:G.id})});return}}}this.editor.mark("selecting on pointer up"),this.editor.select(G.id)}else this.editor.mark("selecting on pointer up"),this.editor.select(G);else if($){const U=this.editor.getShapeAncestors(z);this.editor.mark("shift deselecting on pointer up"),this.editor.setSelectedShapes([...this.editor.getSelectedShapeIds().filter((F)=>!U.find((B)=>B.id===F)),z.id])}else this.editor.mark("selecting on pointer up"),this.editor.setSelectedShapes([z.id])}this.parent.transition("idle",J)};onDoubleClick=()=>{this.isDoubleClick=!0};onPointerMove=(J)=>{if(this.editor.inputs.isDragging)this.startTranslating(J)};onLongPress=(J)=>{this.startTranslating(J)};startTranslating(J){if(this.editor.getInstanceState().isReadonly)return;this.editor.getContainer().focus(),this.parent.transition("translating",J)}onCancel=()=>{this.cancel()};onComplete=()=>{this.cancel()};onInterrupt=()=>{this.cancel()};cancel(){this.parent.transition("idle")}}var Ss=function(J,Q){Q=Q%d6;const Z=Math.round(Q/(T6/4)),q=jI.indexOf(J);return jI[(q+Z)%jI.length]};class _I extends B0{static id="resizing";info={};markId="";didHoldCommand=!1;creationCursorOffset={x:0,y:0};snapshot={};onEnter=(J)=>{const{isCreating:Q=!1,creationCursorOffset:Z={x:0,y:0}}=J;if(this.info=J,this.didHoldCommand=!1,this.parent.setCurrentToolIdMask(J.onInteractionEnd),this.creationCursorOffset=Z,this.snapshot=this._createSnapshot(),Q)this.markId=`creating:${this.editor.getOnlySelectedShape().id}`,this.editor.updateInstanceState({cursor:{type:"cross",rotation:0}},{ephemeral:!0});else this.markId="starting resizing",this.editor.mark(this.markId);this.handleResizeStart(),this.updateShapes()};onTick=()=>{eY(this.editor)};onPointerMove=()=>{this.updateShapes()};onKeyDown=()=>{this.updateShapes()};onKeyUp=()=>{this.updateShapes()};onPointerUp=()=>{this.complete()};onComplete=()=>{this.complete()};onCancel=()=>{this.cancel()};cancel(){if(this.editor.bailToMark(this.markId),this.info.onInteractionEnd)this.editor.setCurrentTool(this.info.onInteractionEnd,{});else this.parent.transition("idle")}complete(){if(K8(this.editor,this.snapshot.selectedShapeIds),this.handleResizeEnd(),this.info.isCreating&&this.info.onCreate){this.info.onCreate?.(this.editor.getOnlySelectedShape());return}if(this.editor.getInstanceState().isToolLocked&&this.info.onInteractionEnd){this.editor.setCurrentTool(this.info.onInteractionEnd,{});return}this.parent.transition("idle")}handleResizeStart(){const{shapeSnapshots:J}=this.snapshot,Q=[];if(J.forEach(({shape:Z})=>{const Y=this.editor.getShapeUtil(Z).onResizeStart?.(Z);if(Y)Q.push(Y)}),Q.length>0)this.editor.updateShapes(Q)}handleResizeEnd(){const{shapeSnapshots:J}=this.snapshot,Q=[];if(J.forEach(({shape:Z})=>{const q=this.editor.getShape(Z.id),$=this.editor.getShapeUtil(Z).onResizeEnd?.(Z,q);if($)Q.push($)}),Q.length>0)this.editor.updateShapes(Q)}updateShapes(){const{altKey:J,shiftKey:Q}=this.editor.inputs,{frames:Z,shapeSnapshots:q,selectionBounds:Y,cursorHandleOffset:$,selectedShapeIds:W,selectionRotation:G,canShapesDeform:z}=this.snapshot,U=Q||!z,{ctrlKey:F}=this.editor.inputs,B=this.editor.inputs.currentPagePoint.clone().sub($).sub(this.creationCursorOffset),M=this.editor.inputs.originPagePoint.clone().sub($);if(this.editor.getInstanceState().isGridMode&&!F){const{gridSize:P}=this.editor.getDocumentSettings();B.snapToGrid(P)}const O=this.info.handle,R=Ss(O,Math.PI);if(this.editor.snaps.clearIndicators(),(this.editor.user.getIsSnapMode()?!F:F)&&G%t6===0){const{nudge:P}=this.editor.snaps.shapeBounds.snapResizeShapes({dragDelta:j.Sub(B,M),initialSelectionPageBounds:this.snapshot.initialSelectionPageBounds,handle:Ss(O,G),isAspectRatioLocked:U,isResizingFromCenter:J});B.add(P)}const E=j.RotWith(J?Y.center:Y.getHandlePoint(R),Y.point,G),_=j.Sub(B,E).rot(-G),A=j.Sub(M,E).rot(-G),w=j.DivV(_,A);if(!Number.isFinite(w.x))w.x=1;if(!Number.isFinite(w.y))w.y=1;const T=O==="top"||O==="bottom",k=O==="left"||O==="right";if(U)if(k)w.y=Math.abs(w.x);else if(T)w.x=Math.abs(w.y);else if(Math.abs(w.x)>Math.abs(w.y))w.y=Math.abs(w.x)*(w.y<0?-1:1);else w.x=Math.abs(w.y)*(w.x<0?-1:1);else{if(T)w.x=1;if(k)w.y=1}if(!this.info.isCreating)this.updateCursor({dragHandle:O,isFlippedX:w.x<0,isFlippedY:w.y<0,rotation:G});for(let P of q.keys()){const y=q.get(P);this.editor.resizeShape(P,w,{initialShape:y.shape,initialBounds:y.bounds,initialPageTransform:y.pageTransform,dragHandle:O,mode:W.length===1&&P===W[0]?"resize_bounds":"scale_shape",scaleOrigin:E,scaleAxisRotation:G})}if(this.editor.inputs.ctrlKey){this.didHoldCommand=!0;for(let{id:P,children:y}of Z){if(!y.length)continue;const p=q.get(P).shape,s=this.editor.getShape(P);if(!(p&&s))continue;const c=s.x-p.x,t=s.y-p.y,X0=new j(c,t).rot(-p.rotation);if(X0.x!==0||X0.y!==0)for(let J0 of y)this.editor.updateShape({id:J0.id,type:J0.type,x:J0.x-X0.x,y:J0.y-X0.y})}}else if(this.didHoldCommand){this.didHoldCommand=!1;for(let{children:P}of Z){if(!P.length)continue;for(let y of P)this.editor.updateShape({id:y.id,type:y.type,x:y.x,y:y.y})}}}updateCursor({dragHandle:J,isFlippedX:Q,isFlippedY:Z,rotation:q}){const Y={...this.editor.getInstanceState().cursor};switch(J){case"top_left":case"bottom_right":{if(Y.type="nwse-resize",Q!==Z)Y.type="nesw-resize";break}case"top_right":case"bottom_left":{if(Y.type="nesw-resize",Q!==Z)Y.type="nwse-resize";break}}Y.rotation=q,this.editor.setCursor(Y)}onExit=()=>{this.parent.setCurrentToolIdMask(void 0),this.editor.updateInstanceState({cursor:{type:"default",rotation:0}},{ephemeral:!0}),this.editor.snaps.clearIndicators()};_createSnapshot=()=>{const J=this.editor.getSelectedShapeIds(),Q=this.editor.getSelectionRotation(),{inputs:{originPagePoint:Z}}=this.editor,q=this.editor.getSelectionRotatedPageBounds(),Y=j.RotWith(q.getHandlePoint(this.info.handle),q.point,Q),$=j.Sub(Z,Y),W=new Map,G=[];J.forEach((U)=>{const F=this.editor.getShape(U);if(F){if(F.type==="frame")G.push({id:U,children:Y6(this.editor.getSortedChildIdsForParent(F).map((B)=>this.editor.getShape(B)))});if(W.set(F.id,this._createShapeSnapshot(F)),this.editor.isShapeOfType(F,"frame")&&J.length===1)return;this.editor.visitDescendants(F.id,(B)=>{const M=this.editor.getShape(B);if(M){if(W.set(M.id,this._createShapeSnapshot(M)),this.editor.isShapeOfType(M,"frame"))return!1}})}});const z=![...W.values()].some((U)=>!dz(U.pageRotation,Q)||U.isAspectRatioLocked);return{shapeSnapshots:W,selectionBounds:q,cursorHandleOffset:$,selectionRotation:Q,selectedShapeIds:J,canShapesDeform:z,initialSelectionPageBounds:this.editor.getSelectionPageBounds(),frames:G}};_createShapeSnapshot=(J)=>{const Q=this.editor.getShapePageTransform(J),Z=this.editor.getShapeUtil(J);return{shape:J,bounds:this.editor.getShapeGeometry(J).bounds,pageTransform:Q,pageRotation:j0.Decompose(Q).rotation,isAspectRatioLocked:Z.isAspectRatioLocked(J)}}}var jI=["top","top_right","right","bottom_right","bottom","bottom_left","left","top_left"];var fs=Math.PI/180;class EI extends B0{static id="rotating";snapshot={};info={};markId="";onEnter=(J)=>{this.info=J,this.parent.setCurrentToolIdMask(J.onInteractionEnd),this.markId="rotate start",this.editor.mark(this.markId);const Q=z3({editor:this.editor});if(!Q)return this.parent.transition("idle",this.info);this.snapshot=Q;const Z=this._getRotationFromPointerPosition({snapToNearestDegree:!1});nY({editor:this.editor,delta:this._getRotationFromPointerPosition({snapToNearestDegree:!1}),snapshot:this.snapshot,stage:"start"}),this.editor.updateInstanceState({cursor:{type:xQ[this.info.handle],rotation:Z+this.snapshot.initialSelectionRotation}})};onExit=()=>{this.editor.setCursor({type:"default",rotation:0}),this.parent.setCurrentToolIdMask(void 0),this.snapshot={}};onPointerMove=()=>{this.update()};onKeyDown=()=>{this.update()};onKeyUp=()=>{this.update()};onPointerUp=()=>{this.complete()};onComplete=()=>{this.complete()};onCancel=()=>{this.cancel()};update=()=>{const J=this._getRotationFromPointerPosition({snapToNearestDegree:!1});nY({editor:this.editor,delta:J,snapshot:this.snapshot,stage:"update"}),this.editor.updateInstanceState({cursor:{type:xQ[this.info.handle],rotation:J+this.snapshot.initialSelectionRotation}})};cancel=()=>{if(this.editor.bailToMark(this.markId),this.info.onInteractionEnd)this.editor.setCurrentTool(this.info.onInteractionEnd,this.info);else this.parent.transition("idle",this.info)};complete=()=>{if(nY({editor:this.editor,delta:this._getRotationFromPointerPosition({snapToNearestDegree:!0}),snapshot:this.snapshot,stage:"end"}),K8(this.editor,this.snapshot.shapeSnapshots.map((J)=>J.shape.id)),this.info.onInteractionEnd)this.editor.setCurrentTool(this.info.onInteractionEnd,this.info);else this.parent.transition("idle",this.info)};_getRotationFromPointerPosition({snapToNearestDegree:J}){const Q=this.editor.getSelectionRotation(),Z=this.editor.getSelectionRotatedPageBounds(),{inputs:{shiftKey:q,currentPagePoint:Y}}=this.editor,{initialCursorAngle:$,initialSelectionRotation:W}=this.snapshot;if(!Z)return W;const z=Z.center.clone().rotWith(Z.point,Q).angle(Y)-$;let U=W+z;if(q)U=WX(U,24);else if(J){if(U=Math.round(U/fs)*fs,this.editor.getInstanceState().isCoarsePointer){const F=WX(U,4),B=BW(U,F);if(Math.abs(B)<qC(5))U=F}}return U-W}}class CI extends B0{static id="scribble_brushing";hits=new Set;size=0;scribbleId="id";initialSelectedShapeIds=new Set;newlySelectedShapeIds=new Set;onEnter=()=>{this.initialSelectedShapeIds=new Set(this.editor.inputs.shiftKey?this.editor.getSelectedShapeIds():[]),this.newlySelectedShapeIds=new Set,this.size=0,this.hits.clear();const J=this.editor.scribbles.addScribble({color:"selection-stroke",opacity:0.32,size:12});this.scribbleId=J.id,this.updateScribbleSelection(!0),this.editor.updateInstanceState({brush:null})};onExit=()=>{this.editor.scribbles.stop(this.scribbleId)};onPointerMove=()=>{this.updateScribbleSelection(!0)};onPointerUp=()=>{this.complete()};onKeyDown=()=>{this.updateScribbleSelection(!1)};onKeyUp=()=>{if(!this.editor.inputs.altKey)this.parent.transition("brushing");else this.updateScribbleSelection(!1)};onCancel=()=>{this.cancel()};onComplete=()=>{this.complete()};pushPointToScribble=()=>{const{x:J,y:Q}=this.editor.inputs.currentPagePoint;this.editor.scribbles.addPoint(this.scribbleId,J,Q)};updateScribbleSelection(J){const{editor:Q}=this,Z=this.editor.getCurrentPageShapes(),{inputs:{shiftKey:q,originPagePoint:Y,previousPagePoint:$,currentPagePoint:W}}=this.editor,{newlySelectedShapeIds:G,initialSelectedShapeIds:z}=this;if(J)this.pushPointToScribble();const U=Z;let F,B,M,O;const R=0;for(let _=0,A=U.length;_<A;_++){if(F=U[_],Q.isShapeOfType(F,"group")||G.has(F.id)||Q.isShapeOrAncestorLocked(F))continue;if(B=Q.getShapeGeometry(F),Q.isShapeOfType(F,"frame")&&B.bounds.containsPoint(Q.getPointInShapeSpace(F,Y)))continue;const w=Q.getShapePageTransform(F);if(!B||!w)continue;const T=w.clone().invert();M=T.applyToPoint($),O=T.applyToPoint(W);const{bounds:k}=B;if(k.minX-R>Math.max(M.x,O.x)||k.minY-R>Math.max(M.y,O.y)||k.maxX+R<Math.min(M.x,O.x)||k.maxY+R<Math.min(M.y,O.y))continue;if(B.hitTestLineSegment(M,O,R)){const P=this.editor.getOutermostSelectableShape(F),y=this.editor.getShapeMask(P.id);if(y){if(lY($,W,y)!==null){if(!i9(W,y))continue}}G.add(P.id)}}const V=Q.getSelectedShapeIds(),E=new Set(q?[...G,...z]:[...G]);if(V.length!==E.size||V.some((_)=>!E.has(_)))this.editor.setSelectedShapes(Array.from(E),{squashing:!0})}complete(){this.updateScribbleSelection(!0),this.parent.transition("idle")}cancel(){this.editor.setSelectedShapes([...this.initialSelectedShapeIds],{squashing:!0}),this.parent.transition("idle")}}var dB0=20,lB0=100;class AI{constructor(J){this.editor=J,J.disposables.add(this.dispose)}prevDroppingShapeId=null;droppingNodeTimer=null;first=!0;updateDroppingNode(J,Q){if(this.first)this.editor.setHintingShapes(J.map((Z)=>this.editor.findShapeAncestor(Z,(q)=>q.type!=="group")).filter((Z)=>Z)),this.prevDroppingShapeId=this.editor.getDroppingOverShape(this.editor.inputs.originPagePoint,J)?.id??null,this.first=!1;if(this.droppingNodeTimer===null)this.setDragTimer(J,dB0,Q);else if(this.editor.inputs.pointerVelocity.len()>0.5)clearInterval(this.droppingNodeTimer),this.setDragTimer(J,lB0,Q)}setDragTimer(J,Q,Z){this.droppingNodeTimer=setTimeout(()=>{this.editor.batch(()=>{this.handleDrag(this.editor.inputs.currentPagePoint,J,Z)}),this.droppingNodeTimer=null},Q)}handleDrag(J,Q,Z){Q=Y6(Q.map((G)=>this.editor.getShape(G.id)));const q=this.editor.getDroppingOverShape(J,Q)?.id??null;if(q===this.prevDroppingShapeId){this.hintParents(Q);return}const{prevDroppingShapeId:Y}=this,$=Y&&this.editor.getShape(Y),W=q&&this.editor.getShape(q);if($)this.editor.getShapeUtil($).onDragShapesOut?.($,Q);if(W)this.editor.getShapeUtil(W).onDragShapesOver?.(W,Q);this.hintParents(Q),Z?.(),this.prevDroppingShapeId=q}hintParents(J){const Q=new Map;for(let q of J){const Y=this.editor.findShapeAncestor(q,($)=>$.type!=="group");if(!Y)continue;if(!Q.has(Y.id))Q.set(Y.id,[]);Q.get(Y.id).push(q.id)}const Z=[];for(let[q,Y]of Q){const $=this.editor.getShape(q);if(!$)continue;if(CM(this.editor,$).length<Y.length)Z.push($.id)}this.editor.setHintingShapes(Z)}dropShapes(J){const{prevDroppingShapeId:Q}=this;if(this.handleDrag(this.editor.inputs.currentPagePoint,J),Q){const Z=this.editor.getShape(Q);if(!Z)return;this.editor.getShapeUtil(Z).onDropShapesOver?.(Z,J)}}clear(){if(this.prevDroppingShapeId=null,this.droppingNodeTimer!==null)clearInterval(this.droppingNodeTimer);this.droppingNodeTimer=null,this.editor.setHintingShapes([]),this.first=!0}dispose=()=>{this.clear()}}var gs=function(J){const Q=[],Z=[],q=J.getSelectedShapeIds(),Y=Y6(q.map((B)=>{const M=J.getShape(B);if(!M)return null;Q.push(M);const O=J.getShapePageTransform(B),R=O.point(),V=O.rotation();Z.push(R);const E=a5.isId(M.parentId)?null:j0.Inverse(J.getShapePageTransform(M.parentId));return{shape:M,pagePoint:R,pageRotation:V,parentTransform:E}})),$=J.getOnlySelectedShape();let W=[];if($)W=J.snaps.shapeBounds.getSnapPoints($.id);else{const B=J.getSelectionPageBounds();if(B)W=B.cornersAndCenter.map((M,O)=>({id:"selection:"+O,x:M.x,y:M.y}))}let G,z;const{originPagePoint:U}=J.inputs,F=Y.filter((B)=>J.isShapeOfType(B.shape,"note")&&J.isPointInShape(B.shape,U));if(F.length===0);else if(F.length===1)z=F[0];else{const B=J.getCurrentPageShapesSorted();z=F.map((M)=>({snapshot:M,index:B.findIndex((O)=>O.id===M.shape.id)})).sort((M,O)=>O.index-M.index)[0]?.snapshot}if(z)G=kM(J,z.pageRotation,z.shape.props.growY??0);return{averagePagePoint:j.Average(Z),movingShapes:Q,shapeSnapshots:Y,initialPageBounds:J.getSelectionPageBounds(),initialSnapPoints:W,noteAdjacentPositions:G,noteSnapshot:z}},iB0=function({editor:J,snapshot:Q}){const{inputs:Z}=J,{noteSnapshot:q,noteAdjacentPositions:Y,initialPageBounds:$,initialSnapPoints:W,shapeSnapshots:G,averagePagePoint:z}=Q,U=J.getInstanceState().isGridMode,F=J.getDocumentSettings().gridSize,B=j.Sub(Z.currentPagePoint,Z.originPagePoint),M=J.inputs.shiftKey?Math.abs(B.x)<Math.abs(B.y)?"x":"y":null;if(M==="x")B.x=0;else if(M==="y")B.y=0;if(J.snaps.clearIndicators(),(J.user.getIsSnapMode()?!Z.ctrlKey:Z.ctrlKey)&&J.inputs.pointerVelocity.len()<0.5){const{nudge:E}=J.snaps.shapeBounds.snapTranslateShapes({dragDelta:B,initialSelectionPageBounds:$,lockedAxis:M,initialSelectionSnapPoints:W});B.add(E)}else if(q&&Y){let E=AM/J.getZoomLevel(),_=new j(0,0);const A=j.Add(j.Add(q.pagePoint,B),new j(L8/2,L8/2).rot(q.pageRotation));for(let w of Y){const T=j.Sub(A,w),k=T.len();if(k<E)E=k,_=T}B.sub(_)}const R=j.Add(z,B);if(U&&!Z.ctrlKey)R.snapToGrid(F);const V=j.Sub(R,z);J.updateShapes(Y6(G.map(({shape:E,pagePoint:_,parentTransform:A})=>{const w=j.Add(_,V),T=A?j0.applyToPoint(A,w):w;return{id:E.id,type:E.type,x:T.x,y:T.y}})),{squashing:!0})};class kI extends B0{static id="translating";info={};selectionSnapshot={};snapshot={};markId="";isCloning=!1;isCreating=!1;onCreate=()=>{return};dragAndDropManager=new AI(this.editor);onEnter=(J)=>{const{isCreating:Q=!1,onCreate:Z=()=>{return}}=J;if(this.info=J,this.parent.setCurrentToolIdMask(J.onInteractionEnd),this.isCreating=Q,this.onCreate=Z,Q)this.markId=`creating:${this.editor.getOnlySelectedShape().id}`;else this.markId="translating",this.editor.mark(this.markId);if(this.isCloning=!1,this.info=J,this.editor.setCursor({type:"move",rotation:0}),this.selectionSnapshot=gs(this.editor),!this.isCreating){if(this.editor.inputs.altKey){this.startCloning();return}}this.snapshot=this.selectionSnapshot,this.handleStart(),this.updateShapes()};onExit=()=>{this.parent.setCurrentToolIdMask(void 0),this.selectionSnapshot={},this.snapshot={},this.editor.snaps.clearIndicators(),this.editor.setCursor({type:"default",rotation:0}),this.dragAndDropManager.clear()};onTick=()=>{this.dragAndDropManager.updateDroppingNode(this.snapshot.movingShapes,this.updateParentTransforms),eY(this.editor)};onPointerMove=()=>{this.updateShapes()};onKeyDown=()=>{if(this.editor.inputs.altKey&&!this.isCloning){this.startCloning();return}this.updateShapes()};onKeyUp=()=>{if(!this.editor.inputs.altKey&&this.isCloning){this.stopCloning();return}this.updateShapes()};onPointerUp=()=>{this.complete()};onComplete=()=>{this.complete()};onCancel=()=>{this.cancel()};startCloning(){if(this.isCreating)return;this.isCloning=!0,this.reset(),this.markId="translating",this.editor.mark(this.markId),this.editor.duplicateShapes(Array.from(this.editor.getSelectedShapeIds())),this.snapshot=gs(this.editor),this.handleStart(),this.updateShapes()}stopCloning(){this.isCloning=!1,this.snapshot=this.selectionSnapshot,this.reset(),this.markId="translating",this.editor.mark(this.markId),this.updateShapes()}reset(){this.editor.bailToMark(this.markId)}complete(){if(this.updateShapes(),this.dragAndDropManager.dropShapes(this.snapshot.movingShapes),K8(this.editor,this.snapshot.movingShapes.map((J)=>J.id)),this.handleEnd(),this.editor.getInstanceState().isToolLocked&&this.info.onInteractionEnd)this.editor.setCurrentTool(this.info.onInteractionEnd);else if(this.isCreating)this.onCreate?.(this.editor.getOnlySelectedShape());else this.parent.transition("idle")}cancel(){if(this.reset(),this.info.onInteractionEnd)this.editor.setCurrentTool(this.info.onInteractionEnd);else this.parent.transition("idle",this.info)}handleStart(){const{movingShapes:J}=this.snapshot,Q=[];if(J.forEach((Z)=>{const Y=this.editor.getShapeUtil(Z).onTranslateStart?.(Z);if(Y)Q.push(Y)}),Q.length>0)this.editor.updateShapes(Q);this.editor.setHoveredShape(null)}handleEnd(){const{movingShapes:J}=this.snapshot;if(this.isCloning&&J.length>0){const Z=j.Average(J.map((Y)=>this.editor.getShapePageTransform(Y.id).point())),q=j.Sub(Z,this.selectionSnapshot.averagePagePoint);if(!j.IsNaN(q))this.editor.updateInstanceState({duplicateProps:{shapeIds:J.map((Y)=>Y.id),offset:{x:q.x,y:q.y}}})}const Q=[];if(J.forEach((Z)=>{const q=this.editor.getShape(Z.id),$=this.editor.getShapeUtil(Z).onTranslateEnd?.(Z,q);if($)Q.push($)}),Q.length>0)this.editor.updateShapes(Q)}handleChange(){const{movingShapes:J}=this.snapshot,Q=[];if(J.forEach((Z)=>{const q=this.editor.getShape(Z.id),$=this.editor.getShapeUtil(Z).onTranslate?.(Z,q);if($)Q.push($)}),Q.length>0)this.editor.updateShapes(Q)}updateShapes(){const{snapshot:J}=this;this.dragAndDropManager.updateDroppingNode(J.movingShapes,this.updateParentTransforms),iB0({editor:this.editor,snapshot:J}),this.handleChange()}updateParentTransforms=()=>{const{editor:J,snapshot:{shapeSnapshots:Q}}=this,Z=[];Q.forEach((q)=>{const Y=J.getShape(q.shape.id);if(!Y)return null;Z.push(Y);const $=o5(Y.parentId)?null:j0.Inverse(J.getShapePageTransform(Y.parentId));q.parentTransform=$})}}class LO extends B0{static id="select";static initial="idle";reactor=void 0;static children=()=>[WI,HI,FI,NI,RI,kI,XI,CI,MI,DI,GI,UI,_I,EI,VI,BI,OI,zI];cleanUpDuplicateProps=()=>{const J=this.editor.getSelectedShapeIds(),Q=this.editor.getInstanceState();if(!Q.duplicateProps)return;const Z=new Set(Q.duplicateProps.shapeIds);if(J.length===Z.size&&J.every((q)=>Z.has(q)))return;this.editor.updateInstanceState({duplicateProps:null})};onEnter=()=>{this.reactor=M4("clean duplicate props",()=>{try{this.cleanUpDuplicateProps()}catch(J){console.error(J)}})};onExit=()=>{if(this.reactor?.(),this.editor.getCurrentPageState().editingShapeId)this.editor.setEditingShape(null)}}class wI extends B0{static id="idle";info={};onEnter=(J)=>{this.info=J};onPointerDown=()=>{this.parent.transition("pointing",this.info)}}class II extends B0{static id="pointing";info={};onEnter=(J)=>{this.info=J};onPointerUp=()=>{this.complete()};onPointerMove=()=>{if(this.editor.inputs.isDragging)this.parent.transition("zoom_brushing",this.info)};onCancel=()=>{this.cancel()};complete(){const{currentScreenPoint:J}=this.editor.inputs;if(this.editor.inputs.altKey)this.editor.zoomOut(J,{duration:220});else this.editor.zoomIn(J,{duration:220});this.parent.transition("idle",this.info)}cancel(){this.parent.transition("idle",this.info)}}class PI extends B0{static id="zoom_brushing";info={};zoomBrush=new V0;onEnter=(J)=>{this.info=J,this.update()};onExit=()=>{this.editor.updateInstanceState({zoomBrush:null})};onPointerMove=()=>{this.update()};onPointerUp=()=>{this.complete()};onCancel=()=>{this.cancel()};update(){const{inputs:{originPagePoint:J,currentPagePoint:Q}}=this.editor;this.zoomBrush.setTo(V0.FromPoints([J,Q])),this.editor.updateInstanceState({zoomBrush:this.zoomBrush.toJson()})}cancel(){this.parent.transition("idle",this.info)}complete(){const{zoomBrush:J}=this,Q=8/this.editor.getZoomLevel();if(J.width<Q&&J.height<Q){const Z=this.editor.inputs.currentScreenPoint;if(this.editor.inputs.altKey)this.editor.zoomOut(Z,{duration:220});else this.editor.zoomIn(Z,{duration:220})}else{const Z=this.editor.inputs.altKey?this.editor.getZoomLevel()/2:void 0;this.editor.zoomToBounds(J,{targetZoom:Z,duration:220})}this.parent.transition("idle",this.info)}}class FO extends B0{static id="zoom";static initial="idle";static children=()=>[wI,PI,II];info={};onEnter=(J)=>{this.info=J,this.parent.setCurrentToolIdMask(J.onInteractionEnd),this.updateCursor()};onExit=()=>{this.parent.setCurrentToolIdMask(void 0),this.editor.updateInstanceState({zoomBrush:null,cursor:{type:"default",rotation:0}},{ephemeral:!0}),this.parent.setCurrentToolIdMask(void 0)};onKeyDown=()=>{this.updateCursor()};onKeyUp=(J)=>{if(this.updateCursor(),J.code==="KeyZ")this.complete()};onInterrupt=()=>{this.complete()};complete(){if(this.info.onInteractionEnd&&this.info.onInteractionEnd!=="select")this.editor.setCurrentTool(this.info.onInteractionEnd,this.info);else this.parent.transition("select")}updateCursor(){if(this.editor.inputs.altKey)this.editor.updateInstanceState({cursor:{type:"zoom-out",rotation:0}},{ephemeral:!0});else this.editor.updateInstanceState({cursor:{type:"zoom-in",rotation:0}},{ephemeral:!0})}}var TI=[WO,GO,HO,FO,LO];var B8=v(W0(),1);var D0=function(){return D0=Object.assign?Object.assign.bind():function(J){for(var Q=1;Q<arguments.length;Q++){var Z=arguments[Q];for(var q in Z)({}).hasOwnProperty.call(Z,q)&&(J[q]=Z[q])}return J},D0.apply(null,arguments)};var p0=v(o(),1),Qr=v(uq(),1);var s0=function(J,Q,{checkForDefaultPrevented:Z=!0}={}){return function q(Y){if(J===null||J===void 0||J(Y),Z===!1||!Y.defaultPrevented)return Q===null||Q===void 0?void 0:Q(Y)}};var ms=v(o(),1),nB0=function(J,Q){if(typeof J==="function")J(Q);else if(J!==null&&J!==void 0)J.current=Q},VK=function(...J){return(Q)=>J.forEach((Z)=>nB0(Z,Q))},l6=function(...J){return ms.useCallback(VK(...J),J)};var i1=v(o(),1);var N7=v(o(),1),hs=function(J,Q){const Z=N7.createContext(Q);function q($){const{children:W,...G}=$,z=N7.useMemo(()=>G,Object.values(G));return N7.createElement(Z.Provider,{value:z},W)}function Y($){const W=N7.useContext(Z);if(W)return W;if(Q!==void 0)return Q;throw new Error(`\`${$}\` must be used within \`${J}\``)}return q.displayName=J+"Provider",[q,Y]},n9=function(J,Q=[]){let Z=[];function q($,W){const G=N7.createContext(W),z=Z.length;Z=[...Z,W];function U(B){const{scope:M,children:O,...R}=B,V=(M===null||M===void 0?void 0:M[J][z])||G,E=N7.useMemo(()=>R,Object.values(R));return N7.createElement(V.Provider,{value:E},O)}function F(B,M){const O=(M===null||M===void 0?void 0:M[J][z])||G,R=N7.useContext(O);if(R)return R;if(W!==void 0)return W;throw new Error(`\`${B}\` must be used within \`${$}\``)}return U.displayName=$+"Provider",[U,F]}const Y=()=>{const $=Z.map((W)=>{return N7.createContext(W)});return function W(G){const z=(G===null||G===void 0?void 0:G[J])||$;return N7.useMemo(()=>({[`__scope${J}`]:{...G,[J]:z}}),[G,z])}};return Y.scopeName=J,[q,sB0(Y,...Q)]},sB0=function(...J){const Q=J[0];if(J.length===1)return Q;const Z=()=>{const q=J.map((Y)=>({useScope:Y(),scopeName:Y.scopeName}));return function Y($){const W=q.reduce((G,{useScope:z,scopeName:U})=>{const B=z($)[`__scope${U}`];return{...G,...B}},{});return N7.useMemo(()=>({[`__scope${Q.scopeName}`]:W}),[W])}};return Z.scopeName=Q.scopeName,Z};var m9=v(o(),1);var aB0=function(J){return m9.isValidElement(J)&&J.type===rB0},oB0=function(J,Q){const Z={...Q};for(let q in Q){const Y=J[q],$=Q[q];if(/^on[A-Z]/.test(q)){if(Y&&$)Z[q]=(...G)=>{$(...G),Y(...G)};else if(Y)Z[q]=Y}else if(q==="style")Z[q]={...Y,...$};else if(q==="className")Z[q]=[Y,$].filter(Boolean).join(" ")}return{...J,...Z}},Y1=m9.forwardRef((J,Q)=>{const{children:Z,...q}=J,Y=m9.Children.toArray(Z),$=Y.find(aB0);if($){const W=$.props.children,G=Y.map((z)=>{if(z===$){if(m9.Children.count(W)>1)return m9.Children.only(null);return m9.isValidElement(W)?W.props.children:null}else return z});return m9.createElement(bI,D0({},q,{ref:Q}),m9.isValidElement(W)?m9.cloneElement(W,void 0,G):null)}return m9.createElement(bI,D0({},q,{ref:Q}),Z)});Y1.displayName="Slot";var bI=m9.forwardRef((J,Q)=>{const{children:Z,...q}=J;if(m9.isValidElement(Z))return m9.cloneElement(Z,{...oB0(q,Z.props),ref:Q?VK(Q,Z.ref):Z.ref});return m9.Children.count(Z)>1?m9.Children.only(null):null});bI.displayName="SlotClone";var rB0=({children:J})=>{return m9.createElement(m9.Fragment,null,J)};var wX=function(J){const Q=J+"CollectionProvider",[Z,q]=n9(Q),[Y,$]=Z(Q,{collectionRef:{current:null},itemMap:new Map}),W=(O)=>{const{scope:R,children:V}=O,E=i1.default.useRef(null),_=i1.default.useRef(new Map).current;return i1.default.createElement(Y,{scope:R,itemMap:_,collectionRef:E},V)};;const G=J+"CollectionSlot",z=i1.default.forwardRef((O,R)=>{const{scope:V,children:E}=O,_=$(G,V),A=l6(R,_.collectionRef);return i1.default.createElement(Y1,{ref:A},E)});;const U=J+"CollectionItemSlot",F="data-radix-collection-item",B=i1.default.forwardRef((O,R)=>{const{scope:V,children:E,..._}=O,A=i1.default.useRef(null),w=l6(R,A),T=$(U,V);return i1.default.useEffect(()=>{return T.itemMap.set(A,{ref:A,..._}),()=>void T.itemMap.delete(A)}),i1.default.createElement(Y1,{[F]:"",ref:w},E)});;function M(O){const R=$(J+"CollectionConsumer",O);return i1.default.useCallback(()=>{const E=R.collectionRef.current;if(!E)return[];const _=Array.from(E.querySelectorAll(`[${F}]`));return Array.from(R.itemMap.values()).sort((T,k)=>_.indexOf(T.ref.current)-_.indexOf(k.ref.current))},[R.collectionRef,R.itemMap])}return[{Provider:W,Slot:z,ItemSlot:B},M,q]};var B9=v(o(),1);var z2=v(o(),1),us=v(uq(),1);var U2=function(J,Q){if(J)us.flushSync(()=>J.dispatchEvent(Q))},tB0=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],m6=tB0.reduce((J,Q)=>{const Z=z2.forwardRef((q,Y)=>{const{asChild:$,...W}=q,G=$?Y1:Q;return z2.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),z2.createElement(G,D0({},W,{ref:Y}))});return Z.displayName=`Primitive.${Q}`,{...J,[Q]:Z}},{});var L2=v(o(),1),K9=function(J){const Q=L2.useRef(J);return L2.useEffect(()=>{Q.current=J}),L2.useMemo(()=>(...Z)=>{var q;return(q=Q.current)===null||q===void 0?void 0:q.call(Q,...Z)},[])};var cs=v(o(),1);var ps=function(J,Q=globalThis===null||globalThis===void 0?void 0:globalThis.document){const Z=K9(J);cs.useEffect(()=>{const q=(Y)=>{if(Y.key==="Escape")Z(Y)};return Q.addEventListener("keydown",q),()=>Q.removeEventListener("keydown",q)},[Z,Q])};var ZN0=function(J,Q=globalThis===null||globalThis===void 0?void 0:globalThis.document){const Z=K9(J),q=B9.useRef(!1),Y=B9.useRef(()=>{});return B9.useEffect(()=>{const $=(G)=>{if(G.target&&!q.current){let U=function(){ns(eB0,Z,z,{discrete:!0})};const z={originalEvent:G};if(G.pointerType==="touch")Q.removeEventListener("click",Y.current),Y.current=U,Q.addEventListener("click",Y.current,{once:!0});else U()}else Q.removeEventListener("click",Y.current);q.current=!1},W=window.setTimeout(()=>{Q.addEventListener("pointerdown",$)},0);return()=>{window.clearTimeout(W),Q.removeEventListener("pointerdown",$),Q.removeEventListener("click",Y.current)}},[Q,Z]),{onPointerDownCapture:()=>q.current=!0}},qN0=function(J,Q=globalThis===null||globalThis===void 0?void 0:globalThis.document){const Z=K9(J),q=B9.useRef(!1);return B9.useEffect(()=>{const Y=($)=>{if($.target&&!q.current)ns(JN0,Z,{originalEvent:$},{discrete:!1})};return Q.addEventListener("focusin",Y),()=>Q.removeEventListener("focusin",Y)},[Q,Z]),{onFocusCapture:()=>q.current=!0,onBlurCapture:()=>q.current=!1}},ls=function(){const J=new CustomEvent(xI);document.dispatchEvent(J)},ns=function(J,Q,Z,{discrete:q}){const Y=Z.originalEvent.target,$=new CustomEvent(J,{bubbles:!1,cancelable:!0,detail:Z});if(Q)Y.addEventListener(J,Q,{once:!0});if(q)U2(Y,$);else Y.dispatchEvent($)};var xI="dismissableLayer.update",eB0="dismissableLayer.pointerDownOutside",JN0="dismissableLayer.focusOutside",ds,is=B9.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),DK=B9.forwardRef((J,Q)=>{var Z;const{disableOutsidePointerEvents:q=!1,onEscapeKeyDown:Y,onPointerDownOutside:$,onFocusOutside:W,onInteractOutside:G,onDismiss:z,...U}=J,F=B9.useContext(is),[B,M]=B9.useState(null),O=(Z=B===null||B===void 0?void 0:B.ownerDocument)!==null&&Z!==void 0?Z:globalThis===null||globalThis===void 0?void 0:globalThis.document,[,R]=B9.useState({}),V=l6(Q,(p)=>M(p)),E=Array.from(F.layers),[_]=[...F.layersWithOutsidePointerEventsDisabled].slice(-1),A=E.indexOf(_),w=B?E.indexOf(B):-1,T=F.layersWithOutsidePointerEventsDisabled.size>0,k=w>=A,P=ZN0((p)=>{const s=p.target,c=[...F.branches].some((t)=>t.contains(s));if(!k||c)return;if($===null||$===void 0||$(p),G===null||G===void 0||G(p),!p.defaultPrevented)z===null||z===void 0||z()},O),y=qN0((p)=>{const s=p.target;if([...F.branches].some((t)=>t.contains(s)))return;if(W===null||W===void 0||W(p),G===null||G===void 0||G(p),!p.defaultPrevented)z===null||z===void 0||z()},O);return ps((p)=>{if(w!==F.layers.size-1)return;if(Y===null||Y===void 0||Y(p),!p.defaultPrevented&&z)p.preventDefault(),z()},O),B9.useEffect(()=>{if(!B)return;if(q){if(F.layersWithOutsidePointerEventsDisabled.size===0)ds=O.body.style.pointerEvents,O.body.style.pointerEvents="none";F.layersWithOutsidePointerEventsDisabled.add(B)}return F.layers.add(B),ls(),()=>{if(q&&F.layersWithOutsidePointerEventsDisabled.size===1)O.body.style.pointerEvents=ds}},[B,O,q,F]),B9.useEffect(()=>{return()=>{if(!B)return;F.layers.delete(B),F.layersWithOutsidePointerEventsDisabled.delete(B),ls()}},[B,F]),B9.useEffect(()=>{const p=()=>R({});return document.addEventListener(xI,p),()=>document.removeEventListener(xI,p)},[]),B9.createElement(m6.div,D0({},U,{ref:V,style:{pointerEvents:T?k?"auto":"none":void 0,...J.style},onFocusCapture:s0(J.onFocusCapture,y.onFocusCapture),onBlurCapture:s0(J.onBlurCapture,y.onBlurCapture),onPointerDownCapture:s0(J.onPointerDownCapture,P.onPointerDownCapture)}))});var QN0=B9.forwardRef((J,Q)=>{const Z=B9.useContext(is),q=B9.useRef(null),Y=l6(Q,q);return B9.useEffect(()=>{const $=q.current;if($)return Z.branches.add($),()=>{Z.branches.delete($)}},[Z.branches]),B9.createElement(m6.div,D0({},J,{ref:Y}))});var ss=DK,rs=QN0;var BO=v(o(),1),as=v(uq(),1);var IX=BO.forwardRef((J,Q)=>{var Z;const{container:q=globalThis===null||globalThis===void 0?void 0:(Z=globalThis.document)===null||Z===void 0?void 0:Z.body,...Y}=J;return q?as.default.createPortal(BO.createElement(m6.div,D0({},Y,{ref:Q})),q):null});var rJ=v(o(),1),ts=v(uq(),1);var os=v(o(),1),M7=Boolean(globalThis===null||globalThis===void 0?void 0:globalThis.document)?os.useLayoutEffect:()=>{};var XN0=function(J,Q){return rJ.useReducer((Z,q)=>{const Y=Q[Z][q];return Y!==null&&Y!==void 0?Y:Z},J)},YN0=function(J){const[Q,Z]=rJ.useState(),q=rJ.useRef({}),Y=rJ.useRef(J),$=rJ.useRef("none"),W=J?"mounted":"unmounted",[G,z]=XN0(W,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return rJ.useEffect(()=>{const U=NO(q.current);$.current=G==="mounted"?U:"none"},[G]),M7(()=>{const U=q.current,F=Y.current;if(F!==J){const M=$.current,O=NO(U);if(J)z("MOUNT");else if(O==="none"||(U===null||U===void 0?void 0:U.display)==="none")z("UNMOUNT");else if(F&&M!==O)z("ANIMATION_OUT");else z("UNMOUNT");Y.current=J}},[J,z]),M7(()=>{if(Q){const U=(B)=>{const O=NO(q.current).includes(B.animationName);if(B.target===Q&&O)ts.flushSync(()=>z("ANIMATION_END"))},F=(B)=>{if(B.target===Q)$.current=NO(q.current)};return Q.addEventListener("animationstart",F),Q.addEventListener("animationcancel",U),Q.addEventListener("animationend",U),()=>{Q.removeEventListener("animationstart",F),Q.removeEventListener("animationcancel",U),Q.removeEventListener("animationend",U)}}else z("ANIMATION_END")},[Q,z]),{isPresent:["mounted","unmountSuspended"].includes(G),ref:rJ.useCallback((U)=>{if(U)q.current=getComputedStyle(U);Z(U)},[])}},NO=function(J){return(J===null||J===void 0?void 0:J.animationName)||"none"},s7=(J)=>{const{present:Q,children:Z}=J,q=YN0(Q),Y=typeof Z==="function"?Z({present:q.isPresent}):rJ.Children.only(Z),$=l6(q.ref,Y.ref);return typeof Z==="function"||q.isPresent?rJ.cloneElement(Y,{ref:$}):null};s7.displayName="Presence";var PX=v(o(),1);var O7=function({prop:J,defaultProp:Q,onChange:Z=()=>{}}){const[q,Y]=KN0({defaultProp:Q,onChange:Z}),$=J!==void 0,W=$?J:q,G=K9(Z),z=PX.useCallback((U)=>{if($){const B=typeof U==="function"?U(J):U;if(B!==J)G(B)}else Y(U)},[$,J,Y,G]);return[W,z]},KN0=function({defaultProp:J,onChange:Q}){const Z=PX.useState(J),[q]=Z,Y=PX.useRef(q),$=K9(Q);return PX.useEffect(()=>{if(Y.current!==q)$(q),Y.current=q},[q,Y,$]),Z};var MO=v(o(),1);var yI=MO.forwardRef((J,Q)=>{return MO.createElement(m6.span,D0({},J,{ref:Q,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...J.style}}))});var Gr=function(J){const Q=[];return Array.from(J.childNodes).forEach((q)=>{if(q.nodeType===q.TEXT_NODE&&q.textContent)Q.push(q.textContent);if(AN0(q)){const Y=q.ariaHidden||q.hidden||q.style.display==="none",$=q.dataset.radixToastAnnounceExclude==="";if(!Y)if($){const W=q.dataset.radixToastAnnounceAlt;if(W)Q.push(W)}else Q.push(...Gr(q))}}),Q},OO=function(J,Q,Z,{discrete:q}){const Y=Z.originalEvent.currentTarget,$=new CustomEvent(J,{bubbles:!0,cancelable:!0,detail:Z});if(Q)Y.addEventListener(J,Q,{once:!0});if(q)U2(Y,$);else Y.dispatchEvent($)},CN0=function(J=()=>{}){const Q=K9(J);M7(()=>{let Z=0,q=0;return Z=window.requestAnimationFrame(()=>q=window.requestAnimationFrame(Q)),()=>{window.cancelAnimationFrame(Z),window.cancelAnimationFrame(q)}},[Q])},AN0=function(J){return J.nodeType===J.ELEMENT_NODE},kN0=function(J){const Q=[],Z=document.createTreeWalker(J,NodeFilter.SHOW_ELEMENT,{acceptNode:(q)=>{const Y=q.tagName==="INPUT"&&q.type==="hidden";if(q.disabled||q.hidden||Y)return NodeFilter.FILTER_SKIP;return q.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});while(Z.nextNode())Q.push(Z.currentNode);return Q},vI=function(J){const Q=document.activeElement;return J.some((Z)=>{if(Z===Q)return!0;return Z.focus(),document.activeElement!==Q})},Zr="ToastProvider",[gI,$N0,WN0]=wX("Toast"),[qr,U86]=n9("Toast",[WN0]),[GN0,VO]=qr(Zr),mI=(J)=>{const{__scopeToast:Q,label:Z="Notification",duration:q=5000,swipeDirection:Y="right",swipeThreshold:$=50,children:W}=J,[G,z]=p0.useState(null),[U,F]=p0.useState(0),B=p0.useRef(!1),M=p0.useRef(!1);return p0.createElement(gI.Provider,{scope:Q},p0.createElement(GN0,{scope:Q,label:Z,duration:q,swipeDirection:Y,swipeThreshold:$,toastCount:U,viewport:G,onViewportChange:z,onToastAdd:p0.useCallback(()=>F((O)=>O+1),[]),onToastRemove:p0.useCallback(()=>F((O)=>O-1),[]),isFocusedToastEscapeKeyDownRef:B,isClosePausedRef:M},W))};mI.propTypes={label(J){if(J.label&&typeof J.label==="string"&&!J.label.trim()){const Q=`Invalid prop \`label\` supplied to \`${Zr}\`. Expected non-empty \`string\`.`;return new Error(Q)}return null}};var HN0="ToastViewport",zN0=["F8"],SI="toast.viewportPause",fI="toast.viewportResume",Xr=p0.forwardRef((J,Q)=>{const{__scopeToast:Z,hotkey:q=zN0,label:Y="Notifications ({hotkey})",...$}=J,W=VO(HN0,Z),G=$N0(Z),z=p0.useRef(null),U=p0.useRef(null),F=p0.useRef(null),B=p0.useRef(null),M=l6(Q,B,W.onViewportChange),O=q.join("+").replace(/Key/g,"").replace(/Digit/g,""),R=W.toastCount>0;p0.useEffect(()=>{const E=(_)=>{var A;if(q.every((T)=>_[T]||_.code===T))(A=B.current)===null||A===void 0||A.focus()};return document.addEventListener("keydown",E),()=>document.removeEventListener("keydown",E)},[q]),p0.useEffect(()=>{const E=z.current,_=B.current;if(R&&E&&_){const A=()=>{if(!W.isClosePausedRef.current){const P=new CustomEvent(SI);_.dispatchEvent(P),W.isClosePausedRef.current=!0}},w=()=>{if(W.isClosePausedRef.current){const P=new CustomEvent(fI);_.dispatchEvent(P),W.isClosePausedRef.current=!1}},T=(P)=>{if(!E.contains(P.relatedTarget))w()},k=()=>{if(!E.contains(document.activeElement))w()};return E.addEventListener("focusin",A),E.addEventListener("focusout",T),E.addEventListener("pointermove",A),E.addEventListener("pointerleave",k),window.addEventListener("blur",A),window.addEventListener("focus",w),()=>{E.removeEventListener("focusin",A),E.removeEventListener("focusout",T),E.removeEventListener("pointermove",A),E.removeEventListener("pointerleave",k),window.removeEventListener("blur",A),window.removeEventListener("focus",w)}}},[R,W.isClosePausedRef]);const V=p0.useCallback(({tabbingDirection:E})=>{const A=G().map((w)=>{const T=w.ref.current,k=[T,...kN0(T)];return E==="forwards"?k:k.reverse()});return(E==="forwards"?A.reverse():A).flat()},[G]);return p0.useEffect(()=>{const E=B.current;if(E){const _=(A)=>{const w=A.altKey||A.ctrlKey||A.metaKey;if(A.key==="Tab"&&!w){const p=document.activeElement,s=A.shiftKey;if(A.target===E&&s){var k;(k=U.current)===null||k===void 0||k.focus();return}const X0=V({tabbingDirection:s?"backwards":"forwards"}),J0=X0.findIndex((Q0)=>Q0===p);if(vI(X0.slice(J0+1)))A.preventDefault();else{var P,y;s?(P=U.current)===null||P===void 0||P.focus():(y=F.current)===null||y===void 0||y.focus()}}};return E.addEventListener("keydown",_),()=>E.removeEventListener("keydown",_)}},[G,V]),p0.createElement(rs,{ref:z,role:"region","aria-label":Y.replace("{hotkey}",O),tabIndex:-1,style:{pointerEvents:R?void 0:"none"}},R&&p0.createElement(es,{ref:U,onFocusFromOutsideViewport:()=>{const E=V({tabbingDirection:"forwards"});vI(E)}}),p0.createElement(gI.Slot,{scope:Z},p0.createElement(m6.ol,D0({tabIndex:-1},$,{ref:M}))),R&&p0.createElement(es,{ref:F,onFocusFromOutsideViewport:()=>{const E=V({tabbingDirection:"backwards"});vI(E)}}))});var UN0="ToastFocusProxy",es=p0.forwardRef((J,Q)=>{const{__scopeToast:Z,onFocusFromOutsideViewport:q,...Y}=J,$=VO(UN0,Z);return p0.createElement(yI,D0({"aria-hidden":!0,tabIndex:0},Y,{ref:Q,style:{position:"fixed"},onFocus:(W)=>{var G;const z=W.relatedTarget;if(!((G=$.viewport)!==null&&G!==void 0&&G.contains(z)))q()}}))});var DO="Toast",LN0="toast.swipeStart",FN0="toast.swipeMove",BN0="toast.swipeCancel",NN0="toast.swipeEnd",MN0=p0.forwardRef((J,Q)=>{const{forceMount:Z,open:q,defaultOpen:Y,onOpenChange:$,...W}=J,[G=!0,z]=O7({prop:q,defaultProp:Y,onChange:$});return p0.createElement(s7,{present:Z||G},p0.createElement(Yr,D0({open:G},W,{ref:Q,onClose:()=>z(!1),onPause:K9(J.onPause),onResume:K9(J.onResume),onSwipeStart:s0(J.onSwipeStart,(U)=>{U.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:s0(J.onSwipeMove,(U)=>{const{x:F,y:B}=U.detail.delta;U.currentTarget.setAttribute("data-swipe","move"),U.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${F}px`),U.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${B}px`)}),onSwipeCancel:s0(J.onSwipeCancel,(U)=>{U.currentTarget.setAttribute("data-swipe","cancel"),U.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),U.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),U.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),U.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:s0(J.onSwipeEnd,(U)=>{const{x:F,y:B}=U.detail.delta;U.currentTarget.setAttribute("data-swipe","end"),U.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),U.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),U.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${F}px`),U.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${B}px`),z(!1)})})))});var[ON0,VN0]=qr(DO,{onClose(){}}),Yr=p0.forwardRef((J,Q)=>{const{__scopeToast:Z,type:q="foreground",duration:Y,open:$,onClose:W,onEscapeKeyDown:G,onPause:z,onResume:U,onSwipeStart:F,onSwipeMove:B,onSwipeCancel:M,onSwipeEnd:O,...R}=J,V=VO(DO,Z),[E,_]=p0.useState(null),A=l6(Q,(Q0)=>_(Q0)),w=p0.useRef(null),T=p0.useRef(null),k=Y||V.duration,P=p0.useRef(0),y=p0.useRef(k),p=p0.useRef(0),{onToastAdd:s,onToastRemove:c}=V,t=K9(()=>{var Q0;if(E===null||E===void 0?void 0:E.contains(document.activeElement))(Q0=V.viewport)===null||Q0===void 0||Q0.focus();W()}),X0=p0.useCallback((Q0)=>{if(!Q0||Q0===Infinity)return;window.clearTimeout(p.current),P.current=(new Date()).getTime(),p.current=window.setTimeout(t,Q0)},[t]);p0.useEffect(()=>{const Q0=V.viewport;if(Q0){const a=()=>{X0(y.current),U===null||U===void 0||U()},_0=()=>{const T0=(new Date()).getTime()-P.current;y.current=y.current-T0,window.clearTimeout(p.current),z===null||z===void 0||z()};return Q0.addEventListener(SI,_0),Q0.addEventListener(fI,a),()=>{Q0.removeEventListener(SI,_0),Q0.removeEventListener(fI,a)}}},[V.viewport,k,z,U,X0]),p0.useEffect(()=>{if($&&!V.isClosePausedRef.current)X0(k)},[$,k,V.isClosePausedRef,X0]),p0.useEffect(()=>{return s(),()=>c()},[s,c]);const J0=p0.useMemo(()=>{return E?Gr(E):null},[E]);if(!V.viewport)return null;return p0.createElement(p0.Fragment,null,J0&&p0.createElement(DN0,{__scopeToast:Z,role:"status","aria-live":q==="foreground"?"assertive":"polite","aria-atomic":!0},J0),p0.createElement(ON0,{scope:Z,onClose:t},Qr.createPortal(p0.createElement(gI.ItemSlot,{scope:Z},p0.createElement(ss,{asChild:!0,onEscapeKeyDown:s0(G,()=>{if(!V.isFocusedToastEscapeKeyDownRef.current)t();V.isFocusedToastEscapeKeyDownRef.current=!1})},p0.createElement(m6.li,D0({role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":$?"open":"closed","data-swipe-direction":V.swipeDirection},R,{ref:A,style:{userSelect:"none",touchAction:"none",...J.style},onKeyDown:s0(J.onKeyDown,(Q0)=>{if(Q0.key!=="Escape")return;if(G===null||G===void 0||G(Q0.nativeEvent),!Q0.nativeEvent.defaultPrevented)V.isFocusedToastEscapeKeyDownRef.current=!0,t()}),onPointerDown:s0(J.onPointerDown,(Q0)=>{if(Q0.button!==0)return;w.current={x:Q0.clientX,y:Q0.clientY}}),onPointerMove:s0(J.onPointerMove,(Q0)=>{if(!w.current)return;const a=Q0.clientX-w.current.x,_0=Q0.clientY-w.current.y,T0=Boolean(T.current),r0=["left","right"].includes(V.swipeDirection),C0=["left","up"].includes(V.swipeDirection)?Math.min:Math.max,k0=r0?C0(0,a):0,b0=!r0?C0(0,_0):0,K6=Q0.pointerType==="touch"?10:2,b6={x:k0,y:b0},I8={originalEvent:Q0,delta:b6};if(T0)T.current=b6,OO(FN0,B,I8,{discrete:!1});else if(Jr(b6,V.swipeDirection,K6))T.current=b6,OO(LN0,F,I8,{discrete:!1}),Q0.target.setPointerCapture(Q0.pointerId);else if(Math.abs(a)>K6||Math.abs(_0)>K6)w.current=null}),onPointerUp:s0(J.onPointerUp,(Q0)=>{const a=T.current,_0=Q0.target;if(_0.hasPointerCapture(Q0.pointerId))_0.releasePointerCapture(Q0.pointerId);if(T.current=null,w.current=null,a){const T0=Q0.currentTarget,r0={originalEvent:Q0,delta:a};if(Jr(a,V.swipeDirection,V.swipeThreshold))OO(NN0,O,r0,{discrete:!0});else OO(BN0,M,r0,{discrete:!0});T0.addEventListener("click",(C0)=>C0.preventDefault(),{once:!0})}})})))),V.viewport)))});Yr.propTypes={type(J){if(J.type&&!["foreground","background"].includes(J.type)){const Q=`Invalid prop \`type\` supplied to \`${DO}\`. Expected \`foreground | background\`.`;return new Error(Q)}return null}};var DN0=(J)=>{const{__scopeToast:Q,children:Z,...q}=J,Y=VO(DO,Q),[$,W]=p0.useState(!1),[G,z]=p0.useState(!1);return CN0(()=>W(!0)),p0.useEffect(()=>{const U=window.setTimeout(()=>z(!0),1000);return()=>window.clearTimeout(U)},[]),G?null:p0.createElement(IX,{asChild:!0},p0.createElement(yI,q,$&&p0.createElement(p0.Fragment,null,Y.label," ",Z)))};var RN0=p0.forwardRef((J,Q)=>{const{__scopeToast:Z,...q}=J;return p0.createElement(m6.div,D0({},q,{ref:Q}))});var jN0=p0.forwardRef((J,Q)=>{const{__scopeToast:Z,...q}=J;return p0.createElement(m6.div,D0({},q,{ref:Q}))});var _N0="ToastAction",Kr=p0.forwardRef((J,Q)=>{const{altText:Z,...q}=J;if(!Z)return null;return p0.createElement(Wr,{altText:Z,asChild:!0},p0.createElement($r,D0({},q,{ref:Q})))});Kr.propTypes={altText(J){if(!J.altText)return new Error(`Missing prop \`altText\` expected on \`${_N0}\``);return null}};var EN0="ToastClose",$r=p0.forwardRef((J,Q)=>{const{__scopeToast:Z,...q}=J,Y=VN0(EN0,Z);return p0.createElement(Wr,{asChild:!0},p0.createElement(m6.button,D0({type:"button"},q,{ref:Q,onClick:s0(J.onClick,Y.onClose)})))});var Wr=p0.forwardRef((J,Q)=>{const{__scopeToast:Z,altText:q,...Y}=J;return p0.createElement(m6.div,D0({"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":q||void 0},Y,{ref:Q}))}),Jr=(J,Q,Z=0)=>{const q=Math.abs(J.x),Y=Math.abs(J.y),$=q>Y;if(Q==="left"||Q==="right")return $&&q>Z;else return!$&&Y>Z};var Hr=MN0,zr=RN0,Ur=jN0,Lr=Kr,hI=$r;var $60=v(p8(),1),iV=v(o(),1);var yQ=v(W0(),1);var h6=v(o(),1);var uI=v(o(),1);var r7=function(J){const[Q,Z]=uI.useState(IN0());return M7(()=>{if(!J)Z((q)=>q!==null&&q!==void 0?q:String(PN0++))},[J]),J||(Q?`radix-${Q}`:"")},IN0=uI["useId".toString()]||(()=>{return}),PN0=0;var a7=v(o(),1);var TN0=function(J,{select:Q=!1}={}){const Z=document.activeElement;for(let q of J)if(TX(q,{select:Q}),document.activeElement!==Z)return},bN0=function(J){const Q=Or(J),Z=Br(Q,J),q=Br(Q.reverse(),J);return[Z,q]},Or=function(J){const Q=[],Z=document.createTreeWalker(J,NodeFilter.SHOW_ELEMENT,{acceptNode:(q)=>{const Y=q.tagName==="INPUT"&&q.type==="hidden";if(q.disabled||q.hidden||Y)return NodeFilter.FILTER_SKIP;return q.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});while(Z.nextNode())Q.push(Z.currentNode);return Q},Br=function(J,Q){for(let Z of J)if(!xN0(Z,{upTo:Q}))return Z},xN0=function(J,{upTo:Q}){if(getComputedStyle(J).visibility==="hidden")return!0;while(J){if(Q!==void 0&&J===Q)return!1;if(getComputedStyle(J).display==="none")return!0;J=J.parentElement}return!1},yN0=function(J){return J instanceof HTMLInputElement&&"select"in J},TX=function(J,{select:Q=!1}={}){if(J&&J.focus){const Z=document.activeElement;if(J.focus({preventScroll:!0}),J!==Z&&yN0(J)&&Q)J.select()}},vN0=function(){let J=[];return{add(Q){const Z=J[0];if(Q!==Z)Z===null||Z===void 0||Z.pause();J=Mr(J,Q),J.unshift(Q)},remove(Q){var Z;J=Mr(J,Q),(Z=J[0])===null||Z===void 0||Z.resume()}}},Mr=function(J,Q){const Z=[...J],q=Z.indexOf(Q);if(q!==-1)Z.splice(q,1);return Z},SN0=function(J){return J.filter((Q)=>Q.tagName!=="A")},cI="focusScope.autoFocusOnMount",pI="focusScope.autoFocusOnUnmount",Fr={bubbles:!1,cancelable:!0};var F2=a7.forwardRef((J,Q)=>{const{loop:Z=!1,trapped:q=!1,onMountAutoFocus:Y,onUnmountAutoFocus:$,...W}=J,[G,z]=a7.useState(null),U=K9(Y),F=K9($),B=a7.useRef(null),M=l6(Q,(V)=>z(V)),O=a7.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;a7.useEffect(()=>{if(q){let V=function(w){if(O.paused||!G)return;const T=w.target;if(G.contains(T))B.current=T;else TX(B.current,{select:!0})},E=function(w){if(O.paused||!G)return;const T=w.relatedTarget;if(T===null)return;if(!G.contains(T))TX(B.current,{select:!0})},_=function(w){if(document.activeElement!==document.body)return;for(let k of w)if(k.removedNodes.length>0)TX(G)};document.addEventListener("focusin",V),document.addEventListener("focusout",E);const A=new MutationObserver(_);if(G)A.observe(G,{childList:!0,subtree:!0});return()=>{document.removeEventListener("focusin",V),document.removeEventListener("focusout",E),A.disconnect()}}},[q,G,O.paused]),a7.useEffect(()=>{if(G){Nr.add(O);const V=document.activeElement;if(!G.contains(V)){const _=new CustomEvent(cI,Fr);if(G.addEventListener(cI,U),G.dispatchEvent(_),!_.defaultPrevented){if(TN0(SN0(Or(G)),{select:!0}),document.activeElement===V)TX(G)}}return()=>{G.removeEventListener(cI,U),setTimeout(()=>{const _=new CustomEvent(pI,Fr);if(G.addEventListener(pI,F),G.dispatchEvent(_),!_.defaultPrevented)TX(V!==null&&V!==void 0?V:document.body,{select:!0});G.removeEventListener(pI,F),Nr.remove(O)},0)}}},[G,U,F,O]);const R=a7.useCallback((V)=>{if(!Z&&!q)return;if(O.paused)return;const E=V.key==="Tab"&&!V.altKey&&!V.ctrlKey&&!V.metaKey,_=document.activeElement;if(E&&_){const A=V.currentTarget,[w,T]=bN0(A);if(!(w&&T)){if(_===A)V.preventDefault()}else if(!V.shiftKey&&_===T){if(V.preventDefault(),Z)TX(w,{select:!0})}else if(V.shiftKey&&_===w){if(V.preventDefault(),Z)TX(T,{select:!0})}}},[Z,q,O.paused]);return a7.createElement(m6.div,D0({tabIndex:-1},W,{ref:M,onKeyDown:R}))});var Nr=vN0();var Dr=v(o(),1);var B2=function(){Dr.useEffect(()=>{var J,Q;const Z=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(J=Z[0])!==null&&J!==void 0?J:Vr()),document.body.insertAdjacentElement("beforeend",(Q=Z[1])!==null&&Q!==void 0?Q:Vr()),dI++,()=>{if(dI===1)document.querySelectorAll("[data-radix-focus-guard]").forEach((q)=>q.remove());dI--}},[])},Vr=function(){const J=document.createElement("span");return J.setAttribute("data-radix-focus-guard",""),J.tabIndex=0,J.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",J},dI=0;function RO(J,Q){var Z={};for(var q in J)if(Object.prototype.hasOwnProperty.call(J,q)&&Q.indexOf(q)<0)Z[q]=J[q];if(J!=null&&typeof Object.getOwnPropertySymbols==="function"){for(var Y=0,q=Object.getOwnPropertySymbols(J);Y<q.length;Y++)if(Q.indexOf(q[Y])<0&&Object.prototype.propertyIsEnumerable.call(J,q[Y]))Z[q[Y]]=J[q[Y]]}return Z}function Rr(J,Q,Z){if(Z||arguments.length===2){for(var q=0,Y=Q.length,$;q<Y;q++)if($||!(q in Q)){if(!$)$=Array.prototype.slice.call(Q,0,q);$[q]=Q[q]}}return J.concat($||Array.prototype.slice.call(Q))}var o7=function(){return o7=Object.assign||function J(Q){for(var Z,q=1,Y=arguments.length;q<Y;q++){Z=arguments[q];for(var $ in Z)if(Object.prototype.hasOwnProperty.call(Z,$))Q[$]=Z[$]}return Q},o7.apply(this,arguments)};var wO=v(o(),1);var aJ=v(o(),1);var RK="right-scroll-bar-position",jK="width-before-scroll-bar",lI="with-scroll-bars-hidden",iI="--removed-body-scroll-bar-size";function jO(J,Q){if(typeof J==="function")J(Q);else if(J)J.current=Q;return J}var jr=v(o(),1);function _r(J,Q){var Z=jr.useState(function(){return{value:J,callback:Q,facade:{get current(){return Z.value},set current(q){var Y=Z.value;if(Y!==q)Z.value=q,Z.callback(q,Y)}}}})[0];return Z.callback=Q,Z.facade}var _O=v(o(),1);function nI(J,Q){var Z=_r(Q||null,function(q){return J.forEach(function(Y){return jO(Y,q)})});return fN0(function(){var q=Er.get(Z);if(q){var Y=new Set(q),$=new Set(J),W=Z.current;Y.forEach(function(G){if(!$.has(G))jO(G,null)}),$.forEach(function(G){if(!Y.has(G))jO(G,W)})}Er.set(Z,J)},[J]),Z}var fN0=typeof window!=="undefined"?_O.useLayoutEffect:_O.useEffect,Er=new WeakMap;var mN0=v(o(),1);var Cr=v(o(),1);var hN0=function(J){return J},uN0=function(J,Q){if(Q===void 0)Q=hN0;var Z=[],q=!1,Y={read:function(){if(q)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");if(Z.length)return Z[Z.length-1];return J},useMedium:function($){var W=Q($,q);return Z.push(W),function(){Z=Z.filter(function(G){return G!==W})}},assignSyncMedium:function($){q=!0;while(Z.length){var W=Z;Z=[],W.forEach($)}Z={push:function(G){return $(G)},filter:function(){return Z}}},assignMedium:function($){q=!0;var W=[];if(Z.length){var G=Z;Z=[],G.forEach($),W=Z}var z=function(){var F=W;W=[],F.forEach($)},U=function(){return Promise.resolve().then(z)};U(),Z={push:function(F){W.push(F),U()},filter:function(F){return W=W.filter(F),Z}}}};return Y};function sI(J){if(J===void 0)J={};var Q=uN0(null);return Q.options=o7({async:!0,ssr:!1},J),Q}var EO=v(o(),1),CO=v(o(),1);var Ar=v(o(),1);function rI(J,Q){return J.useMedium(Q),kr}var kr=function(J){var Q=J.sideCar,Z=RO(J,["sideCar"]);if(!Q)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var q=Q.read();if(!q)throw new Error("Sidecar medium not found");return Ar.createElement(q,o7({},Z))};kr.isSideCarExport=!0;var AO=sI();var aI=function(){return},l3=aJ.forwardRef(function(J,Q){var Z=aJ.useRef(null),q=aJ.useState({onScrollCapture:aI,onWheelCapture:aI,onTouchMoveCapture:aI}),Y=q[0],$=q[1],W=J.forwardProps,G=J.children,z=J.className,U=J.removeScrollBar,F=J.enabled,B=J.shards,M=J.sideCar,O=J.noIsolation,R=J.inert,V=J.allowPinchZoom,E=J.as,_=E===void 0?"div":E,A=RO(J,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),w=M,T=nI([Z,Q]),k=o7(o7({},A),Y);return aJ.createElement(aJ.Fragment,null,F&&aJ.createElement(w,{sideCar:AO,removeScrollBar:U,shards:B,noIsolation:O,inert:R,setCallbacks:$,allowPinchZoom:!!V,lockRef:Z}),W?aJ.cloneElement(aJ.Children.only(G),o7(o7({},k),{ref:T})):aJ.createElement(_,o7({},k,{className:z,ref:T}),G))});l3.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};l3.classNames={fullWidth:jK,zeroRight:RK};var k9=v(o(),1);var M2=v(o(),1);var Pr=v(o(),1);var wr;var Ir=function(){if(wr)return wr;if(typeof __webpack_nonce__!=="undefined")return __webpack_nonce__;return};var cN0=function(){if(!document)return null;var J=document.createElement("style");J.type="text/css";var Q=Ir();if(Q)J.setAttribute("nonce",Q);return J},pN0=function(J,Q){if(J.styleSheet)J.styleSheet.cssText=Q;else J.appendChild(document.createTextNode(Q))},dN0=function(J){var Q=document.head||document.getElementsByTagName("head")[0];Q.appendChild(J)},oI=function(){var J=0,Q=null;return{add:function(Z){if(J==0){if(Q=cN0())pN0(Q,Z),dN0(Q)}J++},remove:function(){if(J--,!J&&Q)Q.parentNode&&Q.parentNode.removeChild(Q),Q=null}}};var tI=function(){var J=oI();return function(Q,Z){Pr.useEffect(function(){return J.add(Q),function(){J.remove()}},[Q&&Z])}};var i3=function(){var J=tI(),Q=function(Z){var{styles:q,dynamic:Y}=Z;return J(q,Y),null};return Q};var lN0={left:0,top:0,right:0,gap:0},eI=function(J){return parseInt(J||"",10)||0},iN0=function(J){var Q=window.getComputedStyle(document.body),Z=Q[J==="padding"?"paddingLeft":"marginLeft"],q=Q[J==="padding"?"paddingTop":"marginTop"],Y=Q[J==="padding"?"paddingRight":"marginRight"];return[eI(Z),eI(q),eI(Y)]},JP=function(J){if(J===void 0)J="margin";if(typeof window==="undefined")return lN0;var Q=iN0(J),Z=document.documentElement.clientWidth,q=window.innerWidth;return{left:Q[0],top:Q[1],right:Q[2],gap:Math.max(0,q-Z+Q[2]-Q[0])}};var nN0=i3(),N2="data-scroll-locked",sN0=function(J,Q,Z,q){var{left:Y,top:$,right:W,gap:G}=J;if(Z===void 0)Z="margin";return"\n  .".concat(lI," {\n   overflow: hidden ").concat(q,";\n   padding-right: ").concat(G,"px ").concat(q,";\n  }\n  body[").concat(N2,"] {\n    overflow: hidden ").concat(q,";\n    overscroll-behavior: contain;\n    ").concat([Q&&"position: relative ".concat(q,";"),Z==="margin"&&"\n    padding-left: ".concat(Y,"px;\n    padding-top: ").concat($,"px;\n    padding-right: ").concat(W,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(G,"px ").concat(q,";\n    "),Z==="padding"&&"padding-right: ".concat(G,"px ").concat(q,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(RK," {\n    right: ").concat(G,"px ").concat(q,";\n  }\n  \n  .").concat(jK," {\n    margin-right: ").concat(G,"px ").concat(q,";\n  }\n  \n  .").concat(RK," .").concat(RK," {\n    right: 0 ").concat(q,";\n  }\n  \n  .").concat(jK," .").concat(jK," {\n    margin-right: 0 ").concat(q,";\n  }\n  \n  body[").concat(N2,"] {\n    ").concat(iI,": ").concat(G,"px;\n  }\n")},Tr=function(){var J=parseInt(document.body.getAttribute(N2)||"0",10);return isFinite(J)?J:0},rN0=function(){M2.useEffect(function(){return document.body.setAttribute(N2,(Tr()+1).toString()),function(){var J=Tr()-1;if(J<=0)document.body.removeAttribute(N2);else document.body.setAttribute(N2,J.toString())}},[])},QP=function(J){var{noRelative:Q,noImportant:Z,gapMode:q}=J,Y=q===void 0?"margin":q;rN0();var $=M2.useMemo(function(){return JP(Y)},[Y]);return M2.createElement(nN0,{styles:sN0($,!Q,Y,!Z?"!important":"")})};var ZP=!1;if(typeof window!=="undefined")try{n3=Object.defineProperty({},"passive",{get:function(){return ZP=!0,!0}}),window.addEventListener("test",n3,n3),window.removeEventListener("test",n3,n3)}catch(J){ZP=!1}var n3,_K=ZP?{passive:!1}:!1;var aN0=function(J){return J.tagName==="TEXTAREA"},br=function(J,Q){var Z=window.getComputedStyle(J);return Z[Q]!=="hidden"&&!(Z.overflowY===Z.overflowX&&!aN0(J)&&Z[Q]==="visible")},oN0=function(J){return br(J,"overflowY")},tN0=function(J){return br(J,"overflowX")},qP=function(J,Q){var Z=Q;do{if(typeof ShadowRoot!=="undefined"&&Z instanceof ShadowRoot)Z=Z.host;var q=xr(J,Z);if(q){var Y=yr(J,Z),$=Y[1],W=Y[2];if($>W)return!0}Z=Z.parentNode}while(Z&&Z!==document.body);return!1},eN0=function(J){var{scrollTop:Q,scrollHeight:Z,clientHeight:q}=J;return[Q,Z,q]},JM0=function(J){var{scrollLeft:Q,scrollWidth:Z,clientWidth:q}=J;return[Q,Z,q]},xr=function(J,Q){return J==="v"?oN0(Q):tN0(Q)},yr=function(J,Q){return J==="v"?eN0(Q):JM0(Q)},QM0=function(J,Q){return J==="h"&&Q==="rtl"?-1:1},vr=function(J,Q,Z,q,Y){var $=QM0(J,window.getComputedStyle(Q).direction),W=$*q,G=Z.target,z=Q.contains(G),U=!1,F=W>0,B=0,M=0;do{var O=yr(J,G),R=O[0],V=O[1],E=O[2],_=V-E-$*R;if(R||_){if(xr(J,G))B+=_,M+=R}G=G.parentNode}while(!z&&G!==document.body||z&&(Q.contains(G)||Q===G));if(F&&(Y&&B===0||!Y&&W>B))U=!0;else if(!F&&(Y&&M===0||!Y&&-W>M))U=!0;return U};function gr(J){var Q=k9.useRef([]),Z=k9.useRef([0,0]),q=k9.useRef(),Y=k9.useState(XM0++)[0],$=k9.useState(function(){return i3()})[0],W=k9.useRef(J);k9.useEffect(function(){W.current=J},[J]),k9.useEffect(function(){if(J.inert){document.body.classList.add("block-interactivity-".concat(Y));var V=Rr([J.lockRef.current],(J.shards||[]).map(fr),!0).filter(Boolean);return V.forEach(function(E){return E.classList.add("allow-interactivity-".concat(Y))}),function(){document.body.classList.remove("block-interactivity-".concat(Y)),V.forEach(function(E){return E.classList.remove("allow-interactivity-".concat(Y))})}}return},[J.inert,J.lockRef.current,J.shards]);var G=k9.useCallback(function(V,E){if("touches"in V&&V.touches.length===2)return!W.current.allowPinchZoom;var _=kO(V),A=Z.current,w="deltaX"in V?V.deltaX:A[0]-_[0],T="deltaY"in V?V.deltaY:A[1]-_[1],k,P=V.target,y=Math.abs(w)>Math.abs(T)?"h":"v";if("touches"in V&&y==="h"&&P.type==="range")return!1;var p=qP(y,P);if(!p)return!0;if(p)k=y;else k=y==="v"?"h":"v",p=qP(y,P);if(!p)return!1;if(!q.current&&"changedTouches"in V&&(w||T))q.current=k;if(!k)return!0;var s=q.current||k;return vr(s,E,V,s==="h"?w:T,!0)},[]),z=k9.useCallback(function(V){var E=V;if(!O2.length||O2[O2.length-1]!==$)return;var _="deltaY"in E?Sr(E):kO(E),A=Q.current.filter(function(k){return k.name===E.type&&k.target===E.target&&ZM0(k.delta,_)})[0];if(A&&A.should){if(E.cancelable)E.preventDefault();return}if(!A){var w=(W.current.shards||[]).map(fr).filter(Boolean).filter(function(k){return k.contains(E.target)}),T=w.length>0?G(E,w[0]):!W.current.noIsolation;if(T){if(E.cancelable)E.preventDefault()}}},[]),U=k9.useCallback(function(V,E,_,A){var w={name:V,delta:E,target:_,should:A};Q.current.push(w),setTimeout(function(){Q.current=Q.current.filter(function(T){return T!==w})},1)},[]),F=k9.useCallback(function(V){Z.current=kO(V),q.current=void 0},[]),B=k9.useCallback(function(V){U(V.type,Sr(V),V.target,G(V,J.lockRef.current))},[]),M=k9.useCallback(function(V){U(V.type,kO(V),V.target,G(V,J.lockRef.current))},[]);k9.useEffect(function(){return O2.push($),J.setCallbacks({onScrollCapture:B,onWheelCapture:B,onTouchMoveCapture:M}),document.addEventListener("wheel",z,_K),document.addEventListener("touchmove",z,_K),document.addEventListener("touchstart",F,_K),function(){O2=O2.filter(function(V){return V!==$}),document.removeEventListener("wheel",z,_K),document.removeEventListener("touchmove",z,_K),document.removeEventListener("touchstart",F,_K)}},[]);var{removeScrollBar:O,inert:R}=J;return k9.createElement(k9.Fragment,null,R?k9.createElement($,{styles:qM0(Y)}):null,O?k9.createElement(QP,{gapMode:"margin"}):null)}var kO=function(J){return"changedTouches"in J?[J.changedTouches[0].clientX,J.changedTouches[0].clientY]:[0,0]},Sr=function(J){return[J.deltaX,J.deltaY]},fr=function(J){return J&&"current"in J?J.current:J},ZM0=function(J,Q){return J[0]===Q[0]&&J[1]===Q[1]},qM0=function(J){return"\n  .block-interactivity-".concat(J," {pointer-events: none;}\n  .allow-interactivity-").concat(J," {pointer-events: all;}\n")},XM0=0,O2=[];var mr=rI(AO,gr);var hr=wO.forwardRef(function(J,Q){return wO.createElement(l3,o7({},J,{ref:Q,sideCar:mr}))});hr.classNames=l3.classNames;var EK=hr;var YM0=function(J){if(typeof document==="undefined")return null;var Q=Array.isArray(J)?J[0]:J;return Q.ownerDocument.body},V2=new WeakMap,IO=new WeakMap,PO={},XP=0,ur=function(J){return J&&(J.host||ur(J.parentNode))},KM0=function(J,Q){return Q.map(function(Z){if(J.contains(Z))return Z;var q=ur(Z);if(q&&J.contains(q))return q;return console.error("aria-hidden",Z,"in not contained inside",J,". Doing nothing"),null}).filter(function(Z){return Boolean(Z)})},$M0=function(J,Q,Z,q){var Y=KM0(Q,Array.isArray(J)?J:[J]);if(!PO[Z])PO[Z]=new WeakMap;var $=PO[Z],W=[],G=new Set,z=new Set(Y),U=function(B){if(!B||G.has(B))return;G.add(B),U(B.parentNode)};Y.forEach(U);var F=function(B){if(!B||z.has(B))return;Array.prototype.forEach.call(B.children,function(M){if(G.has(M))F(M);else try{var O=M.getAttribute(q),R=O!==null&&O!=="false",V=(V2.get(M)||0)+1,E=($.get(M)||0)+1;if(V2.set(M,V),$.set(M,E),W.push(M),V===1&&R)IO.set(M,!0);if(E===1)M.setAttribute(Z,"true");if(!R)M.setAttribute(q,"true")}catch(_){console.error("aria-hidden: cannot operate on ",M,_)}})};return F(Q),G.clear(),XP++,function(){if(W.forEach(function(B){var M=V2.get(B)-1,O=$.get(B)-1;if(V2.set(B,M),$.set(B,O),!M){if(!IO.has(B))B.removeAttribute(q);IO.delete(B)}if(!O)B.removeAttribute(Z)}),XP--,!XP)V2=new WeakMap,V2=new WeakMap,IO=new WeakMap,PO={}}},D2=function(J,Q,Z){if(Z===void 0)Z="data-aria-hidden";var q=Array.from(Array.isArray(J)?J:[J]),Y=Q||YM0(J);if(!Y)return function(){return null};return q.push.apply(q,Array.from(Y.querySelectorAll("[aria-live]"))),$M0(q,Y,Z,"aria-hidden")};var ar=function(J){return J?"open":"closed"},cr="Dialog",[pr,G56]=n9(cr),[WM0,nZ]=pr(cr),GM0=(J)=>{const{__scopeDialog:Q,children:Z,open:q,defaultOpen:Y,onOpenChange:$,modal:W=!0}=J,G=h6.useRef(null),z=h6.useRef(null),[U=!1,F]=O7({prop:q,defaultProp:Y,onChange:$});return h6.createElement(WM0,{scope:Q,triggerRef:G,contentRef:z,contentId:r7(),titleId:r7(),descriptionId:r7(),open:U,onOpenChange:F,onOpenToggle:h6.useCallback(()=>F((B)=>!B),[F]),modal:W},Z)};var dr="DialogPortal",[HM0,lr]=pr(dr,{forceMount:void 0}),zM0=(J)=>{const{__scopeDialog:Q,forceMount:Z,children:q,container:Y}=J,$=nZ(dr,Q);return h6.createElement(HM0,{scope:Q,forceMount:Z},h6.Children.map(q,(W)=>h6.createElement(s7,{present:Z||$.open},h6.createElement(IX,{asChild:!0,container:Y},W))))};var YP="DialogOverlay",UM0=h6.forwardRef((J,Q)=>{const Z=lr(YP,J.__scopeDialog),{forceMount:q=Z.forceMount,...Y}=J,$=nZ(YP,J.__scopeDialog);return $.modal?h6.createElement(s7,{present:q||$.open},h6.createElement(LM0,D0({},Y,{ref:Q}))):null});var LM0=h6.forwardRef((J,Q)=>{const{__scopeDialog:Z,...q}=J,Y=nZ(YP,Z);return h6.createElement(EK,{as:Y1,allowPinchZoom:!0,shards:[Y.contentRef]},h6.createElement(m6.div,D0({"data-state":ar(Y.open)},q,{ref:Q,style:{pointerEvents:"auto",...q.style}})))}),R2="DialogContent",FM0=h6.forwardRef((J,Q)=>{const Z=lr(R2,J.__scopeDialog),{forceMount:q=Z.forceMount,...Y}=J,$=nZ(R2,J.__scopeDialog);return h6.createElement(s7,{present:q||$.open},$.modal?h6.createElement(BM0,D0({},Y,{ref:Q})):h6.createElement(NM0,D0({},Y,{ref:Q})))});var BM0=h6.forwardRef((J,Q)=>{const Z=nZ(R2,J.__scopeDialog),q=h6.useRef(null),Y=l6(Q,Z.contentRef,q);return h6.useEffect(()=>{const $=q.current;if($)return D2($)},[]),h6.createElement(ir,D0({},J,{ref:Y,trapFocus:Z.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:s0(J.onCloseAutoFocus,($)=>{var W;$.preventDefault(),(W=Z.triggerRef.current)===null||W===void 0||W.focus()}),onPointerDownOutside:s0(J.onPointerDownOutside,($)=>{const W=$.detail.originalEvent,G=W.button===0&&W.ctrlKey===!0;if(W.button===2||G)$.preventDefault()}),onFocusOutside:s0(J.onFocusOutside,($)=>$.preventDefault())}))}),NM0=h6.forwardRef((J,Q)=>{const Z=nZ(R2,J.__scopeDialog),q=h6.useRef(!1),Y=h6.useRef(!1);return h6.createElement(ir,D0({},J,{ref:Q,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:($)=>{var W;if((W=J.onCloseAutoFocus)===null||W===void 0||W.call(J,$),!$.defaultPrevented){var G;if(!q.current)(G=Z.triggerRef.current)===null||G===void 0||G.focus();$.preventDefault()}q.current=!1,Y.current=!1},onInteractOutside:($)=>{var W,G;if((W=J.onInteractOutside)===null||W===void 0||W.call(J,$),!$.defaultPrevented){if(q.current=!0,$.detail.originalEvent.type==="pointerdown")Y.current=!0}const z=$.target;if((G=Z.triggerRef.current)===null||G===void 0?void 0:G.contains(z))$.preventDefault();if($.detail.originalEvent.type==="focusin"&&Y.current)$.preventDefault()}}))}),ir=h6.forwardRef((J,Q)=>{const{__scopeDialog:Z,trapFocus:q,onOpenAutoFocus:Y,onCloseAutoFocus:$,...W}=J,G=nZ(R2,Z),z=h6.useRef(null),U=l6(Q,z);return B2(),h6.createElement(h6.Fragment,null,h6.createElement(F2,{asChild:!0,loop:!0,trapped:q,onMountAutoFocus:Y,onUnmountAutoFocus:$},h6.createElement(DK,D0({role:"dialog",id:G.contentId,"aria-describedby":G.descriptionId,"aria-labelledby":G.titleId,"data-state":ar(G.open)},W,{ref:U,onDismiss:()=>G.onOpenChange(!1)}))),!1)}),nr="DialogTitle",sr=h6.forwardRef((J,Q)=>{const{__scopeDialog:Z,...q}=J,Y=nZ(nr,Z);return h6.createElement(m6.h2,D0({id:Y.titleId},q,{ref:Q}))});var MM0="DialogClose",rr=h6.forwardRef((J,Q)=>{const{__scopeDialog:Z,...q}=J,Y=nZ(MM0,Z);return h6.createElement(m6.button,D0({type:"button"},q,{ref:Q,onClick:s0(J.onClick,()=>Y.onOpenChange(!1))}))});var OM0="DialogTitleWarning",[H56,z56]=hs(OM0,{contentName:R2,titleName:nr,docsSlug:"dialog"});var or=GM0;var tr=zM0,er=UM0,Ja=FM0;var bO=v(o(),1);var Ya=v(W0(),1);var n1=v(o(),1);var Za=v(W0(),1),TO=v(o(),1),KP=function({onEvent:J,children:Q}){return Za.jsx(Xa.Provider,{value:J??qa,children:Q})},g5=function(){return TO.useContext(Xa)??qa},qa=()=>{return},Xa=TO.createContext({});var $a=function({children:J}){const Q=h(),Z=g5(),[q,Y]=n1.useState([]),$=n1.useCallback((U)=>{const F=U.id??u6();return Y((B)=>{return[...B.filter((M)=>M.id!==U.id),{...U,id:F}]}),Z("open-menu",{source:"dialog",id:F}),Q.addOpenMenu(F),F},[Q,Z]),W=n1.useCallback((U,F)=>{return Y((B)=>B.map((M)=>{if(M.id===U)return{...M,...F};return M})),Z("open-menu",{source:"dialog",id:U}),Q.addOpenMenu(U),U},[Q,Z]),G=n1.useCallback((U)=>{return Y((F)=>F.filter((B)=>{if(B.id===U)return B.onClose?.(),!1;return!0})),Z("close-menu",{source:"dialog",id:U}),Q.deleteOpenMenu(U),U},[Q,Z]),z=n1.useCallback(()=>{Y((U)=>{return U.forEach((F)=>{F.onClose?.(),Z("close-menu",{source:"dialog",id:F.id}),Q.deleteOpenMenu(F.id)}),[]})},[Q,Z]);return Ya.jsx(Ka.Provider,{value:{dialogs:q,addDialog:$,removeDialog:G,clearDialogs:z,updateDialog:W},children:J})},t7=function(){const J=n1.useContext(Ka);if(!J)throw new Error("useDialogs must be used within a DialogsProvider");return J},Ka=n1.createContext({});var DM0=function(){const{dialogs:J}=t7();return yQ.jsx(yQ.Fragment,{children:J.map((Q)=>yQ.jsx(VM0,{...Q},Q.id))})},VM0=({id:J,component:Q,onClose:Z})=>{const{removeDialog:q}=t7(),Y=y8(),$=bO.useCallback((W)=>{if(!W){if(Z)try{Z()}catch(G){console.warn(G)}q(J)}},[J,Z,q]);return yQ.jsx(or,{onOpenChange:$,defaultOpen:!0,children:yQ.jsx(tr,{container:Y,children:yQ.jsx(er,{dir:"ltr",className:"tlui-dialog__overlay",onClick:(W)=>{if(W.target===W.currentTarget)$(!1)},children:yQ.jsx(Ja,{dir:"ltr",className:"tlui-dialog__content",children:yQ.jsx(Q,{onClose:()=>$(!1)})})})})})},Wa=bO.default.memo(DM0);var $P=v(W0(),1);var Ga=function(){const J=h(),Q=e("follow",()=>J.getInstanceState().followingUserId,[J]);if(!Q)return null;return $P.jsx(RM0,{userId:Q})},RM0=function({userId:J}){const Q=J3(J);if(!Q)return null;return $P.jsx("div",{className:"tlui-following-indicator",style:{borderColor:Q.color}})};var y9=v(W0(),1);var _2=v(o(),1);var Ha=v(W0(),1);var vQ=v(o(),1),Ua=function({children:J}){const[Q,Z]=vQ.useState([]),q=vQ.useCallback((W)=>{const G=W.id??u6();return Z((z)=>[...z.filter((U)=>U.id!==W.id),{...W,id:G}]),G},[]),Y=vQ.useCallback((W)=>{return Z((G)=>G.filter((z)=>z.id!==W)),W},[]),$=vQ.useCallback(()=>{Z(()=>[])},[]);return Ha.jsx(za.Provider,{value:{toasts:Q,addToast:q,removeToast:Y,clearToasts:$},children:J})},q5=function(){const J=vQ.useContext(za);if(!J)throw new Error("useToasts must be used within a ToastsProvider");return J},za=vQ.createContext({});var La=v(W0(),1);var Fa=v(p8(),1),Ba=v(o(),1),m0=Ba.forwardRef(function J({children:Q,disabled:Z,type:q,...Y},$){const W=h(),G=$?.current;if(Z&&G===document.activeElement)W.getContainer().focus();return La.jsx("button",{ref:$,type:"button",draggable:!1,disabled:Z,...Y,className:Fa.default("tlui-button",`tlui-button__${q}`,Y.className),children:Q})});var Na=v(W0(),1),v8=function({children:J}){return Na.jsx("span",{className:"tlui-button__label",children:J})};var Ma=v(W0(),1),Oa=v(p8(),1),j2=v(o(),1);var RJ=j2.memo(function J({small:Q,invertIcon:Z,icon:q,color:Y,className:$,...W}){const G=NK(),z=G.icons[q]??G.icons["question-mark-circle"],U=j2.useRef(null);return j2.useLayoutEffect(()=>{if(!z)console.error(`Icon not found: ${q}. Add it to the assetUrls.icons object.`);if(U?.current)U.current.style.webkitMask=`url(${z}) center 100% / 100% no-repeat`},[U,z,q]),Ma.jsx("div",{...W,ref:U,className:Oa.default("tlui-icon",{"tlui-icon__small":Q},$),style:{color:Y,mask:`url(${z}) center 100% / 100% no-repeat`,transform:Z?"scale(-1, 1)":void 0}})});var _M0=function({toast:J}){const{removeToast:Q}=q5(),Z=e0(),q=(W)=>{if(!W)Q(J.id)},Y=J.actions&&J.actions.length>0,$=J.icon||J.severity&&jM0[J.severity];return y9.jsxs(Hr,{onOpenChange:q,className:"tlui-toast__container",duration:J.keepOpen?Infinity:5000,"data-severity":J.severity,children:[$&&y9.jsx("div",{className:"tlui-toast__icon",children:y9.jsx(RJ,{icon:$})}),y9.jsxs("div",{className:"tlui-toast__main",children:[y9.jsxs("div",{className:"tlui-toast__content",children:[J.title&&y9.jsx(zr,{className:"tlui-toast__title",children:J.title}),J.description&&y9.jsx(Ur,{className:"tlui-toast__description",children:J.description})]}),J.actions&&y9.jsxs("div",{className:"tlui-toast__actions",children:[J.actions.map((W,G)=>y9.jsx(Lr,{altText:W.label,asChild:!0,onClick:W.onClick,children:y9.jsx(m0,{type:W.type,children:y9.jsx(v8,{children:W.label})})},G)),y9.jsx(hI,{asChild:!0,children:y9.jsx(m0,{type:"normal",className:"tlui-toast__close",style:{marginLeft:"auto"},children:y9.jsx(v8,{children:J.closeLabel??Z("toast.close")})})})]})]}),!Y&&y9.jsx(hI,{asChild:!0,children:y9.jsx(m0,{type:"normal",className:"tlui-toast__close",children:y9.jsx(v8,{children:J.closeLabel??Z("toast.close")})})})]})},EM0=function(){const{toasts:J}=q5();return y9.jsx(y9.Fragment,{children:J.map((Q)=>y9.jsx(_M0,{toast:Q},Q.id))})},Da=function(){const{toasts:J}=q5(),[Q,Z]=_2.useState(!1);if(_2.useEffect(()=>{let q=!1;if(J.length)Z(!0);else setTimeout(()=>{if(!q)Z(!1)},1000);return()=>{q=!0}},[J.length,Z]),!Q)return null;return y9.jsx(Xr,{className:"tlui-toast__viewport"})},jM0={success:"check-circle",warning:"warning-triangle",error:"cross-circle",info:"info-circle"},Va=_2.memo(EM0);var Ra=v(W0(),1);var L6=function({icon:J,small:Q,invertIcon:Z}){return Ra.jsx(RJ,{className:"tlui-button__icon",icon:J,small:Q,invertIcon:Z})};var xO=[0,390,428,468,580,640,840,1023],e6=((J)=>{return J[J.ZERO=0]="ZERO",J[J.MOBILE_XXS=1]="MOBILE_XXS",J[J.MOBILE_XS=2]="MOBILE_XS",J[J.MOBILE_SM=3]="MOBILE_SM",J[J.MOBILE=4]="MOBILE",J[J.TABLET_SM=5]="TABLET_SM",J[J.TABLET=6]="TABLET",J[J.DESKTOP=7]="DESKTOP",J})(e6||{});var JQ=v(W0(),1);var sZ="2.1.4";var ja=v(o(),1);var yO=function(J){return ja.useMemo(()=>{if(!J)return s3;return{fonts:{...s3.fonts,...J?.fonts}}},[J])},s3={fonts:{draw:`https://unpkg.com/@tldraw/assets@${sZ}/fonts/Shantell_Sans-Tldrawish.woff2`,serif:`https://unpkg.com/@tldraw/assets@${sZ}/fonts/IBMPlexSerif-Medium.woff2`,sansSerif:`https://unpkg.com/@tldraw/assets@${sZ}/fonts/IBMPlexSans-Medium.woff2`,monospace:`https://unpkg.com/@tldraw/assets@${sZ}/fonts/IBMPlexMono-Medium.woff2`}};var _a=["align-bottom-center","align-bottom-left","align-bottom-right","align-bottom","align-center-center","align-center-horizontal","align-center-left","align-center-right","align-center-vertical","align-left","align-right","align-top-center","align-top-left","align-top-right","align-top","arrow-left","arrowhead-arrow","arrowhead-bar","arrowhead-diamond","arrowhead-dot","arrowhead-none","arrowhead-square","arrowhead-triangle-inverted","arrowhead-triangle","aspect-ratio","avatar","blob","bring-forward","bring-to-front","check-circle","check","checkbox-checked","checkbox-empty","chevron-down","chevron-left","chevron-right","chevron-up","chevrons-ne","chevrons-sw","clipboard-copied","clipboard-copy","code","collab","color","comment","cross-2","cross-circle","cross","dash-dashed","dash-dotted","dash-draw","dash-solid","discord","distribute-horizontal","distribute-vertical","dot","dots-horizontal","dots-vertical","drag-handle-dots","duplicate","edit","error","external-link","file","fill-none","fill-pattern","fill-semi","fill-solid","follow","following","font-draw","font-mono","font-sans","font-serif","geo-arrow-down","geo-arrow-left","geo-arrow-right","geo-arrow-up","geo-check-box","geo-cloud","geo-diamond","geo-ellipse","geo-hexagon","geo-octagon","geo-oval","geo-pentagon","geo-rectangle","geo-rhombus-2","geo-rhombus","geo-star","geo-trapezoid","geo-triangle","geo-x-box","github","group","hidden","image","info-circle","leading","link","lock-small","lock","menu","minus","mixed","pack","page","plus","question-mark-circle","question-mark","redo","reset-zoom","rotate-ccw","rotate-cw","ruler","search","send-backward","send-to-back","settings-horizontal","settings-vertical-1","settings-vertical","share-1","share-2","size-extra-large","size-large","size-medium","size-small","spline-cubic","spline-line","stack-horizontal","stack-vertical","status-offline","status-online","stretch-horizontal","stretch-vertical","text-align-center","text-align-justify","text-align-left","text-align-right","tool-arrow","tool-embed","tool-eraser","tool-frame","tool-hand","tool-highlight","tool-laser","tool-line","tool-media","tool-note","tool-pencil","tool-pointer","tool-text","trash","triangle-down","triangle-up","twitter","undo","ungroup","unlock-small","unlock","vertical-align-center","vertical-align-end","vertical-align-start","visible","warning-triangle","zoom-in","zoom-out"];var Ea=function(J){if(!J)return r3;return{fonts:Object.assign({...r3.fonts},{...J?.fonts}),icons:Object.assign({...r3.icons},{...J?.icons}),embedIcons:Object.assign({...r3.embedIcons},{...J?.embedIcons}),translations:Object.assign({...r3.translations},{...J?.translations})}},r3={...s3,icons:Object.fromEntries(_a.map((J)=>[J,`https://unpkg.com/@tldraw/assets@${sZ}/icons/icon/${J}.svg`])),translations:Object.fromEntries(DQ.map((J)=>[J.locale,`https://unpkg.com/@tldraw/assets@${sZ}/translations/${J.locale}.json`])),embedIcons:Object.fromEntries(bZ.map((J)=>[J.type,`https://unpkg.com/@tldraw/assets@${sZ}/embed-icons/${J.type}.png`]))};var Aa=v(W0(),1);var C2=v(o(),1);var S8=v(W0(),1);var wK=v(o(),1);var rZ=v(W0(),1);var a3=v(p8(),1);var aZ=function({className:J,children:Q}){return rZ.jsx("div",{className:a3.default("tlui-dialog__header",J),children:Q})},oZ=function({className:J,children:Q}){return rZ.jsx(sr,{dir:"ltr",className:a3.default("tlui-dialog__header__title",J),children:Q})},tZ=function(){return rZ.jsx("div",{className:"tlui-dialog__header__close",children:rZ.jsx(rr,{"data-testid":"dialog.close",dir:"ltr",asChild:!0,children:rZ.jsx(m0,{type:"icon","aria-label":"Close",onTouchEnd:(J)=>J.target.click(),children:rZ.jsx(L6,{small:!0,icon:"cross-2"})})})})},SQ=function({className:J,children:Q,style:Z}){return rZ.jsx("div",{className:a3.default("tlui-dialog__body",J),style:Z,children:Q})},CK=function({className:J,children:Q}){return rZ.jsx("div",{className:a3.default("tlui-dialog__footer",J),children:Q})};var AK=v(W0(),1);var Ca=v(p8(),1),jJ=v(o(),1);var kK=jJ.forwardRef(function J({className:Q,label:Z,icon:q,iconLeft:Y,autoselect:$=!1,autofocus:W=!1,defaultValue:G,placeholder:z,onComplete:U,onValueChange:F,onCancel:B,onBlur:M,shouldManuallyMaintainScrollPositionWhenFocused:O=!1,children:R,value:V},E){const _=h(),A=jJ.useRef(null);jJ.useImperativeHandle(E,()=>A.current);const w=e0(),T=jJ.useRef(G??""),k=jJ.useRef(G??""),[P,y]=jJ.useState(!1),p=jJ.useCallback((X0)=>{y(!0);const J0=X0.currentTarget;k.current=J0.value,requestAnimationFrame(()=>{if($)J0.select()})},[$]),s=jJ.useCallback((X0)=>{const J0=X0.currentTarget.value;k.current=J0,F?.(J0)},[F]),c=jJ.useCallback((X0)=>{switch(X0.key){case"Enter":{X0.currentTarget.blur(),d8(X0),U?.(X0.currentTarget.value);break}case"Escape":{X0.currentTarget.value=T.current,X0.currentTarget.blur(),d8(X0),B?.(X0.currentTarget.value);break}}},[U,B]),t=jJ.useCallback((X0)=>{y(!1);const J0=X0.currentTarget.value;M?.(J0)},[M]);return jJ.useEffect(()=>{if(!_.environment.isIos)return;const X0=window.visualViewport;if(P&&O&&X0){const J0=()=>{A.current?.scrollIntoView({block:"center"})};return X0.addEventListener("resize",J0),X0.addEventListener("scroll",J0),requestAnimationFrame(()=>{A.current?.scrollIntoView({block:"center"})}),()=>{X0.removeEventListener("resize",J0),X0.removeEventListener("scroll",J0)}}},[_,P,O]),AK.jsxs("div",{draggable:!1,className:"tlui-input__wrapper",children:[R,Z&&AK.jsx("label",{children:w(Z)}),Y&&AK.jsx(RJ,{icon:Y,className:"tlui-icon-left",small:!0}),AK.jsx("input",{ref:A,className:Ca.default("tlui-input",Q),type:"text",defaultValue:G,onKeyUp:c,onChange:s,onFocus:p,onBlur:t,autoFocus:W,placeholder:z,value:V}),q&&AK.jsx(RJ,{icon:q,small:!!Z})]})});var vO=D9(function J({onClose:Q}){const Z=h(),q=e0(),Y=NK(),[$,W]=wK.useState(null),[G,z]=wK.useState(""),[U,F]=wK.useState(null),[B,M]=wK.useState(!1),O=wK.useRef(-1);return S8.jsxs(S8.Fragment,{children:[S8.jsxs(aZ,{children:[S8.jsx(oZ,{children:$?`${q("embed-dialog.title")} \u2014 ${$.title}`:q("embed-dialog.title")}),S8.jsx(tZ,{})]}),$?S8.jsxs(S8.Fragment,{children:[S8.jsxs(SQ,{className:"tlui-embed-dialog__enter",children:[S8.jsx(kK,{className:"tlui-embed-dialog__input",label:"embed-dialog.url",placeholder:"http://example.com",autofocus:!0,onValueChange:(R)=>{z(R);const V=d7(R);F(V&&V.definition.type===$.type?V:null),M(!1),clearTimeout(O.current),O.current=setTimeout(()=>M(!V),320)}}),G===""?S8.jsxs("div",{className:"tlui-embed-dialog__instruction",children:[S8.jsx("span",{children:q("embed-dialog.instruction")})," ",$.instructionLink&&S8.jsxs("a",{target:"_blank",rel:"noopener noreferrer",href:$.instructionLink,className:"tlui-embed-dialog__instruction__link",children:["Learn more.",S8.jsx(RJ,{icon:"external-link",small:!0})]})]}):S8.jsx("div",{className:"tlui-embed-dialog__warning",children:B?q("embed-dialog.invalid-url"):"\xA0"})]}),S8.jsxs(CK,{className:"tlui-dialog__footer__actions",children:[S8.jsx(m0,{type:"normal",onClick:()=>{W(null),F(null),z("")},children:S8.jsx(v8,{children:q("embed-dialog.back")})}),S8.jsx("div",{className:"tlui-embed__spacer"}),S8.jsx(m0,{type:"normal",onClick:Q,children:S8.jsx(v8,{children:q("embed-dialog.cancel")})}),S8.jsx(m0,{type:"primary",disabled:!U,onClick:()=>{if(!U)return;Z.putExternalContent({type:"embed",url:G,point:Z.getViewportPageCenter(),embed:U.definition}),Q()},children:S8.jsx(v8,{children:q("embed-dialog.create")})})]})]}):S8.jsx(S8.Fragment,{children:S8.jsx(SQ,{className:"tlui-embed-dialog__list",children:bZ.map((R)=>{return S8.jsxs(m0,{type:"menu",onClick:()=>W(R),children:[S8.jsx(v8,{children:ZO(R.title)}),S8.jsx("div",{className:"tlui-embed-dialog__item__image",style:{backgroundImage:`url(${Y.embedIcons[R.type]})`}})]},R.type)})})})]})});var E2=v(o(),1),SO=function(){const J=h(),Q=E2.useRef();return E2.useEffect(()=>{const Z=window.document.createElement("input");Z.type="file",Z.accept="image/jpeg,image/png,image/gif,image/svg+xml,video/mp4,video/quicktime",Z.multiple=!0,Q.current=Z;async function q(Y){const $=Y.target.files;if(!$||$.length===0)return;await J.putExternalContent({type:"files",files:Array.from($),point:J.getViewportPageBounds().center,ignoreParent:!1}),Z.value=""}return Z.addEventListener("change",q),()=>{Q.current=void 0,Z.removeEventListener("change",q)}},[J]),E2.useCallback(()=>{Q.current?.click()},[Q])};var wa=function({overrides:J,children:Q}){const Z=h(),q=g5(),{addDialog:Y}=t7(),$=SO(),W=C2.useMemo(()=>{const G=[{id:"select",label:"tool.select",icon:"tool-pointer",kbd:"v",readonlyOk:!0,onSelect(U){Z.setCurrentTool("select"),q("select-tool",{source:U,id:"select"})}},{id:"hand",label:"tool.hand",icon:"tool-hand",kbd:"h",readonlyOk:!0,onSelect(U){Z.setCurrentTool("hand"),q("select-tool",{source:U,id:"hand"})}},{id:"eraser",label:"tool.eraser",icon:"tool-eraser",kbd:"e",onSelect(U){Z.setCurrentTool("eraser"),q("select-tool",{source:U,id:"eraser"})}},{id:"draw",label:"tool.draw",icon:"tool-pencil",kbd:"d,b,x",onSelect(U){Z.setCurrentTool("draw"),q("select-tool",{source:U,id:"draw"})}},...[...z7.values].map((U)=>({id:U,label:`tool.${U}`,meta:{geo:U},kbd:U==="rectangle"?"r":U==="ellipse"?"o":void 0,icon:"geo-"+U,onSelect(F){Z.batch(()=>{Z.updateInstanceState({stylesForNextShape:{...Z.getInstanceState().stylesForNextShape,[z7.id]:U}},{ephemeral:!0}),Z.setCurrentTool("geo"),q("select-tool",{source:F,id:`geo-${U}`})})}})),{id:"arrow",label:"tool.arrow",icon:"tool-arrow",kbd:"a",onSelect(U){Z.setCurrentTool("arrow"),q("select-tool",{source:U,id:"arrow"})}},{id:"line",label:"tool.line",icon:"tool-line",kbd:"l",onSelect(U){Z.setCurrentTool("line"),q("select-tool",{source:U,id:"line"})}},{id:"frame",label:"tool.frame",icon:"tool-frame",kbd:"f",onSelect(U){Z.setCurrentTool("frame"),q("select-tool",{source:U,id:"frame"})}},{id:"text",label:"tool.text",icon:"tool-text",kbd:"t",onSelect(U){Z.setCurrentTool("text"),q("select-tool",{source:U,id:"text"})}},{id:"asset",label:"tool.asset",icon:"tool-media",kbd:"$u",onSelect(U){$(),q("select-tool",{source:U,id:"media"})}},{id:"note",label:"tool.note",icon:"tool-note",kbd:"n",onSelect(U){Z.setCurrentTool("note"),q("select-tool",{source:U,id:"note"})}},{id:"laser",label:"tool.laser",readonlyOk:!0,icon:"tool-laser",kbd:"k",onSelect(U){Z.setCurrentTool("laser"),q("select-tool",{source:U,id:"laser"})}},{id:"embed",label:"tool.embed",icon:"tool-embed",onSelect(U){Y({component:vO}),q("select-tool",{source:U,id:"embed"})}},{id:"highlight",label:"tool.highlight",icon:"tool-highlight",kbd:"!d",onSelect(U){Z.setCurrentTool("highlight"),q("select-tool",{source:U,id:"highlight"})}}];G.push();const z=Object.fromEntries(G.map((U)=>[U.id,U]));if(J)return J(Z,z,{insertMedia:$});return z},[J,Z,q,$,Y]);return Aa.jsx(ka.Provider,{value:W,children:Q})},F8=function(){const J=C2.useContext(ka);if(!J)throw new Error("useTools must be used within a ToolProvider");return J},ka=C2.createContext({});var o3=v(o(),1);var Ia=v(W0(),1);var fO=v(o(),1);var WP=function({forceMobile:J=!1,children:Q}){const Z=h(),q=e("breakpoint",()=>{const{width:Y}=Z.getViewportScreenBounds(),$=J?e6.MOBILE_SM:xO.length-1;for(let W=0;W<$;W++)if(Y>xO[W]&&Y<=xO[W+1])return W;return $},[Z]);return Ia.jsx(Pa.Provider,{value:q,children:Q})},i8=function(){return fO.useContext(Pa)},Pa=fO.default.createContext(0);var Ta=function(){const{addToast:J,removeToast:Q,clearToasts:Z}=q5(),{addDialog:q,clearDialogs:Y,removeDialog:$,updateDialog:W}=t7(),z=i8()<e6.TABLET_SM,U=e0();return o3.useMemo(()=>({addToast:J,removeToast:Q,clearToasts:Z,addDialog:q,clearDialogs:Y,removeDialog:$,updateDialog:W,msg:U,isMobile:z}),[q,J,Y,Z,U,$,Q,W,z])},CM0=function(J,Q){const Z={};for(let q of J)if(q.translations)for(let[Y,$]of z5(q.translations)){let W=Z[Y];if(!W)W=Z[Y]={};Object.assign(W,$)}return{actions:(q,Y)=>{for(let $ of J)if($.actions)Y=$.actions(q,Y,Q);return Y},tools:(q,Y,$)=>{for(let W of J)if(W.tools)Y=W.tools(q,Y,{...Q,...$});return Y},translations:Z}},ba=function(J){return o3.useMemo(()=>J,J)},xa=function(J){const Q=ba(J==null?[]:Array.isArray(J)?J:[J]);return o3.useMemo(()=>{const Z={};for(let q of Q)if(q.translations)for(let[Y,$]of z5(q.translations)){let W=Z[Y];if(!W)W=Z[Y]={};Object.assign(W,$)}return Z},[Q])},ya=function(J){const Q=Ta(),Z=ba(J==null?[]:Array.isArray(J)?J:[J]);return o3.useMemo(()=>CM0(Z,Q),[Z,Q])};var aa=v(W0(),1);var w2=v(o(),1);var GP=function(J,Q){const Z=Y6(Q.map((Y)=>J.getShape(Y)).filter((Y)=>Y&&J.isShapeOfType(Y,"frame")));if(!Z.length)return;const q=[];J.batch(()=>{Z.map((Y)=>{const $=J.getSortedChildIdsForParent(Y.id);if($.length)J.reparentShapes($,Y.parentId,Y.index),q.push(...$)}),J.setSelectedShapes(q),J.deleteShapes(Q)})},HP=function(J,Q,Z={}){const q=J.getShape(Q);if(!q)return;const Y=J.getSortedChildIdsForParent(q.id),$=Y6(Y.map((O)=>J.getShape(O)));if(!$.length)return;const W=V0.FromPoints($.flatMap((O)=>{const R=J.getShapeGeometry(O.id);return J.getShapeLocalTransform(O).applyToPoints(R.vertices)})),{padding:G=AM0}=Z,z=W.w+2*G,U=W.h+2*G,F=G-W.minX,B=G-W.minY;if(F===0&&B===0&&q.props.w===z&&q.props.h===U)return;const M=new j(F,B).rot(q.rotation);J.batch(()=>{const O=Y.map((R)=>{const V=J.getShape(R);return{id:V.id,type:V.type,x:V.x+F,y:V.y+B}});O.push({id:q.id,type:q.type,x:q.x-M.x,y:q.y-M.y,props:{w:z,h:U}}),J.updateShapes(O)})},AM0=50;var N5=v(W0(),1);var K1=v(o(),1);var va=function(J){if(f.linkUrl.isValid(J))return{isValid:!0,hasProtocol:!0};if(f.linkUrl.isValid("https://"+J))return{isValid:!0,hasProtocol:!1};return{isValid:!1,hasProtocol:!1}},Sa=D9(function J({onClose:Q}){const q=h().getOnlySelectedShape();if(!(q&&("url"in q.props)&&typeof q.props.url==="string"))return null;return N5.jsx(kM0,{onClose:Q,selectedShape:q})}),kM0=D9(function J({onClose:Q,selectedShape:Z}){const q=h(),Y=e0(),$=K1.useRef(null);K1.useEffect(()=>{requestAnimationFrame(()=>$.current?.focus())},[]);const W=K1.useRef(Z.props.url),[G,z]=K1.useState(()=>{const R=va(Z.props.url),V=R.isValid===!0?R.hasProtocol?Z.props.url:"https://"+Z.props.url:"https://";return{actual:V,safe:V,valid:!0}}),U=K1.useCallback((R)=>{const V=R.replace(/https?:\/\/(https?:\/\/)/,(A,w)=>{return w}),E=va(V),_=E.isValid===!0?E.hasProtocol?V:"https://"+V:"https://";z({actual:V,safe:_,valid:E.isValid})},[]),F=K1.useCallback(()=>{const R=q.getOnlySelectedShape();if(!R)return;q.updateShapes([{id:R.id,type:R.type,props:{url:""}}]),Q()},[q,Q]),B=K1.useCallback(()=>{const R=q.getOnlySelectedShape();if(!R)return;if(R&&"url"in R.props){if(R.props.url!==G.safe)q.updateShapes([{id:R.id,type:R.type,props:{url:G.safe}}])}Q()},[q,Q,G]),M=K1.useCallback(()=>{Q()},[Q]);if(!Z)return Q(),null;const O=W.current&&!G.valid;return N5.jsxs(N5.Fragment,{children:[N5.jsxs(aZ,{children:[N5.jsx(oZ,{children:Y("edit-link-dialog.title")}),N5.jsx(tZ,{})]}),N5.jsx(SQ,{children:N5.jsxs("div",{className:"tlui-edit-link-dialog",children:[N5.jsx(kK,{ref:$,className:"tlui-edit-link-dialog__input",label:"edit-link-dialog.url",autofocus:!0,value:G.actual,onValueChange:U,onComplete:B,onCancel:M}),N5.jsx("div",{children:G.valid?Y("edit-link-dialog.detail"):Y("edit-link-dialog.invalid-url")})]})}),N5.jsxs(CK,{className:"tlui-dialog__footer__actions",children:[N5.jsx(m0,{type:"normal",onClick:M,onTouchEnd:M,children:N5.jsx(v8,{children:Y("edit-link-dialog.cancel")})}),O?N5.jsx(m0,{type:"danger",onTouchEnd:F,onClick:F,children:N5.jsx(v8,{children:Y("edit-link-dialog.clear")})}):N5.jsx(m0,{type:"primary",disabled:!G.valid,onTouchEnd:B,onClick:B,children:N5.jsx(v8,{children:Y("edit-link-dialog.save")})})]})]})});var lO=v(fa(),1),A2=v(o(),1);async function ha(J,Q,Z){const{elements:q,files:Y}=Q,$={shapes:[],rootShapeIds:[],assets:[],schema:J.store.schema.serialize()},W=new Map,G=new Map,z=J.getCurrentPageId(),U=new Map,F=[],B=new Set;q.forEach((_)=>{if(U.set(_.id,v6()),_.boundElements!==null){for(let A of _.boundElements)if(A.type==="text")B.add(A.id)}});let M=UE;for(let _ of q){if(B.has(_.id))continue;const A=U.get(_.id),w={id:A,typeName:"shape",parentId:z,index:M,x:_.x,y:_.y,rotation:0,isLocked:_.locked,opacity:wM0(_.opacity),meta:{}};if(_.angle!==0)G.set(A,_.angle);if(_.groupIds&&_.groupIds.length>0)if(W.has(_.groupIds[0]))W.get(_.groupIds[0])?.push(A);else W.set(_.groupIds[0],[A]);else F.push(A);switch(_.type){case"rectangle":case"ellipse":case"diamond":{let T="",k="middle";if(_.boundElements!==null){for(let y of _.boundElements)if(y.type==="text"){const p=q.find((s)=>s.id===y.id);if(p)T=p.text,k=ga[p.textAlign]}}const P=_.backgroundColor==="transparent"?_.strokeColor:_.backgroundColor;$.shapes.push({...w,type:"geo",props:{geo:_.type,url:_.link??"",w:_.width,h:_.height,size:mO[_.strokeWidth]??"draw",color:t3[P]??"black",text:T,align:k,dash:hO(_),fill:vM0(_)}});break}case"freedraw":{$.shapes.push({...w,type:"draw",props:{dash:hO(_),size:mO[_.strokeWidth],color:t3[_.strokeColor]??"black",segments:[{type:"free",points:_.points.map(([T,k,P=0.5])=>({x:T,y:k,z:P}))}]}});break}case"line":{const T=_.points[0],k=_.points[_.points.length-1],P=NQ(_.points.length);$.shapes.push({...w,type:"line",props:{dash:hO(_),size:mO[_.strokeWidth],color:t3[_.strokeColor]??"black",spline:_.roundness?"cubic":"line",handles:{start:{id:"start",type:"vertex",index:P[0],x:T[0],y:T[1]},end:{id:"end",type:"vertex",index:P[P.length-1],x:k[0],y:k[1]},...Object.fromEntries(_.points.slice(1,-1).map(([y,p],s)=>{const c=u6();return[c,{id:c,type:"vertex",index:P[s+1],x:y,y:p}]}))}}});break}case"arrow":{let T="";if(_.boundElements!==null){for(let s of _.boundElements)if(s.type==="text"){const c=q.find((t)=>t.id===s.id);if(c)T=c.text}}const k=_.points[0],P=_.points[_.points.length-1],y=U.get(_.startBinding?.elementId),p=U.get(_.endBinding?.elementId);$.shapes.push({...w,type:"arrow",props:{text:T,bend:yM0(_,k,P),dash:hO(_),size:mO[_.strokeWidth]??"m",color:t3[_.strokeColor]??"black",start:y?{type:"binding",boundShapeId:y,normalizedAnchor:{x:0.5,y:0.5},isPrecise:!1,isExact:!1}:{type:"point",x:k[0],y:k[1]},end:p?{type:"binding",boundShapeId:p,normalizedAnchor:{x:0.5,y:0.5},isPrecise:!1,isExact:!1}:{type:"point",x:P[0],y:P[1]},arrowheadEnd:ma[_.endArrowhead]??"none",arrowheadStart:ma[_.startArrowhead]??"none"}});break}case"text":{const{size:T,scale:k}=PM0(_.fontSize);$.shapes.push({...w,type:"text",props:{size:T,scale:k,font:TM0[_.fontFamily]??"draw",color:t3[_.strokeColor]??"black",text:_.text,align:ga[_.textAlign]}});break}case"image":{const T=Y[_.fileId];if(!T)break;const k=j4.createId();$.assets.push({id:k,typeName:"asset",type:"image",props:{w:_.width,h:_.height,name:_.id??"Untitled",isAnimated:!1,mimeType:T.mimeType,src:T.dataURL},meta:{}}),$.shapes.push({...w,type:"image",props:{w:_.width,h:_.height,assetId:k}})}}M=g7(M)}const O=Z??(J.inputs.shiftKey?J.inputs.currentPagePoint:void 0);J.mark("paste"),J.putContentOntoCurrentPage($,{point:O,select:!1,preserveIds:!0});for(let _ of W.values())if(_.length>1){J.groupShapes(_);const A=J.getShape(_[0]);if(A?.parentId&&U5(A.parentId))F.push(A.parentId)}for(let[_,A]of G)J.select(_),J.rotateShapesBy([_],A);const R=Y6(F.map((_)=>J.getShape(_))),V=V0.Common(R.map((_)=>J.getShapePageBounds(_))),E=J.getViewportPageBounds().center;J.updateShapes(R.map((_)=>{const A={x:(_.x??0)-(V.x+V.w/2),y:(_.y??0)-(V.y+V.h/2)};return{id:_.id,type:_.type,x:E.x+A.x,y:E.y+A.y}})),J.setSelectedShapes(F)}var PM0=function(J){const Q=IM0[J];if(Q)return{size:Q,scale:1};if(J<16)return{size:"s",scale:J/16};if(J>36)return{size:"xl",scale:J/36};return{size:"m",scale:1}},yM0=function(J,Q,Z){let q=0;if(J.points.length>2){const Y=new j(Q[0],Q[1]),$=new j(Z[0],Z[1]),W=new j(J.points[1][0],J.points[1][1]),G=j.Sub($,Y),z=j.Per(G),U=j.Med($,Y),F=j.Sub(U,z),B=j.Add(U,z),M=j.NearestPointOnLineSegment(F,B,W,!1);if(q=j.Dist(M,U),j.Clockwise(M,$,U))q*=-1}return q},wM0=(J)=>{const Q=J/100;if(Q<0.2)return 0.1;else if(Q<0.4)return 0.25;else if(Q<0.6)return 0.5;else if(Q<0.8)return 0.75;return 1},mO={1:"s",2:"m",3:"l",4:"xl"},IM0={16:"s",20:"m",28:"l",36:"xl"},TM0={1:"draw",2:"sans",3:"mono"},t3={"#ffffff":"grey","#000000":"black","#343a40":"black","#495057":"grey","#c92a2a":"red","#a61e4d":"light-red","#862e9c":"violet","#5f3dc4":"light-violet","#364fc7":"blue","#1864ab":"light-blue","#0b7285":"light-green","#087f5b":"light-green","#2b8a3e":"green","#5c940d":"light-green","#e67700":"yellow","#d9480f":"orange","#ced4da":"grey","#868e96":"grey","#fa5252":"light-red","#e64980":"red","#be4bdb":"light-violet","#7950f2":"violet","#4c6ef5":"blue","#228be6":"light-blue","#15aabf":"light-green","#12b886":"green","#40c057":"green","#82c91e":"light-green","#fab005":"yellow","#fd7e14":"orange","#212529":"grey"},bM0={solid:"draw",dashed:"dashed",dotted:"dotted"},xM0={"cross-hatch":"pattern",hachure:"pattern",solid:"solid"},ga={left:"start",center:"middle",right:"end"},ma={arrow:"arrow",dot:"dot",triangle:"triangle",bar:"pipe"},hO=(J)=>{let Q=bM0[J.strokeStyle]??"draw";if(Q==="draw"&&J.roughness===0)Q="solid";return Q},vM0=(J)=>{if(J.backgroundColor==="transparent")return"none";return xM0[J.fillStyle]??"solid"};async function uO(J,Q,Z,q){const $=(await Promise.all(Q.map(async(W)=>await(await fetch(W)).blob()))).map((W)=>new File([W],"tldrawFile",{type:W.type}));J.mark("paste"),await J.putExternalContent({type:"files",files:$,point:Z,ignoreParent:!1,sources:q}),Q.forEach((W)=>URL.revokeObjectURL(W))}var ua=function(J,Q,Z){const q=Z??(J.inputs.shiftKey?J.inputs.currentPagePoint:void 0),Y=J.getSelectionPageBounds();J.mark("paste"),J.putContentOntoCurrentPage(Q,{point:q,select:!0});const $=J.getSelectionPageBounds();if(Y&&$&&Y?.collides($))J.updateInstanceState({isChangingStyle:!0},{ephemeral:!0}),setTimeout(()=>{J.updateInstanceState({isChangingStyle:!1},{ephemeral:!0})},150)};async function cO(J,Q,Z,q){try{if(new URL(Q).pathname.match(/\.(png|jpe?g|gif|svg|webp)$/i)){if((await fetch(Q,{method:"HEAD"})).headers.get("content-type")?.match(/^image\//)){J.mark("paste"),uO(J,[Q]);return}}}catch(Y){if(Y.message!=="Failed to fetch")console.error(Y)}return J.mark("paste"),await J.putExternalContent({type:"url",point:Z,url:Q,sources:q})}var SM0=function(J){const Q=document.implementation.createHTMLDocument("");return Q.documentElement.innerHTML=J.trim(),Q.body.textContent||Q.body.innerText||""},pO=function(J){const{activeElement:Q}=document;return J.getIsMenuOpen()||Q&&(Q.getAttribute("contenteditable")||hM0.indexOf(Q.tagName.toLowerCase())>-1)};async function pa(J,Q,Z){const q=Q.filter(($)=>($.type==="file"||$.type==="blob")&&$.source!==null);if(q.length){const W=(await Promise.all(q.map((G)=>G.source))).filter(Boolean).map((G)=>URL.createObjectURL(G));return await uO(J,W,Z)}const Y=await Promise.all(Q.filter(($)=>$.type!=="file").map(($)=>new Promise((W)=>{const G=$;if(G.type==="file"){W({type:"error",data:null,reason:"unexpected file"});return}G.source.then((z)=>{const U=z.match(/<tldraw[^>]*>(.*)<\/tldraw>/)?.[1];if(U)try{const F=lO.decompressFromBase64(U);if(F===null){W({type:"error",data:F,reason:"found tldraw data comment but could not parse base64"});return}else{const B=JSON.parse(F);if(B.type!=="application/tldraw")W({type:"error",data:B,reason:`found tldraw data comment but JSON was of a different type: ${B.type}`});if(typeof B.data==="string"){W({type:"error",data:B,reason:"found tldraw json but data was a string instead of a TLClipboardModel object"});return}W({type:"tldraw",data:B.data});return}}catch(F){W({type:"error",data:U,reason:"found tldraw json but data was a string instead of a TLClipboardModel object"});return}else{if(G.type==="html"){W({type:"text",data:z,subtype:"html"});return}if(G.type==="url"){W({type:"text",data:z,subtype:"url"});return}try{const F=JSON.parse(z);if(F.type==="excalidraw/clipboard"){W({type:"excalidraw",data:F});return}else{W({type:"text",data:z,subtype:"json"});return}}catch(F){W({type:"text",data:z,subtype:"text"});return}}W({type:"error",data:z,reason:"unhandled case"})})})));for(let $ of Y)if($.type==="tldraw"){ua(J,$.data,Z);return}for(let $ of Y)if($.type==="excalidraw"){ha(J,$.data,Z);return}for(let $ of Y)if($.type==="text"&&$.subtype==="html"){const G=new DOMParser().parseFromString($.data,"text/html").querySelector("body");if(G&&Array.from(G.children).filter((U)=>U.nodeType===1).length===1&&G.firstElementChild&&G.firstElementChild.tagName==="A"&&G.firstElementChild.hasAttribute("href")&&G.firstElementChild.getAttribute("href")!==""){const U=G.firstElementChild.getAttribute("href");UP(J,U,Z,Y);return}if(!Y.some((U)=>U.type==="text"&&U.subtype!=="html")&&$.data.trim()){UP(J,SM0($.data),Z,Y);return}}for(let $ of Y)if($.type==="text"&&$.subtype==="url"){cO(J,$.data,Z,Y);return}for(let $ of Y)if($.type==="text"&&$.subtype==="text"&&$.data.trim()){UP(J,$.data,Z,Y);return}}var LP=function(){const J=h(),Q=g5(),Z=A2.useCallback(function $(W){if(J.getSelectedShapeIds().length===0)return;dO(J),Q("copy",{source:W})},[J,Q]),q=A2.useCallback(function $(W){if(J.getSelectedShapeIds().length===0)return;dO(J),J.deleteShapes(J.getSelectedShapeIds()),Q("cut",{source:W})},[J,Q]),Y=A2.useCallback(async function $(W,G,z){if(J.getEditingShapeId()!==null||pO(J))return;if(Array.isArray(W)&&W[0]instanceof ClipboardItem)ca(J,W,z),Q("paste",{source:"menu"});else navigator.clipboard.read().then((U)=>{Y(U,G,z)})},[J,Q]);return{copy:Z,cut:q,paste:Y}},FP=function(){const J=h(),Q=g5(),Z=e("editor.isFocused",()=>J.getInstanceState().isFocused,[J]);A2.useEffect(()=>{if(!Z)return;const q=(z)=>{if(J.getSelectedShapeIds().length===0||J.getEditingShapeId()!==null||pO(J))return;A6(z),dO(J),Q("copy",{source:"kbd"})};function Y(z){if(J.getSelectedShapeIds().length===0||J.getEditingShapeId()!==null||pO(J))return;A6(z),dO(J),J.deleteShapes(J.getSelectedShapeIds()),Q("cut",{source:"kbd"})}let $=!1;const W=(z)=>{if(z.button===1)$=!0,requestAnimationFrame(()=>{$=!1})},G=(z)=>{if($){d8(z);return}if(J.getEditingShapeId()!==null||pO(J))return;if(z.clipboardData&&!J.inputs.shiftKey)cM0(J,z.clipboardData);else navigator.clipboard.read().then((U)=>{if(Array.isArray(U)&&U[0]instanceof ClipboardItem)ca(J,U,J.inputs.currentPagePoint)});A6(z),Q("paste",{source:"kbd"})};return document.addEventListener("copy",q),document.addEventListener("cut",Y),document.addEventListener("paste",G),document.addEventListener("pointerup",W),()=>{document.removeEventListener("copy",q),document.removeEventListener("cut",Y),document.removeEventListener("paste",G),document.removeEventListener("pointerup",W)}},[J,Q,Z])},fM0=(J)=>{try{const Q=new URL(J);return Q.protocol==="http:"||Q.protocol==="https:"}catch(Q){return!1}},gM0=(J)=>{const Q=J.split(/[\n\s]/);for(let Z of Q)try{const q=new URL(Z);if(!(q.protocol==="http:"||q.protocol==="https:"))return}catch(q){return}return ez(Q)},mM0=(J)=>{return/^<svg/.test(J)},hM0=["input","select","textarea"],uM0=(J)=>{return J.types.find((Q)=>Q.match(/^image\//))},UP=(J,Q,Z,q)=>{const Y=gM0(Q);if(Y)for(let $ of Y)cO(J,$,Z);else if(fM0(Q))cO(J,Q,Z);else if(mM0(Q))J.mark("paste"),J.putExternalContent({type:"svg-text",text:Q,point:Z,sources:q});else J.mark("paste"),J.putExternalContent({type:"text",text:Q,point:Z,sources:q})},cM0=async(J,Q,Z)=>{if(J.getEditingShapeId()!==null)return;if(!Q)throw Error("No clipboard data");const q=[];for(let Y of Object.values(Q.items))switch(Y.kind){case"file":{q.push({type:"file",source:new Promise(($)=>$(Y.getAsFile()))});break}case"string":{if(Y.type==="text/html")q.push({type:"html",source:new Promise(($)=>Y.getAsString($))});else if(Y.type==="text/plain")q.push({type:"text",source:new Promise(($)=>Y.getAsString($))});else q.push({type:Y.type,source:new Promise(($)=>Y.getAsString($))});break}}pa(J,q,Z)},ca=async(J,Q,Z)=>{const q=[];for(let Y of Q){if(uM0(Y)){for(let $ of Y.types)if($.match(/^image\//))q.push({type:"blob",source:Y.getType($)})}if(Y.types.includes("text/html"))q.push({type:"html",source:(async()=>{const $=await Y.getType("text/html");return await V4.blobToText($)})()});if(Y.types.includes("text/uri-list"))q.push({type:"url",source:(async()=>{const $=await Y.getType("text/uri-list");return await V4.blobToText($)})()});if(Y.types.includes("text/plain"))q.push({type:"text",source:(async()=>{const $=await Y.getType("text/plain");return await V4.blobToText($)})()})}return await pa(J,q,Z)},dO=(J)=>{const Q=J.getContentFromCurrentPage(J.getSelectedShapeIds());if(!Q){if(navigator&&navigator.clipboard)navigator.clipboard.writeText("");return}const Z=lO.compressToBase64(JSON.stringify({type:"application/tldraw",kind:"content",data:Q}));if(typeof navigator==="undefined")return;else{const q=Q.shapes.map((Y)=>{if(J.isShapeOfType(Y,"text")||J.isShapeOfType(Y,"geo")||J.isShapeOfType(Y,"arrow"))return Y.props.text;if(J.isShapeOfType(Y,"bookmark")||J.isShapeOfType(Y,"embed"))return Y.props.url;return null}).filter(DE);if(navigator.clipboard?.write){const Y=new Blob([`<tldraw>${Z}</tldraw>`],{type:"text/html"});let $=q.join(" ");if($==="")$=" ";navigator.clipboard.write([new ClipboardItem({"text/html":Y,"text/plain":new Blob([$],{type:"text/plain"})})])}else if(navigator.clipboard.writeText)navigator.clipboard.writeText(`<tldraw>${Z}</tldraw>`)}};var ia=v(o(),1);async function nO(J,Q,Z){const{type:q,quality:Y,scale:$,width:W,height:G}=Z;let[z,U]=await BM(W*$,G*$);z=Math.floor(z),U=Math.floor(U);const F=z/W,B=URL.createObjectURL(new Blob([J],{type:"image/svg+xml"})),M=await new Promise((R)=>{const V=new Image;V.crossOrigin="anonymous",V.onload=async()=>{if(Q)await new Promise((A)=>setTimeout(A,250));const E=document.createElement("canvas"),_=E.getContext("2d");E.width=z,E.height=U,_.imageSmoothingEnabled=!0,_.imageSmoothingQuality="high",_.drawImage(V,0,0,z,U),URL.revokeObjectURL(B),R(E)},V.onerror=()=>{R(null)},V.src=B});if(!M)return null;const O=await new Promise((R)=>M.toBlob((V)=>{if(!V||t8.throwToBlob.get())R(null);R(V)},"image/"+q,Y));if(!O)return null;if(q==="png"){const R=new DataView(await O.arrayBuffer());return D4.setPhysChunk(R,F,{type:"image/"+q})}else return O}async function da(J,Q,Z){const q=await J.getSvgString(Q?.length?Q:[...J.getCurrentPageShapeIds()],{scale:1,background:J.getInstanceState().exportBackground,...Z});if(!q)throw new Error("Could not construct SVG.");return q}async function iO(J,Q,Z,q={}){switch(Z){case"svg":return(await da(J,Q,q))?.svg;case"json":{const Y=J.getContentFromCurrentPage(Q);return JSON.stringify(Y)}default:r5(Z)}}async function sO({editor:J,ids:Q,format:Z,opts:q={}}){switch(Z){case"svg":return new Blob([await iO(J,Q,"svg",q)],{type:"text/plain"});case"json":return new Blob([await iO(J,Q,"json",q)],{type:"text/plain"});case"jpeg":case"png":case"webp":{const Y=await da(J,Q,q);if(!Y)throw new Error("Could not construct image.");const $=await nO(Y.svg,J.environment.isSafari,{type:Z,quality:1,scale:2,width:Y.width,height:Y.height});if(!$)throw new Error("Could not construct image.");return $}default:r5(Z)}}var la=function(J,Q,Z,q={}){return{blobPromise:sO({editor:J,ids:Q,format:Z,opts:q}),mimeType:pM0[Z]}},pM0={jpeg:"image/jpeg",png:"image/png",webp:"image/webp",json:"text/plain",svg:"text/plain"};var BP=function(J,Q,Z="svg",q={}){if(!window.navigator.clipboard)return Promise.reject(new Error("Copy not supported"));if(window.navigator.clipboard.write){const{blobPromise:Y,mimeType:$}=la(J,Q,Z,q);return window.navigator.clipboard.write([new ClipboardItem({[$]:Y})]).catch((W)=>{return console.error(W),Y.then((G)=>{return window.navigator.clipboard.write([new ClipboardItem({[$]:G})])})})}switch(Z){case"json":case"svg":return dM0(async()=>iO(J,Q,Z,q));case"jpeg":case"png":throw new Error("Copy not supported");default:r5(Z)}};async function dM0(J){await navigator.clipboard?.writeText?.(await J())}var NP=function(){const J=h(),{addToast:Q}=q5(),Z=e0();return ia.useCallback((q,Y="svg")=>{BP(J,q,Y).catch(()=>{Q({id:"copy-fail",severity:"warning",title:Z("toast.error.copy-fail.title"),description:Z("toast.error.copy-fail.desc")})})},[J,Q,Z])};var sa=v(o(),1);async function MP(J,Q,Z="png",q,Y={}){if(!q){if(q=`shapes at ${na()}`,Q.length===1){const G=J.getShape(Q[0]);if(J.isShapeOfType(G,"frame"))q=G.props.name??"frame";else q=`${G.id.replace(/:/,"_")} at ${na()}`}}q+=`.${Z}`;const $=await sO({editor:J,ids:Q,format:Z,opts:Y}),W=new File([$],q,{type:$.type});lM0(W)}var na=function(){const J=new Date,Q=String(J.getFullYear()).slice(2),Z=String(J.getMonth()+1).padStart(2,"0"),q=String(J.getDate()).padStart(2,"0"),Y=String(J.getHours()).padStart(2,"0"),$=String(J.getMinutes()).padStart(2,"0"),W=String(J.getSeconds()).padStart(2,"0");return`${Q}-${Z}-${q} ${Y}.${$}.${W}`},lM0=function(J){const Q=document.createElement("a"),Z=URL.createObjectURL(J);Q.href=Z,Q.download=J.name,Q.click(),URL.revokeObjectURL(Z)};var OP=function(){const J=h(),{addToast:Q}=q5(),Z=e0();return sa.useCallback((q,Y="png",$)=>{MP(J,q,Y,$,{scale:1,background:J.getInstanceState().exportBackground}).catch((W)=>{console.error(W.message),Q({id:"export-fail",title:Z("toast.error.export-fail.title"),description:Z("toast.error.export-fail.desc"),severity:"error"})})},[J,Q,Z])};var e3=v(o(),1),ra=function(){const J=h(),Q=e3.useRef(null),Z=e3.useRef(null);return e3.useCallback(async function q(){const Y=document.createElement("div"),$=document.createElement("style"),W=(w,T)=>{if(w)w.innerHTML="";if(T&&document.head.contains(T))document.head.removeChild(T);if(w&&document.body.contains(w))document.body.removeChild(w)};W(Q.current,Z.current),Q.current=Y,Z.current=$;const G=`tl-print-surface-${u6()}`;Y.className=G;const z=!1,U=!1;$.innerHTML=`
			.${G} {
				display: none;
			}

			.${G} svg {
				max-width: 100%;
				height: 100%;
				display: block;
			}

			@media print {				  
				html, body {
					min-height: 100%;
					height: 100%;
					margin: 0;
				}

				body {
					position: relative;
				}

				body > * {
					display: none;
				}

				.tldraw__editor {
					display: none;
				}

				.${G} {
					display: block !important;
					background: white;
					min-height: 100%;
					height: 100%;
					max-width: 100%;
				}

				.${G}__item {
					padding: 10mm;
					display: flex;
					min-height: 100%;
					flex-direction: column;
					page-break-after: always;
					position: relative;
					overflow: hidden;
					height: 100%;
				}

				.${G}__item__main {
					flex: 1;
					display: flex;
					align-items: center;
					justify-content: center;
					max-height: 100%;
				}

				.${G}__item__header {
					display: none;
				}

				.${G}__item__footer {
					display: none;
					text-align: right;
				}

				.${G}__item__footer__hide {
					display: none;
				}

				${!z?"":`
					/**
					 * Note: Safari doesn't support removing the page margins to remove them all!
					 */
					@page {
						margin:0;
					}

					.${G} .${G}__item__header {
						display: block;
					}

					.${G} .${G}__item__footer {
						display: block;
					}
				`}
			}

		`;const F=()=>{document.head.appendChild($),document.body.appendChild(Y)},B=()=>{J.once("change-history",()=>{W(Y,$)})};window.addEventListener("beforeprint",F),window.addEventListener("afterprint",B);function M(w,T,k){try{Y.innerHTML+=`<div class="${G}__item">
        <div class="${G}__item__header">
          ${w.replace(/</g,"&lt;").replace(/>/g,"&gt;")}
        </div>
        <div class="${G}__item__main">
          ${k}
        </div>
        <div class="${G}__item__footer ${G}__item__footer__${T?"":"hide"}">
          ${T??""}
        </div>
      </div>`}catch(P){console.error(P)}}function O(){if(J.environment.isChromeForIos)F(),window.print();else if(J.environment.isSafari)F(),document.execCommand("print",!1);else window.print()}const R=J.getSelectedShapeIds(),V=J.getCurrentPageId(),E=J.getPages(),A={scale:1,background:!1,darkMode:!1,preserveAspectRatio:"xMidYMid meet"};if(J.getSelectedShapeIds().length>0){const w=await J.getSvgString(R,A);if(w){const T=E.find((k)=>k.id===V);M(`tldraw \u2014 ${T?.name}`,null,w.svg),O()}}else if(U){for(let w=0;w<E.length;w++){const T=E[w],k=await J.getSvgString(J.getSortedChildIdsForParent(T.id),A);if(k)M(`tldraw \u2014 ${T.name}`,`${w}/${E.length}`,k.svg)}O()}else{const w=J.getCurrentPage(),T=await J.getSvgString(J.getSortedChildIdsForParent(w.id),A);if(T)M(`tldraw \u2014 ${w.name}`,null,T.svg),O()}window.removeEventListener("beforeprint",F),window.removeEventListener("afterprint",B)},[J])};var iM0=function(J){return Object.fromEntries(J.map((Q)=>[Q.id,Q]))},k2=function(J,Q){if(J.getSelectedShapes().length===0)return J.getDocumentSettings().name||Q;return},ta=function({overrides:J,children:Q}){const Z=h(),{addDialog:q,clearDialogs:Y}=t7(),{clearToasts:$}=q5(),W=e0(),G=SO(),z=ra(),{cut:U,copy:F,paste:B}=LP(),M=NP(),O=OP(),R=W("document.default-name"),V=g5(),E=w2.useMemo(()=>{function _(){if(!Z.isIn("select"))return Z.complete(),Z.setCurrentTool("select"),!1;return!1}function A(){return Z.isIn("select")&&Z.getSelectedShapeIds().length>0}const T=iM0([{id:"edit-link",label:"action.edit-link",icon:"link",onSelect(k){if(!A())return;if(_())return;V("edit-link",{source:k}),Z.mark("edit-link"),q({component:Sa})}},{id:"insert-embed",label:"action.insert-embed",kbd:"$i",onSelect(k){V("insert-embed",{source:k}),q({component:vO})}},{id:"insert-media",label:"action.insert-media",kbd:"$u",onSelect(k){V("insert-media",{source:k}),G()}},{id:"undo",label:"action.undo",icon:"undo",kbd:"$z",onSelect(k){V("undo",{source:k}),Z.undo()}},{id:"redo",label:"action.redo",icon:"redo",kbd:"$!z",onSelect(k){V("redo",{source:k}),Z.redo()}},{id:"export-as-svg",label:{default:"action.export-as-svg",menu:"action.export-as-svg.short",["context-menu"]:"action.export-as-svg.short"},readonlyOk:!0,onSelect(k){let P=Z.getSelectedShapeIds();if(P.length===0)P=Array.from(Z.getCurrentPageShapeIds().values());if(P.length===0)return;V("export-as",{format:"svg",source:k}),O(P,"svg",k2(Z,R))}},{id:"export-as-png",label:{default:"action.export-as-png",menu:"action.export-as-png.short",["context-menu"]:"action.export-as-png.short"},readonlyOk:!0,onSelect(k){let P=Z.getSelectedShapeIds();if(P.length===0)P=Array.from(Z.getCurrentPageShapeIds().values());if(P.length===0)return;V("export-as",{format:"png",source:k}),O(P,"png",k2(Z,R))}},{id:"export-as-json",label:{default:"action.export-as-json",menu:"action.export-as-json.short",["context-menu"]:"action.export-as-json.short"},readonlyOk:!0,onSelect(k){let P=Z.getSelectedShapeIds();if(P.length===0)P=Array.from(Z.getCurrentPageShapeIds().values());if(P.length===0)return;V("export-as",{format:"json",source:k}),O(P,"json",k2(Z,R))}},{id:"export-all-as-svg",label:{default:"action.export-all-as-svg",menu:"action.export-all-as-svg.short",["context-menu"]:"action.export-all-as-svg.short"},readonlyOk:!0,onSelect(k){let P=Z.getSelectedShapeIds();if(P.length===0)P=Array.from(Z.getCurrentPageShapeIds().values());if(P.length===0)return;V("export-all-as",{format:"svg",source:k}),O(Array.from(Z.getCurrentPageShapeIds()),"svg",k2(Z,R))}},{id:"export-all-as-png",label:{default:"action.export-all-as-png",menu:"action.export-all-as-png.short",["context-menu"]:"action.export-all-as-png.short"},readonlyOk:!0,onSelect(k){const P=Array.from(Z.getCurrentPageShapeIds().values());if(P.length===0)return;V("export-all-as",{format:"png",source:k}),O(P,"png",k2(Z,R))}},{id:"export-all-as-json",label:{default:"action.export-all-as-json",menu:"action.export-all-as-json.short",["context-menu"]:"action.export-all-as-json.short"},readonlyOk:!0,onSelect(k){const P=Array.from(Z.getCurrentPageShapeIds().values());if(P.length===0)return;V("export-all-as",{format:"json",source:k}),O(P,"json",k2(Z,R))}},{id:"copy-as-svg",label:{default:"action.copy-as-svg",menu:"action.copy-as-svg.short",["context-menu"]:"action.copy-as-svg.short"},kbd:"$!c",readonlyOk:!0,onSelect(k){let P=Z.getSelectedShapeIds();if(P.length===0)P=Array.from(Z.getCurrentPageShapeIds().values());if(P.length===0)return;V("copy-as",{format:"svg",source:k}),M(P,"svg")}},{id:"copy-as-png",label:{default:"action.copy-as-png",menu:"action.copy-as-png.short",["context-menu"]:"action.copy-as-png.short"},readonlyOk:!0,onSelect(k){let P=Z.getSelectedShapeIds();if(P.length===0)P=Array.from(Z.getCurrentPageShapeIds().values());if(P.length===0)return;V("copy-as",{format:"png",source:k}),M(P,"png")}},{id:"copy-as-json",label:{default:"action.copy-as-json",menu:"action.copy-as-json.short",["context-menu"]:"action.copy-as-json.short"},readonlyOk:!0,onSelect(k){let P=Z.getSelectedShapeIds();if(P.length===0)P=Array.from(Z.getCurrentPageShapeIds().values());if(P.length===0)return;V("copy-as",{format:"json",source:k}),M(P,"json")}},{id:"toggle-auto-size",label:"action.toggle-auto-size",onSelect(k){if(!A())return;if(_())return;V("toggle-auto-size",{source:k}),Z.mark("toggling auto size");const P=Z.getSelectedShapes().filter((y)=>Z.isShapeOfType(y,"text")&&y.props.autoSize===!1);Z.updateShapes(P.map((y)=>{return{id:y.id,type:y.type,props:{...y.props,w:8,autoSize:!0}}})),K8(Z,P.map((y)=>y.id))}},{id:"open-embed-link",label:"action.open-embed-link",readonlyOk:!0,onSelect(k){V("open-embed-link",{source:k});const P=Z.getSelectedShapeIds(),y="No embed shapes selected";if(P.length!==1){console.error(y);return}const p=Z.getShape(P[0]);if(!p||!Z.isShapeOfType(p,"embed")){console.error(y);return}hA(p.props.url,"_blank")}},{id:"select-zoom-tool",readonlyOk:!0,kbd:"z",onSelect(k){if(Z.root.getCurrent()?.id==="zoom")return;if(V("zoom-tool",{source:k}),!(Z.inputs.shiftKey||Z.inputs.ctrlKey)){const P=Z.root.getCurrent();if(P&&P.getCurrent()?.id==="idle")Z.setCurrentTool("zoom",{onInteractionEnd:P.id,maskAs:"zoom"})}}},{id:"convert-to-bookmark",label:"action.convert-to-bookmark",onSelect(k){if(!A())return;if(_())return;Z.batch(()=>{V("convert-to-bookmark",{source:k});const P=Z.getSelectedShapes(),y=[],p=[];for(let s of P){if(!s||!Z.isShapeOfType(s,"embed")||!s.props.url)continue;const c=new j(s.x,s.y);c.rot(-s.rotation),c.add(new j(s.props.w/2-150,s.props.h/2-160)),c.rot(s.rotation);const t={id:v6(),type:"bookmark",rotation:s.rotation,x:c.x,y:c.y,opacity:1,props:{url:s.props.url}};y.push(t),p.push(s.id)}Z.mark("convert shapes to bookmark"),Z.deleteShapes(p),Z.createShapes(y)})}},{id:"convert-to-embed",label:"action.convert-to-embed",onSelect(k){if(!A())return;if(_())return;V("convert-to-embed",{source:k}),Z.batch(()=>{const P=Z.getSelectedShapeIds(),y=Y6(P.map((c)=>Z.getShape(c))),p=[],s=[];for(let c of y){if(!Z.isShapeOfType(c,"bookmark"))continue;const{url:t}=c.props,X0=d7(c.props.url);if(!X0)continue;if(!X0.definition)continue;const{width:J0,height:Q0}=X0.definition,a=new j(c.x,c.y);a.rot(-c.rotation),a.add(new j(c.props.w/2-J0/2,c.props.h/2-Q0/2)),a.rot(c.rotation);const _0={id:v6(),type:"embed",x:a.x,y:a.y,rotation:c.rotation,props:{url:t,w:J0,h:Q0}};p.push(_0),s.push(c.id)}Z.mark("convert shapes to embed"),Z.deleteShapes(s),Z.createShapes(p)})}},{id:"duplicate",kbd:"$d",label:"action.duplicate",icon:"duplicate",onSelect(k){if(!A())return;if(_())return;V("duplicate-shapes",{source:k});const P=Z.getInstanceState();let y,p;if(P.duplicateProps)y=P.duplicateProps.shapeIds,p=P.duplicateProps.offset;else{y=Z.getSelectedShapeIds();const s=V0.Common(Y6(y.map((c)=>Z.getShapePageBounds(c))));p=P.canMoveCamera?{x:s.width+20,y:0}:{x:20,y:20}}if(Z.mark("duplicate shapes"),Z.duplicateShapes(y,p),P.duplicateProps)Z.updateInstanceState({duplicateProps:{...P.duplicateProps,shapeIds:Z.getSelectedShapeIds()}})}},{id:"ungroup",label:"action.ungroup",kbd:"$!g",icon:"ungroup",onSelect(k){if(!A())return;if(_())return;V("ungroup-shapes",{source:k}),Z.mark("ungroup"),Z.ungroupShapes(Z.getSelectedShapeIds())}},{id:"group",label:"action.group",kbd:"$g",icon:"group",onSelect(k){if(!A())return;if(_())return;V("group-shapes",{source:k});const P=Z.getOnlySelectedShape();if(P&&Z.isShapeOfType(P,"group"))Z.mark("ungroup"),Z.ungroupShapes(Z.getSelectedShapeIds());else Z.mark("group"),Z.groupShapes(Z.getSelectedShapeIds())}},{id:"remove-frame",label:"action.remove-frame",kbd:"$!f",onSelect(k){if(!A())return;V("remove-frame",{source:k});const P=Z.getSelectedShapes();if(P.length>0&&P.every((y)=>Z.isShapeOfType(y,"frame")))Z.mark("remove-frame"),GP(Z,P.map((y)=>y.id))}},{id:"fit-frame-to-content",label:"action.fit-frame-to-content",onSelect(k){if(!A())return;V("fit-frame-to-content",{source:k});const P=Z.getOnlySelectedShape();if(P&&Z.isShapeOfType(P,"frame"))Z.mark("fit-frame-to-content"),HP(Z,P.id)}},{id:"align-left",label:"action.align-left",kbd:"?A",icon:"align-left",onSelect(k){if(!A())return;if(_())return;V("align-shapes",{operation:"left",source:k}),Z.mark("align left");const P=Z.getSelectedShapeIds();Z.alignShapes(P,"left"),K8(Z,P)}},{id:"align-center-horizontal",label:{default:"action.align-center-horizontal",["context-menu"]:"action.align-center-horizontal.short"},kbd:"?H",icon:"align-center-horizontal",onSelect(k){if(!A())return;if(_())return;V("align-shapes",{operation:"center-horizontal",source:k}),Z.mark("align center horizontal");const P=Z.getSelectedShapeIds();Z.alignShapes(P,"center-horizontal"),K8(Z,P)}},{id:"align-right",label:"action.align-right",kbd:"?D",icon:"align-right",onSelect(k){if(!A())return;if(_())return;V("align-shapes",{operation:"right",source:k}),Z.mark("align right");const P=Z.getSelectedShapeIds();Z.alignShapes(P,"right"),K8(Z,P)}},{id:"align-center-vertical",label:{default:"action.align-center-vertical",["context-menu"]:"action.align-center-vertical.short"},kbd:"?V",icon:"align-center-vertical",onSelect(k){if(!A())return;if(_())return;V("align-shapes",{operation:"center-vertical",source:k}),Z.mark("align center vertical");const P=Z.getSelectedShapeIds();Z.alignShapes(P,"center-vertical"),K8(Z,P)}},{id:"align-top",label:"action.align-top",icon:"align-top",kbd:"?W",onSelect(k){if(!A())return;if(_())return;V("align-shapes",{operation:"top",source:k}),Z.mark("align top");const P=Z.getSelectedShapeIds();Z.alignShapes(P,"top"),K8(Z,P)}},{id:"align-bottom",label:"action.align-bottom",icon:"align-bottom",kbd:"?S",onSelect(k){if(!A())return;if(_())return;V("align-shapes",{operation:"bottom",source:k}),Z.mark("align bottom");const P=Z.getSelectedShapeIds();Z.alignShapes(P,"bottom"),K8(Z,P)}},{id:"distribute-horizontal",label:{default:"action.distribute-horizontal",["context-menu"]:"action.distribute-horizontal.short"},icon:"distribute-horizontal",kbd:"?!h",onSelect(k){if(!A())return;if(_())return;V("distribute-shapes",{operation:"horizontal",source:k}),Z.mark("distribute horizontal");const P=Z.getSelectedShapeIds();Z.distributeShapes(P,"horizontal"),K8(Z,P)}},{id:"distribute-vertical",label:{default:"action.distribute-vertical",["context-menu"]:"action.distribute-vertical.short"},icon:"distribute-vertical",kbd:"?!V",onSelect(k){if(!A())return;if(_())return;V("distribute-shapes",{operation:"vertical",source:k}),Z.mark("distribute vertical");const P=Z.getSelectedShapeIds();Z.distributeShapes(P,"vertical"),K8(Z,P)}},{id:"stretch-horizontal",label:{default:"action.stretch-horizontal",["context-menu"]:"action.stretch-horizontal.short"},icon:"stretch-horizontal",onSelect(k){if(!A())return;if(_())return;V("stretch-shapes",{operation:"horizontal",source:k}),Z.mark("stretch horizontal");const P=Z.getSelectedShapeIds();Z.stretchShapes(P,"horizontal"),K8(Z,P)}},{id:"stretch-vertical",label:{default:"action.stretch-vertical",["context-menu"]:"action.stretch-vertical.short"},icon:"stretch-vertical",onSelect(k){if(!A())return;if(_())return;V("stretch-shapes",{operation:"vertical",source:k}),Z.mark("stretch vertical");const P=Z.getSelectedShapeIds();Z.stretchShapes(P,"vertical"),K8(Z,P)}},{id:"flip-horizontal",label:{default:"action.flip-horizontal",["context-menu"]:"action.flip-horizontal.short"},kbd:"!h",onSelect(k){if(!A())return;if(_())return;V("flip-shapes",{operation:"horizontal",source:k}),Z.mark("flip horizontal");const P=Z.getSelectedShapeIds();Z.flipShapes(P,"horizontal"),K8(Z,P)}},{id:"flip-vertical",label:{default:"action.flip-vertical",["context-menu"]:"action.flip-vertical.short"},kbd:"!v",onSelect(k){if(!A())return;if(_())return;V("flip-shapes",{operation:"vertical",source:k}),Z.mark("flip vertical");const P=Z.getSelectedShapeIds();Z.flipShapes(P,"vertical"),K8(Z,P)}},{id:"pack",label:"action.pack",icon:"pack",onSelect(k){if(!A())return;if(_())return;V("pack-shapes",{source:k}),Z.mark("pack");const P=Z.getSelectedShapeIds();Z.packShapes(P,16),K8(Z,P)}},{id:"stack-vertical",label:{default:"action.stack-vertical",["context-menu"]:"action.stack-vertical.short"},icon:"stack-vertical",onSelect(k){if(!A())return;if(_())return;V("stack-shapes",{operation:"vertical",source:k}),Z.mark("stack-vertical");const P=Z.getSelectedShapeIds();Z.stackShapes(P,"vertical",16),K8(Z,P)}},{id:"stack-horizontal",label:{default:"action.stack-horizontal",["context-menu"]:"action.stack-horizontal.short"},icon:"stack-horizontal",onSelect(k){if(!A())return;if(_())return;V("stack-shapes",{operation:"horizontal",source:k}),Z.mark("stack-horizontal");const P=Z.getSelectedShapeIds();Z.stackShapes(P,"horizontal",16),K8(Z,P)}},{id:"bring-to-front",label:"action.bring-to-front",kbd:"]",icon:"bring-to-front",onSelect(k){if(!A())return;if(_())return;V("reorder-shapes",{operation:"toFront",source:k}),Z.mark("bring to front"),Z.bringToFront(Z.getSelectedShapeIds())}},{id:"bring-forward",label:"action.bring-forward",icon:"bring-forward",kbd:"?]",onSelect(k){if(!A())return;if(_())return;V("reorder-shapes",{operation:"forward",source:k}),Z.mark("bring forward"),Z.bringForward(Z.getSelectedShapeIds())}},{id:"send-backward",label:"action.send-backward",icon:"send-backward",kbd:"?[",onSelect(k){if(!A())return;if(_())return;V("reorder-shapes",{operation:"backward",source:k}),Z.mark("send backward"),Z.sendBackward(Z.getSelectedShapeIds())}},{id:"send-to-back",label:"action.send-to-back",icon:"send-to-back",kbd:"[",onSelect(k){if(!A())return;if(_())return;V("reorder-shapes",{operation:"toBack",source:k}),Z.mark("send to back"),Z.sendToBack(Z.getSelectedShapeIds())}},{id:"cut",label:"action.cut",kbd:"$x",onSelect(k){if(!A())return;if(_())return;Z.mark("cut"),U(k)}},{id:"copy",label:"action.copy",kbd:"$c",readonlyOk:!0,onSelect(k){if(!A())return;if(_())return;F(k)}},{id:"paste",label:"action.paste",kbd:"$v",onSelect(k){navigator.clipboard?.read().then((P)=>{B(P,k,k==="context-menu"?Z.inputs.currentPagePoint:void 0)})}},{id:"select-all",label:"action.select-all",kbd:"$a",readonlyOk:!0,onSelect(k){Z.batch(()=>{if(_())return;V("select-all-shapes",{source:k}),Z.mark("select all kbd"),Z.selectAll()})}},{id:"select-none",label:"action.select-none",readonlyOk:!0,onSelect(k){if(!A())return;if(_())return;V("select-none-shapes",{source:k}),Z.mark("select none"),Z.selectNone()}},{id:"delete",label:"action.delete",kbd:"\u232B,del,backspace",icon:"trash",onSelect(k){if(!A())return;if(_())return;V("delete-shapes",{source:k}),Z.mark("delete"),Z.deleteShapes(Z.getSelectedShapeIds())}},{id:"rotate-cw",label:"action.rotate-cw",icon:"rotate-cw",onSelect(k){if(!A())return;if(_())return;V("rotate-cw",{source:k}),Z.mark("rotate-cw");const P=Z.getSelectionRotation()%(t6/2),y=YX(P,0)||YX(P,t6/2),p=Z.getSelectedShapeIds();Z.rotateShapesBy(p,t6/2-(y?0:P)),K8(Z,p)}},{id:"rotate-ccw",label:"action.rotate-ccw",icon:"rotate-ccw",onSelect(k){if(!A())return;if(_())return;V("rotate-ccw",{source:k}),Z.mark("rotate-ccw");const P=Z.getSelectionRotation()%(t6/2),y=YX(P,0),p=Z.getSelectedShapeIds();Z.rotateShapesBy(p,y?-(t6/2):-P),K8(Z,p)}},{id:"zoom-in",label:"action.zoom-in",kbd:"$=,=",readonlyOk:!0,onSelect(k){V("zoom-in",{source:k}),Z.zoomIn(Z.getViewportScreenCenter(),{duration:SJ})}},{id:"zoom-out",label:"action.zoom-out",kbd:"$-,-",readonlyOk:!0,onSelect(k){V("zoom-out",{source:k}),Z.zoomOut(Z.getViewportScreenCenter(),{duration:SJ})}},{id:"zoom-to-100",label:"action.zoom-to-100",icon:"reset-zoom",kbd:"!0",readonlyOk:!0,onSelect(k){V("reset-zoom",{source:k}),Z.resetZoom(Z.getViewportScreenCenter(),{duration:SJ})}},{id:"zoom-to-fit",label:"action.zoom-to-fit",kbd:"!1",readonlyOk:!0,onSelect(k){V("zoom-to-fit",{source:k}),Z.zoomToFit({duration:SJ})}},{id:"zoom-to-selection",label:"action.zoom-to-selection",kbd:"!2",readonlyOk:!0,onSelect(k){if(!A())return;if(_())return;V("zoom-to-selection",{source:k}),Z.zoomToSelection({duration:SJ})}},{id:"toggle-snap-mode",label:{default:"action.toggle-snap-mode",menu:"action.toggle-snap-mode.menu"},onSelect(k){V("toggle-snap-mode",{source:k}),Z.user.updateUserPreferences({isSnapMode:!Z.user.getIsSnapMode()})},checkbox:!0},{id:"toggle-dark-mode",label:{default:"action.toggle-dark-mode",menu:"action.toggle-dark-mode.menu"},kbd:"$/",readonlyOk:!0,onSelect(k){V("toggle-dark-mode",{source:k}),Z.user.updateUserPreferences({isDarkMode:!Z.user.getIsDarkMode()})},checkbox:!0},{id:"toggle-wrap-mode",label:{default:"action.toggle-wrap-mode",menu:"action.toggle-wrap-mode.menu"},readonlyOk:!0,onSelect(k){V("toggle-wrap-mode",{source:k}),Z.user.updateUserPreferences({isWrapMode:!Z.user.getIsWrapMode()})},checkbox:!0},{id:"toggle-reduce-motion",label:{default:"action.toggle-reduce-motion",menu:"action.toggle-reduce-motion.menu"},readonlyOk:!0,onSelect(k){V("toggle-reduce-motion",{source:k}),Z.user.updateUserPreferences({animationSpeed:Z.user.getAnimationSpeed()===0?1:0})},checkbox:!0},{id:"toggle-edge-scrolling",label:{default:"action.toggle-edge-scrolling",menu:"action.toggle-edge-scrolling.menu"},readonlyOk:!0,onSelect(k){V("toggle-edge-scrolling",{source:k}),Z.user.updateUserPreferences({edgeScrollSpeed:Z.user.getEdgeScrollSpeed()===0?1:0})},checkbox:!0},{id:"toggle-transparent",label:{default:"action.toggle-transparent",menu:"action.toggle-transparent.menu",["context-menu"]:"action.toggle-transparent.context-menu"},readonlyOk:!0,onSelect(k){V("toggle-transparent",{source:k}),Z.updateInstanceState({exportBackground:!Z.getInstanceState().exportBackground},{ephemeral:!0})},checkbox:!0},{id:"toggle-tool-lock",label:{default:"action.toggle-tool-lock",menu:"action.toggle-tool-lock.menu"},kbd:"q",onSelect(k){V("toggle-tool-lock",{source:k}),Z.updateInstanceState({isToolLocked:!Z.getInstanceState().isToolLocked})},checkbox:!0},{id:"unlock-all",label:"action.unlock-all",onSelect(k){V("unlock-all",{source:k});const P=[];for(let y of Z.getCurrentPageShapes())if(y.isLocked)P.push({id:y.id,type:y.type,isLocked:!1});if(P.length>0)Z.updateShapes(P)}},{id:"toggle-focus-mode",label:{default:"action.toggle-focus-mode",menu:"action.toggle-focus-mode.menu"},readonlyOk:!0,kbd:"$.",checkbox:!0,onSelect(k){requestAnimationFrame(()=>{Z.batch(()=>{V("toggle-focus-mode",{source:k}),Y(),$(),Z.updateInstanceState({isFocusMode:!Z.getInstanceState().isFocusMode})})})}},{id:"toggle-grid",label:{default:"action.toggle-grid",menu:"action.toggle-grid.menu"},readonlyOk:!0,kbd:"$'",onSelect(k){V("toggle-grid-mode",{source:k}),Z.updateInstanceState({isGridMode:!Z.getInstanceState().isGridMode})},checkbox:!0},{id:"toggle-debug-mode",label:{default:"action.toggle-debug-mode",menu:"action.toggle-debug-mode.menu"},readonlyOk:!0,onSelect(k){V("toggle-debug-mode",{source:k}),Z.updateInstanceState({isDebugMode:!Z.getInstanceState().isDebugMode})},checkbox:!0},{id:"print",label:"action.print",kbd:"$p",readonlyOk:!0,onSelect(k){V("print",{source:k}),z()}},{id:"exit-pen-mode",label:"action.exit-pen-mode",icon:"cross-2",readonlyOk:!0,onSelect(k){V("exit-pen-mode",{source:k}),Z.updateInstanceState({isPenMode:!1})}},{id:"stop-following",label:"action.stop-following",icon:"cross-2",readonlyOk:!0,onSelect(k){V("stop-following",{source:k}),Z.stopFollowingUser()}},{id:"back-to-content",label:"action.back-to-content",icon:"arrow-left",readonlyOk:!0,onSelect(k){V("zoom-to-content",{source:k}),Z.zoomToContent()}},{id:"toggle-lock",label:"action.toggle-lock",kbd:"!l",onSelect(k){Z.mark("locking"),V("toggle-lock",{source:k}),Z.toggleLock(Z.getSelectedShapeIds())}},{id:"new-page",label:"context.pages.new-page",onSelect(k){const P=a5.createId(),y=Z.getSelectedShapeIds();Z.batch(()=>{Z.mark("move_shapes_to_page"),Z.createPage({name:W("page-menu.new-page-initial-name"),id:P}),Z.moveShapesToPage(y,P)}),V("new-page",{source:k})}},{id:"select-white-color",label:"color-style.white",kbd:"?t",onSelect(k){const P=F9;Z.batch(()=>{if(Z.mark("change-color"),Z.isIn("select"))Z.setStyleForSelectedShapes(P,"white",{squashing:!1});Z.setStyleForNextShapes(P,"white",{squashing:!1}),Z.updateInstanceState({isChangingStyle:!0},{ephemeral:!0})}),V("set-style",{source:k,id:P.id,value:"white"})}}]);if(J)return J(Z,T,void 0);return T},[Z,V,J,q,G,O,M,U,F,B,Y,$,z,W,R]);return aa.jsx(oa.Provider,{value:nM0(E),children:Q})},l0=function(){const J=w2.useContext(oa);if(!J)throw new Error("useTools must be used within a ToolProvider");return J},nM0=function(J){return J},fQ=function(J,Q){return J?typeof J==="string"?J:Q?J[Q]??J.default:void 0:void 0},oa=w2.createContext({});var q60=v(W0(),1);var n2=v(o(),1);var dQ=v(W0(),1);var Xe=v(o(),1);var v2=v(W0(),1);var J8=v(o(),1);var YJ=v(o(),1);var aO=function(J,Q,Z){return V7(J,gQ(Q,Z))},mQ=function(J,Q){return typeof J==="function"?J(Q):J},hQ=function(J){return J.split("-")[0]},IK=function(J){return J.split("-")[1]},oO=function(J){return J==="x"?"y":"x"},tO=function(J){return J==="y"?"height":"width"},PK=function(J){return["top","bottom"].includes(hQ(J))?"y":"x"},eO=function(J){return oO(PK(J))},Jo=function(J,Q,Z){if(Z===void 0)Z=!1;const q=IK(J),Y=eO(J),$=tO(Y);let W=Y==="x"?q===(Z?"end":"start")?"right":"left":q==="start"?"bottom":"top";if(Q.reference[$]>Q.floating[$])W=JU(W);return[W,JU(W)]},Qo=function(J){const Q=JU(J);return[rO(J),Q,rO(Q)]},rO=function(J){return J.replace(/start|end/g,(Q)=>rM0[Q])},aM0=function(J,Q,Z){const q=["left","right"],Y=["right","left"],$=["top","bottom"],W=["bottom","top"];switch(J){case"top":case"bottom":if(Z)return Q?Y:q;return Q?q:Y;case"left":case"right":return Q?$:W;default:return[]}},Zo=function(J,Q,Z,q){const Y=IK(J);let $=aM0(hQ(J),Z==="start",q);if(Y){if($=$.map((W)=>W+"-"+Y),Q)$=$.concat($.map(rO))}return $},JU=function(J){return J.replace(/left|right|bottom|top/g,(Q)=>sM0[Q])},oM0=function(J){return{top:0,right:0,bottom:0,left:0,...J}},VP=function(J){return typeof J!=="number"?oM0(J):{top:J,right:J,bottom:J,left:J}},TK=function(J){const{x:Q,y:Z,width:q,height:Y}=J;return{width:q,height:Y,top:Z,left:Q,right:Q+q,bottom:Z+Y,x:Q,y:Z}},ea=["top","right","bottom","left"];var{min:gQ,max:V7,round:QU,floor:ZU}=Math,eZ=(J)=>({x:J,y:J}),sM0={left:"right",right:"left",bottom:"top",top:"bottom"},rM0={start:"end",end:"start"};var qo=function(J,Q,Z){let{reference:q,floating:Y}=J;const $=PK(Q),W=eO(Q),G=tO(W),z=hQ(Q),U=$==="y",F=q.x+q.width/2-Y.width/2,B=q.y+q.height/2-Y.height/2,M=q[G]/2-Y[G]/2;let O;switch(z){case"top":O={x:F,y:q.y-Y.height};break;case"bottom":O={x:F,y:q.y+q.height};break;case"right":O={x:q.x+q.width,y:B};break;case"left":O={x:q.x-Y.width,y:B};break;default:O={x:q.x,y:q.y}}switch(IK(Q)){case"start":O[W]-=M*(Z&&U?-1:1);break;case"end":O[W]+=M*(Z&&U?-1:1);break}return O};async function I2(J,Q){var Z;if(Q===void 0)Q={};const{x:q,y:Y,platform:$,rects:W,elements:G,strategy:z}=J,{boundary:U="clippingAncestors",rootBoundary:F="viewport",elementContext:B="floating",altBoundary:M=!1,padding:O=0}=mQ(Q,J),R=VP(O),E=G[M?B==="floating"?"reference":"floating":B],_=TK(await $.getClippingRect({element:((Z=await($.isElement==null?void 0:$.isElement(E)))!=null?Z:!0)?E:E.contextElement||await($.getDocumentElement==null?void 0:$.getDocumentElement(G.floating)),boundary:U,rootBoundary:F,strategy:z})),A=B==="floating"?{...W.floating,x:q,y:Y}:W.reference,w=await($.getOffsetParent==null?void 0:$.getOffsetParent(G.floating)),T=await($.isElement==null?void 0:$.isElement(w))?await($.getScale==null?void 0:$.getScale(w))||{x:1,y:1}:{x:1,y:1},k=TK($.convertOffsetParentRelativeRectToViewportRelativeRect?await $.convertOffsetParentRelativeRectToViewportRelativeRect({elements:G,rect:A,offsetParent:w,strategy:z}):A);return{top:(_.top-k.top+R.top)/T.y,bottom:(k.bottom-_.bottom+R.bottom)/T.y,left:(_.left-k.left+R.left)/T.x,right:(k.right-_.right+R.right)/T.x}}var Xo=function(J,Q){return{top:J.top-Q.height,right:J.right-Q.width,bottom:J.bottom-Q.height,left:J.left-Q.width}},Yo=function(J){return ea.some((Q)=>J[Q]>=0)};async function tM0(J,Q){const{placement:Z,platform:q,elements:Y}=J,$=await(q.isRTL==null?void 0:q.isRTL(Y.floating)),W=hQ(Z),G=IK(Z),z=PK(Z)==="y",U=["left","top"].includes(W)?-1:1,F=$&&z?-1:1,B=mQ(Q,J);let{mainAxis:M,crossAxis:O,alignmentAxis:R}=typeof B==="number"?{mainAxis:B,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...B};if(G&&typeof R==="number")O=G==="end"?R*-1:R;return z?{x:O*F,y:M*U}:{x:M*U,y:O*F}}var Ko=async(J,Q,Z)=>{const{placement:q="bottom",strategy:Y="absolute",middleware:$=[],platform:W}=Z,G=$.filter(Boolean),z=await(W.isRTL==null?void 0:W.isRTL(Q));let U=await W.getElementRects({reference:J,floating:Q,strategy:Y}),{x:F,y:B}=qo(U,q,z),M=q,O={},R=0;for(let V=0;V<G.length;V++){const{name:E,fn:_}=G[V],{x:A,y:w,data:T,reset:k}=await _({x:F,y:B,initialPlacement:q,placement:M,strategy:Y,middlewareData:O,rects:U,platform:W,elements:{reference:J,floating:Q}});if(F=A!=null?A:F,B=w!=null?w:B,O={...O,[E]:{...O[E],...T}},k&&R<=50){if(R++,typeof k==="object"){if(k.placement)M=k.placement;if(k.rects)U=k.rects===!0?await W.getElementRects({reference:J,floating:Q,strategy:Y}):k.rects;({x:F,y:B}=qo(U,M,z))}V=-1}}return{x:F,y:B,placement:M,strategy:Y,middlewareData:O}},$o=(J)=>({name:"arrow",options:J,async fn(Q){const{x:Z,y:q,placement:Y,rects:$,platform:W,elements:G,middlewareData:z}=Q,{element:U,padding:F=0}=mQ(J,Q)||{};if(U==null)return{};const B=VP(F),M={x:Z,y:q},O=eO(Y),R=tO(O),V=await W.getDimensions(U),E=O==="y",_=E?"top":"left",A=E?"bottom":"right",w=E?"clientHeight":"clientWidth",T=$.reference[R]+$.reference[O]-M[O]-$.floating[R],k=M[O]-$.reference[O],P=await(W.getOffsetParent==null?void 0:W.getOffsetParent(U));let y=P?P[w]:0;if(!y||!await(W.isElement==null?void 0:W.isElement(P)))y=G.floating[w]||$.floating[R];const p=T/2-k/2,s=y/2-V[R]/2-1,c=gQ(B[_],s),t=gQ(B[A],s),X0=c,J0=y-V[R]-t,Q0=y/2-V[R]/2+p,a=aO(X0,Q0,J0),_0=!z.arrow&&IK(Y)!=null&&Q0!==a&&$.reference[R]/2-(Q0<X0?c:t)-V[R]/2<0,T0=_0?Q0<X0?Q0-X0:Q0-J0:0;return{[O]:M[O]+T0,data:{[O]:a,centerOffset:Q0-a-T0,..._0&&{alignmentOffset:T0}},reset:_0}}});var Wo=function(J){if(J===void 0)J={};return{name:"flip",options:J,async fn(Q){var Z,q;const{placement:Y,middlewareData:$,rects:W,initialPlacement:G,platform:z,elements:U}=Q,{mainAxis:F=!0,crossAxis:B=!0,fallbackPlacements:M,fallbackStrategy:O="bestFit",fallbackAxisSideDirection:R="none",flipAlignment:V=!0,...E}=mQ(J,Q);if((Z=$.arrow)!=null&&Z.alignmentOffset)return{};const _=hQ(Y),A=hQ(G)===G,w=await(z.isRTL==null?void 0:z.isRTL(U.floating)),T=M||(A||!V?[JU(G)]:Qo(G));if(!M&&R!=="none")T.push(...Zo(G,V,R,w));const k=[G,...T],P=await I2(Q,E),y=[];let p=((q=$.flip)==null?void 0:q.overflows)||[];if(F)y.push(P[_]);if(B){const X0=Jo(Y,W,w);y.push(P[X0[0]],P[X0[1]])}if(p=[...p,{placement:Y,overflows:y}],!y.every((X0)=>X0<=0)){var s,c;const X0=(((s=$.flip)==null?void 0:s.index)||0)+1,J0=k[X0];if(J0)return{data:{index:X0,overflows:p},reset:{placement:J0}};let Q0=(c=p.filter((a)=>a.overflows[0]<=0).sort((a,_0)=>a.overflows[1]-_0.overflows[1])[0])==null?void 0:c.placement;if(!Q0)switch(O){case"bestFit":{var t;const a=(t=p.map((_0)=>[_0.placement,_0.overflows.filter((T0)=>T0>0).reduce((T0,r0)=>T0+r0,0)]).sort((_0,T0)=>_0[1]-T0[1])[0])==null?void 0:t[0];if(a)Q0=a;break}case"initialPlacement":Q0=G;break}if(Y!==Q0)return{reset:{placement:Q0}}}return{}}}},Go=function(J){if(J===void 0)J={};return{name:"hide",options:J,async fn(Q){const{rects:Z}=Q,{strategy:q="referenceHidden",...Y}=mQ(J,Q);switch(q){case"referenceHidden":{const $=await I2(Q,{...Y,elementContext:"reference"}),W=Xo($,Z.reference);return{data:{referenceHiddenOffsets:W,referenceHidden:Yo(W)}}}case"escaped":{const $=await I2(Q,{...Y,altBoundary:!0}),W=Xo($,Z.floating);return{data:{escapedOffsets:W,escaped:Yo(W)}}}default:return{}}}}};var Ho=function(J){if(J===void 0)J=0;return{name:"offset",options:J,async fn(Q){var Z,q;const{x:Y,y:$,placement:W,middlewareData:G}=Q,z=await tM0(Q,J);if(W===((Z=G.offset)==null?void 0:Z.placement)&&(q=G.arrow)!=null&&q.alignmentOffset)return{};return{x:Y+z.x,y:$+z.y,data:{...z,placement:W}}}}},zo=function(J){if(J===void 0)J={};return{name:"shift",options:J,async fn(Q){const{x:Z,y:q,placement:Y}=Q,{mainAxis:$=!0,crossAxis:W=!1,limiter:G={fn:(E)=>{let{x:_,y:A}=E;return{x:_,y:A}}},...z}=mQ(J,Q),U={x:Z,y:q},F=await I2(Q,z),B=PK(hQ(Y)),M=oO(B);let O=U[M],R=U[B];if($){const E=M==="y"?"top":"left",_=M==="y"?"bottom":"right",A=O+F[E],w=O-F[_];O=aO(A,O,w)}if(W){const E=B==="y"?"top":"left",_=B==="y"?"bottom":"right",A=R+F[E],w=R-F[_];R=aO(A,R,w)}const V=G.fn({...Q,[M]:O,[B]:R});return{...V,data:{x:V.x-Z,y:V.y-q}}}}},Uo=function(J){if(J===void 0)J={};return{options:J,fn(Q){const{x:Z,y:q,placement:Y,rects:$,middlewareData:W}=Q,{offset:G=0,mainAxis:z=!0,crossAxis:U=!0}=mQ(J,Q),F={x:Z,y:q},B=PK(Y),M=oO(B);let O=F[M],R=F[B];const V=mQ(G,Q),E=typeof V==="number"?{mainAxis:V,crossAxis:0}:{mainAxis:0,crossAxis:0,...V};if(z){const w=M==="y"?"height":"width",T=$.reference[M]-$.floating[w]+E.mainAxis,k=$.reference[M]+$.reference[w]-E.mainAxis;if(O<T)O=T;else if(O>k)O=k}if(U){var _,A;const w=M==="y"?"width":"height",T=["top","left"].includes(hQ(Y)),k=$.reference[B]-$.floating[w]+(T?((_=W.offset)==null?void 0:_[B])||0:0)+(T?0:E.crossAxis),P=$.reference[B]+$.reference[w]+(T?0:((A=W.offset)==null?void 0:A[B])||0)-(T?E.crossAxis:0);if(R<k)R=k;else if(R>P)R=P}return{[M]:O,[B]:R}}}},Lo=function(J){if(J===void 0)J={};return{name:"size",options:J,async fn(Q){const{placement:Z,rects:q,platform:Y,elements:$}=Q,{apply:W=()=>{},...G}=mQ(J,Q),z=await I2(Q,G),U=hQ(Z),F=IK(Z),B=PK(Z)==="y",{width:M,height:O}=q.floating;let R,V;if(U==="top"||U==="bottom")R=U,V=F===(await(Y.isRTL==null?void 0:Y.isRTL($.floating))?"start":"end")?"left":"right";else V=U,R=F==="end"?"top":"bottom";const E=O-z[R],_=M-z[V],A=!Q.middlewareData.shift;let w=E,T=_;if(B){const P=M-z.left-z.right;T=F||A?gQ(_,P):P}else{const P=O-z.top-z.bottom;w=F||A?gQ(E,P):P}if(A&&!F){const P=V7(z.left,0),y=V7(z.right,0),p=V7(z.top,0),s=V7(z.bottom,0);if(B)T=M-2*(P!==0||y!==0?P+y:V7(z.left,z.right));else w=O-2*(p!==0||s!==0?p+s:V7(z.top,z.bottom))}await W({...Q,availableWidth:T,availableHeight:w});const k=await Y.getDimensions($.floating);if(M!==k.width||O!==k.height)return{reset:{rects:!0}};return{}}}};var xK=function(J){if(Bo(J))return(J.nodeName||"").toLowerCase();return"#document"},e7=function(J){var Q;return(J==null||(Q=J.ownerDocument)==null?void 0:Q.defaultView)||window},uQ=function(J){var Q;return(Q=(Bo(J)?J.ownerDocument:J.document)||window.document)==null?void 0:Q.documentElement},Bo=function(J){return J instanceof Node||J instanceof e7(J).Node},s1=function(J){return J instanceof Element||J instanceof e7(J).Element},r1=function(J){return J instanceof HTMLElement||J instanceof e7(J).HTMLElement},Fo=function(J){if(typeof ShadowRoot==="undefined")return!1;return J instanceof ShadowRoot||J instanceof e7(J).ShadowRoot},P2=function(J){const{overflow:Q,overflowX:Z,overflowY:q,display:Y}=$1(J);return/auto|scroll|overlay|hidden|clip/.test(Q+q+Z)&&!["inline","contents"].includes(Y)},No=function(J){return["table","td","th"].includes(xK(J))},JV=function(J){const Q=QV(),Z=$1(J);return Z.transform!=="none"||Z.perspective!=="none"||(Z.containerType?Z.containerType!=="normal":!1)||!Q&&(Z.backdropFilter?Z.backdropFilter!=="none":!1)||!Q&&(Z.filter?Z.filter!=="none":!1)||["transform","perspective","filter"].some((q)=>(Z.willChange||"").includes(q))||["paint","layout","strict","content"].some((q)=>(Z.contain||"").includes(q))},Mo=function(J){let Q=Jq(J);while(r1(Q)&&!yK(Q)){if(JV(Q))return Q;Q=Jq(Q)}return null},QV=function(){if(typeof CSS==="undefined"||!CSS.supports)return!1;return CSS.supports("-webkit-backdrop-filter","none")},yK=function(J){return["html","body","#document"].includes(xK(J))},$1=function(J){return e7(J).getComputedStyle(J)},qU=function(J){if(s1(J))return{scrollLeft:J.scrollLeft,scrollTop:J.scrollTop};return{scrollLeft:J.pageXOffset,scrollTop:J.pageYOffset}},Jq=function(J){if(xK(J)==="html")return J;const Q=J.assignedSlot||J.parentNode||Fo(J)&&J.host||uQ(J);return Fo(Q)?Q.host:Q},Oo=function(J){const Q=Jq(J);if(yK(Q))return J.ownerDocument?J.ownerDocument.body:J.body;if(r1(Q)&&P2(Q))return Q;return Oo(Q)},bK=function(J,Q,Z){var q;if(Q===void 0)Q=[];if(Z===void 0)Z=!0;const Y=Oo(J),$=Y===((q=J.ownerDocument)==null?void 0:q.body),W=e7(Y);if($)return Q.concat(W,W.visualViewport||[],P2(Y)?Y:[],W.frameElement&&Z?bK(W.frameElement):[]);return Q.concat(Y,bK(Y,[],Z))};var Ro=function(J){const Q=$1(J);let Z=parseFloat(Q.width)||0,q=parseFloat(Q.height)||0;const Y=r1(J),$=Y?J.offsetWidth:Z,W=Y?J.offsetHeight:q,G=QU(Z)!==$||QU(q)!==W;if(G)Z=$,q=W;return{width:Z,height:q,$:G}},RP=function(J){return!s1(J)?J.contextElement:J},T2=function(J){const Q=RP(J);if(!r1(Q))return eZ(1);const Z=Q.getBoundingClientRect(),{width:q,height:Y,$}=Ro(Q);let W=($?QU(Z.width):Z.width)/q,G=($?QU(Z.height):Z.height)/Y;if(!W||!Number.isFinite(W))W=1;if(!G||!Number.isFinite(G))G=1;return{x:W,y:G}},jo=function(J){const Q=e7(J);if(!QV()||!Q.visualViewport)return eM0;return{x:Q.visualViewport.offsetLeft,y:Q.visualViewport.offsetTop}},JO0=function(J,Q,Z){if(Q===void 0)Q=!1;if(!Z||Q&&Z!==e7(J))return!1;return Q},vK=function(J,Q,Z,q){if(Q===void 0)Q=!1;if(Z===void 0)Z=!1;const Y=J.getBoundingClientRect(),$=RP(J);let W=eZ(1);if(Q)if(q){if(s1(q))W=T2(q)}else W=T2(J);const G=JO0($,Z,q)?jo($):eZ(0);let z=(Y.left+G.x)/W.x,U=(Y.top+G.y)/W.y,F=Y.width/W.x,B=Y.height/W.y;if($){const M=e7($),O=q&&s1(q)?e7(q):q;let R=M,V=R.frameElement;while(V&&q&&O!==R){const E=T2(V),_=V.getBoundingClientRect(),A=$1(V),w=_.left+(V.clientLeft+parseFloat(A.paddingLeft))*E.x,T=_.top+(V.clientTop+parseFloat(A.paddingTop))*E.y;z*=E.x,U*=E.y,F*=E.x,B*=E.y,z+=w,U+=T,R=e7(V),V=R.frameElement}}return TK({width:F,height:B,x:z,y:U})},jP=function(J){return QO0.some((Q)=>{try{return J.matches(Q)}catch(Z){return!1}})},ZO0=function(J){let{elements:Q,rect:Z,offsetParent:q,strategy:Y}=J;const $=Y==="fixed",W=uQ(q),G=Q?jP(Q.floating):!1;if(q===W||G&&$)return Z;let z={scrollLeft:0,scrollTop:0},U=eZ(1);const F=eZ(0),B=r1(q);if(B||!B&&!$){if(xK(q)!=="body"||P2(W))z=qU(q);if(r1(q)){const M=vK(q);U=T2(q),F.x=M.x+q.clientLeft,F.y=M.y+q.clientTop}}return{width:Z.width*U.x,height:Z.height*U.y,x:Z.x*U.x-z.scrollLeft*U.x+F.x,y:Z.y*U.y-z.scrollTop*U.y+F.y}},qO0=function(J){return Array.from(J.getClientRects())},_o=function(J){return vK(uQ(J)).left+qU(J).scrollLeft},XO0=function(J){const Q=uQ(J),Z=qU(J),q=J.ownerDocument.body,Y=V7(Q.scrollWidth,Q.clientWidth,q.scrollWidth,q.clientWidth),$=V7(Q.scrollHeight,Q.clientHeight,q.scrollHeight,q.clientHeight);let W=-Z.scrollLeft+_o(J);const G=-Z.scrollTop;if($1(q).direction==="rtl")W+=V7(Q.clientWidth,q.clientWidth)-Y;return{width:Y,height:$,x:W,y:G}},YO0=function(J,Q){const Z=e7(J),q=uQ(J),Y=Z.visualViewport;let{clientWidth:$,clientHeight:W}=q,G=0,z=0;if(Y){$=Y.width,W=Y.height;const U=QV();if(!U||U&&Q==="fixed")G=Y.offsetLeft,z=Y.offsetTop}return{width:$,height:W,x:G,y:z}},KO0=function(J,Q){const Z=vK(J,!0,Q==="fixed"),q=Z.top+J.clientTop,Y=Z.left+J.clientLeft,$=r1(J)?T2(J):eZ(1),W=J.clientWidth*$.x,G=J.clientHeight*$.y,z=Y*$.x,U=q*$.y;return{width:W,height:G,x:z,y:U}},Vo=function(J,Q,Z){let q;if(Q==="viewport")q=YO0(J,Z);else if(Q==="document")q=XO0(uQ(J));else if(s1(Q))q=KO0(Q,Z);else{const Y=jo(J);q={...Q,x:Q.x-Y.x,y:Q.y-Y.y}}return TK(q)},Eo=function(J,Q){const Z=Jq(J);if(Z===Q||!s1(Z)||yK(Z))return!1;return $1(Z).position==="fixed"||Eo(Z,Q)},$O0=function(J,Q){const Z=Q.get(J);if(Z)return Z;let q=bK(J,[],!1).filter((G)=>s1(G)&&xK(G)!=="body"),Y=null;const $=$1(J).position==="fixed";let W=$?Jq(J):J;while(s1(W)&&!yK(W)){const G=$1(W),z=JV(W);if(!z&&G.position==="fixed")Y=null;if($?!z&&!Y:!z&&G.position==="static"&&!!Y&&["absolute","fixed"].includes(Y.position)||P2(W)&&!z&&Eo(J,W))q=q.filter((F)=>F!==W);else Y=G;W=Jq(W)}return Q.set(J,q),q},WO0=function(J){let{element:Q,boundary:Z,rootBoundary:q,strategy:Y}=J;const W=[...Z==="clippingAncestors"?jP(Q)?[]:$O0(Q,this._c):[].concat(Z),q],G=W[0],z=W.reduce((U,F)=>{const B=Vo(Q,F,Y);return U.top=V7(B.top,U.top),U.right=gQ(B.right,U.right),U.bottom=gQ(B.bottom,U.bottom),U.left=V7(B.left,U.left),U},Vo(Q,G,Y));return{width:z.right-z.left,height:z.bottom-z.top,x:z.left,y:z.top}},GO0=function(J){const{width:Q,height:Z}=Ro(J);return{width:Q,height:Z}},HO0=function(J,Q,Z){const q=r1(Q),Y=uQ(Q),$=Z==="fixed",W=vK(J,!0,$,Q);let G={scrollLeft:0,scrollTop:0};const z=eZ(0);if(q||!q&&!$){if(xK(Q)!=="body"||P2(Y))G=qU(Q);if(q){const B=vK(Q,!0,$,Q);z.x=B.x+Q.clientLeft,z.y=B.y+Q.clientTop}else if(Y)z.x=_o(Y)}const U=W.left+G.scrollLeft-z.x,F=W.top+G.scrollTop-z.y;return{x:U,y:F,width:W.width,height:W.height}},DP=function(J){return $1(J).position==="static"},Do=function(J,Q){if(!r1(J)||$1(J).position==="fixed")return null;if(Q)return Q(J);return J.offsetParent},Co=function(J,Q){const Z=e7(J);if(jP(J))return Z;if(!r1(J)){let Y=Jq(J);while(Y&&!yK(Y)){if(s1(Y)&&!DP(Y))return Y;Y=Jq(Y)}return Z}let q=Do(J,Q);while(q&&No(q)&&DP(q))q=Do(q,Q);if(q&&yK(q)&&DP(q)&&!JV(q))return Z;return q||Mo(J)||Z},UO0=function(J){return $1(J).direction==="rtl"},LO0=function(J,Q){let Z=null,q;const Y=uQ(J);function $(){var G;clearTimeout(q),(G=Z)==null||G.disconnect(),Z=null}function W(G,z){if(G===void 0)G=!1;if(z===void 0)z=1;$();const{left:U,top:F,width:B,height:M}=J.getBoundingClientRect();if(!G)Q();if(!B||!M)return;const O=ZU(F),R=ZU(Y.clientWidth-(U+B)),V=ZU(Y.clientHeight-(F+M)),E=ZU(U),A={rootMargin:-O+"px "+-R+"px "+-V+"px "+-E+"px",threshold:V7(0,gQ(1,z))||1};let w=!0;function T(k){const P=k[0].intersectionRatio;if(P!==z){if(!w)return W();if(!P)q=setTimeout(()=>{W(!1,0.0000001)},1000);else W(!1,P)}w=!1}try{Z=new IntersectionObserver(T,{...A,root:Y.ownerDocument})}catch(k){Z=new IntersectionObserver(T,A)}Z.observe(J)}return W(!0),$},XU=function(J,Q,Z,q){if(q===void 0)q={};const{ancestorScroll:Y=!0,ancestorResize:$=!0,elementResize:W=typeof ResizeObserver==="function",layoutShift:G=typeof IntersectionObserver==="function",animationFrame:z=!1}=q,U=RP(J),F=Y||$?[...U?bK(U):[],...bK(Q)]:[];F.forEach((_)=>{Y&&_.addEventListener("scroll",Z,{passive:!0}),$&&_.addEventListener("resize",Z)});const B=U&&G?LO0(U,Z):null;let M=-1,O=null;if(W){if(O=new ResizeObserver((_)=>{let[A]=_;if(A&&A.target===U&&O)O.unobserve(Q),cancelAnimationFrame(M),M=requestAnimationFrame(()=>{var w;(w=O)==null||w.observe(Q)});Z()}),U&&!z)O.observe(U);O.observe(Q)}let R,V=z?vK(J):null;if(z)E();function E(){const _=vK(J);if(V&&(_.x!==V.x||_.y!==V.y||_.width!==V.width||_.height!==V.height))Z();V=_,R=requestAnimationFrame(E)}return Z(),()=>{var _;if(F.forEach((A)=>{Y&&A.removeEventListener("scroll",Z),$&&A.removeEventListener("resize",Z)}),B==null||B(),(_=O)==null||_.disconnect(),O=null,z)cancelAnimationFrame(R)}},eM0=eZ(0),QO0=[":popover-open",":modal"],zO0=async function(J){const Q=this.getOffsetParent||Co,Z=this.getDimensions,q=await Z(J.floating);return{reference:HO0(J.reference,await Q(J.floating),J.strategy),floating:{x:0,y:0,width:q.width,height:q.height}}},Ao={convertOffsetParentRelativeRectToViewportRelativeRect:ZO0,getDocumentElement:uQ,getClippingRect:WO0,getOffsetParent:Co,getElementRects:zO0,getClientRects:qO0,getDimensions:GO0,getScale:T2,isElement:s1,isRTL:UO0};var ko=Ho;var wo=zo,Io=Wo,Po=Lo,To=Go,_P=$o;var bo=Uo,EP=(J,Q,Z)=>{const q=new Map,Y={platform:Ao,...Z},$={...Y.platform,_c:q};return Ko(J,Q,{...Y,platform:$})};var M5=v(o(),1),XV=v(o(),1),vo=v(uq(),1),qV=function(J,Q){if(J===Q)return!0;if(typeof J!==typeof Q)return!1;if(typeof J==="function"&&J.toString()===Q.toString())return!0;let Z,q,Y;if(J&&Q&&typeof J==="object"){if(Array.isArray(J)){if(Z=J.length,Z!==Q.length)return!1;for(q=Z;q--!==0;)if(!qV(J[q],Q[q]))return!1;return!0}if(Y=Object.keys(J),Z=Y.length,Z!==Object.keys(Q).length)return!1;for(q=Z;q--!==0;)if(!{}.hasOwnProperty.call(Q,Y[q]))return!1;for(q=Z;q--!==0;){const $=Y[q];if($==="_owner"&&J.$$typeof)continue;if(!qV(J[$],Q[$]))return!1}return!0}return J!==J&&Q!==Q},So=function(J){if(typeof window==="undefined")return 1;return(J.ownerDocument.defaultView||window).devicePixelRatio||1},xo=function(J,Q){const Z=So(J);return Math.round(Q*Z)/Z},yo=function(J){const Q=M5.useRef(J);return ZV(()=>{Q.current=J}),Q},YV=function(J){if(J===void 0)J={};const{placement:Q="bottom",strategy:Z="absolute",middleware:q=[],platform:Y,elements:{reference:$,floating:W}={},transform:G=!0,whileElementsMounted:z,open:U}=J,[F,B]=M5.useState({x:0,y:0,strategy:Z,placement:Q,middlewareData:{},isPositioned:!1}),[M,O]=M5.useState(q);if(!qV(M,q))O(q);const[R,V]=M5.useState(null),[E,_]=M5.useState(null),A=M5.useCallback((T0)=>{if(T0!==P.current)P.current=T0,V(T0)},[]),w=M5.useCallback((T0)=>{if(T0!==y.current)y.current=T0,_(T0)},[]),T=$||R,k=W||E,P=M5.useRef(null),y=M5.useRef(null),p=M5.useRef(F),s=z!=null,c=yo(z),t=yo(Y),X0=M5.useCallback(()=>{if(!P.current||!y.current)return;const T0={placement:Q,strategy:Z,middleware:M};if(t.current)T0.platform=t.current;EP(P.current,y.current,T0).then((r0)=>{const C0={...r0,isPositioned:!0};if(J0.current&&!qV(p.current,C0))p.current=C0,vo.flushSync(()=>{B(C0)})})},[M,Q,Z,t]);ZV(()=>{if(U===!1&&p.current.isPositioned)p.current.isPositioned=!1,B((T0)=>({...T0,isPositioned:!1}))},[U]);const J0=M5.useRef(!1);ZV(()=>{return J0.current=!0,()=>{J0.current=!1}},[]),ZV(()=>{if(T)P.current=T;if(k)y.current=k;if(T&&k){if(c.current)return c.current(T,k,X0);X0()}},[T,k,X0,c,s]);const Q0=M5.useMemo(()=>({reference:P,floating:y,setReference:A,setFloating:w}),[A,w]),a=M5.useMemo(()=>({reference:T,floating:k}),[T,k]),_0=M5.useMemo(()=>{const T0={position:Z,left:0,top:0};if(!a.floating)return T0;const r0=xo(a.floating,F.x),C0=xo(a.floating,F.y);if(G)return{...T0,transform:"translate("+r0+"px, "+C0+"px)",...So(a.floating)>=1.5&&{willChange:"transform"}};return{position:Z,left:r0,top:C0}},[Z,G,a.floating,F.x,F.y]);return M5.useMemo(()=>({...F,update:X0,refs:Q0,elements:a,floatingStyles:_0}),[F,X0,Q0,a,_0])},ZV=typeof document!=="undefined"?XV.useLayoutEffect:XV.useEffect,FO0=(J)=>{function Q(Z){return{}.hasOwnProperty.call(Z,"current")}return{name:"arrow",options:J,fn(Z){const{element:q,padding:Y}=typeof J==="function"?J(Z):J;if(q&&Q(q)){if(q.current!=null)return _P({element:q.current,padding:Y}).fn(Z);return{}}if(q)return _P({element:q,padding:Y}).fn(Z);return{}}}},KV=(J,Q)=>({...ko(J),options:[J,Q]}),$V=(J,Q)=>({...wo(J),options:[J,Q]}),WV=(J,Q)=>({...bo(J),options:[J,Q]}),GV=(J,Q)=>({...Io(J),options:[J,Q]}),HV=(J,Q)=>({...Po(J),options:[J,Q]});var zV=(J,Q)=>({...To(J),options:[J,Q]});var UV=(J,Q)=>({...FO0(J),options:[J,Q]});var fo=v(o(),1);var b2=function(J){const[Q,Z]=fo.useState(void 0);return M7(()=>{if(J){Z({width:J.offsetWidth,height:J.offsetHeight});const q=new ResizeObserver((Y)=>{if(!Array.isArray(Y))return;if(!Y.length)return;const $=Y[0];let W,G;if("borderBoxSize"in $){const z=$.borderBoxSize,U=Array.isArray(z)?z[0]:z;W=U.inlineSize,G=U.blockSize}else W=J.offsetWidth,G=J.offsetHeight;Z({width:W,height:G})});return q.observe(J,{box:"border-box"}),()=>q.unobserve(J)}else Z(void 0)},[J]),Q};var RO0=function(J){return J!==null},co=function(J){const[Q,Z="center"]=J.split("-");return[Q,Z]};var go="Popper",[mo,CP]=n9(go),[BO0,ho]=mo(go),NO0=(J)=>{const{__scopePopper:Q,children:Z}=J,[q,Y]=YJ.useState(null);return YJ.createElement(BO0,{scope:Q,anchor:q,onAnchorChange:Y},Z)};var MO0="PopperAnchor",OO0=YJ.forwardRef((J,Q)=>{const{__scopePopper:Z,virtualRef:q,...Y}=J,$=ho(MO0,Z),W=YJ.useRef(null),G=l6(Q,W);return YJ.useEffect(()=>{$.onAnchorChange((q===null||q===void 0?void 0:q.current)||W.current)}),q?null:YJ.createElement(m6.div,D0({},Y,{ref:G}))});var uo="PopperContent",[VO0,K46]=mo(uo),DO0=YJ.forwardRef((J,Q)=>{var Z,q,Y,$,W,G,z,U;const{__scopePopper:F,side:B="bottom",sideOffset:M=0,align:O="center",alignOffset:R=0,arrowPadding:V=0,avoidCollisions:E=!0,collisionBoundary:_=[],collisionPadding:A=0,sticky:w="partial",hideWhenDetached:T=!1,updatePositionStrategy:k="optimized",onPlaced:P,...y}=J,p=ho(uo,F),[s,c]=YJ.useState(null),t=l6(Q,(W6)=>c(W6)),[X0,J0]=YJ.useState(null),Q0=b2(X0),a=(Z=Q0===null||Q0===void 0?void 0:Q0.width)!==null&&Z!==void 0?Z:0,_0=(q=Q0===null||Q0===void 0?void 0:Q0.height)!==null&&q!==void 0?q:0,T0=B+(O!=="center"?"-"+O:""),r0=typeof A==="number"?A:{top:0,right:0,bottom:0,left:0,...A},C0=Array.isArray(_)?_:[_],k0=C0.length>0,b0={padding:r0,boundary:C0.filter(RO0),altBoundary:k0},{refs:K6,floatingStyles:b6,placement:I8,isPositioned:_6,middlewareData:x6}=YV({strategy:"fixed",placement:T0,whileElementsMounted:(...W6)=>{return XU(...W6,{animationFrame:k==="always"})},elements:{reference:p.anchor},middleware:[KV({mainAxis:M+_0,alignmentAxis:R}),E&&$V({mainAxis:!0,crossAxis:!1,limiter:w==="partial"?WV():void 0,...b0}),E&&GV({...b0}),HV({...b0,apply:({elements:W6,rects:S6,availableWidth:f8,availableHeight:u8})=>{const{width:W9,height:j7}=S6.reference,Y5=W6.floating.style;Y5.setProperty("--radix-popper-available-width",`${f8}px`),Y5.setProperty("--radix-popper-available-height",`${u8}px`),Y5.setProperty("--radix-popper-anchor-width",`${W9}px`),Y5.setProperty("--radix-popper-anchor-height",`${j7}px`)}}),X0&&UV({element:X0,padding:V}),jO0({arrowWidth:a,arrowHeight:_0}),T&&zV({strategy:"referenceHidden",...b0})]}),[c6,$8]=co(I8),G6=K9(P);M7(()=>{if(_6)G6===null||G6===void 0||G6()},[_6,G6]);const i6=(Y=x6.arrow)===null||Y===void 0?void 0:Y.x,I6=($=x6.arrow)===null||$===void 0?void 0:$.y,J9=((W=x6.arrow)===null||W===void 0?void 0:W.centerOffset)!==0,[R8,j8]=YJ.useState();return M7(()=>{if(s)j8(window.getComputedStyle(s).zIndex)},[s]),YJ.createElement("div",{ref:K6.setFloating,"data-radix-popper-content-wrapper":"",style:{...b6,transform:_6?b6.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:R8,["--radix-popper-transform-origin"]:[(G=x6.transformOrigin)===null||G===void 0?void 0:G.x,(z=x6.transformOrigin)===null||z===void 0?void 0:z.y].join(" ")},dir:J.dir},YJ.createElement(VO0,{scope:F,placedSide:c6,onArrowChange:J0,arrowX:i6,arrowY:I6,shouldHideArrow:J9},YJ.createElement(m6.div,D0({"data-side":c6,"data-align":$8},y,{ref:t,style:{...y.style,animation:!_6?"none":void 0,opacity:(U=x6.hide)!==null&&U!==void 0&&U.referenceHidden?0:void 0}}))))});var jO0=(J)=>({name:"transformOrigin",options:J,fn(Q){var Z,q,Y,$,W;const{placement:G,rects:z,middlewareData:U}=Q,B=((Z=U.arrow)===null||Z===void 0?void 0:Z.centerOffset)!==0,M=B?0:J.arrowWidth,O=B?0:J.arrowHeight,[R,V]=co(G),E={start:"0%",center:"50%",end:"100%"}[V],_=((q=(Y=U.arrow)===null||Y===void 0?void 0:Y.x)!==null&&q!==void 0?q:0)+M/2,A=(($=(W=U.arrow)===null||W===void 0?void 0:W.y)!==null&&$!==void 0?$:0)+O/2;let w="",T="";if(R==="bottom")w=B?E:`${_}px`,T=`${-O}px`;else if(R==="top")w=B?E:`${_}px`,T=`${z.floating.height+O}px`;else if(R==="right")w=`${-O}px`,T=B?E:`${A}px`;else if(R==="left")w=`${z.floating.width+O}px`,T=B?E:`${A}px`;return{data:{x:w,y:T}}}}),po=NO0,lo=OO0,io=DO0;var oo=function(J){return J?"open":"closed"},no="Popover",[so,C46]=n9(no,[CP]),AP=CP(),[_O0,x2]=so(no),EO0=(J)=>{const{__scopePopover:Q,children:Z,open:q,defaultOpen:Y,onOpenChange:$,modal:W=!1}=J,G=AP(Q),z=J8.useRef(null),[U,F]=J8.useState(!1),[B=!1,M]=O7({prop:q,defaultProp:Y,onChange:$});return J8.createElement(po,G,J8.createElement(_O0,{scope:Q,contentId:r7(),triggerRef:z,open:B,onOpenChange:M,onOpenToggle:J8.useCallback(()=>M((O)=>!O),[M]),hasCustomAnchor:U,onCustomAnchorAdd:J8.useCallback(()=>F(!0),[]),onCustomAnchorRemove:J8.useCallback(()=>F(!1),[]),modal:W},Z))};var CO0="PopoverTrigger",AO0=J8.forwardRef((J,Q)=>{const{__scopePopover:Z,...q}=J,Y=x2(CO0,Z),$=AP(Z),W=l6(Q,Y.triggerRef),G=J8.createElement(m6.button,D0({type:"button","aria-haspopup":"dialog","aria-expanded":Y.open,"aria-controls":Y.contentId,"data-state":oo(Y.open)},q,{ref:W,onClick:s0(J.onClick,Y.onOpenToggle)}));return Y.hasCustomAnchor?G:J8.createElement(lo,D0({asChild:!0},$),G)});var ro="PopoverPortal",[kO0,wO0]=so(ro,{forceMount:void 0}),IO0=(J)=>{const{__scopePopover:Q,forceMount:Z,children:q,container:Y}=J,$=x2(ro,Q);return J8.createElement(kO0,{scope:Q,forceMount:Z},J8.createElement(s7,{present:Z||$.open},J8.createElement(IX,{asChild:!0,container:Y},q)))};var YU="PopoverContent",PO0=J8.forwardRef((J,Q)=>{const Z=wO0(YU,J.__scopePopover),{forceMount:q=Z.forceMount,...Y}=J,$=x2(YU,J.__scopePopover);return J8.createElement(s7,{present:q||$.open},$.modal?J8.createElement(TO0,D0({},Y,{ref:Q})):J8.createElement(bO0,D0({},Y,{ref:Q})))});var TO0=J8.forwardRef((J,Q)=>{const Z=x2(YU,J.__scopePopover),q=J8.useRef(null),Y=l6(Q,q),$=J8.useRef(!1);return J8.useEffect(()=>{const W=q.current;if(W)return D2(W)},[]),J8.createElement(EK,{as:Y1,allowPinchZoom:!0},J8.createElement(ao,D0({},J,{ref:Y,trapFocus:Z.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:s0(J.onCloseAutoFocus,(W)=>{var G;if(W.preventDefault(),!$.current)(G=Z.triggerRef.current)===null||G===void 0||G.focus()}),onPointerDownOutside:s0(J.onPointerDownOutside,(W)=>{const G=W.detail.originalEvent,z=G.button===0&&G.ctrlKey===!0,U=G.button===2||z;$.current=U},{checkForDefaultPrevented:!1}),onFocusOutside:s0(J.onFocusOutside,(W)=>W.preventDefault(),{checkForDefaultPrevented:!1})})))}),bO0=J8.forwardRef((J,Q)=>{const Z=x2(YU,J.__scopePopover),q=J8.useRef(!1),Y=J8.useRef(!1);return J8.createElement(ao,D0({},J,{ref:Q,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:($)=>{var W;if((W=J.onCloseAutoFocus)===null||W===void 0||W.call(J,$),!$.defaultPrevented){var G;if(!q.current)(G=Z.triggerRef.current)===null||G===void 0||G.focus();$.preventDefault()}q.current=!1,Y.current=!1},onInteractOutside:($)=>{var W,G;if((W=J.onInteractOutside)===null||W===void 0||W.call(J,$),!$.defaultPrevented){if(q.current=!0,$.detail.originalEvent.type==="pointerdown")Y.current=!0}const z=$.target;if((G=Z.triggerRef.current)===null||G===void 0?void 0:G.contains(z))$.preventDefault();if($.detail.originalEvent.type==="focusin"&&Y.current)$.preventDefault()}}))}),ao=J8.forwardRef((J,Q)=>{const{__scopePopover:Z,trapFocus:q,onOpenAutoFocus:Y,onCloseAutoFocus:$,disableOutsidePointerEvents:W,onEscapeKeyDown:G,onPointerDownOutside:z,onFocusOutside:U,onInteractOutside:F,...B}=J,M=x2(YU,Z),O=AP(Z);return B2(),J8.createElement(F2,{asChild:!0,loop:!0,trapped:q,onMountAutoFocus:Y,onUnmountAutoFocus:$},J8.createElement(DK,{asChild:!0,disableOutsidePointerEvents:W,onInteractOutside:F,onEscapeKeyDown:G,onPointerDownOutside:z,onFocusOutside:U,onDismiss:()=>M.onOpenChange(!1)},J8.createElement(io,D0({"data-state":oo(M.open),role:"dialog",id:M.contentId},O,B,{ref:Q,style:{...B.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}}))))});var to=EO0;var eo=AO0,Jt=IO0,Qt=PO0;var y2=v(o(),1);var oJ=function(J,Q){const Z=h(),q=y2.useRef(!1),Y=g5(),$=y2.useCallback((G)=>{q.current=G,Z.batch(()=>{if(G)Z.complete(),Z.addOpenMenu(J);else Z.updateInstanceState({openMenus:Z.getOpenMenus().filter((z)=>!z.startsWith(J))});Q?.(G)})},[Z,J,Q]),W=e("is menu open",()=>Z.getOpenMenus().includes(J),[Z,J]);return y2.useEffect(()=>{if(q.current)Y("open-menu",{source:"unknown",id:J}),Z.addOpenMenu(J);return()=>{if(q.current)Z.deleteOpenMenu(J),Z.getOpenMenus().forEach((G)=>{if(G.startsWith(J))Y("close-menu",{source:"unknown",id:J}),Z.deleteOpenMenu(G)}),q.current=!1}},[Z,J,Y]),[W,$]};var SK=function({id:J,children:Q,onOpenChange:Z,open:q}){const[Y,$]=oJ(J,Z);return v2.jsx(to,{onOpenChange:$,open:q||Y,children:v2.jsx("div",{className:"tlui-popover",children:Q})})},fK=function({children:J}){return v2.jsx(eo,{asChild:!0,dir:"ltr",children:J})},gK=function({side:J,children:Q,align:Z="center",sideOffset:q=8,alignOffset:Y=0}){const $=y8();return v2.jsx(Jt,{container:$,children:v2.jsx(Qt,{className:"tlui-popover__content",side:J,sideOffset:q,align:Z,alignOffset:Y,dir:"ltr",children:Q})})};var Zt=v(W0(),1),LV=v(o(),1),bX=function(){return LV.useContext(qt)},v9=function({type:J,sourceId:Q,children:Z}){return Zt.jsx(qt.Provider,{value:{type:J,sourceId:Q},children:Z})},qt=LV.createContext({type:"menu",sourceId:"main-menu"});var j6=v(W0(),1);var $9=v(W0(),1);var Q8=v(o(),1);var A0=v(o(),1);var KU=v(o(),1),S2=function(J){const Q=KU.useContext(yO0);return J||Q||"ltr"},yO0=KU.createContext(void 0);var KJ=v(o(),1);var uO0=function(J){return J!==null},Wt=function(J){const[Q,Z="center"]=J.split("-");return[Q,Z]};var Xt="Popper",[Yt,kP]=n9(Xt),[vO0,Kt]=Yt(Xt),SO0=(J)=>{const{__scopePopper:Q,children:Z}=J,[q,Y]=KJ.useState(null);return KJ.createElement(vO0,{scope:Q,anchor:q,onAnchorChange:Y},Z)};var fO0="PopperAnchor",gO0=KJ.forwardRef((J,Q)=>{const{__scopePopper:Z,virtualRef:q,...Y}=J,$=Kt(fO0,Z),W=KJ.useRef(null),G=l6(Q,W);return KJ.useEffect(()=>{$.onAnchorChange((q===null||q===void 0?void 0:q.current)||W.current)}),q?null:KJ.createElement(m6.div,D0({},Y,{ref:G}))});var $t="PopperContent",[mO0,c46]=Yt($t),hO0=KJ.forwardRef((J,Q)=>{var Z,q,Y,$,W,G,z,U;const{__scopePopper:F,side:B="bottom",sideOffset:M=0,align:O="center",alignOffset:R=0,arrowPadding:V=0,avoidCollisions:E=!0,collisionBoundary:_=[],collisionPadding:A=0,sticky:w="partial",hideWhenDetached:T=!1,updatePositionStrategy:k="optimized",onPlaced:P,...y}=J,p=Kt($t,F),[s,c]=KJ.useState(null),t=l6(Q,(W6)=>c(W6)),[X0,J0]=KJ.useState(null),Q0=b2(X0),a=(Z=Q0===null||Q0===void 0?void 0:Q0.width)!==null&&Z!==void 0?Z:0,_0=(q=Q0===null||Q0===void 0?void 0:Q0.height)!==null&&q!==void 0?q:0,T0=B+(O!=="center"?"-"+O:""),r0=typeof A==="number"?A:{top:0,right:0,bottom:0,left:0,...A},C0=Array.isArray(_)?_:[_],k0=C0.length>0,b0={padding:r0,boundary:C0.filter(uO0),altBoundary:k0},{refs:K6,floatingStyles:b6,placement:I8,isPositioned:_6,middlewareData:x6}=YV({strategy:"fixed",placement:T0,whileElementsMounted:(...W6)=>{return XU(...W6,{animationFrame:k==="always"})},elements:{reference:p.anchor},middleware:[KV({mainAxis:M+_0,alignmentAxis:R}),E&&$V({mainAxis:!0,crossAxis:!1,limiter:w==="partial"?WV():void 0,...b0}),E&&GV({...b0}),HV({...b0,apply:({elements:W6,rects:S6,availableWidth:f8,availableHeight:u8})=>{const{width:W9,height:j7}=S6.reference,Y5=W6.floating.style;Y5.setProperty("--radix-popper-available-width",`${f8}px`),Y5.setProperty("--radix-popper-available-height",`${u8}px`),Y5.setProperty("--radix-popper-anchor-width",`${W9}px`),Y5.setProperty("--radix-popper-anchor-height",`${j7}px`)}}),X0&&UV({element:X0,padding:V}),cO0({arrowWidth:a,arrowHeight:_0}),T&&zV({strategy:"referenceHidden",...b0})]}),[c6,$8]=Wt(I8),G6=K9(P);M7(()=>{if(_6)G6===null||G6===void 0||G6()},[_6,G6]);const i6=(Y=x6.arrow)===null||Y===void 0?void 0:Y.x,I6=($=x6.arrow)===null||$===void 0?void 0:$.y,J9=((W=x6.arrow)===null||W===void 0?void 0:W.centerOffset)!==0,[R8,j8]=KJ.useState();return M7(()=>{if(s)j8(window.getComputedStyle(s).zIndex)},[s]),KJ.createElement("div",{ref:K6.setFloating,"data-radix-popper-content-wrapper":"",style:{...b6,transform:_6?b6.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:R8,["--radix-popper-transform-origin"]:[(G=x6.transformOrigin)===null||G===void 0?void 0:G.x,(z=x6.transformOrigin)===null||z===void 0?void 0:z.y].join(" ")},dir:J.dir},KJ.createElement(mO0,{scope:F,placedSide:c6,onArrowChange:J0,arrowX:i6,arrowY:I6,shouldHideArrow:J9},KJ.createElement(m6.div,D0({"data-side":c6,"data-align":$8},y,{ref:t,style:{...y.style,animation:!_6?"none":void 0,opacity:(U=x6.hide)!==null&&U!==void 0&&U.referenceHidden?0:void 0}}))))});var cO0=(J)=>({name:"transformOrigin",options:J,fn(Q){var Z,q,Y,$,W;const{placement:G,rects:z,middlewareData:U}=Q,B=((Z=U.arrow)===null||Z===void 0?void 0:Z.centerOffset)!==0,M=B?0:J.arrowWidth,O=B?0:J.arrowHeight,[R,V]=Wt(G),E={start:"0%",center:"50%",end:"100%"}[V],_=((q=(Y=U.arrow)===null||Y===void 0?void 0:Y.x)!==null&&q!==void 0?q:0)+M/2,A=(($=(W=U.arrow)===null||W===void 0?void 0:W.y)!==null&&$!==void 0?$:0)+O/2;let w="",T="";if(R==="bottom")w=B?E:`${_}px`,T=`${-O}px`;else if(R==="top")w=B?E:`${_}px`,T=`${z.floating.height+O}px`;else if(R==="right")w=`${-O}px`,T=B?E:`${A}px`;else if(R==="left")w=`${z.floating.width+O}px`,T=B?E:`${A}px`;return{data:{x:w,y:T}}}}),wP=SO0,Gt=gO0,Ht=hO0;var N9=v(o(),1);var eO0=function(J,Q){if(Q!=="rtl")return J;return J==="ArrowLeft"?"ArrowRight":J==="ArrowRight"?"ArrowLeft":J},JV0=function(J,Q,Z){const q=eO0(J.key,Z);if(Q==="vertical"&&["ArrowLeft","ArrowRight"].includes(q))return;if(Q==="horizontal"&&["ArrowUp","ArrowDown"].includes(q))return;return tO0[q]},Ut=function(J){const Q=document.activeElement;for(let Z of J){if(Z===Q)return;if(Z.focus(),document.activeElement!==Q)return}},QV0=function(J,Q){return J.map((Z,q)=>J[(Q+q)%J.length])},IP="rovingFocusGroup.onEntryFocus",pO0={bubbles:!1,cancelable:!0},TP="RovingFocusGroup",[PP,zt,dO0]=wX(TP),[lO0,bP]=n9(TP,[dO0]),[iO0,nO0]=lO0(TP),sO0=N9.forwardRef((J,Q)=>{return N9.createElement(PP.Provider,{scope:J.__scopeRovingFocusGroup},N9.createElement(PP.Slot,{scope:J.__scopeRovingFocusGroup},N9.createElement(rO0,D0({},J,{ref:Q}))))});var rO0=N9.forwardRef((J,Q)=>{const{__scopeRovingFocusGroup:Z,orientation:q,loop:Y=!1,dir:$,currentTabStopId:W,defaultCurrentTabStopId:G,onCurrentTabStopIdChange:z,onEntryFocus:U,...F}=J,B=N9.useRef(null),M=l6(Q,B),O=S2($),[R=null,V]=O7({prop:W,defaultProp:G,onChange:z}),[E,_]=N9.useState(!1),A=K9(U),w=zt(Z),T=N9.useRef(!1),[k,P]=N9.useState(0);return N9.useEffect(()=>{const y=B.current;if(y)return y.addEventListener(IP,A),()=>y.removeEventListener(IP,A)},[A]),N9.createElement(iO0,{scope:Z,orientation:q,dir:O,loop:Y,currentTabStopId:R,onItemFocus:N9.useCallback((y)=>V(y),[V]),onItemShiftTab:N9.useCallback(()=>_(!0),[]),onFocusableItemAdd:N9.useCallback(()=>P((y)=>y+1),[]),onFocusableItemRemove:N9.useCallback(()=>P((y)=>y-1),[])},N9.createElement(m6.div,D0({tabIndex:E||k===0?-1:0,"data-orientation":q},F,{ref:M,style:{outline:"none",...J.style},onMouseDown:s0(J.onMouseDown,()=>{T.current=!0}),onFocus:s0(J.onFocus,(y)=>{const p=!T.current;if(y.target===y.currentTarget&&p&&!E){const s=new CustomEvent(IP,pO0);if(y.currentTarget.dispatchEvent(s),!s.defaultPrevented){const c=w().filter((a)=>a.focusable),t=c.find((a)=>a.active),X0=c.find((a)=>a.id===R),Q0=[t,X0,...c].filter(Boolean).map((a)=>a.ref.current);Ut(Q0)}}T.current=!1}),onBlur:s0(J.onBlur,()=>_(!1))})))}),aO0="RovingFocusGroupItem",oO0=N9.forwardRef((J,Q)=>{const{__scopeRovingFocusGroup:Z,focusable:q=!0,active:Y=!1,tabStopId:$,...W}=J,G=r7(),z=$||G,U=nO0(aO0,Z),F=U.currentTabStopId===z,B=zt(Z),{onFocusableItemAdd:M,onFocusableItemRemove:O}=U;return N9.useEffect(()=>{if(q)return M(),()=>O()},[q,M,O]),N9.createElement(PP.ItemSlot,{scope:Z,id:z,focusable:q,active:Y},N9.createElement(m6.span,D0({tabIndex:F?0:-1,"data-orientation":U.orientation},W,{ref:Q,onMouseDown:s0(J.onMouseDown,(R)=>{if(!q)R.preventDefault();else U.onItemFocus(z)}),onFocus:s0(J.onFocus,()=>U.onItemFocus(z)),onKeyDown:s0(J.onKeyDown,(R)=>{if(R.key==="Tab"&&R.shiftKey){U.onItemShiftTab();return}if(R.target!==R.currentTarget)return;const V=JV0(R,U.orientation,U.dir);if(V!==void 0){R.preventDefault();let _=B().filter((A)=>A.focusable).map((A)=>A.ref.current);if(V==="last")_.reverse();else if(V==="prev"||V==="next"){if(V==="prev")_.reverse();const A=_.indexOf(R.currentTarget);_=U.loop?QV0(_,A+1):_.slice(A+1)}setTimeout(()=>Ut(_))}})})))});var tO0={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},Lt=sO0,Ft=oO0;var At=function(J){return J?"open":"closed"},vP=function(J){return J==="indeterminate"},AV0=function(J){return vP(J)?"indeterminate":J?"checked":"unchecked"},kV0=function(J){const Q=document.activeElement;for(let Z of J){if(Z===Q)return;if(Z.focus(),document.activeElement!==Q)return}},wV0=function(J,Q){return J.map((Z,q)=>J[(Q+q)%J.length])},IV0=function(J,Q,Z){const Y=Q.length>1&&Array.from(Q).every((U)=>U===Q[0])?Q[0]:Q,$=Z?J.indexOf(Z):-1;let W=wV0(J,Math.max($,0));if(Y.length===1)W=W.filter((U)=>U!==Z);const z=W.find((U)=>U.toLowerCase().startsWith(Y.toLowerCase()));return z!==Z?z:void 0},PV0=function(J,Q){const{x:Z,y:q}=J;let Y=!1;for(let $=0,W=Q.length-1;$<Q.length;W=$++){const G=Q[$].x,z=Q[$].y,U=Q[W].x,F=Q[W].y;if(z>q!==F>q&&Z<(U-G)*(q-z)/(F-z)+G)Y=!Y}return Y},TV0=function(J,Q){if(!Q)return!1;const Z={x:J.clientX,y:J.clientY};return PV0(Z,Q)},WU=function(J){return(Q)=>Q.pointerType==="mouse"?J(Q):void 0},xP=["Enter"," "],ZV0=["ArrowDown","PageUp","Home"],Nt=["ArrowUp","PageDown","End"],qV0=[...ZV0,...Nt],XV0={ltr:[...xP,"ArrowRight"],rtl:[...xP,"ArrowLeft"]},YV0={ltr:["ArrowLeft"],rtl:["ArrowRight"]},BV="Menu",[$U,KV0,$V0]=wX(BV),[mK,f2]=n9(BV,[$V0,kP,bP]),NV=kP(),Mt=bP(),[Ot,xX]=mK(BV),[WV0,GU]=mK(BV),GV0=(J)=>{const{__scopeMenu:Q,open:Z=!1,children:q,dir:Y,onOpenChange:$,modal:W=!0}=J,G=NV(Q),[z,U]=A0.useState(null),F=A0.useRef(!1),B=K9($),M=S2(Y);return A0.useEffect(()=>{const O=()=>{F.current=!0,document.addEventListener("pointerdown",R,{capture:!0,once:!0}),document.addEventListener("pointermove",R,{capture:!0,once:!0})},R=()=>F.current=!1;return document.addEventListener("keydown",O,{capture:!0}),()=>{document.removeEventListener("keydown",O,{capture:!0}),document.removeEventListener("pointerdown",R,{capture:!0}),document.removeEventListener("pointermove",R,{capture:!0})}},[]),A0.createElement(wP,G,A0.createElement(Ot,{scope:Q,open:Z,onOpenChange:B,content:z,onContentChange:U},A0.createElement(WV0,{scope:Q,onClose:A0.useCallback(()=>B(!1),[B]),isUsingKeyboardRef:F,dir:M,modal:W},q)))};var Vt=A0.forwardRef((J,Q)=>{const{__scopeMenu:Z,...q}=J,Y=NV(Z);return A0.createElement(Gt,D0({},Y,q,{ref:Q}))});var Dt="MenuPortal",[HV0,Rt]=mK(Dt,{forceMount:void 0}),zV0=(J)=>{const{__scopeMenu:Q,forceMount:Z,children:q,container:Y}=J,$=xX(Dt,Q);return A0.createElement(HV0,{scope:Q,forceMount:Z},A0.createElement(s7,{present:Z||$.open},A0.createElement(IX,{asChild:!0,container:Y},q)))};var a1="MenuContent",[UV0,SP]=mK(a1),LV0=A0.forwardRef((J,Q)=>{const Z=Rt(a1,J.__scopeMenu),{forceMount:q=Z.forceMount,...Y}=J,$=xX(a1,J.__scopeMenu),W=GU(a1,J.__scopeMenu);return A0.createElement($U.Provider,{scope:J.__scopeMenu},A0.createElement(s7,{present:q||$.open},A0.createElement($U.Slot,{scope:J.__scopeMenu},W.modal?A0.createElement(FV0,D0({},Y,{ref:Q})):A0.createElement(BV0,D0({},Y,{ref:Q})))))}),FV0=A0.forwardRef((J,Q)=>{const Z=xX(a1,J.__scopeMenu),q=A0.useRef(null),Y=l6(Q,q);return A0.useEffect(()=>{const $=q.current;if($)return D2($)},[]),A0.createElement(fP,D0({},J,{ref:Y,trapFocus:Z.open,disableOutsidePointerEvents:Z.open,disableOutsideScroll:!0,onFocusOutside:s0(J.onFocusOutside,($)=>$.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>Z.onOpenChange(!1)}))}),BV0=A0.forwardRef((J,Q)=>{const Z=xX(a1,J.__scopeMenu);return A0.createElement(fP,D0({},J,{ref:Q,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>Z.onOpenChange(!1)}))}),fP=A0.forwardRef((J,Q)=>{const{__scopeMenu:Z,loop:q=!1,trapFocus:Y,onOpenAutoFocus:$,onCloseAutoFocus:W,disableOutsidePointerEvents:G,onEntryFocus:z,onEscapeKeyDown:U,onPointerDownOutside:F,onFocusOutside:B,onInteractOutside:M,onDismiss:O,disableOutsideScroll:R,...V}=J,E=xX(a1,Z),_=GU(a1,Z),A=NV(Z),w=Mt(Z),T=KV0(Z),[k,P]=A0.useState(null),y=A0.useRef(null),p=l6(Q,y,E.onContentChange),s=A0.useRef(0),c=A0.useRef(""),t=A0.useRef(0),X0=A0.useRef(null),J0=A0.useRef("right"),Q0=A0.useRef(0),a=R?EK:A0.Fragment,_0=R?{as:Y1,allowPinchZoom:!0}:void 0,T0=(C0)=>{var k0,b0;const K6=c.current+C0,b6=T().filter((G6)=>!G6.disabled),I8=document.activeElement,_6=(k0=b6.find((G6)=>G6.ref.current===I8))===null||k0===void 0?void 0:k0.textValue,x6=b6.map((G6)=>G6.textValue),c6=IV0(x6,K6,_6),$8=(b0=b6.find((G6)=>G6.textValue===c6))===null||b0===void 0?void 0:b0.ref.current;if(function G6(i6){if(c.current=i6,window.clearTimeout(s.current),i6!=="")s.current=window.setTimeout(()=>G6(""),1000)}(K6),$8)setTimeout(()=>$8.focus())};A0.useEffect(()=>{return()=>window.clearTimeout(s.current)},[]),B2();const r0=A0.useCallback((C0)=>{var k0,b0;return J0.current===((k0=X0.current)===null||k0===void 0?void 0:k0.side)&&TV0(C0,(b0=X0.current)===null||b0===void 0?void 0:b0.area)},[]);return A0.createElement(UV0,{scope:Z,searchRef:c,onItemEnter:A0.useCallback((C0)=>{if(r0(C0))C0.preventDefault()},[r0]),onItemLeave:A0.useCallback((C0)=>{var k0;if(r0(C0))return;(k0=y.current)===null||k0===void 0||k0.focus(),P(null)},[r0]),onTriggerLeave:A0.useCallback((C0)=>{if(r0(C0))C0.preventDefault()},[r0]),pointerGraceTimerRef:t,onPointerGraceIntentChange:A0.useCallback((C0)=>{X0.current=C0},[])},A0.createElement(a,_0,A0.createElement(F2,{asChild:!0,trapped:Y,onMountAutoFocus:s0($,(C0)=>{var k0;C0.preventDefault(),(k0=y.current)===null||k0===void 0||k0.focus()}),onUnmountAutoFocus:W},A0.createElement(DK,{asChild:!0,disableOutsidePointerEvents:G,onEscapeKeyDown:U,onPointerDownOutside:F,onFocusOutside:B,onInteractOutside:M,onDismiss:O},A0.createElement(Lt,D0({asChild:!0},w,{dir:_.dir,orientation:"vertical",loop:q,currentTabStopId:k,onCurrentTabStopIdChange:P,onEntryFocus:s0(z,(C0)=>{if(!_.isUsingKeyboardRef.current)C0.preventDefault()})}),A0.createElement(Ht,D0({role:"menu","aria-orientation":"vertical","data-state":At(E.open),"data-radix-menu-content":"",dir:_.dir},A,V,{ref:p,style:{outline:"none",...V.style},onKeyDown:s0(V.onKeyDown,(C0)=>{const b0=C0.target.closest("[data-radix-menu-content]")===C0.currentTarget,K6=C0.ctrlKey||C0.altKey||C0.metaKey,b6=C0.key.length===1;if(b0){if(C0.key==="Tab")C0.preventDefault();if(!K6&&b6)T0(C0.key)}const I8=y.current;if(C0.target!==I8)return;if(!qV0.includes(C0.key))return;C0.preventDefault();const x6=T().filter((c6)=>!c6.disabled).map((c6)=>c6.ref.current);if(Nt.includes(C0.key))x6.reverse();kV0(x6)}),onBlur:s0(J.onBlur,(C0)=>{if(!C0.currentTarget.contains(C0.target))window.clearTimeout(s.current),c.current=""}),onPointerMove:s0(J.onPointerMove,WU((C0)=>{const k0=C0.target,b0=Q0.current!==C0.clientX;if(C0.currentTarget.contains(k0)&&b0){const K6=C0.clientX>Q0.current?"right":"left";J0.current=K6,Q0.current=C0.clientX}}))})))))))});var NV0=A0.forwardRef((J,Q)=>{const{__scopeMenu:Z,...q}=J;return A0.createElement(m6.div,D0({role:"group"},q,{ref:Q}))});var yP="MenuItem",Bt="menu.itemSelect",jt=A0.forwardRef((J,Q)=>{const{disabled:Z=!1,onSelect:q,...Y}=J,$=A0.useRef(null),W=GU(yP,J.__scopeMenu),G=SP(yP,J.__scopeMenu),z=l6(Q,$),U=A0.useRef(!1),F=()=>{const B=$.current;if(!Z&&B){const M=new CustomEvent(Bt,{bubbles:!0,cancelable:!0});if(B.addEventListener(Bt,(O)=>q===null||q===void 0?void 0:q(O),{once:!0}),U2(B,M),M.defaultPrevented)U.current=!1;else W.onClose()}};return A0.createElement(_t,D0({},Y,{ref:z,disabled:Z,onClick:s0(J.onClick,F),onPointerDown:(B)=>{var M;(M=J.onPointerDown)===null||M===void 0||M.call(J,B),U.current=!0},onPointerUp:s0(J.onPointerUp,(B)=>{var M;if(!U.current)(M=B.currentTarget)===null||M===void 0||M.click()}),onKeyDown:s0(J.onKeyDown,(B)=>{const M=G.searchRef.current!=="";if(Z||M&&B.key===" ")return;if(xP.includes(B.key))B.currentTarget.click(),B.preventDefault()})}))});var _t=A0.forwardRef((J,Q)=>{const{__scopeMenu:Z,disabled:q=!1,textValue:Y,...$}=J,W=SP(yP,Z),G=Mt(Z),z=A0.useRef(null),U=l6(Q,z),[F,B]=A0.useState(!1),[M,O]=A0.useState("");return A0.useEffect(()=>{const R=z.current;if(R){var V;O(((V=R.textContent)!==null&&V!==void 0?V:"").trim())}},[$.children]),A0.createElement($U.ItemSlot,{scope:Z,disabled:q,textValue:Y!==null&&Y!==void 0?Y:M},A0.createElement(Ft,D0({asChild:!0},G,{focusable:!q}),A0.createElement(m6.div,D0({role:"menuitem","data-highlighted":F?"":void 0,"aria-disabled":q||void 0,"data-disabled":q?"":void 0},$,{ref:U,onPointerMove:s0(J.onPointerMove,WU((R)=>{if(q)W.onItemLeave(R);else if(W.onItemEnter(R),!R.defaultPrevented)R.currentTarget.focus()})),onPointerLeave:s0(J.onPointerLeave,WU((R)=>W.onItemLeave(R))),onFocus:s0(J.onFocus,()=>B(!0)),onBlur:s0(J.onBlur,()=>B(!1))}))))});var MV0=A0.forwardRef((J,Q)=>{const{checked:Z=!1,onCheckedChange:q,...Y}=J;return A0.createElement(DV0,{scope:J.__scopeMenu,checked:Z},A0.createElement(jt,D0({role:"menuitemcheckbox","aria-checked":vP(Z)?"mixed":Z},Y,{ref:Q,"data-state":AV0(Z),onSelect:s0(Y.onSelect,()=>q===null||q===void 0?void 0:q(vP(Z)?!0:!Z),{checkForDefaultPrevented:!1})})))});var OV0="MenuRadioGroup",[R16,j16]=mK(OV0,{value:void 0,onValueChange:()=>{}});var VV0="MenuItemIndicator",[DV0,_16]=mK(VV0,{checked:!1});var Et="MenuSub",[RV0,Ct]=mK(Et),jV0=(J)=>{const{__scopeMenu:Q,children:Z,open:q=!1,onOpenChange:Y}=J,$=xX(Et,Q),W=NV(Q),[G,z]=A0.useState(null),[U,F]=A0.useState(null),B=K9(Y);return A0.useEffect(()=>{if($.open===!1)B(!1);return()=>B(!1)},[$.open,B]),A0.createElement(wP,W,A0.createElement(Ot,{scope:Q,open:q,onOpenChange:B,content:U,onContentChange:F},A0.createElement(RV0,{scope:Q,contentId:r7(),triggerId:r7(),trigger:G,onTriggerChange:z},Z)))};var FV="MenuSubTrigger",_V0=A0.forwardRef((J,Q)=>{const Z=xX(FV,J.__scopeMenu),q=GU(FV,J.__scopeMenu),Y=Ct(FV,J.__scopeMenu),$=SP(FV,J.__scopeMenu),W=A0.useRef(null),{pointerGraceTimerRef:G,onPointerGraceIntentChange:z}=$,U={__scopeMenu:J.__scopeMenu},F=A0.useCallback(()=>{if(W.current)window.clearTimeout(W.current);W.current=null},[]);return A0.useEffect(()=>F,[F]),A0.useEffect(()=>{const B=G.current;return()=>{window.clearTimeout(B),z(null)}},[G,z]),A0.createElement(Vt,D0({asChild:!0},U),A0.createElement(_t,D0({id:Y.triggerId,"aria-haspopup":"menu","aria-expanded":Z.open,"aria-controls":Y.contentId,"data-state":At(Z.open)},J,{ref:VK(Q,Y.onTriggerChange),onClick:(B)=>{var M;if((M=J.onClick)===null||M===void 0||M.call(J,B),J.disabled||B.defaultPrevented)return;if(B.currentTarget.focus(),!Z.open)Z.onOpenChange(!0)},onPointerMove:s0(J.onPointerMove,WU((B)=>{if($.onItemEnter(B),B.defaultPrevented)return;if(!J.disabled&&!Z.open&&!W.current)$.onPointerGraceIntentChange(null),W.current=window.setTimeout(()=>{Z.onOpenChange(!0),F()},100)})),onPointerLeave:s0(J.onPointerLeave,WU((B)=>{var M;F();const O=(M=Z.content)===null||M===void 0?void 0:M.getBoundingClientRect();if(O){var R;const V=(R=Z.content)===null||R===void 0?void 0:R.dataset.side,E=V==="right",_=E?-5:5,A=O[E?"left":"right"],w=O[E?"right":"left"];$.onPointerGraceIntentChange({area:[{x:B.clientX+_,y:B.clientY},{x:A,y:O.top},{x:w,y:O.top},{x:w,y:O.bottom},{x:A,y:O.bottom}],side:V}),window.clearTimeout(G.current),G.current=window.setTimeout(()=>$.onPointerGraceIntentChange(null),300)}else{if($.onTriggerLeave(B),B.defaultPrevented)return;$.onPointerGraceIntentChange(null)}})),onKeyDown:s0(J.onKeyDown,(B)=>{const M=$.searchRef.current!=="";if(J.disabled||M&&B.key===" ")return;if(XV0[q.dir].includes(B.key)){var O;Z.onOpenChange(!0),(O=Z.content)===null||O===void 0||O.focus(),B.preventDefault()}})})))});var EV0="MenuSubContent",CV0=A0.forwardRef((J,Q)=>{const Z=Rt(a1,J.__scopeMenu),{forceMount:q=Z.forceMount,...Y}=J,$=xX(a1,J.__scopeMenu),W=GU(a1,J.__scopeMenu),G=Ct(EV0,J.__scopeMenu),z=A0.useRef(null),U=l6(Q,z);return A0.createElement($U.Provider,{scope:J.__scopeMenu},A0.createElement(s7,{present:q||$.open},A0.createElement($U.Slot,{scope:J.__scopeMenu},A0.createElement(fP,D0({id:G.contentId,"aria-labelledby":G.triggerId},Y,{ref:U,align:"start",side:W.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:(F)=>{var B;if(W.isUsingKeyboardRef.current)(B=z.current)===null||B===void 0||B.focus();F.preventDefault()},onCloseAutoFocus:(F)=>F.preventDefault(),onFocusOutside:s0(J.onFocusOutside,(F)=>{if(F.target!==G.trigger)$.onOpenChange(!1)}),onEscapeKeyDown:s0(J.onEscapeKeyDown,(F)=>{W.onClose(),F.preventDefault()}),onKeyDown:s0(J.onKeyDown,(F)=>{const B=F.currentTarget.contains(F.target),M=YV0[W.dir].includes(F.key);if(B&&M){var O;$.onOpenChange(!1),(O=G.trigger)===null||O===void 0||O.focus(),F.preventDefault()}})})))))});var MV=GV0,OV=Vt,VV=zV0,DV=LV0,RV=NV0;var jV=jt,_V=MV0;var EV=jV0,CV=_V0,AV=CV0;var kV=function(J){return(Q)=>Q.pointerType!=="mouse"?J(Q):void 0},kt="ContextMenu",[gV0,b16]=n9(kt,[f2]),cQ=f2(),[mV0,wt]=gV0(kt),hV0=(J)=>{const{__scopeContextMenu:Q,children:Z,onOpenChange:q,dir:Y,modal:$=!0}=J,[W,G]=Q8.useState(!1),z=cQ(Q),U=K9(q),F=Q8.useCallback((B)=>{G(B),U(B)},[U]);return Q8.createElement(mV0,{scope:Q,open:W,onOpenChange:F,modal:$},Q8.createElement(MV,D0({},z,{dir:Y,open:W,onOpenChange:F,modal:$}),Z))};var uV0="ContextMenuTrigger",cV0=Q8.forwardRef((J,Q)=>{const{__scopeContextMenu:Z,disabled:q=!1,...Y}=J,$=wt(uV0,Z),W=cQ(Z),G=Q8.useRef({x:0,y:0}),z=Q8.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...G.current})}),U=Q8.useRef(0),F=Q8.useCallback(()=>window.clearTimeout(U.current),[]),B=(M)=>{G.current={x:M.clientX,y:M.clientY},$.onOpenChange(!0)};return Q8.useEffect(()=>F,[F]),Q8.useEffect(()=>void(q&&F()),[q,F]),Q8.createElement(Q8.Fragment,null,Q8.createElement(OV,D0({},W,{virtualRef:z})),Q8.createElement(m6.span,D0({"data-state":$.open?"open":"closed","data-disabled":q?"":void 0},Y,{ref:Q,style:{WebkitTouchCallout:"none",...J.style},onContextMenu:q?J.onContextMenu:s0(J.onContextMenu,(M)=>{F(),B(M),M.preventDefault()}),onPointerDown:q?J.onPointerDown:s0(J.onPointerDown,kV((M)=>{F(),U.current=window.setTimeout(()=>B(M),700)})),onPointerMove:q?J.onPointerMove:s0(J.onPointerMove,kV(F)),onPointerCancel:q?J.onPointerCancel:s0(J.onPointerCancel,kV(F)),onPointerUp:q?J.onPointerUp:s0(J.onPointerUp,kV(F))})))});var gP=(J)=>{const{__scopeContextMenu:Q,...Z}=J,q=cQ(Q);return Q8.createElement(VV,D0({},q,Z))};var pV0="ContextMenuContent",dV0=Q8.forwardRef((J,Q)=>{const{__scopeContextMenu:Z,...q}=J,Y=wt(pV0,Z),$=cQ(Z),W=Q8.useRef(!1);return Q8.createElement(DV,D0({},$,q,{ref:Q,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:(G)=>{var z;if((z=J.onCloseAutoFocus)===null||z===void 0||z.call(J,G),!G.defaultPrevented&&W.current)G.preventDefault();W.current=!1},onInteractOutside:(G)=>{var z;if((z=J.onInteractOutside)===null||z===void 0||z.call(J,G),!G.defaultPrevented&&!Y.modal)W.current=!0},style:{...J.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))});var It=Q8.forwardRef((J,Q)=>{const{__scopeContextMenu:Z,...q}=J,Y=cQ(Z);return Q8.createElement(RV,D0({},Y,q,{ref:Q}))});var Pt=Q8.forwardRef((J,Q)=>{const{__scopeContextMenu:Z,...q}=J,Y=cQ(Z);return Q8.createElement(jV,D0({},Y,q,{ref:Q}))});var lV0=Q8.forwardRef((J,Q)=>{const{__scopeContextMenu:Z,...q}=J,Y=cQ(Z);return Q8.createElement(_V,D0({},Y,q,{ref:Q}))});var Tt=(J)=>{const{__scopeContextMenu:Q,children:Z,onOpenChange:q,open:Y,defaultOpen:$}=J,W=cQ(Q),[G,z]=O7({prop:Y,defaultProp:$,onChange:q});return Q8.createElement(EV,D0({},W,{open:G,onOpenChange:z}),Z)};var bt=Q8.forwardRef((J,Q)=>{const{__scopeContextMenu:Z,...q}=J,Y=cQ(Z);return Q8.createElement(CV,D0({},Y,q,{ref:Q}))});var xt=Q8.forwardRef((J,Q)=>{const{__scopeContextMenu:Z,...q}=J,Y=cQ(Z);return Q8.createElement(AV,D0({},Y,q,{ref:Q,style:{...J.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))});var yt=hV0,vt=cV0,St=gP,ft=dV0;var gt=lV0;var rt=v(o(),1);var mP=function(J){return J.split(",")[0].split("").map((Q)=>{const Z=Q.replace(/\$/g,iV0).replace(/\?/g,nV0).replace(/!/g,"\u21E7");return Z[0].toUpperCase()+Z.slice(1)})},HU=function(J){return"\u2014 "+mP(J).join("\u2009")},ht=typeof window==="undefined"?!1:window.navigator.userAgent.toLowerCase().indexOf("mac")>-1,iV0=ht?"\u2318":"Ctrl",nV0=ht?"\u2325":"Alt";var hK=v(W0(),1),hP=function(J){return hK.jsx("svg",{width:16,height:16,viewBox:"0 0 16 16",...J,children:hK.jsxs("g",{strokeWidth:2,fill:"none",fillRule:"evenodd",children:[hK.jsx("circle",{strokeOpacity:0.25,cx:8,cy:8,r:7,stroke:"currentColor"}),hK.jsx("path",{strokeLinecap:"round",d:"M15 8c0-4.5-4.5-7-7-7",stroke:"currentColor",children:hK.jsx("animateTransform",{attributeName:"transform",type:"rotate",from:"0 8 8",to:"360 8 8",dur:"1s",repeatCount:"indefinite"})})]})})};var D7=v(W0(),1);var M9=v(o(),1);var ut="DropdownMenu",[sV0,p16]=n9(ut,[f2]),pQ=f2(),[rV0,ct]=sV0(ut),aV0=(J)=>{const{__scopeDropdownMenu:Q,children:Z,dir:q,open:Y,defaultOpen:$,onOpenChange:W,modal:G=!0}=J,z=pQ(Q),U=M9.useRef(null),[F=!1,B]=O7({prop:Y,defaultProp:$,onChange:W});return M9.createElement(rV0,{scope:Q,triggerId:r7(),triggerRef:U,contentId:r7(),open:F,onOpenChange:B,onOpenToggle:M9.useCallback(()=>B((M)=>!M),[B]),modal:G},M9.createElement(MV,D0({},z,{open:F,onOpenChange:B,dir:q,modal:G}),Z))};var oV0="DropdownMenuTrigger",tV0=M9.forwardRef((J,Q)=>{const{__scopeDropdownMenu:Z,disabled:q=!1,...Y}=J,$=ct(oV0,Z),W=pQ(Z);return M9.createElement(OV,D0({asChild:!0},W),M9.createElement(m6.button,D0({type:"button",id:$.triggerId,"aria-haspopup":"menu","aria-expanded":$.open,"aria-controls":$.open?$.contentId:void 0,"data-state":$.open?"open":"closed","data-disabled":q?"":void 0,disabled:q},Y,{ref:VK(Q,$.triggerRef),onPointerDown:s0(J.onPointerDown,(G)=>{if(!q&&G.button===0&&G.ctrlKey===!1){if($.onOpenToggle(),!$.open)G.preventDefault()}}),onKeyDown:s0(J.onKeyDown,(G)=>{if(q)return;if(["Enter"," "].includes(G.key))$.onOpenToggle();if(G.key==="ArrowDown")$.onOpenChange(!0);if(["Enter"," ","ArrowDown"].includes(G.key))G.preventDefault()})})))});var eV0=(J)=>{const{__scopeDropdownMenu:Q,...Z}=J,q=pQ(Q);return M9.createElement(VV,D0({},q,Z))};var JD0="DropdownMenuContent",QD0=M9.forwardRef((J,Q)=>{const{__scopeDropdownMenu:Z,...q}=J,Y=ct(JD0,Z),$=pQ(Z),W=M9.useRef(!1);return M9.createElement(DV,D0({id:Y.contentId,"aria-labelledby":Y.triggerId},$,q,{ref:Q,onCloseAutoFocus:s0(J.onCloseAutoFocus,(G)=>{var z;if(!W.current)(z=Y.triggerRef.current)===null||z===void 0||z.focus();W.current=!1,G.preventDefault()}),onInteractOutside:s0(J.onInteractOutside,(G)=>{const z=G.detail.originalEvent,U=z.button===0&&z.ctrlKey===!0,F=z.button===2||U;if(!Y.modal||F)W.current=!0}),style:{...J.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))});var ZD0=M9.forwardRef((J,Q)=>{const{__scopeDropdownMenu:Z,...q}=J,Y=pQ(Z);return M9.createElement(RV,D0({},Y,q,{ref:Q}))});var qD0=M9.forwardRef((J,Q)=>{const{__scopeDropdownMenu:Z,...q}=J,Y=pQ(Z);return M9.createElement(jV,D0({},Y,q,{ref:Q}))});var XD0=M9.forwardRef((J,Q)=>{const{__scopeDropdownMenu:Z,...q}=J,Y=pQ(Z);return M9.createElement(_V,D0({},Y,q,{ref:Q}))});var YD0=(J)=>{const{__scopeDropdownMenu:Q,children:Z,open:q,onOpenChange:Y,defaultOpen:$}=J,W=pQ(Q),[G=!1,z]=O7({prop:q,defaultProp:$,onChange:Y});return M9.createElement(EV,D0({},W,{open:G,onOpenChange:z}),Z)};var KD0=M9.forwardRef((J,Q)=>{const{__scopeDropdownMenu:Z,...q}=J,Y=pQ(Z);return M9.createElement(CV,D0({},Y,q,{ref:Q}))});var $D0=M9.forwardRef((J,Q)=>{const{__scopeDropdownMenu:Z,...q}=J,Y=pQ(Z);return M9.createElement(AV,D0({},Y,q,{ref:Q,style:{...J.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))});var g2=aV0,m2=tV0,uK=eV0,h2=QD0,pt=ZD0;var dt=qD0,uP=XD0;var lt=YD0,it=KD0,nt=$D0;var J4=function({id:J,children:Q,modal:Z=!1,debugOpen:q=!1}){const[Y,$]=oJ(J);return D7.jsx(g2,{open:q||Y,dir:"ltr",modal:Z,onOpenChange:$,children:Q})},Q4=function({children:J,...Q}){return D7.jsx(m2,{dir:"ltr",asChild:!0,onTouchEnd:(Z)=>A6(Z),...Q,children:J})},Z4=function({side:J="bottom",align:Q="start",sideOffset:Z=8,alignOffset:q=8,children:Y}){const $=y8();return D7.jsx(uK,{container:$,children:D7.jsx(h2,{className:"tlui-menu",side:J,sideOffset:Z,align:Q,alignOffset:q,collisionPadding:4,children:Y})})},cP=function({id:J,children:Q}){const[Z,q]=oJ(J);return D7.jsx(lt,{open:Z,onOpenChange:q,children:Q})},pP=function({id:J,label:Q,title:Z,disabled:q}){return D7.jsx(it,{dir:"ltr",asChild:!0,disabled:q,children:D7.jsxs(m0,{"data-testid":J,type:"menu",className:"tlui-menu__submenu__trigger",disabled:q,title:Z,children:[D7.jsx(v8,{children:Q}),D7.jsx(L6,{icon:"chevron-right",small:!0})]})})},st=function({id:J,alignOffset:Q=-1,sideOffset:Z=-4,size:q="small",children:Y}){const $=y8();return D7.jsx(uK,{container:$,children:D7.jsx(nt,{"data-testid":J,className:"tlui-menu tlui-menu__submenu__content",alignOffset:Q,sideOffset:Z,collisionPadding:4,"data-size":q,children:Y})})},dP=function({children:J}){return D7.jsx(pt,{dir:"ltr",className:"tlui-menu__group",children:J})};var Qq=function({noClose:J,children:Q}){return D7.jsx(dt,{dir:"ltr",asChild:!0,onClick:J?A6:void 0,children:Q})};var lP=v(W0(),1);var yX=function({children:J,visibleOnMobileLayout:Q=!1}){const Z=i8();if(!Q&&Z<e6.MOBILE)return null;return lP.jsx("kbd",{className:"tlui-kbd",children:mP(J).map((q,Y)=>lP.jsx("span",{children:q},Y))})};var r=function({disabled:J=!1,spinner:Q=!1,readonlyOk:Z=!1,id:q,kbd:Y,label:$,icon:W,onSelect:G,noClose:z,isSelected:U}){const{type:F,sourceId:B}=bX(),M=e0(),[O,R]=rt.useState(!1);if(S5()&&!Z)return null;const E=fQ($,F),_=Y?HU(Y):void 0,A=E?M(E):void 0,w=A&&_?`${A} ${_}`:A;switch(F){case"menu":return $9.jsx(Qq,{children:$9.jsxs(m0,{type:"menu","data-testid":`${B}.${q}`,disabled:J,title:w,onClick:(T)=>{if(z)A6(T);if(O)R(!1);else G(B)},children:[$9.jsx(v8,{children:A}),Y&&$9.jsx(yX,{children:Y})]})});case"context-menu":{if(J)return null;return $9.jsxs(Pt,{dir:"ltr",title:w,draggable:!1,className:"tlui-button tlui-button__menu","data-testid":`${B}.${q}`,onSelect:(T)=>{if(z)A6(T);if(O)R(!1);else G(B)},children:[$9.jsx("span",{className:"tlui-button__label",draggable:!1,children:A}),Y&&$9.jsx(yX,{children:Y}),Q&&$9.jsx(hP,{})]})}case"panel":return $9.jsxs(m0,{"data-testid":`${B}.${q}`,type:"menu",title:w,disabled:J,onClick:()=>G(B),children:[$9.jsx(v8,{children:A}),W&&$9.jsx(L6,{icon:W})]});case"small-icons":case"icons":return $9.jsx(m0,{"data-testid":`${B}.${q}`,type:"icon",title:w,disabled:J,onClick:()=>G(B),children:$9.jsx(L6,{icon:W,small:F==="small-icons"})});case"keyboard-shortcuts":{if(!Y)return console.warn(`Menu item '${$}' isn't shown in the keyboard shortcuts dialog because it doesn't have a keyboard shortcut.`),null;return $9.jsxs("div",{className:"tlui-shortcuts-dialog__key-pair","data-testid":`${B}.${q}`,children:[$9.jsx("div",{className:"tlui-shortcuts-dialog__key-pair__key",children:A}),$9.jsx("div",{className:"tlui-shortcuts-dialog__key-pair__value",children:$9.jsx(yX,{visibleOnMobileLayout:!0,children:Y})})]})}case"helper-buttons":return $9.jsxs(m0,{type:"low",onClick:()=>G(B),children:[$9.jsx(L6,{icon:W}),$9.jsx(v8,{children:A})]});case"toolbar":return $9.jsx(m0,{type:"tool","data-testid":`tools.${q}`,"aria-label":E,"data-value":q,onClick:()=>G("toolbar"),title:w,onTouchStart:(T)=>{A6(T),G("toolbar")},role:"radio","aria-checked":U?"true":"false",children:$9.jsx(L6,{icon:W})});case"toolbar-overflow":return $9.jsx(Qq,{"aria-label":$,children:$9.jsx(m0,{type:"icon",className:"tlui-button-grid__button",onClick:()=>{G("toolbar")},"data-testid":`tools.more.${q}`,title:w,role:"radio","aria-checked":U?"true":"false","data-value":q,children:$9.jsx(L6,{icon:W})})});default:throw r5(F)}};var iP=function(){return j6.jsxs(j6.Fragment,{children:[j6.jsx(ot,{}),j6.jsx(tt,{}),j6.jsx(et,{}),j6.jsx(Je,{}),j6.jsx(Qe,{}),j6.jsx(Ze,{}),j6.jsx(HD0,{}),j6.jsx(qe,{})]})},ot=function(){const J=l0(),Q=XJ(2);return j6.jsxs(j6.Fragment,{children:[j6.jsx(r,{...J["align-left"],disabled:!Q}),j6.jsx(r,{...J["align-center-horizontal"],disabled:!Q}),j6.jsx(r,{...J["align-right"],disabled:!Q}),j6.jsx(r,{...J["stretch-horizontal"],disabled:!Q}),j6.jsx(r,{...J["align-top"],disabled:!Q}),j6.jsx(r,{...J["align-center-vertical"],disabled:!Q}),j6.jsx(r,{...J["align-bottom"],disabled:!Q}),j6.jsx(r,{...J["stretch-vertical"],disabled:!Q})]})},tt=function(){const J=l0(),Q=XJ(3);return j6.jsxs(j6.Fragment,{children:[j6.jsx(r,{...J["distribute-horizontal"],disabled:!Q}),j6.jsx(r,{...J["distribute-vertical"],disabled:!Q})]})},et=function(){const J=l0(),Q=KM();return j6.jsxs(j6.Fragment,{children:[j6.jsx(r,{...J["stack-horizontal"],disabled:!Q}),j6.jsx(r,{...J["stack-vertical"],disabled:!Q})]})},Je=function(){const J=l0(),Q=XJ(1);return j6.jsxs(j6.Fragment,{children:[j6.jsx(r,{...J["send-to-back"],disabled:!Q}),j6.jsx(r,{...J["send-backward"],disabled:!Q}),j6.jsx(r,{...J["bring-forward"],disabled:!Q}),j6.jsx(r,{...J["bring-to-front"],disabled:!Q})]})},Qe=function(){return i8()<e6.TABLET_SM?j6.jsx(WD0,{}):j6.jsx(GD0,{})},WD0=function(){const J=l0(),Q=h(),Z=e("zoom is 1",()=>Q.getZoomLevel()===1,[Q]);return j6.jsx(r,{...J["zoom-to-100"],disabled:Z})},GD0=function(){const J=l0(),Q=XJ(1);return j6.jsx(r,{...J["rotate-ccw"],disabled:!Q})},Ze=function(){const J=l0(),Q=XJ(1);return j6.jsx(r,{...J["rotate-cw"],disabled:!Q})},HD0=function(){const J=l0(),Q=GM();return j6.jsx(r,{...J["edit-link"],disabled:!Q})},qe=function(){const J=$M(),Q=WM();return J?j6.jsx(at,{}):Q?j6.jsx(zD0,{}):j6.jsx(at,{})},at=function(){const J=l0(),Q=XJ(2);return j6.jsx(r,{...J.group,disabled:!Q})},zD0=function(){const J=l0();return j6.jsx(r,{...J.ungroup})};var nP=Xe.memo(function J({children:Q}){const Z=e0(),q=i8(),Y=S5(),$=h(),W=e("should display quick actions when in readonly",()=>$.isInAny("hand","zoom"),[$]),G=Q??dQ.jsx(iP,{});if(Y&&!W)return;return dQ.jsxs(SK,{id:"actions-menu",children:[dQ.jsx(fK,{children:dQ.jsx(m0,{type:"icon","data-testid":"actions-menu.button",title:Z("actions-menu.title"),children:dQ.jsx(L6,{icon:"dots-vertical",small:!0})})}),dQ.jsx(gK,{side:q>=e6.TABLET?"bottom":"top",sideOffset:6,children:dQ.jsx("div",{className:"tlui-actions-menu tlui-buttons__grid","data-testid":"actions-menu.content",children:dQ.jsx(v9,{type:"icons",sourceId:"actions-menu",children:G})})})]})});var Zq=v(W0(),1);var IV=v(o(),1);var h9=v(W0(),1);var P0=v(W0(),1);var lQ=v(W0(),1);var tJ=function({id:J,kbd:Q,label:Z,readonlyOk:q,onSelect:Y,disabled:$=!1,checked:W=!1}){const{type:G,sourceId:z}=bX(),U=S5(),F=e0();if(U&&!q)return null;const B=fQ(Z,G),M=B?F(B):void 0;switch(G){case"menu":return lQ.jsxs(uP,{dir:"ltr",className:"tlui-button tlui-button__menu tlui-button__checkbox",title:M,onSelect:(O)=>{Y?.(z),A6(O)},disabled:$,checked:W,children:[lQ.jsx(RJ,{small:!0,icon:W?"check":"checkbox-empty"}),M&&lQ.jsx("span",{className:"tlui-button__label",draggable:!1,children:M}),Q&&lQ.jsx(yX,{children:Q})]});case"context-menu":return lQ.jsxs(gt,{className:"tlui-button tlui-button__menu tlui-button__checkbox",dir:"ltr",title:M,onSelect:(O)=>{Y(z),A6(O)},disabled:$,checked:W,children:[lQ.jsx(RJ,{small:!0,icon:W?"check":"checkbox-empty"}),M&&lQ.jsx("span",{className:"tlui-button__label",draggable:!1,children:M}),Q&&lQ.jsx(yX,{children:Q})]},J);default:return null}};var vX=v(W0(),1);var O6=function({id:J,label:Q,children:Z}){const{type:q,sourceId:Y}=bX(),$=e0(),W=fQ(Q,q),G=W?$(W):void 0;switch(q){case"panel":return vX.jsx("div",{className:"tlui-menu__group","data-testid":`${Y}-group.${J}`,children:Z});case"menu":return vX.jsx(dP,{"data-testid":`${Y}-group.${J}`,children:Z});case"context-menu":return vX.jsx(It,{dir:"ltr",className:"tlui-menu__group","data-testid":`${Y}-group.${J}`,children:Z});case"keyboard-shortcuts":return vX.jsxs("div",{className:"tlui-shortcuts-dialog__group","data-testid":`${Y}-group.${J}`,children:[vX.jsx("h2",{className:"tlui-shortcuts-dialog__group__title",children:G}),vX.jsx("div",{className:"tlui-shortcuts-dialog__group__content",children:Z})]});default:return Z}};var S4=v(W0(),1);var _J=function({id:J,disabled:Q=!1,label:Z,size:q="small",children:Y}){const{type:$,sourceId:W}=bX(),G=y8(),z=e0(),U=Z?typeof Z==="string"?Z:Z[$]??Z.default:void 0,F=U?z(U):void 0;switch($){case"menu":return S4.jsxs(cP,{id:`${W}-sub.${J}`,children:[S4.jsx(pP,{id:`${W}-sub.${F?F.toLowerCase()+"-button":""}`,disabled:Q,label:F,title:F}),S4.jsx(st,{id:`${W}-sub.${F?F.toLowerCase()+"-content":""}`,size:q,children:Y})]});case"context-menu":{if(Q)return null;return S4.jsxs(UD0,{id:`${W}-sub.${J}`,children:[S4.jsx(bt,{dir:"ltr",disabled:Q,asChild:!0,children:S4.jsxs(m0,{"data-testid":`${W}-sub-trigger.${J}`,type:"menu",className:"tlui-menu__submenu__trigger",children:[S4.jsx(v8,{children:F}),S4.jsx(L6,{icon:"chevron-right",small:!0})]})}),S4.jsx(gP,{container:G,children:S4.jsx(xt,{"data-testid":`${W}-sub-content.${J}`,className:"tlui-menu tlui-menu__submenu__content",alignOffset:-1,sideOffset:-4,collisionPadding:4,"data-size":q,children:Y})})]})}default:return Y}},UD0=function({id:J,children:Q}){const[Z,q]=oJ(J);return S4.jsx(Tt,{open:Z,onOpenChange:q,children:Q})};var zU=function(){const J=l0();if(!bi())return null;return P0.jsx(r,{...J["toggle-auto-size"]})},UU=function(){const J=l0();if(!GM())return null;return P0.jsx(r,{...J["edit-link"]})},Ye=function(){const J=l0();if(!XJ(1))return null;return P0.jsx(r,{...J.duplicate})},LU=function(){const J=l0();if(!$M())return null;return P0.jsx(r,{...J.group})},FU=function(){const J=l0();if(!WM())return null;return P0.jsx(r,{...J.ungroup})},BU=function(){const J=h(),Q=l0();if(!e("allow unframe",()=>{const q=J.getSelectedShapes();if(q.length===0)return!1;return q.every((Y)=>J.isShapeOfType(Y,"frame"))},[J]))return null;return P0.jsx(r,{...Q["remove-frame"]})},NU=function(){const J=h(),Q=l0();if(!e("allow fit frame to content",()=>{const q=J.getOnlySelectedShape();if(!q)return!1;return J.isShapeOfType(q,"frame")&&J.getSortedChildIdsForParent(q).length>0},[J]))return null;return P0.jsx(r,{...Q["fit-frame-to-content"]})},MU=function(){const J=h(),Q=l0();if(!e("selected shapes",()=>J.getSelectedShapes().length>0,[J]))return null;return P0.jsx(r,{...Q["toggle-lock"]})},OU=function(){const J=l0(),Q=h(),Z=e("isTransparentBg",()=>!Q.getInstanceState().exportBackground,[Q]);return P0.jsx(tJ,{...J["toggle-transparent"],checked:Z})},sP=function(){const J=h(),Q=l0(),Z=e("any shapes",()=>J.getCurrentPageShapeIds().size>0,[J]);return P0.jsx(r,{...Q["unlock-all"],disabled:!Z})},VU=function(){const J=h(),Q=e("zoomed to 100",()=>J.getZoomLevel()===1,[J]),Z=l0();return P0.jsx(r,{...Z["zoom-to-100"],noClose:!0,disabled:Q})},DU=function(){const J=h(),Q=e("has shapes",()=>J.getCurrentPageShapeIds().size>0,[J]),Z=l0();return P0.jsx(r,{...Z["zoom-to-fit"],disabled:!Q,"data-testid":"minimap.zoom-menu.zoom-to-fit",noClose:!0})},RU=function(){const J=h(),Q=e("has shapes",()=>J.getSelectedShapeIds().length>0,[J]),Z=l0();return P0.jsx(r,{...Z["zoom-to-selection"],disabled:!Q,"data-testid":"minimap.zoom-menu.zoom-to-selection",noClose:!0})},jU=function(){return P0.jsxs(O6,{id:"clipboard",children:[P0.jsx($e,{}),P0.jsx(We,{}),P0.jsx(Ge,{}),P0.jsx(Ye,{}),P0.jsx(He,{})]})},Ke=function(){const J=h(),Q=l0(),Z=e("atLeastOneShapeOnPage",()=>J.getCurrentPageShapeIds().size>0,[J]);return P0.jsxs(_J,{id:"copy-as",label:"context-menu.copy-as",size:"small",disabled:!Z,children:[P0.jsxs(O6,{id:"copy-as-group",children:[P0.jsx(r,{...Q["copy-as-svg"]}),Boolean(window.navigator.clipboard?.write)&&P0.jsx(r,{...Q["copy-as-png"]}),P0.jsx(r,{...Q["copy-as-json"]})]}),P0.jsx(O6,{id:"copy-as-bg",children:P0.jsx(OU,{})})]})},$e=function(){const J=l0(),Q=XJ(1);return P0.jsx(r,{...J.cut,disabled:!Q})},We=function(){const J=l0(),Q=Ti(1);return P0.jsx(r,{...J.copy,disabled:!Q})},Ge=function(){const J=l0(),Q=Pi;return P0.jsx(r,{...J.paste,disabled:!Q})},_U=function(){const J=h(),Q=l0();if(!e("atLeastOneShapeOnPage",()=>J.getCurrentPageShapeIds().size>0,[J]))return null;return P0.jsxs(O6,{id:"conversions",children:[P0.jsx(Ke,{}),P0.jsxs(_J,{id:"export-as",label:"context-menu.export-as",size:"small",children:[P0.jsxs(O6,{id:"export-as-group",children:[P0.jsx(r,{...Q["export-as-svg"]}),P0.jsx(r,{...Q["export-as-png"]}),P0.jsx(r,{...Q["export-as-json"]})]}),P0.jsx(O6,{id:"export-as-bg",children:P0.jsx(OU,{})})]})]})},EU=function(){const J=l0(),Q=h(),Z=e("atLeastOneShapeOnPage",()=>Q.getCurrentPageShapeIds().size>0,[Q]);return P0.jsx(r,{...J["select-all"],disabled:!Z})},He=function(){const J=l0(),Q=XJ(1);return P0.jsx(r,{...J.delete,disabled:!Q})},rP=function(){const J=XJ(2),Q=xi(),Z=l0();if(!(J||Q))return null;return P0.jsxs(_J,{id:"arrange",label:"context-menu.arrange",size:"small",children:[J&&P0.jsxs(O6,{id:"align",children:[P0.jsx(r,{...Z["align-left"]}),P0.jsx(r,{...Z["align-center-horizontal"]}),P0.jsx(r,{...Z["align-right"]}),P0.jsx(r,{...Z["align-top"]}),P0.jsx(r,{...Z["align-center-vertical"]}),P0.jsx(r,{...Z["align-bottom"]})]}),P0.jsx(LD0,{}),J&&P0.jsxs(O6,{id:"stretch",children:[P0.jsx(r,{...Z["stretch-horizontal"]}),P0.jsx(r,{...Z["stretch-vertical"]})]}),(J||Q)&&P0.jsxs(O6,{id:"flip",children:[P0.jsx(r,{...Z["flip-horizontal"]}),P0.jsx(r,{...Z["flip-vertical"]})]}),P0.jsx(FD0,{})]})},LD0=function(){const J=l0();if(!XJ(3))return null;return P0.jsxs(O6,{id:"distribute",children:[P0.jsx(r,{...J["distribute-horizontal"]}),P0.jsx(r,{...J["distribute-vertical"]})]})},FD0=function(){const J=l0(),Q=XJ(2),Z=KM();if(!Q)return null;return P0.jsxs(O6,{id:"order",children:[P0.jsx(r,{...J.pack}),Z&&P0.jsx(r,{...J["stack-horizontal"]}),Z&&P0.jsx(r,{...J["stack-vertical"]})]})},aP=function(){const J=l0();if(!XJ(1))return null;return P0.jsx(_J,{id:"reorder",label:"context-menu.reorder",size:"small",children:P0.jsxs(O6,{id:"reorder",children:[P0.jsx(r,{...J["bring-to-front"]}),P0.jsx(r,{...J["bring-forward"]}),P0.jsx(r,{...J["send-backward"]}),P0.jsx(r,{...J["send-to-back"]})]})})},oP=function(){const J=h(),Q=e("pages",()=>J.getPages(),[J]),Z=e("current page id",()=>J.getCurrentPageId(),[J]),{addToast:q}=q5(),Y=l0(),$=g5();if(!XJ(1))return null;return P0.jsxs(_J,{id:"move-to-page",label:"context-menu.move-to-page",size:"small",children:[P0.jsx(O6,{id:"pages",children:Q.map((G)=>P0.jsx(r,{id:G.id,disabled:Z===G.id,label:G.name,onSelect:()=>{J.mark("move_shapes_to_page"),J.moveShapesToPage(J.getSelectedShapeIds(),G.id);const z=J.getPage(G.id);if(z)q({title:"Changed Page",description:`Moved to ${z.name}.`,actions:[{label:"Go Back",type:"primary",onClick:()=>{J.mark("change-page"),J.setCurrentPage(Z)}}]});$("move-to-page",{source:"context-menu"})}},G.id))}),P0.jsx(O6,{id:"new-page",children:P0.jsx(r,{...Y["new-page"]})})]})},CU=function(){const J=h(),Q=l0();if(!e("oneEmbedSelected",()=>{const q=J.getOnlySelectedShape();if(!q)return!1;return!!(J.isShapeOfType(q,"embed")&&q.props.url&&!J.isShapeOrAncestorLocked(q))},[J]))return null;return P0.jsx(r,{...Q["convert-to-bookmark"]})},AU=function(){const J=h(),Q=l0();if(!e("oneEmbeddableBookmarkSelected",()=>{const q=J.getOnlySelectedShape();if(!q)return!1;return!!(J.isShapeOfType(q,"bookmark")&&q.props.url&&d7(q.props.url)&&!J.isShapeOrAncestorLocked(q))},[J]))return null;return P0.jsx(r,{...Q["convert-to-embed"]})},tP=function(){const J=l0(),Q=h(),Z=e("isSnapMode",()=>Q.user.getIsSnapMode(),[Q]);return P0.jsx(tJ,{...J["toggle-snap-mode"],checked:Z})},eP=function(){const J=l0(),Q=h(),Z=e("isToolLock",()=>Q.getInstanceState().isToolLocked,[Q]);return P0.jsx(tJ,{...J["toggle-tool-lock"],checked:Z})},JT=function(){const J=l0(),Q=h(),Z=e("isGridMode",()=>Q.getInstanceState().isGridMode,[Q]);return P0.jsx(tJ,{...J["toggle-grid"],checked:Z})},QT=function(){const J=l0(),Q=h(),Z=e("isWrapMode",()=>Q.user.getIsWrapMode(),[Q]);return P0.jsx(tJ,{...J["toggle-wrap-mode"],checked:Z})},ZT=function(){const J=l0(),Q=h(),Z=e("isDarkMode",()=>Q.user.getIsDarkMode(),[Q]);return P0.jsx(tJ,{...J["toggle-dark-mode"],checked:Z})},qT=function(){const J=l0(),Q=h(),Z=e("isFocusMode",()=>Q.getInstanceState().isFocusMode,[Q]);return P0.jsx(tJ,{...J["toggle-focus-mode"],checked:Z})},XT=function(){const J=l0(),Q=h(),Z=e("edgeScrollSpeed",()=>Q.user.getEdgeScrollSpeed(),[Q]);return P0.jsx(tJ,{...J["toggle-edge-scrolling"],checked:Z===1})},YT=function(){const J=l0(),Q=h(),Z=e("animationSpeed",()=>Q.user.getAnimationSpeed(),[Q]);return P0.jsx(tJ,{...J["toggle-reduce-motion"],checked:Z===0})},KT=function(){const J=l0(),Q=h(),Z=e("isDebugMode",()=>Q.getInstanceState().isDebugMode,[Q]);return P0.jsx(tJ,{...J["toggle-debug-mode"],checked:Z})};var $T=function(){const J=h();if(!e("isSelectToolActive",()=>J.getCurrentToolId()==="select",[J]))return null;return h9.jsxs(h9.Fragment,{children:[h9.jsxs(O6,{id:"misc",children:[h9.jsx(LU,{}),h9.jsx(FU,{}),h9.jsx(UU,{}),h9.jsx(zU,{}),h9.jsx(BU,{}),h9.jsx(NU,{}),h9.jsx(AU,{}),h9.jsx(CU,{}),h9.jsx(MU,{})]}),h9.jsxs(O6,{id:"modify",children:[h9.jsx(rP,{}),h9.jsx(aP,{}),h9.jsx(oP,{})]}),h9.jsx(jU,{}),h9.jsx(_U,{}),h9.jsx(O6,{id:"select-all",children:h9.jsx(EU,{})})]})};var PV=IV.memo(function J({children:Q}){const Z=h(),{Canvas:q}=k8(),Y=IV.useCallback((U)=>{if(!U){const F=Z.getOnlySelectedShape();if(F&&Z.isShapeOrAncestorLocked(F))Z.setSelectedShapes([])}else if(Z.getInstanceState().isCoarsePointer){const F=Z.getSelectedShapes(),{inputs:{currentPagePoint:B}}=Z,M=Z.getShapesAtPoint(B);if(!Z.getSelectedShapes().length||!M.some((O)=>F.includes(O))){const O=M.filter((R)=>Z.isShapeOrAncestorLocked(R));if(O.length)Z.select(...O.map((R)=>R.id))}}},[Z]),$=y8(),[W,G]=oJ("context menu",Y);return Zq.jsxs(yt,{dir:"ltr",onOpenChange:G,modal:!1,children:[Zq.jsx(vt,{onContextMenu:void 0,dir:"ltr",children:q?Zq.jsx(q,{}):null}),W&&Zq.jsx(St,{container:$,children:Zq.jsx(ft,{className:"tlui-menu scrollable","data-testid":"context-menu",alignOffset:-4,collisionPadding:4,onContextMenu:A6,children:Zq.jsx(v9,{type:"context-menu",sourceId:"context-menu",children:Q??Zq.jsx($T,{})})})})]})});var qq=v(W0(),1);var Z8=v(W0(),1);var WT=v(o(),1);var ze=v(W0(),1);var u2=function({checked:J}){return ze.jsx(RJ,{icon:J?"check":"checkbox-empty",className:"tlui-button__icon",small:!0})};var GT=function(){const J=h(),{addToast:Q}=q5(),{addDialog:Z}=t7(),[q,Y]=WT.default.useState(!1);return Z8.jsxs(Z8.Fragment,{children:[Z8.jsxs(O6,{id:"items",children:[Z8.jsx(r,{id:"add-toast",onSelect:()=>{Q({id:u6(),title:"Something good happened",description:"Hey, attend to this thing over here. It might be important!",keepOpen:!0,severity:"success"}),Q({id:u6(),title:"Something happened",description:"Hey, attend to this thing over here. It might be important!",keepOpen:!0,severity:"info",actions:[{label:"Primary",type:"primary",onClick:()=>{}},{label:"Normal",type:"normal",onClick:()=>{}},{label:"Danger",type:"danger",onClick:()=>{}}]}),Q({id:u6(),title:"Something maybe bad happened",description:"Hey, attend to this thing over here. It might be important!",keepOpen:!0,severity:"warning",actions:[{label:"Primary",type:"primary",onClick:()=>{}},{label:"Normal",type:"normal",onClick:()=>{}},{label:"Danger",type:"danger",onClick:()=>{}}]}),Q({id:u6(),title:"Something bad happened",severity:"error",keepOpen:!0})},label:ZO("Show toast")}),Z8.jsx(r,{id:"show-dialog",label:"Show dialog",onSelect:()=>{Z({component:({onClose:$})=>Z8.jsx(Be,{displayDontShowAgain:!0,onCancel:()=>$(),onContinue:()=>$()}),onClose:()=>{}})}}),Z8.jsx(r,{id:"create-shapes",label:"Create 100 shapes",onSelect:()=>BD0(J,100)}),Z8.jsx(r,{id:"count-nodes",label:"Count shapes / nodes",onSelect:()=>{const $=J.getSelectedShapes(),W=$.length===0?J.getRenderingShapes():$;window.alert(`Shapes ${W.length}, DOM nodes:${document.querySelector(".tl-shapes").querySelectorAll("*")?.length}`)}}),(()=>{if(q)throw Error("oh no!");return null})(),Z8.jsx(r,{id:"throw-error",onSelect:()=>Y(!0),label:"Throw error"}),Z8.jsx(r,{id:"hard-reset",onSelect:X3,label:"Hard reset"})]}),Z8.jsxs(O6,{id:"flags",children:[Z8.jsx(Le,{}),Z8.jsx(Fe,{})]})]})},Le=function(){const J=Object.values(t8);if(!J.length)return null;return Z8.jsx(_J,{id:"debug flags",label:"Debug Flags",children:Z8.jsx(O6,{id:"debug flags",children:J.map((Q)=>Z8.jsx(Ne,{flag:Q},Q.name))})})},Fe=function(){const J=Object.values(FC);if(!J.length)return null;return Z8.jsx(_J,{id:"feature flags",label:"Feature Flags",children:Z8.jsx(O6,{id:"feature flags",children:J.map((Q)=>Z8.jsx(Ne,{flag:Q},Q.name))})})},Be=function({title:J="title",body:Q="hello hello hello",cancel:Z="Cancel",confirm:q="Continue",displayDontShowAgain:Y=!1,onCancel:$,onContinue:W}){const[G,z]=WT.default.useState(!1);return Z8.jsxs(Z8.Fragment,{children:[Z8.jsxs(aZ,{children:[Z8.jsx(oZ,{children:J}),Z8.jsx(tZ,{})]}),Z8.jsx(SQ,{style:{maxWidth:350},children:Q}),Z8.jsxs(CK,{className:"tlui-dialog__footer__actions",children:[Y&&Z8.jsxs(m0,{type:"normal",onClick:()=>z(!G),style:{marginRight:"auto"},children:[Z8.jsx(u2,{checked:G}),Z8.jsx(v8,{children:"Don't show again"})]}),Z8.jsx(m0,{type:"normal",onClick:$,children:Z8.jsx(v8,{children:Z})}),Z8.jsx(m0,{type:"primary",onClick:async()=>W(),children:Z8.jsx(v8,{children:q})})]})]})},BD0=function(J,Q){const Z=Array(Q),q=Math.floor(Math.sqrt(Q));for(let Y=0;Y<Q;Y++)Ue++,Z[Y]={id:v6("box"+Ue),type:"geo",x:Y%q*132,y:Math.floor(Y/q)*132};J.batch(()=>{J.createShapes(Z).setSelectedShapes(Z.map((Y)=>Y.id))})},Ne=D9(function J({flag:Q,onChange:Z}){const q=Q.get();return Z8.jsx(tJ,{id:Q.name,title:Q.name,label:Q.name.replace(/([a-z0-9])([A-Z])/g,(Y)=>`${Y[0]} ${Y[1].toLowerCase()}`).replace(/^[a-z]/,(Y)=>Y.toUpperCase()),checked:q,onSelect:()=>{Q.set(!q),Z?.(!q)}})}),Ue=0;var HT=function({children:J}){return qq.jsxs(J4,{id:"debug",children:[qq.jsx(Q4,{children:qq.jsx(m0,{type:"icon",title:"Debug menu",children:qq.jsx(L6,{icon:"dots-horizontal"})})}),qq.jsx(Z4,{side:"top",align:"end",alignOffset:0,children:qq.jsx(v9,{type:"menu",sourceId:"debug-panel",children:J??qq.jsx(GT,{})})})]})};var SX=v(W0(),1);var Xq=v(o(),1);var ND0=function(J=!0){const[Q,Z]=Xq.useState(0),q=h();Xq.useEffect(()=>{if(!J)return;const Y=()=>Z(($)=>$+1);return q.on("tick",Y),()=>{q.off("tick",Y)}},[q,J])},OD0=function(){const J=e("show_fps",()=>t8.showFps.get(),[t8]),Q=Xq.useRef(null);if(Xq.useEffect(()=>{if(!J)return;const Z=250;let q=0,Y=!1,$=performance.now(),W=0,G=0,z=!1;function U(){if(Y)return;if(G++,W=performance.now()-$,W>Z){const F=Math.round(G*(Z/W)*(1000/Z));if(F>q)q=F;const B=q*0.75;if(F<B&&!z||F>=B&&z)z=!z;Q.current.innerHTML=`FPS ${F.toString()}`,Q.current.className="tlui-debug-panel__fps"+(z?" tlui-debug-panel__fps__slow":""),W-=Z,G=0,$=performance.now()}requestAnimationFrame(U)}return U(),()=>{Y=!0}},[J]),!J)return null;return SX.jsx("div",{ref:Q})},Me=Xq.memo(function J(){const{DebugMenu:Q}=EJ();return SX.jsxs("div",{className:"tlui-debug-panel",children:[SX.jsx(MD0,{}),SX.jsx(OD0,{}),Q&&SX.jsx(Q,{})]})}),MD0=D9(function J(){ND0();const Q=h(),Z=Q.getPath(),q=Q.getHoveredShape(),Y=Q.getOnlySelectedShape(),$=Z==="select.idle"||!Z.includes("select.")?q:Y,W=$&&Z.includes("select.")?` / ${$.type||""}${"geo"in $.props?" / "+$.props.geo:""} / [${j.ToFixed(Q.getPointInShapeSpace($,Q.inputs.currentPagePoint),0)}]`:"",G=Z.startsWith("select.")&&!Z.includes(".idle")?` / [${j.ToFixed(Q.inputs.originPagePoint,0)}] \u2192 [${j.ToFixed(Q.inputs.currentPagePoint,0)}] = ${j.Dist(Q.inputs.originPagePoint,Q.inputs.currentPagePoint).toFixed(0)}`:"";return SX.jsx("div",{className:"tlui-debug-panel__current-state",children:`${Z}${W}${G}`})});var iQ=v(W0(),1),Ve=v(o(),1);var fX=v(W0(),1);var TV=v(W0(),1);var kU=function(){const J=h(),Q=g5(),Z=e("locale",()=>J.user.getLocale(),[J]);return TV.jsx(_J,{id:"help menu language",label:"menu.language",children:TV.jsx(O6,{id:"languages",children:DQ.map(({locale:q,label:Y})=>TV.jsx(tJ,{id:`language-${q}`,title:q,label:Y,checked:q===Z,onSelect:()=>{J.user.updateUserPreferences({locale:q}),Q("change-language",{source:"menu",locale:q})}},q))})})};var zT=function(){return fX.jsxs(fX.Fragment,{children:[fX.jsx(kU,{}),fX.jsx(Oe,{})]})},Oe=function(){const{KeyboardShortcutsDialog:J}=EJ(),{addDialog:Q}=t7();if(!J)return null;return fX.jsx(r,{id:"keyboard-shortcuts-button",label:"help-menu.keyboard-shortcuts",readonlyOk:!0,onSelect:()=>{Q({component:J})}})};var UT=Ve.memo(function J({children:Q}){const Z=e0(),q=i8(),Y=Q??iQ.jsx(zT,{});if(q<e6.MOBILE)return null;return iQ.jsx("div",{className:"tlui-help-menu",children:iQ.jsxs(J4,{id:"help menu",children:[iQ.jsx(Q4,{children:iQ.jsx(m0,{type:"help",title:Z("help-menu.title"),"data-testid":"help-menu.button",children:iQ.jsx(L6,{icon:"question-mark",small:!0})})}),iQ.jsx(Z4,{side:"top",align:"end",alignOffset:0,sideOffset:8,children:iQ.jsx(v9,{type:"menu",sourceId:"help-menu",children:Y})})]})})});var xV=v(W0(),1);var gX=v(W0(),1);var De=v(W0(),1);var bV=v(o(),1);var Re=function(){const J=h(),Q=l0(),[Z,q]=bV.useState(!1),Y=bV.useRef(!1);if(W7("toggle showback to content",()=>{const $=Y.current,W=J.getCurrentPageShapeIds();let G=!1;if(W.size)G=W.size===J.getCulledShapes().size;if($!==G)q(G),Y.current=G},[J]),!Z)return null;return De.jsx(r,{...Q["back-to-content"],onSelect:()=>{Q["back-to-content"].onSelect("helper-buttons"),q(!1)}})};var je=v(W0(),1);var _e=function(){const J=h(),Q=l0();if(!e("is pen mode",()=>J.getInstanceState().isPenMode,[J]))return null;return je.jsx(r,{...Q["exit-pen-mode"]})};var Ee=v(W0(),1);var Ce=function(){const J=h(),Q=l0();if(!e("is following user",()=>!!J.getInstanceState().followingUserId,[J]))return null;return Ee.jsx(r,{...Q["stop-following"]})};var LT=function(){return gX.jsxs(gX.Fragment,{children:[gX.jsx(_e,{}),gX.jsx(Re,{}),gX.jsx(Ce,{})]})};var FT=function({children:J}){return xV.jsx("div",{className:"tlui-helper-buttons",children:xV.jsx(v9,{type:"helper-buttons",sourceId:"helper-buttons",children:J??xV.jsx(LT,{})})})};var W1=v(W0(),1),Ae=v(p8(),1),ke=v(o(),1);var z6=v(W0(),1);var BT=function(){const J=l0(),Q=F8();return z6.jsxs(z6.Fragment,{children:[z6.jsxs(O6,{label:"shortcuts-dialog.tools",id:"tools",children:[z6.jsx(r,{...J["toggle-tool-lock"]}),z6.jsx(r,{...J["insert-media"]}),z6.jsx(r,{...Q.select}),z6.jsx(r,{...Q.draw}),z6.jsx(r,{...Q.eraser}),z6.jsx(r,{...Q.hand}),z6.jsx(r,{...Q.rectangle}),z6.jsx(r,{...Q.ellipse}),z6.jsx(r,{...Q.arrow}),z6.jsx(r,{...Q.line}),z6.jsx(r,{...Q.text}),z6.jsx(r,{...Q.frame}),z6.jsx(r,{...Q.note}),z6.jsx(r,{...Q.laser})]}),z6.jsxs(O6,{label:"shortcuts-dialog.preferences",id:"preferences",children:[z6.jsx(r,{...J["toggle-dark-mode"]}),z6.jsx(r,{...J["toggle-focus-mode"]}),z6.jsx(r,{...J["toggle-grid"]})]}),z6.jsxs(O6,{label:"shortcuts-dialog.edit",id:"edit",children:[z6.jsx(r,{...J.undo}),z6.jsx(r,{...J.redo}),z6.jsx(r,{...J.cut}),z6.jsx(r,{...J.copy}),z6.jsx(r,{...J.paste}),z6.jsx(r,{...J["select-all"]}),z6.jsx(r,{...J.delete}),z6.jsx(r,{...J.duplicate})]}),z6.jsxs(O6,{label:"shortcuts-dialog.view",id:"view",children:[z6.jsx(r,{...J["zoom-in"]}),z6.jsx(r,{...J["zoom-out"]}),z6.jsx(r,{...J["zoom-to-100"]}),z6.jsx(r,{...J["zoom-to-fit"]}),z6.jsx(r,{...J["zoom-to-selection"]})]}),z6.jsxs(O6,{label:"shortcuts-dialog.transform",id:"transform",children:[z6.jsx(r,{...J["bring-to-front"]}),z6.jsx(r,{...J["bring-forward"]}),z6.jsx(r,{...J["send-backward"]}),z6.jsx(r,{...J["send-to-back"]}),z6.jsx(r,{...J.group}),z6.jsx(r,{...J.ungroup}),z6.jsx(r,{...J["flip-horizontal"]}),z6.jsx(r,{...J["flip-vertical"]}),z6.jsx(r,{...J["align-top"]}),z6.jsx(r,{...J["align-center-vertical"]}),z6.jsx(r,{...J["align-bottom"]}),z6.jsx(r,{...J["align-left"]}),z6.jsx(r,{...J["align-center-horizontal"]}),z6.jsx(r,{...J["align-right"]})]})]})};var NT=ke.memo(function J({children:Q}){const Z=e0(),q=i8(),Y=Q??W1.jsx(BT,{});return W1.jsxs(W1.Fragment,{children:[W1.jsxs(aZ,{className:"tlui-shortcuts-dialog__header",children:[W1.jsx(oZ,{children:Z("shortcuts-dialog.title")}),W1.jsx(tZ,{})]}),W1.jsx(SQ,{className:Ae.default("tlui-shortcuts-dialog__body",{"tlui-shortcuts-dialog__body__mobile":q<=e6.MOBILE_XS,"tlui-shortcuts-dialog__body__tablet":q<=e6.TABLET}),children:W1.jsx(v9,{type:"keyboard-shortcuts",sourceId:"kbd",children:Y})}),W1.jsx("div",{className:"tlui-dialog__scrim"})]})});var nQ=v(W0(),1);var ve=v(o(),1);var J6=v(W0(),1);var MT=function(){return J6.jsxs(J6.Fragment,{children:[J6.jsx(Ie,{}),J6.jsx(be,{}),J6.jsx(we,{}),J6.jsx(xe,{}),J6.jsx(ye,{})]})},we=function(){const J=l0();return J6.jsxs(_J,{id:"export-all-as",label:"context-menu.export-all-as",size:"small",children:[J6.jsxs(O6,{id:"export-all-as-group",children:[J6.jsx(r,{...J["export-all-as-svg"]}),J6.jsx(r,{...J["export-all-as-png"]}),J6.jsx(r,{...J["export-all-as-json"]})]}),J6.jsx(O6,{id:"export-all-as-bg",children:J6.jsx(OU,{})})]})},Ie=function(){const J=h(),Q=e("isSelectToolActive",()=>J.getCurrentToolId()==="select",[J]);return J6.jsxs(_J,{id:"edit",label:"menu.edit",disabled:!Q,children:[J6.jsx(Te,{}),J6.jsx(jU,{}),J6.jsx(_U,{}),J6.jsx(Pe,{}),J6.jsx(VD0,{}),J6.jsx(O6,{id:"select-all",children:J6.jsx(EU,{})})]})},Pe=function(){return J6.jsxs(O6,{id:"misc",children:[J6.jsx(LU,{}),J6.jsx(FU,{}),J6.jsx(UU,{}),J6.jsx(zU,{}),J6.jsx(BU,{}),J6.jsx(NU,{}),J6.jsx(AU,{}),J6.jsx(CU,{})]})},VD0=function(){return J6.jsxs(O6,{id:"lock",children:[J6.jsx(MU,{}),J6.jsx(sP,{})]})},Te=function(){const J=l0(),Q=w3(),Z=k3();return J6.jsxs(O6,{id:"undo-redo",children:[J6.jsx(r,{...J.undo,disabled:!Q}),J6.jsx(r,{...J.redo,disabled:!Z})]})},be=function(){const J=l0();return J6.jsx(_J,{id:"view",label:"menu.view",children:J6.jsxs(O6,{id:"view-actions",children:[J6.jsx(r,{...J["zoom-in"]}),J6.jsx(r,{...J["zoom-out"]}),J6.jsx(VU,{}),J6.jsx(DU,{}),J6.jsx(RU,{})]})})},xe=function(){const J=l0();return J6.jsxs(O6,{id:"extras",children:[J6.jsx(r,{...J["insert-embed"]}),J6.jsx(r,{...J["insert-media"]})]})},ye=function(){return J6.jsx(O6,{id:"preferences",children:J6.jsxs(_J,{id:"preferences",label:"menu.preferences",children:[J6.jsxs(O6,{id:"preferences-actions",children:[J6.jsx(tP,{}),J6.jsx(eP,{}),J6.jsx(JT,{}),J6.jsx(QT,{}),J6.jsx(ZT,{}),J6.jsx(qT,{}),J6.jsx(XT,{}),J6.jsx(YT,{}),J6.jsx(KT,{})]}),J6.jsx(O6,{id:"language",children:J6.jsx(kU,{})})]})})};var wU=ve.memo(function J({children:Q}){const Z=y8(),[q,Y]=oJ("main menu"),$=e0(),W=Q??nQ.jsx(MT,{});return nQ.jsxs(g2,{dir:"ltr",open:q,onOpenChange:Y,modal:!1,children:[nQ.jsx(m2,{asChild:!0,dir:"ltr",children:nQ.jsx(m0,{type:"icon","data-testid":"main-menu.button",title:$("menu.title"),children:nQ.jsx(L6,{icon:"menu",small:!0})})}),nQ.jsx(uK,{container:Z,children:nQ.jsx(h2,{className:"tlui-menu",side:"bottom",align:"start",collisionPadding:4,alignOffset:0,sideOffset:6,children:nQ.jsx(v9,{type:"menu",sourceId:"main-menu",children:W})})})]})});var o1=v(W0(),1),Se=v(o(),1);var fe=Se.memo(function J(){const Q=i8(),{MainMenu:Z,QuickActions:q,ActionsMenu:Y,PageMenu:$}=EJ();if(!Z&&!$&&Q<6)return null;return o1.jsx("div",{className:"tlui-menu-zone",children:o1.jsxs("div",{className:"tlui-buttons__horizontal",children:[Z&&o1.jsx(Z,{}),$&&o1.jsx($,{}),Q<6?null:o1.jsxs(o1.Fragment,{children:[q&&o1.jsx(q,{}),Y&&o1.jsx(Y,{})]})]})})});var RT=v(W0(),1);var G1=v(o(),1);var c2=function(J){if(OT[J])return OT[J];const Z=document.createElement("canvas").getContext("2d");Z.fillStyle=J,Z.fillRect(0,0,1,1);const[q,Y,$,W]=Z.getImageData(0,0,1,1).data,G=new Float32Array([q/255,Y/255,$/255,W/255]);return OT[J]=G,G},OT={};var cK=function(J,{center:Q,radius:Z,numArcSegments:q=20,startAngle:Y=0,endAngle:$=d6,offset:W=0}){const G=($-Y)/q;let z=W;for(let U=Y;U<$;U+=G)J[z++]=Q.x,J[z++]=Q.y,J[z++]=Q.x+Math.cos(U)*Z,J[z++]=Q.y+Math.sin(U)*Z,J[z++]=Q.x+Math.cos(U+G)*Z,J[z++]=Q.y+Math.sin(U+G)*Z;return J},pK=function(J,Q,Z,q,Y,$){J[Q++]=Z,J[Q++]=q,J[Q++]=Z,J[Q++]=q+$,J[Q++]=Z+Y,J[Q++]=q,J[Q++]=Z+Y,J[Q++]=q,J[Q++]=Z,J[Q++]=q+$,J[Q++]=Z+Y,J[Q++]=q+$},ge=function(J,Q,Z){const q=yV;Z=Math.min(Z,Math.min(Q.w,Q.h)/2);const Y=V0.ExpandBy(Q,-Z);if(Y.w<=0||Y.h<=0)return cK(J,{center:Q.center,radius:Z,numArcSegments:yV*4}),yV*4*6;let $=0;return pK(J,$,Y.minX,Y.minY,Y.w,Y.h),$+=12,pK(J,$,Y.minX,Q.minY,Y.w,Z),$+=12,pK(J,$,Y.maxX,Y.minY,Z,Y.h),$+=12,pK(J,$,Y.minX,Y.maxY,Y.w,Z),$+=12,pK(J,$,Q.minX,Y.minY,Z,Y.h),$+=12,cK(J,{numArcSegments:q,offset:$,center:Y.point,radius:Z,startAngle:T6,endAngle:T6*1.5}),$+=q*6,cK(J,{numArcSegments:q,offset:$,center:j.Add(Y.point,new j(Y.w,0)),radius:Z,startAngle:T6*1.5,endAngle:d6}),$+=q*6,cK(J,{numArcSegments:q,offset:$,center:j.Add(Y.point,Y.size),radius:Z,startAngle:0,endAngle:t6}),$+=q*6,cK(J,{numArcSegments:q,offset:$,center:j.Add(Y.point,new j(0,Y.h)),radius:Z,startAngle:t6,endAngle:T6}),VT},yV=10,VT=24*yV+12+48;var me=function(J){if(!J)throw new Error("Canvas element not found");const Q=J.getContext("webgl2",{premultipliedAlpha:!1});if(!Q)throw new Error("Failed to get webgl2 context");const Z=`#version 300 es
  precision mediump float;
  
  in vec2 shapeVertexPosition;

	uniform vec4 canvasPageBounds;

	// taken (with thanks) from
	// https://webglfundamentals.org/webgl/lessons/webgl-2d-matrices.html
  void main() {
		// convert the position from pixels to 0.0 to 1.0
		vec2 zeroToOne = (shapeVertexPosition - canvasPageBounds.xy) / canvasPageBounds.zw;
	
		// convert from 0->1 to 0->2
		vec2 zeroToTwo = zeroToOne * 2.0;
	
		// convert from 0->2 to -1->+1 (clipspace)
		vec2 clipSpace = zeroToTwo - 1.0;
	
		gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);
  }`,q=Q.createShader(Q.VERTEX_SHADER);if(!q)throw new Error("Failed to create vertex shader");if(Q.shaderSource(q,Z),Q.compileShader(q),!Q.getShaderParameter(q,Q.COMPILE_STATUS))throw new Error("Failed to compile vertex shader");const Y=`#version 300 es
  precision mediump float;
  
	uniform vec4 fillColor;
  out vec4 outputColor;

  void main() {
	outputColor = fillColor;
  }`,$=Q.createShader(Q.FRAGMENT_SHADER);if(!$)throw new Error("Failed to create fragment shader");if(Q.shaderSource($,Y),Q.compileShader($),!Q.getShaderParameter($,Q.COMPILE_STATUS))throw new Error("Failed to compile fragment shader");const W=Q.createProgram();if(!W)throw new Error("Failed to create program");if(Q.attachShader(W,q),Q.attachShader(W,$),Q.linkProgram(W),!Q.getProgramParameter(W,Q.LINK_STATUS))throw new Error("Failed to link program");Q.useProgram(W);const G=Q.getAttribLocation(W,"shapeVertexPosition");if(G<0)throw new Error("Failed to get shapeVertexPosition attribute location");Q.enableVertexAttribArray(G);const z=Q.getUniformLocation(W,"canvasPageBounds"),U=Q.getUniformLocation(W,"fillColor");if(!Q.createBuffer())throw new Error("Failed to create buffer");if(!Q.createBuffer())throw new Error("Failed to create buffer");return{context:Q,selectedShapes:vV(Q,1024),unselectedShapes:vV(Q,4096),viewport:vV(Q,VT),collaborators:vV(Q,1024),prepareTriangles(M,O){Q.bindBuffer(Q.ARRAY_BUFFER,M.buffer),Q.bufferData(Q.ARRAY_BUFFER,M.vertices,Q.STATIC_DRAW,0,O),Q.enableVertexAttribArray(G),Q.vertexAttribPointer(G,2,Q.FLOAT,!1,0,0)},drawTrianglesTransparently(M){Q.enable(Q.BLEND),Q.blendFunc(Q.SRC_ALPHA,Q.ONE_MINUS_SRC_ALPHA),Q.drawArrays(Q.TRIANGLES,0,M/2),Q.disable(Q.BLEND)},drawTriangles(M){Q.drawArrays(Q.TRIANGLES,0,M/2)},setFillColor(M){Q.uniform4fv(U,M)},setCanvasPageBounds(M){Q.uniform4fv(z,M)}}},vV=function(J,Q){const Z=J.createBuffer();if(!Z)throw new Error("Failed to create buffer");return{buffer:Z,vertices:new Float32Array(Q)}},DT=function(J,Q,Z){let q=J.vertices.length;while(q<Q+Z.length)q*=2;if(q!=J.vertices.length){const Y=new Float32Array(q);Y.set(J.vertices),J.vertices=Y}J.vertices.set(Z,Q)};var{defineProperty:DD0,getOwnPropertyDescriptor:RD0}=Object,mX=(J,Q,Z,q)=>{var Y=q>1?void 0:q?RD0(Q,Z):Q;for(var $=J.length-1,W;$>=0;$--)if(W=J[$])Y=(q?W(Q,Z,Y):W(Y))||Y;if(q&&Y)DD0(Q,Z,Y);return Y};class t1{constructor(J,Q){this.editor=J,this.elem=Q,this.gl=me(Q),this.shapeGeometryCache=J.store.createComputedCache("webgl-geometry",(Z)=>{const q=J.getShapeMaskedPageBounds(Z.id);if(!q)return null;const Y=new Float32Array(12);return pK(Y,0,q.x,q.y,q.w,q.h),Y}),this.colors=this._getColors(),this.disposables.push(this._listenForCanvasResize(),M4("minimap render",this.render))}disposables=[];close=()=>this.disposables.forEach((J)=>J());gl;shapeGeometryCache;_getColors(){const J=getComputedStyle(this.editor.getContainer());return{shapeFill:c2(J.getPropertyValue("--color-text-3").trim()),selectFill:c2(J.getPropertyValue("--color-selected").trim()),viewportFill:c2(J.getPropertyValue("--color-muted-1").trim()),background:c2(J.getPropertyValue("--color-low").trim())}}colors;updateColors(){this.colors=this._getColors()}id=u6();getDpr(){return this.editor.getInstanceState().devicePixelRatio}getContentPageBounds(){const J=this.editor.getViewportPageBounds(),Q=this.editor.getCurrentPageBounds();return Q?V0.Expand(Q,J):J}getContentScreenBounds(){const J=this.getContentPageBounds(),Q=this.editor.pageToScreen(J.point),Z=this.editor.pageToScreen(new j(J.maxX,J.maxY));return new V0(Q.x,Q.y,Z.x-Q.x,Z.y-Q.y)}_getCanvasBoundingRect(){const{x:J,y:Q,width:Z,height:q}=this.elem.getBoundingClientRect();return new V0(J,Q,Z,q)}canvasBoundingClientRect=U9("canvasBoundingClientRect",new V0);getCanvasScreenBounds(){return this.canvasBoundingClientRect.get()}_listenForCanvasResize(){const J=new ResizeObserver(()=>{const Q=this._getCanvasBoundingRect();this.canvasBoundingClientRect.set(Q)});return J.observe(this.elem),()=>J.disconnect()}getCanvasSize(){const J=this.canvasBoundingClientRect.get(),Q=this.getDpr();return new j(J.width*Q,J.height*Q)}getCanvasClientPosition(){return this.canvasBoundingClientRect.get().point}originPagePoint=new j;originPageCenter=new j;isInViewport=!1;getCanvasPageBounds(){const J=this.getCanvasScreenBounds(),Q=this.getContentPageBounds(),Z=J.width/J.height;let q=Q.width,Y=q/Z;if(Y<Q.height)Y=Q.height,q=Y*Z;const $=new V0(0,0,q,Y);return $.center=Q.center,$}getZoom(){return this.getCanvasPageBounds().width/this.getCanvasScreenBounds().width}getCanvasPageBoundsArray(){const{x:J,y:Q,w:Z,h:q}=this.getCanvasPageBounds();return new Float32Array([J,Q,Z,q])}getMinimapPagePoint=(J,Q)=>{const Z=this.getCanvasPageBounds(),q=this.getCanvasScreenBounds();let Y=J-q.x,$=Q-q.y;return Y*=Z.width/q.width,$*=Z.height/q.height,Y+=Z.minX,$+=Z.minY,new j(Y,$,1)};minimapScreenPointToPagePoint=(J,Q,Z=!1,q=!1)=>{const{editor:Y}=this,$=Y.getViewportPageBounds();let{x:W,y:G}=this.getMinimapPagePoint(J,Q);if(q){const z=this.editor.getCurrentPageBounds()??new V0,U=$,F=z.minX-U.width/2,B=z.maxX+U.width/2,M=z.minY-U.height/2,O=z.maxY+U.height/2,R=Math.max(0,F+U.width-W),V=Math.max(0,-(B-U.width-W)),E=Math.max(0,M+U.height-G),_=Math.max(0,-(O-U.height-G)),A=Math.max(0,R-V),w=Math.max(0,V-R),T=Math.max(0,E-_),k=Math.max(0,_-E);if(A&&A>w)W+=A/2;else if(w)W-=w/2;if(T&&T>k)G+=T/2;else if(k)G-=k/2;W=u7(W,F,B),G=u7(G,M,O)}if(Z){const{originPagePoint:z}=this,U=Math.abs(W-z.x),F=Math.abs(G-z.y);if(U>F)G=z.y;else W=z.x}return new j(W,G)};render=()=>{const J=this.gl.context,Q=this.getCanvasSize();this.gl.setCanvasPageBounds(this.getCanvasPageBoundsArray()),this.elem.width=Q.x,this.elem.height=Q.y,J.viewport(0,0,Q.x,Q.y),J.clearColor(this.colors.background[0],this.colors.background[1],this.colors.background[2],1),J.clear(J.COLOR_BUFFER_BIT);const Z=new Set(this.editor.getSelectedShapeIds()),q=this.colors;let Y=0,$=0;const W=this.editor.getCurrentPageShapeIdsSorted();for(let G=0,z=W.length;G<z;G++){const U=W[G],F=this.shapeGeometryCache.get(U);if(!F)continue;const B=F.length;if(Z.has(U))DT(this.gl.selectedShapes,Y,F),Y+=B;else DT(this.gl.unselectedShapes,$,F),$+=B}this.drawShapes(this.gl.unselectedShapes,$,q.shapeFill),this.drawShapes(this.gl.selectedShapes,Y,q.selectFill),this.drawViewport(),this.drawCollaborators()};drawShapes(J,Q,Z){this.gl.prepareTriangles(J,Q),this.gl.setFillColor(Z),this.gl.drawTriangles(Q)}drawViewport(){const J=this.editor.getViewportPageBounds(),Q=ge(this.gl.viewport.vertices,J,4*this.getZoom());this.gl.prepareTriangles(this.gl.viewport,Q),this.gl.setFillColor(this.colors.viewportFill),this.gl.drawTrianglesTransparently(Q)}drawCollaborators(){const J=this.editor.getCollaboratorsOnCurrentPage();if(!J.length)return;const Q=20,Z=Q*6,q=Z*J.length;if(this.gl.collaborators.vertices.length<q)this.gl.collaborators.vertices=new Float32Array(q);const Y=this.gl.collaborators.vertices;let $=0;const W=this.getZoom();for(let{cursor:G}of J)cK(Y,{center:j.From(G),radius:3*W,offset:$,numArcSegments:Q}),$+=Z;this.gl.prepareTriangles(this.gl.collaborators,q),$=0;for(let{color:G}of J)this.gl.setFillColor(c2(G)),this.gl.context.drawArrays(this.gl.context.TRIANGLES,$/2,Z/2),$+=Z}}mX([z0],t1.prototype,"getDpr",1);mX([z0],t1.prototype,"getContentPageBounds",1);mX([z0],t1.prototype,"getContentScreenBounds",1);mX([z0],t1.prototype,"getCanvasSize",1);mX([z0],t1.prototype,"getCanvasClientPosition",1);mX([z0],t1.prototype,"getCanvasPageBounds",1);mX([z0],t1.prototype,"getZoom",1);mX([z0],t1.prototype,"getCanvasPageBoundsArray",1);var jT=function(){const J=h(),Q=G1.useRef(null),Z=G1.useRef(!1),q=G1.useRef();G1.useEffect(()=>{const U=new t1(J,Q.current);return q.current=U,q.current.close},[J]);const Y=G1.useCallback((U)=>{if(!J.getCurrentPageShapeIds().size)return;if(!q.current)return;const F=q.current.minimapScreenPointToPagePoint(U.clientX,U.clientY,!1,!1),B=q.current.minimapScreenPointToPagePoint(U.clientX,U.clientY,!1,!0);q.current.originPagePoint.setTo(B),q.current.originPageCenter.setTo(J.getViewportPageBounds().center),J.centerOnPoint(F,{duration:SJ})},[J]),$=G1.useCallback((U)=>{if(!q.current)return;const F=U.currentTarget;if(b1(F,U),!J.getCurrentPageShapeIds().size)return;Z.current=!0,q.current.isInViewport=!1;const B=q.current.minimapScreenPointToPagePoint(U.clientX,U.clientY,!1,!1),M=q.current.minimapScreenPointToPagePoint(U.clientX,U.clientY,!1,!0),O=J.getViewportPageBounds();if(q.current.isInViewport=O.containsPoint(M),q.current.isInViewport)q.current.originPagePoint.setTo(M),q.current.originPageCenter.setTo(O.center);else{const V=j.Sub(O.center,O.point),E=j.Add(B,V);q.current.originPagePoint.setTo(E),q.current.originPageCenter.setTo(B),J.centerOnPoint(B,{duration:SJ})}function R(V){if(F)x1(F,V);Z.current=!1,document.body.removeEventListener("pointerup",R)}document.body.addEventListener("pointerup",R)},[J]),W=G1.useCallback((U)=>{if(!q.current)return;const F=q.current.minimapScreenPointToPagePoint(U.clientX,U.clientY,U.shiftKey,!0);if(Z.current){if(q.current.isInViewport){const R=q.current.originPagePoint.clone().sub(q.current.originPageCenter);J.centerOnPoint(j.Sub(F,R));return}J.centerOnPoint(F)}const B=q.current.getMinimapPagePoint(U.clientX,U.clientY),M=J.pageToScreen(B),O={type:"pointer",target:"canvas",name:"pointer_move",...Q5(U),point:M,isPen:J.getInstanceState().isPenMode};J.dispatch(O)},[J]),G=G1.useCallback((U)=>{const F=oz(U);J.dispatch({type:"wheel",name:"wheel",delta:F,point:new j(U.clientX,U.clientY),shiftKey:U.shiftKey,altKey:U.altKey,ctrlKey:U.metaKey||U.ctrlKey})},[J]),z=g1();return G1.useEffect(()=>{setTimeout(()=>{q.current?.updateColors(),q.current?.render()})},[z]),RT.jsx("div",{className:"tlui-minimap",children:RT.jsx("canvas",{role:"img","aria-label":"minimap",ref:Q,className:"tlui-minimap__canvas",onDoubleClick:Y,onPointerMove:W,onPointerDown:$,onWheel:G})})};var X5=v(W0(),1),fV=v(o(),1);var SV=v(o(),1),_T=function(J,Q){const[Z,q]=SV.default.useState(Q);SV.default.useLayoutEffect(()=>{const $=EY(J);if($)try{q(JSON.parse($))}catch(W){console.error(`Could not restore value ${J} from local storage.`)}},[J]);const Y=SV.default.useCallback(($)=>{q((W)=>{const G=typeof $==="function"?$(W):$;return CY(J,JSON.stringify(G)),G})},[J]);return[Z,Y]};var he=fV.memo(function J(){const Q=l0(),Z=e0(),q=i8(),[Y,$]=_T("minimap",!0),W=fV.useCallback(()=>{$((U)=>!U)},[$]),{ZoomMenu:G,Minimap:z}=EJ();if(q<e6.MOBILE)return null;return X5.jsxs("div",{className:"tlui-navigation-panel",children:[X5.jsx("div",{className:"tlui-buttons__horizontal",children:G&&q<e6.TABLET?X5.jsx(G,{}):Y?X5.jsxs(X5.Fragment,{children:[G&&X5.jsx(G,{}),z&&X5.jsx(m0,{type:"icon","data-testid":"minimap.toggle-button",title:Z("navigation-zone.toggle-minimap"),className:"tlui-navigation-panel__toggle",onClick:W,children:X5.jsx(L6,{icon:Y?"chevrons-ne":"chevrons-sw"})})]}):X5.jsxs(X5.Fragment,{children:[X5.jsx(m0,{type:"icon","data-testid":"minimap.zoom-out",title:`${Z(fQ(Q["zoom-out"].label))} ${HU(Q["zoom-out"].kbd)}`,onClick:()=>Q["zoom-out"].onSelect("navigation-zone"),children:X5.jsx(L6,{icon:"minus"})}),G&&X5.jsx(G,{}),X5.jsx(m0,{type:"icon","data-testid":"minimap.zoom-in",title:`${Z(fQ(Q["zoom-in"].label))} ${HU(Q["zoom-in"].kbd)}`,onClick:()=>Q["zoom-in"].onSelect("navigation-zone"),children:X5.jsx(L6,{icon:"plus"})}),z&&X5.jsx(m0,{type:"icon","data-testid":"minimap.toggle-button",title:Z("navigation-zone.toggle-minimap"),className:"tlui-navigation-panel__toggle",onClick:W,children:X5.jsx(L6,{icon:Y?"chevrons-ne":"chevrons-sw"})})]})}),z&&q>=e6.TABLET&&!Y&&X5.jsx(z,{})]})});var D8=v(W0(),1);var O5=v(o(),1);var ue=v(W0(),1);var IU=v(o(),1);var ET=function J({name:Q,id:Z,isCurrentPage:q}){const Y=h(),$=IU.useRef(null),W=IU.useCallback((z)=>{Y.renamePage(Z,z?z:"New Page",{ephemeral:!0})},[Y,Z]),G=IU.useCallback((z)=>{Y.mark("rename page"),Y.renamePage(Z,z||"New Page",{ephemeral:!1})},[Y,Z]);return ue.jsx(kK,{className:"tlui-page-menu__item__input",ref:(z)=>$.current=z,defaultValue:Q,onValueChange:W,onComplete:G,onCancel:G,shouldManuallyMaintainScrollPositionWhenFocused:!0,autofocus:q,autoselect:!0})};var R7=v(W0(),1);var TU=v(o(),1);var PU=(J,Q,Z,q)=>{let Y;const $=J.getPages(),W=Z>q?$[q-1]:$[q],G=Z>q?$[q]:$[q+1];if(W&&!G)Y=g7(W.index);else if(!W&&G)Y=FE($[0].index);else Y=CZ(W.index,G.index);if(Y!==$[Z].index)J.mark("moving page"),J.updatePage({id:Q,index:Y})};var gV=D9(function J({index:Q,listSize:Z,item:q,onRename:Y}){const $=h(),W=e0(),G=$.getPages(),z=TU.useCallback(()=>{$.mark("creating page");const M=a5.createId();$.duplicatePage(q.id,M)},[$,q]),U=TU.useCallback(()=>{PU($,q.id,Q,Q-1)},[$,q,Q]),F=TU.useCallback(()=>{PU($,q.id,Q,Q+1)},[$,q,Q]),B=TU.useCallback(()=>{$.mark("deleting page"),$.deletePage(q.id)},[$,q]);return R7.jsxs(J4,{id:`page item submenu ${Q}`,children:[R7.jsx(Q4,{children:R7.jsx(m0,{type:"icon",title:W("page-menu.submenu.title"),children:R7.jsx(L6,{icon:"dots-vertical"})})}),R7.jsx(Z4,{alignOffset:0,side:"right",sideOffset:-4,children:R7.jsxs(v9,{type:"menu",sourceId:"page-menu",children:[R7.jsxs(O6,{id:"modify",children:[Y&&R7.jsx(r,{id:"rename",label:"page-menu.submenu.rename",onSelect:Y}),R7.jsx(r,{id:"duplicate",label:"page-menu.submenu.duplicate-page",onSelect:z,disabled:G.length>=GX}),Q>0&&R7.jsx(r,{id:"move-up",onSelect:U,label:"page-menu.submenu.move-up"}),Q<Z-1&&R7.jsx(r,{id:"move-down",label:"page-menu.submenu.move-down",onSelect:F})]}),Z>1&&R7.jsx(O6,{id:"delete",children:R7.jsx(r,{id:"delete",onSelect:B,label:"page-menu.submenu.delete"})})]})})]})});var CT=O5.memo(function J(){const Q=h(),Z=e0(),q=i8(),Y=O5.useCallback(()=>E(!1),[]),[$,W]=oJ("page-menu",Y),z=O5.useRef(null),U=e("pages",()=>Q.getPages(),[Q]),F=e("currentPage",()=>Q.getCurrentPage(),[Q]),B=e("currentPageId",()=>Q.getCurrentPageId(),[Q]),M=S5(),O=e("maxPageCountReached",()=>Q.getPages().length>=GX,[Q]),R=e("isCoarsePointer",()=>Q.getInstanceState().isCoarsePointer,[Q]),[V,E]=O5.useState(!1),_=O5.useCallback(()=>{if(M)return;E((c)=>!c)},[M]),A=O5.useRef({isPointing:!1,status:"idle",pointing:null,startY:0,startIndex:0,dragIndex:0}),[w,T]=O5.useState(Object.fromEntries(U.map((c,t)=>[c.id,{y:t*36,offsetY:0,isSelected:!1}])));O5.useLayoutEffect(()=>{T(Object.fromEntries(U.map((c,t)=>[c.id,{y:t*36,offsetY:0,isSelected:!1}])))},[36,U]),O5.useEffect(()=>{if(!$)return;requestAnimationFrame(()=>{const c=document.querySelector(`[data-testid="page-menu-item-${B}"]`);if(c){const t=z.current;if(!t)return;const X0=c.offsetTop,J0=t.scrollTop;if(X0<J0)t.scrollTo({top:X0});const Q0=X0+36,a=t.scrollTop+t.offsetHeight;if(Q0>a)t.scrollTo({top:Q0-t.offsetHeight})}})},[36,B,$]);const k=O5.useCallback((c)=>{const{clientY:t,currentTarget:X0}=c,{dataset:{id:J0,index:Q0}}=X0;if(!J0||!Q0)return;const a=A.current;b1(c.currentTarget,c),a.status="pointing",a.pointing={id:J0,index:+Q0};const T0=w[J0].y;a.startY=t,a.startIndex=Math.max(0,Math.min(Math.round(T0/36),U.length-1))},[36,U.length,w]),P=O5.useCallback((c)=>{const t=A.current;if(t.status==="pointing"){const{clientY:X0}=c,J0=X0-t.startY;if(Math.abs(J0)>5)t.status="dragging"}if(t.status==="dragging"){const{clientY:X0}=c,J0=X0-t.startY,Q0=w[t.pointing.id],{startIndex:a,pointing:_0}=t,T0=Q0.y+J0,r0=Math.max(0,Math.min(Math.round(T0/36),U.length-1)),C0={...w};if(C0[_0.id]={y:Q0.y,offsetY:J0,isSelected:!0},r0!==t.dragIndex){t.dragIndex=r0;for(let k0=0;k0<U.length;k0++){const b0=U[k0];if(b0.id===t.pointing.id)continue;let{y:K6}=C0[b0.id];if(r0===a)K6=k0*36;else if(r0<a)if(r0<=k0&&k0<a)K6=(k0+1)*36;else K6=k0*36;else if(r0>a)if(r0>=k0&&k0>a)K6=(k0-1)*36;else K6=k0*36;if(K6!==C0[b0.id].y)C0[b0.id]={y:K6,offsetY:0,isSelected:!0}}}T(C0)}},[36,U,w]),y=O5.useCallback((c)=>{const t=A.current;if(t.status==="dragging"){const{id:X0,index:J0}=t.pointing;PU(Q,X0,J0,t.dragIndex)}x1(c.currentTarget,c),t.status="idle"},[Q]),p=O5.useCallback((c)=>{const t=A.current;if(c.key==="Escape"){if(t.status==="dragging")T(Object.fromEntries(U.map((X0,J0)=>[X0.id,{y:J0*36,offsetY:0,isSelected:!1}])));t.status="idle"}},[36,U]),s=O5.useCallback(()=>{if(M)return;Q.batch(()=>{Q.mark("creating page");const c=a5.createId();Q.createPage({name:Z("page-menu.new-page-initial-name"),id:c}),Q.setCurrentPage(c),E(!0)})},[Q,Z,M]);return D8.jsxs(SK,{id:"pages",onOpenChange:W,open:$,children:[D8.jsx(fK,{"data-testid":"main.page-menu",children:D8.jsxs(m0,{type:"menu",title:F.name,"data-testid":"page-menu.button",className:"tlui-page-menu__trigger",children:[D8.jsx("div",{className:"tlui-page-menu__name",children:F.name}),D8.jsx(L6,{icon:"chevron-down",small:!0})]})}),D8.jsx(gK,{side:"bottom",align:"start",sideOffset:6,children:D8.jsxs("div",{className:"tlui-page-menu__wrapper",children:[D8.jsxs("div",{className:"tlui-page-menu__header",children:[D8.jsx("div",{className:"tlui-page-menu__header__title",children:Z("page-menu.title")}),!M&&D8.jsxs("div",{className:"tlui-buttons__horizontal",children:[D8.jsx(m0,{type:"icon","data-testid":"page-menu.edit",title:Z(V?"page-menu.edit-done":"page-menu.edit-start"),onClick:_,children:D8.jsx(L6,{icon:V?"check":"edit"})}),D8.jsx(m0,{type:"icon","data-testid":"page-menu.create",title:Z(O?"page-menu.max-page-count-reached":"page-menu.create-new-page"),disabled:O,onClick:s,children:D8.jsx(L6,{icon:"plus"})})]})]}),D8.jsx("div",{"data-testid":"page-menu.list",className:"tlui-page-menu__list tlui-menu__group",style:{height:36*U.length+4},ref:z,children:U.map((c,t)=>{const X0=w[c.id]??{position:t*40,offsetY:0};return V?D8.jsxs("div",{"data-testid":"page-menu.item",className:"tlui-page_menu__item__sortable",style:{zIndex:c.id===F.id?888:t,transform:`translate(0px, ${X0.y+X0.offsetY}px)`},children:[D8.jsx(m0,{type:"icon",tabIndex:-1,className:"tlui-page_menu__item__sortable__handle",onPointerDown:k,onPointerUp:y,onPointerMove:P,onKeyDown:p,"data-id":c.id,"data-index":t,children:D8.jsx(L6,{icon:"drag-handle-dots"})}),q<e6.TABLET_SM&&R?D8.jsxs(m0,{type:"normal",className:"tlui-page-menu__item__button",onClick:()=>{const J0=window.prompt("Rename page",c.name);if(J0&&J0!==c.name)Q.renamePage(c.id,J0)},onDoubleClick:_,children:[D8.jsx(u2,{checked:c.id===F.id}),D8.jsx(v8,{children:c.name})]}):D8.jsx("div",{className:"tlui-page_menu__item__sortable__title",style:{height:36},children:D8.jsx(ET,{id:c.id,name:c.name,isCurrentPage:c.id===F.id})}),!M&&D8.jsx("div",{className:"tlui-page_menu__item__submenu","data-isediting":V,children:D8.jsx(gV,{index:t,item:c,listSize:U.length})})]},c.id+"_editing"):D8.jsxs("div",{"data-testid":"page-menu.item",className:"tlui-page-menu__item",children:[D8.jsxs(m0,{type:"normal",className:"tlui-page-menu__item__button",onClick:()=>Q.setCurrentPage(c.id),onDoubleClick:_,title:Z("page-menu.go-to-page"),children:[D8.jsx(u2,{checked:c.id===F.id}),D8.jsx(v8,{children:c.name})]}),!M&&D8.jsx("div",{className:"tlui-page_menu__item__submenu",children:D8.jsx(gV,{index:t,item:c,listSize:U.length,onRename:()=>{if(Q.environment.isIos){const J0=window.prompt("Rename page",c.name);if(J0&&J0!==c.name)Q.renamePage(c.id,J0)}else Q.batch(()=>{E(!0),Q.setCurrentPage(c.id)})}})})]},c.id)})})]})})]})});var kT=v(W0(),1),ce=v(o(),1);var Yq=v(W0(),1);var AT=function(){const J=l0(),Q=h(),Z=w3(),q=k3(),Y=XJ(1),$=S5(),W=e("should display quick actions",()=>Q.isInAny("select","hand","zoom"),[Q]);if($&&!W)return;return Yq.jsxs(Yq.Fragment,{children:[Yq.jsx(r,{...J.undo,disabled:!Z}),Yq.jsx(r,{...J.redo,disabled:!q}),Yq.jsx(r,{...J.delete,disabled:!Y}),Yq.jsx(r,{...J.duplicate,disabled:!Y})]})};var wT=ce.memo(function J({children:Q}){return kT.jsx(v9,{type:"small-icons",sourceId:"quick-actions",children:Q??kT.jsx(AT,{})})});var ST=v(W0(),1);var z00=v(p8(),1),dV=v(o(),1);var bU=function(J=jD0){const Q=h();return e("getRelevantStyles",()=>{const Z=new iY(Q.getSharedStyles()),q=!!Q.root.getCurrent()?.shapeType,Y=Q.isIn("select")&&Q.getSelectedShapeIds().length>0;if(Z.size===0&&Q.isIn("select")&&Q.getSelectedShapeIds().length===0)for(let $ of J)Z.applyValue($,Q.getStyleForNextShape($));if(q||Y||Z.size>0)return Z;return null},[Q])},jD0=Object.freeze([F9,h7,o4,L5]);var w8=v(W0(),1);var yT=v(o(),1);var H1={color:[{value:"black",icon:"color"},{value:"grey",icon:"color"},{value:"light-violet",icon:"color"},{value:"violet",icon:"color"},{value:"blue",icon:"color"},{value:"light-blue",icon:"color"},{value:"yellow",icon:"color"},{value:"orange",icon:"color"},{value:"green",icon:"color"},{value:"light-green",icon:"color"},{value:"light-red",icon:"color"},{value:"red",icon:"color"}],fill:[{value:"none",icon:"fill-none"},{value:"semi",icon:"fill-semi"},{value:"solid",icon:"fill-solid"},{value:"pattern",icon:"fill-pattern"}],dash:[{value:"draw",icon:"dash-draw"},{value:"dashed",icon:"dash-dashed"},{value:"dotted",icon:"dash-dotted"},{value:"solid",icon:"dash-solid"}],size:[{value:"s",icon:"size-small"},{value:"m",icon:"size-medium"},{value:"l",icon:"size-large"},{value:"xl",icon:"size-extra-large"}],font:[{value:"draw",icon:"font-draw"},{value:"sans",icon:"font-sans"},{value:"serif",icon:"font-serif"},{value:"mono",icon:"font-mono"}],horizontalAlign:[{value:"start",icon:"text-align-left"},{value:"middle",icon:"text-align-center"},{value:"end",icon:"text-align-right"}],verticalAlign:[{value:"start",icon:"vertical-align-start"},{value:"middle",icon:"vertical-align-center"},{value:"end",icon:"vertical-align-end"}],geo:[{value:"rectangle",icon:"geo-rectangle"},{value:"ellipse",icon:"geo-ellipse"},{value:"cloud",icon:"geo-cloud"},{value:"triangle",icon:"geo-triangle"},{value:"diamond",icon:"geo-diamond"},{value:"pentagon",icon:"geo-pentagon"},{value:"hexagon",icon:"geo-hexagon"},{value:"octagon",icon:"geo-octagon"},{value:"star",icon:"geo-star"},{value:"rhombus",icon:"geo-rhombus"},{value:"rhombus-2",icon:"geo-rhombus-2"},{value:"oval",icon:"geo-oval"},{value:"trapezoid",icon:"geo-trapezoid"},{value:"arrow-right",icon:"geo-arrow-right"},{value:"arrow-left",icon:"geo-arrow-left"},{value:"arrow-up",icon:"geo-arrow-up"},{value:"arrow-down",icon:"geo-arrow-down"},{value:"x-box",icon:"geo-x-box"},{value:"check-box",icon:"geo-check-box"}],arrowheadStart:[{value:"none",icon:"arrowhead-none"},{value:"arrow",icon:"arrowhead-arrow"},{value:"triangle",icon:"arrowhead-triangle"},{value:"square",icon:"arrowhead-square"},{value:"dot",icon:"arrowhead-dot"},{value:"diamond",icon:"arrowhead-diamond"},{value:"inverted",icon:"arrowhead-triangle-inverted"},{value:"bar",icon:"arrowhead-bar"}],arrowheadEnd:[{value:"none",icon:"arrowhead-none"},{value:"arrow",icon:"arrowhead-arrow"},{value:"triangle",icon:"arrowhead-triangle"},{value:"square",icon:"arrowhead-square"},{value:"dot",icon:"arrowhead-dot"},{value:"diamond",icon:"arrowhead-diamond"},{value:"inverted",icon:"arrowhead-triangle-inverted"},{value:"bar",icon:"arrowhead-bar"}],spline:[{value:"line",icon:"spline-line"},{value:"cubic",icon:"spline-cubic"}]};var mV=v(W0(),1);var IT=v(p8(),1),p2=v(o(),1);var _D0=function(J){const{uiType:Q,items:Z,title:q,style:Y,value:$,onValueChange:W,theme:G}=J,z=h(),U=e0(),F=p2.useRef(!1),{handleButtonClick:B,handleButtonPointerDown:M,handleButtonPointerEnter:O,handleButtonPointerUp:R}=p2.useMemo(()=>{const V=()=>{F.current=!1,window.removeEventListener("pointerup",V)};return{handleButtonClick:(T)=>{const{id:k}=T.currentTarget.dataset;if($.type==="shared"&&$.value===k)return;z.mark("point picker item"),W(Y,k,!1)},handleButtonPointerDown:(T)=>{const{id:k}=T.currentTarget.dataset;z.mark("point picker item"),W(Y,k,!0),F.current=!0,window.addEventListener("pointerup",V)},handleButtonPointerEnter:(T)=>{if(!F.current)return;const{id:k}=T.currentTarget.dataset;W(Y,k,!0)},handleButtonPointerUp:(T)=>{const{id:k}=T.currentTarget.dataset;if($.type==="shared"&&$.value===k)return;W(Y,k,!1)}}},[$,z,W,Y]);return mV.jsx("div",{"data-testid":`style.${Q}`,className:IT.default("tlui-buttons__grid"),children:Z.map((V)=>mV.jsx(m0,{type:"icon","data-id":V.value,"data-testid":`style.${Q}.${V.value}`,"aria-label":V.value,"data-state":$.type==="shared"&&$.value===V.value?"hinted":void 0,title:q+" \u2014 "+U(`${Q}-style.${V.value}`),className:IT.default("tlui-button-grid__button"),style:Y===F9?{color:G[V.value].solid}:void 0,onPointerEnter:O,onPointerDown:M,onPointerUp:R,onClick:B,children:mV.jsx(L6,{icon:V.icon})},V.value))})},hX=p2.memo(_D0);var dK=v(W0(),1);var w6=v(o(),1);var PT=function(J,[Q,Z]){return Math.min(Z,Math.max(Q,J))};var hV=v(o(),1),pe=function(J){const Q=hV.useRef({value:J,previous:J});return hV.useMemo(()=>{if(Q.current.value!==J)Q.current.previous=Q.current.value,Q.current.value=J;return Q.current.previous},[J])};var SD0=function(J=[],Q,Z){const q=[...J];return q[Z]=Q,q.sort((Y,$)=>Y-$)},ee=function(J,Q,Z){const $=100/(Z-Q)*(J-Q);return PT($,[0,100])},fD0=function(J,Q){if(Q>2)return`Value ${J+1} of ${Q}`;else if(Q===2)return["Minimum","Maximum"][J];else return},gD0=function(J,Q){if(J.length===1)return 0;const Z=J.map((Y)=>Math.abs(Y-Q)),q=Math.min(...Z);return Z.indexOf(q)},mD0=function(J,Q,Z){const q=J/2,$=bT([0,50],[0,q]);return(q-$(Q)*Z)*Z},hD0=function(J){return J.slice(0,-1).map((Q,Z)=>J[Z+1]-Q)},uD0=function(J,Q){if(Q>0){const Z=hD0(J);return Math.min(...Z)>=Q}return!0},bT=function(J,Q){return(Z)=>{if(J[0]===J[1]||Q[0]===Q[1])return Q[0];const q=(Q[1]-Q[0])/(J[1]-J[0]);return Q[0]+q*(Z-J[0])}},cD0=function(J){return(String(J).split(".")[1]||"").length},pD0=function(J,Q){const Z=Math.pow(10,Q);return Math.round(J*Z)/Z},ie=["PageUp","PageDown"],ne=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],se={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},xU="Slider",[TT,ED0,CD0]=wX(xU),[re,cY6]=n9(xU,[CD0]),[AD0,uV]=re(xU),kD0=w6.forwardRef((J,Q)=>{const{name:Z,min:q=0,max:Y=100,step:$=1,orientation:W="horizontal",disabled:G=!1,minStepsBetweenThumbs:z=0,defaultValue:U=[q],value:F,onValueChange:B=()=>{},onValueCommit:M=()=>{},inverted:O=!1,...R}=J,[V,E]=w6.useState(null),_=l6(Q,(Q0)=>E(Q0)),A=w6.useRef(new Set),w=w6.useRef(0),T=W==="horizontal",k=V?Boolean(V.closest("form")):!0,P=T?wD0:ID0,[y=[],p]=O7({prop:F,defaultProp:U,onChange:(Q0)=>{var a;(a=[...A.current][w.current])===null||a===void 0||a.focus(),B(Q0)}}),s=w6.useRef(y);function c(Q0){const a=gD0(y,Q0);J0(Q0,a)}function t(Q0){J0(Q0,w.current)}function X0(){const Q0=s.current[w.current];if(y[w.current]!==Q0)M(y)}function J0(Q0,a,{commit:_0}={commit:!1}){const T0=cD0($),r0=pD0(Math.round((Q0-q)/$)*$+q,T0),C0=PT(r0,[q,Y]);p((k0=[])=>{const b0=SD0(k0,C0,a);if(uD0(b0,z*$)){w.current=b0.indexOf(C0);const K6=String(b0)!==String(k0);if(K6&&_0)M(b0);return K6?b0:k0}else return k0})}return w6.createElement(AD0,{scope:J.__scopeSlider,disabled:G,min:q,max:Y,valueIndexToChangeRef:w,thumbs:A.current,values:y,orientation:W},w6.createElement(TT.Provider,{scope:J.__scopeSlider},w6.createElement(TT.Slot,{scope:J.__scopeSlider},w6.createElement(P,D0({"aria-disabled":G,"data-disabled":G?"":void 0},R,{ref:_,onPointerDown:s0(R.onPointerDown,()=>{if(!G)s.current=y}),min:q,max:Y,inverted:O,onSlideStart:G?void 0:c,onSlideMove:G?void 0:t,onSlideEnd:G?void 0:X0,onHomeKeyDown:()=>!G&&J0(q,0,{commit:!0}),onEndKeyDown:()=>!G&&J0(Y,y.length-1,{commit:!0}),onStepKeyDown:({event:Q0,direction:a})=>{if(!G){const r0=ie.includes(Q0.key)||Q0.shiftKey&&ne.includes(Q0.key)?10:1,C0=w.current,k0=y[C0],b0=$*r0*a;J0(k0+b0,C0,{commit:!0})}}})))),k&&y.map((Q0,a)=>w6.createElement(vD0,{key:a,name:Z?Z+(y.length>1?"[]":""):void 0,value:Q0})))});var[ae,oe]=re(xU,{startEdge:"left",endEdge:"right",size:"width",direction:1}),wD0=w6.forwardRef((J,Q)=>{const{min:Z,max:q,dir:Y,inverted:$,onSlideStart:W,onSlideMove:G,onSlideEnd:z,onStepKeyDown:U,...F}=J,[B,M]=w6.useState(null),O=l6(Q,(w)=>M(w)),R=w6.useRef(),V=S2(Y),E=V==="ltr",_=E&&!$||!E&&$;function A(w){const T=R.current||B.getBoundingClientRect(),k=[0,T.width],y=bT(k,_?[Z,q]:[q,Z]);return R.current=T,y(w-T.left)}return w6.createElement(ae,{scope:J.__scopeSlider,startEdge:_?"left":"right",endEdge:_?"right":"left",direction:_?1:-1,size:"width"},w6.createElement(te,D0({dir:V,"data-orientation":"horizontal"},F,{ref:O,style:{...F.style,["--radix-slider-thumb-transform"]:"translateX(-50%)"},onSlideStart:(w)=>{const T=A(w.clientX);W===null||W===void 0||W(T)},onSlideMove:(w)=>{const T=A(w.clientX);G===null||G===void 0||G(T)},onSlideEnd:()=>{R.current=void 0,z===null||z===void 0||z()},onStepKeyDown:(w)=>{const k=se[_?"from-left":"from-right"].includes(w.key);U===null||U===void 0||U({event:w,direction:k?-1:1})}})))}),ID0=w6.forwardRef((J,Q)=>{const{min:Z,max:q,inverted:Y,onSlideStart:$,onSlideMove:W,onSlideEnd:G,onStepKeyDown:z,...U}=J,F=w6.useRef(null),B=l6(Q,F),M=w6.useRef(),O=!Y;function R(V){const E=M.current||F.current.getBoundingClientRect(),_=[0,E.height],w=bT(_,O?[q,Z]:[Z,q]);return M.current=E,w(V-E.top)}return w6.createElement(ae,{scope:J.__scopeSlider,startEdge:O?"bottom":"top",endEdge:O?"top":"bottom",size:"height",direction:O?1:-1},w6.createElement(te,D0({"data-orientation":"vertical"},U,{ref:B,style:{...U.style,["--radix-slider-thumb-transform"]:"translateY(50%)"},onSlideStart:(V)=>{const E=R(V.clientY);$===null||$===void 0||$(E)},onSlideMove:(V)=>{const E=R(V.clientY);W===null||W===void 0||W(E)},onSlideEnd:()=>{M.current=void 0,G===null||G===void 0||G()},onStepKeyDown:(V)=>{const _=se[O?"from-bottom":"from-top"].includes(V.key);z===null||z===void 0||z({event:V,direction:_?-1:1})}})))}),te=w6.forwardRef((J,Q)=>{const{__scopeSlider:Z,onSlideStart:q,onSlideMove:Y,onSlideEnd:$,onHomeKeyDown:W,onEndKeyDown:G,onStepKeyDown:z,...U}=J,F=uV(xU,Z);return w6.createElement(m6.span,D0({},U,{ref:Q,onKeyDown:s0(J.onKeyDown,(B)=>{if(B.key==="Home")W(B),B.preventDefault();else if(B.key==="End")G(B),B.preventDefault();else if(ie.concat(ne).includes(B.key))z(B),B.preventDefault()}),onPointerDown:s0(J.onPointerDown,(B)=>{const M=B.target;if(M.setPointerCapture(B.pointerId),B.preventDefault(),F.thumbs.has(M))M.focus();else q(B)}),onPointerMove:s0(J.onPointerMove,(B)=>{if(B.target.hasPointerCapture(B.pointerId))Y(B)}),onPointerUp:s0(J.onPointerUp,(B)=>{const M=B.target;if(M.hasPointerCapture(B.pointerId))M.releasePointerCapture(B.pointerId),$(B)})}))}),PD0="SliderTrack",TD0=w6.forwardRef((J,Q)=>{const{__scopeSlider:Z,...q}=J,Y=uV(PD0,Z);return w6.createElement(m6.span,D0({"data-disabled":Y.disabled?"":void 0,"data-orientation":Y.orientation},q,{ref:Q}))});var de="SliderRange",bD0=w6.forwardRef((J,Q)=>{const{__scopeSlider:Z,...q}=J,Y=uV(de,Z),$=oe(de,Z),W=w6.useRef(null),G=l6(Q,W),z=Y.values.length,U=Y.values.map((M)=>ee(M,Y.min,Y.max)),F=z>1?Math.min(...U):0,B=100-Math.max(...U);return w6.createElement(m6.span,D0({"data-orientation":Y.orientation,"data-disabled":Y.disabled?"":void 0},q,{ref:G,style:{...J.style,[$.startEdge]:F+"%",[$.endEdge]:B+"%"}}))});var le="SliderThumb",xD0=w6.forwardRef((J,Q)=>{const Z=ED0(J.__scopeSlider),[q,Y]=w6.useState(null),$=l6(Q,(G)=>Y(G)),W=w6.useMemo(()=>q?Z().findIndex((G)=>G.ref.current===q):-1,[Z,q]);return w6.createElement(yD0,D0({},J,{ref:$,index:W}))}),yD0=w6.forwardRef((J,Q)=>{const{__scopeSlider:Z,index:q,...Y}=J,$=uV(le,Z),W=oe(le,Z),[G,z]=w6.useState(null),U=l6(Q,(E)=>z(E)),F=b2(G),B=$.values[q],M=B===void 0?0:ee(B,$.min,$.max),O=fD0(q,$.values.length),R=F===null||F===void 0?void 0:F[W.size],V=R?mD0(R,M,W.direction):0;return w6.useEffect(()=>{if(G)return $.thumbs.add(G),()=>{$.thumbs.delete(G)}},[G,$.thumbs]),w6.createElement("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[W.startEdge]:`calc(${M}% + ${V}px)`}},w6.createElement(TT.ItemSlot,{scope:J.__scopeSlider},w6.createElement(m6.span,D0({role:"slider","aria-label":J["aria-label"]||O,"aria-valuemin":$.min,"aria-valuenow":B,"aria-valuemax":$.max,"aria-orientation":$.orientation,"data-orientation":$.orientation,"data-disabled":$.disabled?"":void 0,tabIndex:$.disabled?void 0:0},Y,{ref:U,style:B===void 0?{display:"none"}:J.style,onFocus:s0(J.onFocus,()=>{$.valueIndexToChangeRef.current=q})}))))});var vD0=(J)=>{const{value:Q,...Z}=J,q=w6.useRef(null),Y=pe(Q);return w6.useEffect(()=>{const $=q.current,W=window.HTMLInputElement.prototype,z=Object.getOwnPropertyDescriptor(W,"value").set;if(Y!==Q&&z){const U=new Event("input",{bubbles:!0});z.call($,Q),$.dispatchEvent(U)}},[Y,Q]),w6.createElement("input",D0({style:{display:"none"}},Z,{ref:q,defaultValue:Q}))},J00=kD0,Q00=TD0,Z00=bD0,q00=xD0;var d2=v(o(),1);var xT=d2.memo(function J(Q){const{title:Z,steps:q,value:Y,label:$,onValueChange:W}=Q,G=h(),z=e0(),U=d2.useCallback((M)=>{W(M[0],!0)},[W]),F=d2.useCallback(()=>{G.mark("click slider")},[G]),B=d2.useCallback(()=>{if(!Y)return;W(Y,!1)},[Y,W]);return dK.jsx("div",{className:"tlui-slider__container",children:dK.jsxs(J00,{"data-testid":Q["data-testid"],className:"tlui-slider","area-label":"Opacity",dir:"ltr",min:0,max:q,step:1,value:Y?[Y]:void 0,onPointerDown:F,onValueChange:U,onPointerUp:B,title:Z+" \u2014 "+z($),children:[dK.jsx(Q00,{className:"tlui-slider__track",dir:"ltr",children:Y!==null&&dK.jsx(Z00,{className:"tlui-slider__range",dir:"ltr"})}),Y!==null&&dK.jsx(q00,{className:"tlui-slider__thumb",dir:"ltr"})]})})});var u9=v(W0(),1),yU=v(o(),1);var dD0=function({label:J,uiTypeA:Q,uiTypeB:Z,labelA:q,labelB:Y,itemsA:$,itemsB:W,styleA:G,styleB:z,valueA:U,valueB:F,onValueChange:B}){const M=e0(),O=yU.useMemo(()=>$.find((V)=>U.type==="shared"&&U.value===V.value)?.icon??"mixed",[$,U]),R=yU.useMemo(()=>W.find((V)=>F.type==="shared"&&F.value===V.value)?.icon??"mixed",[W,F]);if(U===void 0&&F===void 0)return null;return u9.jsxs("div",{className:"tlui-style-panel__double-select-picker",children:[u9.jsx("div",{title:M(J),className:"tlui-style-panel__double-select-picker-label",children:M(J)}),u9.jsxs("div",{className:"tlui-buttons__horizontal",children:[u9.jsxs(J4,{id:`style panel ${Q} A`,children:[u9.jsx(Q4,{children:u9.jsx(m0,{type:"icon","data-testid":`style.${Q}`,title:M(q)+" \u2014 "+(U===null||U.type==="mixed"?M("style-panel.mixed"):M(`${Q}-style.${U.value}`)),children:u9.jsx(L6,{icon:O,small:!0,invertIcon:!0})})}),u9.jsx(Z4,{side:"bottom",align:"end",sideOffset:0,alignOffset:-2,children:u9.jsx("div",{className:"tlui-buttons__grid",children:$.map((V,E)=>{return u9.jsx(Qq,{"data-testid":`style.${Q}.${V.value}`,children:u9.jsx(m0,{type:"icon",onClick:()=>B(G,V.value,!1),title:`${M(q)} \u2014 ${M(`${Q}-style.${V.value}`)}`,children:u9.jsx(L6,{icon:V.icon,invertIcon:!0})},V.value)},E)})})})]}),u9.jsxs(J4,{id:`style panel ${Z}`,children:[u9.jsx(Q4,{children:u9.jsx(m0,{type:"icon","data-testid":`style.${Z}`,title:M(Y)+" \u2014 "+(F===null||F.type==="mixed"?M("style-panel.mixed"):M(`${Z}-style.${F.value}`)),children:u9.jsx(L6,{icon:R,small:!0})})}),u9.jsx(Z4,{side:"bottom",align:"end",sideOffset:0,alignOffset:-2,children:u9.jsx("div",{className:"tlui-buttons__grid",children:W.map((V)=>{return u9.jsx(Qq,{children:u9.jsx(m0,{type:"icon",title:`${M(Y)} \u2014 ${M(`${Z}-style.${V.value}`)}`,"data-testid":`style.${Z}.${V.value}`,onClick:()=>B(z,V.value,!1),children:u9.jsx(L6,{icon:V.icon})})},V.value)})})})]})]})]})},X00=yU.memo(dD0);var z1=v(W0(),1);var cV=v(o(),1);var lD0=function({id:J,label:Q,uiType:Z,style:q,items:Y,type:$,value:W,onValueChange:G}){const z=e0(),U=h(),F=cV.useMemo(()=>Y.find((O)=>W.type==="shared"&&O.value===W.value)?.icon,[Y,W]),B=W.type==="mixed"?z("style-panel.mixed"):z(`${Z}-style.${W.value}`),M=Q?z(Q):"";return z1.jsxs(J4,{id:`style panel ${J}`,children:[z1.jsx(Q4,{children:z1.jsxs(m0,{type:$,"data-testid":`style.${Z}`,title:B,children:[z1.jsx(v8,{children:M}),z1.jsx(L6,{icon:F??"mixed"})]})}),z1.jsx(Z4,{side:"left",align:"center",alignOffset:0,children:z1.jsx("div",{className:"tlui-buttons__grid",children:Y.map((O)=>{return z1.jsx(Qq,{children:z1.jsx(m0,{type:"icon","data-testid":`style.${Z}.${O.value}`,title:z(`${Z}-style.${O.value}`),onClick:()=>{U.mark("select style dropdown item"),G(q,O.value,!1)},children:z1.jsx(L6,{icon:O.icon})})},O.value)})})})]})},pV=cV.memo(lD0);var vT=function({styles:J}){const Q=g1();if(!J)return null;const Z=J.get(z7),q=J.get(zW),Y=J.get(HW),$=J.get(UW),W=J.get(MJ),G=Z===void 0,z=q===void 0&&Y===void 0,U=$===void 0,F=W===void 0,B=y5({isDarkMode:Q});return w8.jsxs(w8.Fragment,{children:[w8.jsx(Y00,{theme:B,styles:J}),!F&&w8.jsx(K00,{theme:B,styles:J}),!(G&&z&&U)&&w8.jsxs("div",{className:"tlui-style-panel__section","aria-label":"style panel styles",children:[w8.jsx($00,{styles:J}),w8.jsx(G00,{styles:J}),w8.jsx(W00,{styles:J})]})]})},SU=function(){const J=h(),Q=g5();return yT.default.useMemo(()=>function Z(q,Y,$){J.batch(()=>{if(J.isIn("select"))J.setStyleForSelectedShapes(q,Y,{squashing:$});J.setStyleForNextShapes(q,Y,{squashing:$}),J.updateInstanceState({isChangingStyle:!0},{ephemeral:!0})}),Q("set-style",{source:"style-panel",id:q.id,value:Y})},[J,Q])},Y00=function({styles:J,theme:Q}){const Z=e0(),q=h(),Y=SU(),$=J.get(F9),W=J.get(o4),G=J.get(h7),z=J.get(L5),U=W!==void 0||G!==void 0||z!==void 0;return w8.jsxs(w8.Fragment,{children:[w8.jsxs("div",{tabIndex:-1,className:"tlui-style-panel__section__common","aria-label":"style panel styles","data-testid":"style.panel",children:[$===void 0?null:w8.jsx(hX,{title:Z("style-panel.color"),uiType:"color",style:F9,items:H1.color,value:$,onValueChange:Y,theme:Q}),w8.jsx(H00,{})]}),U&&w8.jsxs("div",{className:"tlui-style-panel__section","aria-label":"style panel styles",children:[W===void 0?null:w8.jsx(hX,{title:Z("style-panel.fill"),uiType:"fill",style:o4,items:H1.fill,value:W,onValueChange:Y,theme:Q}),G===void 0?null:w8.jsx(hX,{title:Z("style-panel.dash"),uiType:"dash",style:h7,items:H1.dash,value:G,onValueChange:Y,theme:Q}),z===void 0?null:w8.jsx(hX,{title:Z("style-panel.size"),uiType:"size",style:L5,items:H1.size,value:z,onValueChange:(F,B,M)=>{Y(F,B,M);const O=q.getSelectedShapeIds();if(O.length>0)K8(q,O)},theme:Q})]})]})},K00=function({theme:J,styles:Q}){const Z=e0(),q=SU(),Y=Q.get(MJ),$=Q.get(VQ),W=Q.get(ZX);if(Y===void 0&&$===void 0)return null;return w8.jsxs("div",{className:"tlui-style-panel__section","aria-label":"style panel text",children:[Y===void 0?null:w8.jsx(hX,{title:Z("style-panel.font"),uiType:"font",style:MJ,items:H1.font,value:Y,onValueChange:q,theme:J}),$===void 0?null:w8.jsxs("div",{className:"tlui-style-panel__row",children:[w8.jsx(hX,{title:Z("style-panel.align"),uiType:"align",style:VQ,items:H1.horizontalAlign,value:$,onValueChange:q,theme:J}),w8.jsx("div",{className:"tlui-style-panel__row__extra-button",children:W===void 0?w8.jsx(m0,{type:"icon",title:Z("style-panel.vertical-align"),"data-testid":"vertical-align",disabled:!0,children:w8.jsx(L6,{icon:"vertical-align-center"})}):w8.jsx(pV,{type:"icon",id:"geo-vertical-alignment",uiType:"verticalAlign",style:ZX,items:H1.verticalAlign,value:W,onValueChange:q})})]})]})},$00=function({styles:J}){const Q=SU(),Z=J.get(z7);if(Z===void 0)return null;return w8.jsx(pV,{id:"geo",type:"menu",label:"style-panel.geo",uiType:"geo",style:z7,items:H1.geo,value:Z,onValueChange:Q})},W00=function({styles:J}){const Q=SU(),Z=J.get(UW);if(Z===void 0)return null;return w8.jsx(pV,{id:"spline",type:"menu",label:"style-panel.spline",uiType:"spline",style:UW,items:H1.spline,value:Z,onValueChange:Q})},G00=function({styles:J}){const Q=SU(),Z=J.get(zW),q=J.get(HW);if(!Z||!q)return null;return w8.jsx(X00,{label:"style-panel.arrowheads",uiTypeA:"arrowheadStart",styleA:HW,itemsA:H1.arrowheadStart,valueA:q,uiTypeB:"arrowheadEnd",styleB:zW,itemsB:H1.arrowheadEnd,valueB:Z,onValueChange:Q,labelA:"style-panel.arrowhead-start",labelB:"style-panel.arrowhead-end"})},H00=function(){const J=h(),Q=e("opacity",()=>J.getSharedOpacity(),[J]),Z=g5(),q=e0(),Y=yT.default.useCallback((W,G)=>{const z=vU[W];J.batch(()=>{if(J.isIn("select"))J.setOpacityForSelectedShapes(z,{squashing:G});J.setOpacityForNextShapes(z,{squashing:G}),J.updateInstanceState({isChangingStyle:!0},{ephemeral:!0})}),Z("set-style",{source:"style-panel",id:"opacity",value:W})},[J,Z]);if(Q===void 0)return null;const $=Q.type==="mixed"?-1:vU.indexOf(WE(vU,(W)=>Math.abs(W-Q.value)));return w8.jsx(xT,{"data-testid":"style.opacity",value:$>=0?$:vU.length-1,label:Q.type==="mixed"?"style-panel.mixed":`opacity-style.${Q.value}`,onValueChange:Y,steps:vU.length-1,title:q("style-panel.opacity")})},vU=[0.1,0.25,0.5,0.75,1];var fT=dV.memo(function J({isMobile:Q,children:Z}){const q=h(),Y=bU(),$=dV.useCallback(()=>{if(!Q)q.updateInstanceState({isChangingStyle:!1},{ephemeral:!0})},[q,Q]),W=Z??ST.jsx(vT,{styles:Y});return ST.jsx("div",{className:z00.default("tlui-style-panel",{"tlui-style-panel__wrapper":!Q}),"data-ismobile":Q,onPointerLeave:$,children:W})});var X4=v(W0(),1);var Z60=v(o(),1);var uX=v(W0(),1);var U00=v(o(),1);var L00=function(){const J=h(),Q=e0(),q=bU()?.get(F9),Y=y5({isDarkMode:J.user.getIsDarkMode()}),$=(q?.type==="shared"?Y[q.value]:Y.black).solid,W=e("disable style panel",()=>J.isInAny("hand","zoom","eraser","laser"),[J]),G=U00.useCallback((U)=>{if(!U)J.updateInstanceState({isChangingStyle:!1},{ephemeral:!0})},[J]),{StylePanel:z}=EJ();if(!z)return null;return uX.jsxs(SK,{id:"mobile style menu",onOpenChange:G,children:[uX.jsx(fK,{children:uX.jsx(m0,{type:"tool","data-testid":"mobile-styles.button",style:{color:W?"var(--color-muted-1)":$},title:Q("style-panel.title"),disabled:W,children:uX.jsx(L6,{icon:W?"blob":q?.type==="mixed"?"mixed":"blob"})})}),uX.jsx(gK,{side:"top",align:"end",children:z&&uX.jsx(z,{isMobile:!0})})]})};var q6=v(W0(),1);var gT=function(){return q6.jsxs(q6.Fragment,{children:[q6.jsx(F00,{}),q6.jsx(B00,{}),q6.jsx(N00,{}),q6.jsx(M00,{}),q6.jsx(O00,{}),q6.jsx(V00,{}),q6.jsx(D00,{}),q6.jsx(R00,{}),q6.jsx(j00,{}),q6.jsx(_00,{}),q6.jsx(E00,{}),q6.jsx(C00,{}),q6.jsx(A00,{}),q6.jsx(k00,{}),q6.jsx(w00,{}),q6.jsx(I00,{}),q6.jsx(P00,{}),q6.jsx(T00,{}),q6.jsx(b00,{}),q6.jsx(x00,{}),q6.jsx(y00,{}),q6.jsx(v00,{}),q6.jsx(S00,{}),q6.jsx(f00,{}),q6.jsx(g00,{}),q6.jsx(m00,{}),q6.jsx(h00,{}),q6.jsx(u00,{})]})},n8=function(J){const Q=h(),Z=J.meta?.geo;return e("is tool selected",()=>{const q=Q.getCurrentToolId(),Y=Q.getSharedStyles().getAsKnownValue(z7);return Z?q==="geo"&&Y===Z:q===J.id},[Q,J.id,Z])},F00=function(){const J=F8(),Q=n8(J.select);return q6.jsx(r,{...J.select,isSelected:Q})},B00=function(){const J=F8(),Q=n8(J.hand);return q6.jsx(r,{...J.hand,isSelected:Q})},N00=function(){const J=F8(),Q=n8(J.draw);return q6.jsx(r,{...J.draw,isSelected:Q})},M00=function(){const J=F8(),Q=n8(J.eraser);return q6.jsx(r,{...J.eraser,isSelected:Q})},O00=function(){const J=F8(),Q=n8(J.arrow);return q6.jsx(r,{...J.arrow,isSelected:Q})},V00=function(){const J=F8(),Q=n8(J.text);return q6.jsx(r,{...J.text,isSelected:Q})},D00=function(){const J=F8(),Q=n8(J.note);return q6.jsx(r,{...J.note,isSelected:Q})},R00=function(){const J=F8(),Q=n8(J.asset);return q6.jsx(r,{...J.asset,isSelected:Q})},j00=function(){const J=F8(),Q=n8(J.rectangle);return q6.jsx(r,{...J.rectangle,isSelected:Q})},_00=function(){const J=F8(),Q=n8(J.ellipse);return q6.jsx(r,{...J.ellipse,isSelected:Q})},E00=function(){const J=F8(),Q=n8(J.diamond);return q6.jsx(r,{...J.diamond,isSelected:Q})},C00=function(){const J=F8(),Q=n8(J.triangle);return q6.jsx(r,{...J.triangle,isSelected:Q})},A00=function(){const J=F8(),Q=n8(J.trapezoid);return q6.jsx(r,{...J.trapezoid,isSelected:Q})},k00=function(){const J=F8(),Q=n8(J.rhombus);return q6.jsx(r,{...J.rhombus,isSelected:Q})},w00=function(){const J=F8(),Q=n8(J.hexagon);return q6.jsx(r,{...J.hexagon,isSelected:Q})},I00=function(){const J=F8(),Q=n8(J.cloud);return q6.jsx(r,{...J.cloud,isSelected:Q})},P00=function(){const J=F8(),Q=n8(J.star);return q6.jsx(r,{...J.star,isSelected:Q})},T00=function(){const J=F8(),Q=n8(J.oval);return q6.jsx(r,{...J.oval,isSelected:Q})},b00=function(){const J=F8(),Q=n8(J["x-box"]);return q6.jsx(r,{...J["x-box"],isSelected:Q})},x00=function(){const J=F8(),Q=n8(J["check-box"]);return q6.jsx(r,{...J["check-box"],isSelected:Q})},y00=function(){const J=F8(),Q=n8(J["arrow-left"]);return q6.jsx(r,{...J["arrow-left"],isSelected:Q})},v00=function(){const J=F8(),Q=n8(J["arrow-up"]);return q6.jsx(r,{...J["arrow-up"],isSelected:Q})},S00=function(){const J=F8(),Q=n8(J["arrow-down"]);return q6.jsx(r,{...J["arrow-down"],isSelected:Q})},f00=function(){const J=F8(),Q=n8(J["arrow-right"]);return q6.jsx(r,{...J["arrow-right"],isSelected:Q})},g00=function(){const J=F8(),Q=n8(J.line);return q6.jsx(r,{...J.line,isSelected:Q})},m00=function(){const J=F8(),Q=n8(J.highlight);return q6.jsx(r,{...J.highlight,isSelected:Q})},h00=function(){const J=F8(),Q=n8(J.frame);return q6.jsx(r,{...J.frame,isSelected:Q})},u00=function(){const J=F8(),Q=n8(J.laser);return q6.jsx(r,{...J.laser,isSelected:Q})};var AJ=v(W0(),1);var t00=v(p8(),1);var hT=function(J,Q,Z,q){if(J.addEventListener)J.addEventListener(Q,Z,q);else if(J.attachEvent)J.attachEvent("on".concat(Q),Z)},fU=function(J,Q,Z,q){if(J.removeEventListener)J.removeEventListener(Q,Z,q);else if(J.detachEvent)J.detachEvent("on".concat(Q),Z)},d00=function(J,Q){const Z=Q.slice(0,Q.length-1);for(let q=0;q<Z.length;q++)Z[q]=J[Z[q].toLowerCase()];return Z},l00=function(J){if(typeof J!=="string")J="";J=J.replace(/\s/g,"");const Q=J.split(",");let Z=Q.lastIndexOf("");for(;Z>=0;)Q[Z-1]+=",",Q.splice(Z,1),Z=Q.lastIndexOf("");return Q},iD0=function(J,Q){const Z=J.length>=Q.length?J:Q,q=J.length>=Q.length?Q:J;let Y=!0;for(let $=0;$<Z.length;$++)if(q.indexOf(Z[$])===-1)Y=!1;return Y},n00=function(J){i00=J||"all"},hU=function(){return i00||"all"},rD0=function(){return O9.slice(0)},aD0=function(){return O9.map((J)=>nD0(J)||sD0(J)||String.fromCharCode(J))},oD0=function(){const J=[];return Object.keys(c9).forEach((Q)=>{c9[Q].forEach((Z)=>{let{key:q,scope:Y,mods:$,shortcut:W}=Z;J.push({scope:Y,shortcut:W,mods:$,keys:q.split("+").map((G)=>uU(G))})})}),J},tD0=function(J){const Q=J.target||J.srcElement,{tagName:Z}=Q;let q=!0;const Y=Z==="INPUT"&&!["checkbox","radio","range","button","file","reset","submit","color"].includes(Q.type);if(Q.isContentEditable||(Y||Z==="TEXTAREA"||Z==="SELECT")&&!Q.readOnly)q=!1;return q},eD0=function(J){if(typeof J==="string")J=uU(J);return O9.indexOf(J)!==-1},JR0=function(J,Q){let Z,q;if(!J)J=hU();for(let Y in c9)if(Object.prototype.hasOwnProperty.call(c9,Y)){Z=c9[Y];for(q=0;q<Z.length;)if(Z[q].scope===J)Z.splice(q,1).forEach((W)=>{let{element:G}=W;return pT(G)});else q++}if(hU()===J)n00(Q||"all")},QR0=function(J){let Q=J.keyCode||J.which||J.charCode;const Z=O9.indexOf(Q);if(Z>=0)O9.splice(Z,1);if(J.key&&J.key.toLowerCase()==="meta")O9.splice(0,O9.length);if(Q===93||Q===224)Q=91;if(Q in CJ){CJ[Q]=!1;for(let q in sQ)if(sQ[q]===Q)eJ[q]=!1}},s00=function(J){if(typeof J==="undefined")Object.keys(c9).forEach((Y)=>{Array.isArray(c9[Y])&&c9[Y].forEach(($)=>lV($)),delete c9[Y]}),pT(null);else if(Array.isArray(J))J.forEach((Y)=>{if(Y.key)lV(Y)});else if(typeof J==="object"){if(J.key)lV(J)}else if(typeof J==="string"){for(var Q=arguments.length,Z=new Array(Q>1?Q-1:0),q=1;q<Q;q++)Z[q-1]=arguments[q];let[Y,$]=Z;if(typeof Y==="function")$=Y,Y="";lV({key:J,scope:Y,method:$,splitKey:"+"})}},c00=function(J,Q,Z,q){if(Q.element!==q)return;let Y;if(Q.scope===Z||Q.scope==="all"){Y=Q.mods.length>0;for(let $ in CJ)if(Object.prototype.hasOwnProperty.call(CJ,$)){if(!CJ[$]&&Q.mods.indexOf(+$)>-1||CJ[$]&&Q.mods.indexOf(+$)===-1)Y=!1}if(Q.mods.length===0&&!CJ[16]&&!CJ[18]&&!CJ[17]&&!CJ[91]||Y||Q.shortcut==="*"){if(Q.keys=[],Q.keys=Q.keys.concat(O9),Q.method(J,Q)===!1){if(J.preventDefault)J.preventDefault();else J.returnValue=!1;if(J.stopPropagation)J.stopPropagation();if(J.cancelBubble)J.cancelBubble=!0}}}},p00=function(J,Q){const Z=c9["*"];let q=J.keyCode||J.which||J.charCode;if(!eJ.filter.call(this,J))return;if(q===93||q===224)q=91;if(O9.indexOf(q)===-1&&q!==229)O9.push(q);if(["ctrlKey","altKey","shiftKey","metaKey"].forEach((G)=>{const z=cT[G];if(J[G]&&O9.indexOf(z)===-1)O9.push(z);else if(!J[G]&&O9.indexOf(z)>-1)O9.splice(O9.indexOf(z),1);else if(G==="metaKey"&&J[G]&&O9.length===3){if(!(J.ctrlKey||J.shiftKey||J.altKey))O9=O9.slice(O9.indexOf(z))}}),q in CJ){CJ[q]=!0;for(let G in sQ)if(sQ[G]===q)eJ[G]=!0;if(!Z)return}for(let G in CJ)if(Object.prototype.hasOwnProperty.call(CJ,G))CJ[G]=J[cT[G]];if(J.getModifierState&&!(J.altKey&&!J.ctrlKey)&&J.getModifierState("AltGraph")){if(O9.indexOf(17)===-1)O9.push(17);if(O9.indexOf(18)===-1)O9.push(18);CJ[17]=!0,CJ[18]=!0}const Y=hU();if(Z){for(let G=0;G<Z.length;G++)if(Z[G].scope===Y&&(J.type==="keydown"&&Z[G].keydown||J.type==="keyup"&&Z[G].keyup))c00(J,Z[G],Y,Q)}if(!(q in c9))return;const $=c9[q],W=$.length;for(let G=0;G<W;G++)if(J.type==="keydown"&&$[G].keydown||J.type==="keyup"&&$[G].keyup){if($[G].key){const z=$[G],{splitKey:U}=z,F=z.key.split(U),B=[];for(let M=0;M<F.length;M++)B.push(uU(F[M]));if(B.sort().join("")===O9.sort().join(""))c00(J,z,Y,Q)}}},eJ=function(J,Q,Z){O9=[];const q=l00(J);let Y=[],$="all",W=document,G=0,z=!1,U=!0,F="+",B=!1,M=!1;if(Z===void 0&&typeof Q==="function")Z=Q;if(Object.prototype.toString.call(Q)==="[object Object]"){if(Q.scope)$=Q.scope;if(Q.element)W=Q.element;if(Q.keyup)z=Q.keyup;if(Q.keydown!==void 0)U=Q.keydown;if(Q.capture!==void 0)B=Q.capture;if(typeof Q.splitKey==="string")F=Q.splitKey;if(Q.single===!0)M=!0}if(typeof Q==="string")$=Q;if(M)s00(J,$);for(;G<q.length;G++){if(J=q[G].split(F),Y=[],J.length>1)Y=d00(sQ,J);if(J=J[J.length-1],J=J==="*"?"*":uU(J),!(J in c9))c9[J]=[];c9[J].push({keyup:z,keydown:U,scope:$,mods:Y,shortcut:q[G],method:Z,key:q[G],splitKey:F,element:W})}if(typeof W!=="undefined"&&window){if(!Kq.has(W)){const O=function(){let V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;return p00(V,W)},R=function(){let V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;p00(V,W),QR0(V)};Kq.set(W,{keydownListener:O,keyupListenr:R,capture:B}),hT(W,"keydown",O,B),hT(W,"keyup",R,B)}if(!gU){const O=()=>{O9=[]};gU={listener:O,capture:B},hT(window,"focus",O,B)}}},ZR0=function(J){let Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"all";Object.keys(c9).forEach((Z)=>{c9[Z].filter((Y)=>Y.scope===Q&&Y.shortcut===J).forEach((Y)=>{if(Y&&Y.method)Y.method()})})},pT=function(J){const Q=Object.values(c9).flat();if(Q.findIndex((q)=>{let{element:Y}=q;return Y===J})<0){const{keydownListener:q,keyupListenr:Y,capture:$}=Kq.get(J)||{};if(q&&Y)fU(J,"keyup",Y,$),fU(J,"keydown",q,$),Kq.delete(J)}if(Q.length<=0||Kq.size<=0){if(Object.keys(Kq).forEach((Y)=>{const{keydownListener:$,keyupListenr:W,capture:G}=Kq.get(Y)||{};if($&&W)fU(Y,"keyup",W,G),fU(Y,"keydown",$,G),Kq.delete(Y)}),Kq.clear(),Object.keys(c9).forEach((Y)=>delete c9[Y]),gU){const{listener:Y,capture:$}=gU;fU(window,"focus",Y,$),gU=null}}},mT=typeof navigator!=="undefined"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1,mU={backspace:8,"\u232B":8,tab:9,clear:12,enter:13,"\u21A9":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"\u21EA":20,",":188,".":190,"/":191,"`":192,"-":mT?173:189,"=":mT?61:187,";":mT?59:186,"\'":222,"[":219,"]":221,"\\":220},sQ={"\u21E7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,cmd:91,command:91},cT={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},CJ={16:!1,18:!1,17:!1,91:!1},c9={};for(let J=1;J<20;J++)mU["f".concat(J)]=111+J;var O9=[],gU=null,i00="all",Kq=new Map,uU=(J)=>mU[J.toLowerCase()]||sQ[J.toLowerCase()]||J.toUpperCase().charCodeAt(0),nD0=(J)=>Object.keys(mU).find((Q)=>mU[Q]===J),sD0=(J)=>Object.keys(sQ).find((Q)=>sQ[Q]===J),lV=(J)=>{let{key:Q,scope:Z,method:q,splitKey:Y="+"}=J;l00(Q).forEach((W)=>{const G=W.split(Y),z=G.length,U=G[z-1],F=U==="*"?"*":uU(U);if(!c9[F])return;if(!Z)Z=hU();const B=z>1?d00(sQ,G):[],M=[];c9[F]=c9[F].filter((O)=>{const V=(q?O.method===q:!0)&&O.scope===Z&&iD0(O.mods,B);if(V)M.push(O.element);return!V}),M.forEach((O)=>pT(O))})},uT={getPressedKeyString:aD0,setScope:n00,getScope:hU,deleteScope:JR0,getPressedKeyCodes:rD0,getAllKeyCodes:oD0,isPressed:eD0,filter:tD0,trigger:ZR0,unbind:s00,keyMap:mU,modifier:sQ,modifierMap:cT};for(let J in uT)if(Object.prototype.hasOwnProperty.call(uT,J))eJ[J]=uT[J];if(typeof window!=="undefined"){const J=window.hotkeys;eJ.noConflict=(Q)=>{if(Q&&window.hotkeys===eJ)window.hotkeys=J;return eJ},window.hotkeys=eJ}var q4=v(o(),1);var o00=v(o(),1);var dT=function(){const J=h(),Q=S5(),Z=l0(),q=F8(),Y=e("is focused",()=>J.getInstanceState().isFocused,[J]);o00.useEffect(()=>{if(!Y)return;const $=J.getContainer();eJ.setScope(J.store.id);const W=(z,U)=>{eJ(z,{element:document.body,scope:J.store.id},U)},G=(z,U)=>{eJ(z,{element:document.body,keyup:!0,keydown:!1,scope:J.store.id},U)};for(let z of Object.values(Z)){if(!z.kbd)continue;if(Q&&!z.readonlyOk)continue;if(r00.includes(z.id))continue;W(a00(z.kbd),(U)=>{if(l2(J))return;A6(U),z.onSelect("kbd")})}for(let z of Object.values(q)){if(!z.kbd||!z.readonlyOk&&J.getInstanceState().isReadonly)continue;if(r00.includes(z.id))continue;W(a00(z.kbd),(U)=>{if(l2(J))return;A6(U),z.onSelect("kbd")})}return W(",",(z)=>{if(l2(J))return;if(J.inputs.keys.has("Comma"))return;A6(z),$.focus(),J.inputs.keys.add("Comma");const{x:U,y:F,z:B}=J.inputs.currentScreenPoint,M={type:"pointer",name:"pointer_down",point:{x:U,y:F,z:B},shiftKey:z.shiftKey,altKey:z.altKey,ctrlKey:z.metaKey||z.ctrlKey,pointerId:0,button:0,isPen:J.getInstanceState().isPenMode,target:"canvas"};J.dispatch(M)}),G(",",(z)=>{if(l2(J))return;if(!J.inputs.keys.has("Comma"))return;J.inputs.keys.delete("Comma");const{x:U,y:F,z:B}=J.inputs.currentScreenPoint,M={type:"pointer",name:"pointer_up",point:{x:U,y:F,z:B},shiftKey:z.shiftKey,altKey:z.altKey,ctrlKey:z.metaKey||z.ctrlKey,pointerId:0,button:0,isPen:J.getInstanceState().isPenMode,target:"canvas"};J.dispatch(M)}),()=>{eJ.deleteScope(J.store.id)}},[Z,q,Q,J,Y])},a00=function(J){return qR0(J).map((Q)=>{let Z="";const q=Q.split("");if(q.length===1)Z=q[0];else if(q[0]==="!")Z=`shift+${q[1]}`;else if(q[0]==="?")if(q.length===3&&q[1]==="!")Z=`alt+shift+${q[2]}`;else Z=`alt+${q[1]}`;else if(q[0]==="$")if(q[1]==="!")Z=`cmd+shift+${q[2]},ctrl+shift+${q[2]}`;else if(q[1]==="?")Z=`cmd+\u2325+${q[2]},ctrl+alt+${q[2]}`;else Z=`cmd+${q[1]},ctrl+${q[1]}`;else Z=Q;return Z}).join(",")},qR0=function(J){if(typeof J!=="string")J="";J=J.replace(/\s/g,"");const Q=J.split(",");let Z=Q.lastIndexOf("");for(;Z>=0;)Q[Z-1]+=",",Q.splice(Z,1),Z=Q.lastIndexOf("");return Q},l2=function(J){return J.getIsMenuOpen()||J.getEditingShapeId()!==null||J.getCrashingError()},r00=["copy","cut","paste","asset"];var e00=function({children:J}){const Q=h(),Z=gA(),q=i8(),Y=e0(),$=Math.min(8,5+q),[W,G]=q4.useState(0),z=q4.useRef(null),[U,F]=q4.useState(null),B=q4.useMemo(()=>{const O=[],R=[];if(U)O.push(`[data-value="${U}"]`);else O.push(`:nth-child(${$+1})`);for(let V=0;V<$;V++)O.push(`:nth-child(${V+1})`),R.push(`:nth-child(${V+1})`);return`
			#${Z}_main > *:not(${O.join(", ")}) {
				display: none;
			}
			${R.map((V)=>`#${Z}_more > *${V}`).join(", ")} {
				display: none;
			}
        `},[U,Z,$]),M=tY(()=>{if(!z.current)return;const O=Array.from(z.current.children);if(G(O.length),O.findIndex((E)=>E.getAttribute("data-value")===U)<=$)F(null);const V=Array.from(z.current.children).findIndex((E)=>E.getAttribute("aria-checked")==="true");if(V===-1)return;if(V>=$)F(O[V].getAttribute("data-value"))});return q4.useLayoutEffect(()=>{M()}),q4.useLayoutEffect(()=>{if(!z.current)return;const O=new MutationObserver(M);return O.observe(z.current,{childList:!0,subtree:!0,attributeFilter:["data-value","aria-checked"]}),()=>{O.disconnect()}},[M]),q4.useEffect(()=>{const O=[["1",0],["2",1],["3",2],["4",3],["5",4],["6",5],["7",6],["8",7],["9",8],["0",9]];for(let[R,V]of O)eJ(R,(E)=>{if(l2(Q))return;A6(E);const A=Array.from(z.current?.children??[]).filter((w)=>{if(!(w instanceof HTMLElement))return!1;if(w.tagName.toLowerCase()!=="button")return!1;return!!(w.offsetWidth||w.offsetHeight)})[V];if(A)A.click()});return()=>{eJ.unbind("1,2,3,4,5,6,7,8,9,0")}},[Q]),AJ.jsxs(AJ.Fragment,{children:[AJ.jsx("style",{children:B}),AJ.jsxs("div",{className:t00.default("tlui-toolbar__tools",{"tlui-toolbar__tools__mobile":q<e6.TABLET_SM}),role:"radiogroup",children:[AJ.jsx("div",{id:`${Z}_main`,ref:z,className:"tlui-toolbar__tools__list",children:AJ.jsx(v9,{type:"toolbar",sourceId:"toolbar",children:J})}),W>$&&AJ.jsx(XR0.Provider,{value:!0,children:AJ.jsxs(J4,{id:"toolbar overflow",modal:!1,children:[AJ.jsx(Q4,{children:AJ.jsx(m0,{title:Y("tool-panel.more"),type:"tool",className:"tlui-toolbar__overflow","data-testid":"tools.more-button",children:AJ.jsx(L6,{icon:"chevron-up"})})}),AJ.jsx(Z4,{side:"top",align:"center",children:AJ.jsx("div",{className:"tlui-buttons__grid","data-testid":"tools.more-content",id:`${Z}_more`,children:AJ.jsx(v9,{type:"toolbar-overflow",sourceId:"toolbar",children:J})})})]})})]})]})},XR0=q4.createContext(!1);var lT=v(W0(),1);var J60=v(p8(),1);var Q60=function({activeToolId:J}){const Q=h(),Z=i8(),q=e0(),Y=e("is tool locked",()=>Q.getInstanceState().isToolLocked,[Q]);if(!J||YR0.includes(J))return null;return lT.jsx(m0,{type:"normal",title:q("action.toggle-tool-lock"),"data-testid":"tool-lock",className:J60.default("tlui-toolbar__lock-button",{"tlui-toolbar__lock-button__mobile":Z<e6.TABLET_SM}),onClick:()=>Q.updateInstanceState({isToolLocked:!Y}),children:lT.jsx(L6,{icon:Y?"lock":"unlock",small:!0})})},YR0=["select","hand","draw","eraser","text","zoom","laser","highlight"];var iT=Z60.memo(function J({children:Q}){const Z=h(),q=i8(),Y=S5(),$=e("current tool id",()=>Z.getCurrentToolId(),[Z]),{ActionsMenu:W,QuickActions:G}=EJ();return X4.jsx("div",{className:"tlui-toolbar",children:X4.jsxs("div",{className:"tlui-toolbar__inner",children:[X4.jsxs("div",{className:"tlui-toolbar__left",children:[!Y&&X4.jsxs("div",{className:"tlui-toolbar__extras",children:[q<e6.TABLET&&X4.jsxs("div",{className:"tlui-toolbar__extras__controls tlui-buttons__horizontal",children:[G&&X4.jsx(G,{}),W&&X4.jsx(W,{})]}),X4.jsx(Q60,{activeToolId:$})]}),X4.jsx(e00,{children:Q??X4.jsx(gT,{})})]}),q<e6.TABLET_SM&&!Y&&X4.jsx("div",{className:"tlui-toolbar__tools",children:X4.jsx(L00,{})})]})})});var e1=v(W0(),1);var i2=v(o(),1);var rQ=v(W0(),1);var nT=function(){const J=l0();return rQ.jsxs(rQ.Fragment,{children:[rQ.jsx(r,{...J["zoom-in"],noClose:!0}),rQ.jsx(r,{...J["zoom-out"],noClose:!0}),rQ.jsx(VU,{}),rQ.jsx(DU,{}),rQ.jsx(RU,{})]})};var sT=i2.memo(function J({children:Q}){const Z=y8(),[q,Y]=oJ("zoom menu");return e1.jsxs(g2,{dir:"ltr",open:q,onOpenChange:Y,modal:!1,children:[e1.jsx(m2,{asChild:!0,dir:"ltr",children:e1.jsx(KR0,{})}),e1.jsx(uK,{container:Z,children:e1.jsx(h2,{className:"tlui-menu",side:"top",align:"start",alignOffset:0,sideOffset:8,collisionPadding:4,children:e1.jsx(v9,{type:"menu",sourceId:"zoom-menu",children:Q??e1.jsx(nT,{})})})})]})}),KR0=i2.forwardRef(function J(Q,Z){const q=h(),Y=i8(),$=e("zoom",()=>q.getZoomLevel(),[q]),W=e0(),G=i2.useCallback(()=>{q.resetZoom(q.getViewportScreenCenter(),{duration:SJ})},[q]);return e1.jsx(m0,{ref:Z,...Q,type:"icon",title:`${W("navigation-zone.zoom")}`,"data-testid":"minimap.zoom-menu-button",className:Y<e6.TABLET_SM?"tlui-zoom-menu__button":"tlui-zoom-menu__button__pct",onDoubleClick:G,icon:Y<e6.MOBILE?"zoom-in":void 0,children:Y<e6.MOBILE?null:e1.jsxs("span",{style:{flexGrow:0,textAlign:"center"},children:[Math.floor($*100),"%"]})})});var rT=function({overrides:J={},children:Q}){const Z=cY(J);return q60.jsx(X60.Provider,{value:n2.useMemo(()=>({ContextMenu:PV,ActionsMenu:nP,HelpMenu:UT,ZoomMenu:sT,MainMenu:wU,Minimap:jT,StylePanel:fT,PageMenu:CT,NavigationPanel:he,Toolbar:iT,KeyboardShortcutsDialog:NT,QuickActions:wT,HelperButtons:FT,DebugPanel:Me,DebugMenu:HT,MenuPanel:fe,...Z}),[Z]),children:Q})},EJ=function(){return n2.useContext(X60)},X60=n2.createContext({});var aT=function({overrides:J,components:Q,assetUrls:Z,onUiEvent:q,forceMobile:Y,children:$}){return JQ.jsx(rw,{assetUrls:Ea(Z),children:JQ.jsx(As,{overrides:xa(J),children:JQ.jsx(KP,{onEvent:q,children:JQ.jsx(Ua,{children:JQ.jsx($a,{children:JQ.jsx(WP,{forceMobile:Y,children:JQ.jsx(rT,{overrides:Q,children:JQ.jsx($R0,{overrides:J,children:$})})})})})})})})},$R0=function({overrides:J,children:Q}){const Z=ya(J);return JQ.jsx(ta,{overrides:Z.actions,children:JQ.jsx(wa,{overrides:Z.tools,children:Q})})};var Y60=v(o(),1);var K60=function(){const J=h(),{addToast:Q}=q5();Y60.useEffect(()=>{function Z({name:q,count:Y}){Q({title:"Maximum Shapes Reached",description:`You've reached the maximum number of shapes allowed on ${q} (${Y}). Please delete some shapes or move to a different page to continue.`,severity:"warning"})}return J.addListener("max-shapes",Z),()=>{J.removeListener("max-shapes",Z)}},[J,Q])};var oT=iV.default.memo(function J({renderDebugMenuItems:Q,children:Z,hideUi:q,components:Y,...$}){return B8.jsx(aT,{...$,components:Y,children:B8.jsx(WR0,{hideUi:q,renderDebugMenuItems:Q,children:Z})})}),WR0=iV.default.memo(function J({children:Q,hideUi:Z,...q}){return B8.jsxs(B8.Fragment,{children:[Q,Z?null:B8.jsx(GR0,{...q})]})}),GR0=iV.default.memo(function J(){const Q=h(),Z=e0(),q=i8(),Y=S5(),$=e("focus",()=>Q.getInstanceState().isFocusMode,[Q]),W=e("debug",()=>Q.getInstanceState().isDebugMode,[Q]),{SharePanel:G,TopPanel:z,MenuPanel:U,StylePanel:F,Toolbar:B,HelpMenu:M,NavigationPanel:O,HelperButtons:R,DebugPanel:V}=EJ();dT(),FP(),K60();const{"toggle-focus-mode":E}=l0();return B8.jsx(mI,{children:B8.jsxs("div",{className:$60.default("tlui-layout",{"tlui-layout__mobile":q<e6.TABLET_SM}),"data-breakpoint":q,children:[$?B8.jsx("div",{className:"tlui-layout__top",children:B8.jsx(m0,{type:"icon",className:"tlui-focus-button",title:Z("focus-mode.toggle-focus-mode"),onClick:()=>E.onSelect("menu"),children:B8.jsx(L6,{icon:"dot"})})}):B8.jsxs(B8.Fragment,{children:[B8.jsxs("div",{className:"tlui-layout__top",children:[B8.jsxs("div",{className:"tlui-layout__top__left",children:[U&&B8.jsx(U,{}),R&&B8.jsx(R,{})]}),B8.jsx("div",{className:"tlui-layout__top__center",children:z&&B8.jsx(z,{})}),B8.jsxs("div",{className:"tlui-layout__top__right",children:[G&&B8.jsx(G,{}),F&&q>=e6.TABLET_SM&&!Y&&B8.jsx(F,{})]})]}),B8.jsxs("div",{className:"tlui-layout__bottom",children:[B8.jsxs("div",{className:"tlui-layout__bottom__main",children:[O&&B8.jsx(O,{}),B&&B8.jsx(B,{}),M&&B8.jsx(M,{})]}),W&&V&&B8.jsx(V,{})]})]}),B8.jsx(Va,{}),B8.jsx(Wa,{}),B8.jsx(Da,{}),B8.jsx(Ga,{})]})})});var s2=v(o(),1);var HR0=function(J){return{draw:{url:J.fonts.draw,format:J.fonts.draw.split(".").pop()},serif:{url:J.fonts.serif,format:J.fonts.serif.split(".").pop()},sansSerif:{url:J.fonts.sansSerif,format:J.fonts.sansSerif.split(".").pop()},monospace:{url:J.fonts.monospace,format:J.fonts.monospace.split(".").pop()}}},cU=function(J){const Q=s2.useMemo(()=>HR0(J),[J]),Z=[nV("tldraw_draw",Q.draw),nV("tldraw_serif",Q.serif),nV("tldraw_sans",Q.sansSerif),nV("tldraw_mono",Q.monospace)];return{error:Z.some((q)=>q===1),done:!Z.some((q)=>q===2)}};var nV=(J,Q)=>{const[Z,q]=s2.useState(2);return s2.useEffect(()=>{let Y=!1;return q(2),XE(J,Q).then(()=>{if(Y)return;q(0)}).catch(($)=>{if(Y)return;console.error($),q(1)}),()=>{Y=!0}},[J,Q]),Z};var tT=function(J){const{children:Q,maxImageDimension:Z,maxAssetSize:q,acceptedImageMimeTypes:Y,acceptedVideoMimeTypes:$,onMount:W,components:G={},shapeUtils:z=[],tools:U=[],...F}=J,B=cY(G),M=r2.useMemo(()=>({Scribble:HM,CollaboratorScribble:HM,SelectionForeground:Hw,SelectionBackground:Gw,Handles:Yw,...B}),[B]),O=wW(z),R=r2.useMemo(()=>[...MK,...O],[O]),V=wW(U),E=r2.useMemo(()=>[...TI,...Tw,...V],[V]),_=yO(F.assetUrls),{done:A,error:w}=cU(_);if(w)return $q.jsx(M3,{children:"Could not load assets. Please refresh the page."});if(!A)return $q.jsx(N3,{children:"Loading assets..."});return $q.jsx(vA,{initialState:"select",...F,components:M,shapeUtils:R,tools:E,children:$q.jsxs(oT,{...F,components:M,children:[$q.jsx(LR0,{maxImageDimension:Z,maxAssetSize:q,acceptedImageMimeTypes:Y,acceptedVideoMimeTypes:$,onMount:W}),Q]})})},LR0=function({maxImageDimension:J=1000,maxAssetSize:Q=10485760,acceptedImageMimeTypes:Z=zR0,acceptedVideoMimeTypes:q=UR0,onMount:Y}){const $=h(),W=q5(),G=e0(),z=tY((B)=>{const M=[];return M.push(...xs(B)),oi(B,{maxImageDimension:J,maxAssetSize:Q,acceptedImageMimeTypes:Z,acceptedVideoMimeTypes:q},{toasts:W,msg:G}),M.push(Y?.(B)),()=>{M.forEach((O)=>O?.())}});r2.useLayoutEffect(()=>{if($)return z?.($)},[$,z]);const{Canvas:U}=k8(),{ContextMenu:F}=EJ();if(F)return $q.jsx(F,{});if(U)return $q.jsx(U,{});return null},zR0=Object.freeze(["image/jpeg","image/png","image/gif","image/svg+xml"]),UR0=Object.freeze(["video/mp4","video/quicktime"]);var pU=v(W0(),1);var Wq=v(o(),1);var FR0=Wq.memo(function J(Q){const[Z,q]=Wq.useState(null),[Y,$]=Wq.useState(null),W=wW(Q.shapeUtils??[]),G=Wq.useMemo(()=>[...MK,...W],[W]),z=B3({snapshot:Q.snapshot,shapeUtils:G}),U=yO(),{done:F,error:B}=cU(U),{pageId:M,bounds:O,scale:R,background:V,padding:E,darkMode:_,preserveAspectRatio:A,format:w="svg"}=Q;if(Wq.useLayoutEffect(()=>{if(!Y)return;if(!z)return;if(!F)return;let T=!1;const k=document.createElement("div");Y.appendChild(k),Y.classList.add("tl-container","tl-theme__light");const P=new n0({store:z,shapeUtils:G??[],tools:[],getContainer:()=>k});if(M)P.setCurrentPage(M);const y=P.getCurrentPageShapeIds();async function p(){const s=await P.getSvgString([...y],{bounds:O,scale:R,background:V,padding:E,darkMode:_,preserveAspectRatio:A});if(s&&!T){if(w==="svg"){if(!T){const c=new Blob([s.svg],{type:"image/svg+xml"}),t=URL.createObjectURL(c);q(t)}}else if(w==="png"){const c=await nO(s.svg,P.environment.isSafari,{type:w,quality:1,scale:2,width:s.width,height:s.height});if(c&&!T){const t=URL.createObjectURL(c);q(t)}}}P.dispose()}return p(),()=>{T=!0}},[w,Y,z,G,M,O,R,V,E,_,A,F,B]),B)return pU.jsx(M3,{children:"Could not load assets."});if(!F)return pU.jsx(N3,{children:"Loading assets..."});return pU.jsx("div",{ref:$,style:{position:"relative",width:"100%",height:"100%"},children:Z&&pU.jsx("img",{src:Z,style:{width:"100%",height:"100%"}})})});var W60=v(W0(),1),BR0=v(p8(),1),NR0=v(o(),1);var OR0=f.object({schemaVersion:f.literal(1),storeVersion:f.positiveInteger,recordVersions:f.dict(f.string,f.object({version:f.positiveInteger,subTypeVersions:f.dict(f.string,f.positiveInteger).optional(),subTypeKey:f.string.optional()}))}),VR0=f.object({schemaVersion:f.literal(2),sequences:f.dict(f.string,f.positiveInteger)}),q26=f.object({tldrawFileFormatVersion:f.nonZeroInteger,schema:f.numberUnion("schemaVersion",{1:OR0,2:VR0}),records:f.arrayOf(f.object({id:f.string,typeName:f.string}).allowUnknownProperties())});var Y4=v(eT(),1);async function RR0(J){await navigator.clipboard.writeText(J)}var uH6=function(J,Q){G60.createRoot(J).render(Y4.jsxDEV(H60,{initialData:Q},void 0,!1,void 0,this))};function H60(J){let Q=J.initialData;const[Z]=dU.useState(()=>fW({shapeUtils:MK})),[q,Y]=dU.useState({status:"loading"});if(dU.useLayoutEffect(()=>{if(Y({status:"loading"}),Q!="")try{const M=JSON.parse(Q);Z.loadSnapshot(M),Y({status:"ready"})}catch(M){Y({status:"error",error:M.message})}else Y({status:"ready"});const B=Z.listen(nH(()=>{Q=JSON.stringify(Z.getSnapshot())},500));return()=>{B()}},[Z]),q.status==="loading")return Y4.jsxDEV("div",{className:"tldraw__editor",children:Y4.jsxDEV("h2",{children:"Loading..."},void 0,!1,void 0,this)},void 0,!1,void 0,this);if(q.status==="error")return Y4.jsxDEV("div",{className:"tldraw__editor",children:[Y4.jsxDEV("h2",{children:"Error!"},void 0,!1,void 0,this),Y4.jsxDEV("p",{children:q.error},void 0,!1,void 0,this)]},void 0,!0,void 0,this);const $=async()=>{await RR0(JSON.stringify(Z.getSnapshot())),alert("copied data to clipboard. paste it inside your markdown file")};let W=!0,G;const z=async()=>{W=!W,G?.updateInstanceState({isReadonly:W})};return Y4.jsxDEV("div",{style:{height:"500px"},className:"tldraw__editor",children:Y4.jsxDEV(tT,{components:{MainMenu:function(){return Y4.jsxDEV(wU,{children:Y4.jsxDEV("div",{children:Y4.jsxDEV(O6,{id:"example",children:[Y4.jsxDEV(r,{id:"copy-drawing",label:"Copy Data",icon:"external-link",readonlyOk:!0,onSelect:$},void 0,!1,void 0,this),Y4.jsxDEV(r,{id:"toggle-drawing",label:"Toggle Drawing",icon:"external-link",readonlyOk:!0,onSelect:z},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this)},ZoomMenu:null,ActionsMenu:null,HelpMenu:null,DebugMenu:null,DebugPanel:null,PageMenu:null},store:Z,onMount:(B)=>{G=B,G?.updateInstanceState({isReadonly:W})}},void 0,!1,void 0,this)},void 0,!1,void 0,this)}export{uH6 as render,H60 as default};
